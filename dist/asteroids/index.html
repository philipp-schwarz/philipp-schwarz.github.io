<!doctype html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<title>Space Asteroids - A Draw16 Tech Demo</title>
	</head>
	<body>
		<link rel="shortcut icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gkIDB0Ip1FH/QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAZ0lEQVQ4y6VTQQ7AMAgS0/9/mV22ZCGtYspVEKwWUYNNPVCJyVZfNwgDcN0BbPkYulsNjrPvUmQ5H/CJjsjJy781Wgn+zlWKnO5dU6yGaN8BXYFuJOMSUPdubcpdzrkKZzsu3c+j/AfcFDUMgwdkzgAAAABJRU5ErkJggg==">

		<script type="text/javascript" src="data:text/javascript;base64,Ly8gVGhlIE1vZHVsZSBvYmplY3Q6IE91ciBpbnRlcmZhY2UgdG8gdGhlIG91dHNpZGUgd29ybGQuIFdlIGltcG9ydAovLyBhbmQgZXhwb3J0IHZhbHVlcyBvbiBpdC4gVGhlcmUgYXJlIHZhcmlvdXMgd2F5cyBNb2R1bGUgY2FuIGJlIHVzZWQ6Ci8vIDEuIE5vdCBkZWZpbmVkLiBXZSBjcmVhdGUgaXQgaGVyZQovLyAyLiBBIGZ1bmN0aW9uIHBhcmFtZXRlciwgZnVuY3Rpb24oTW9kdWxlKSB7IC4uZ2VuZXJhdGVkIGNvZGUuLiB9Ci8vIDMuIHByZS1ydW4gYXBwZW5kZWQgaXQsIHZhciBNb2R1bGUgPSB7fTsgLi5nZW5lcmF0ZWQgY29kZS4uCi8vIDQuIEV4dGVybmFsIHNjcmlwdCB0YWcgZGVmaW5lcyB2YXIgTW9kdWxlLgovLyBXZSBuZWVkIHRvIGNoZWNrIGlmIE1vZHVsZSBhbHJlYWR5IGV4aXN0cyAoZS5nLiBjYXNlIDMgYWJvdmUpLgovLyBTdWJzdGl0dXRpb24gd2lsbCBiZSByZXBsYWNlZCB3aXRoIGFjdHVhbCBjb2RlIG9uIGxhdGVyIHN0YWdlIG9mIHRoZSBidWlsZCwKLy8gdGhpcyB3YXkgQ2xvc3VyZSBDb21waWxlciB3aWxsIG5vdCBtYW5nbGUgaXQgKGUuZy4gY2FzZSA0LiBhYm92ZSkuCi8vIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBydW4gY2xvc3VyZSwgYW5kIGFsc28gdG8gdXNlIE1vZHVsZQovLyBhZnRlciB0aGUgZ2VuZXJhdGVkIGNvZGUsIHlvdSB3aWxsIG5lZWQgdG8gZGVmaW5lICAgdmFyIE1vZHVsZSA9IHt9OwovLyBiZWZvcmUgdGhlIGNvZGUuIFRoZW4gdGhhdCBvYmplY3Qgd2lsbCBiZSB1c2VkIGluIHRoZSBjb2RlLCBhbmQgeW91Ci8vIGNhbiBjb250aW51ZSB0byB1c2UgTW9kdWxlIGFmdGVyd2FyZHMgYXMgd2VsbC4KdmFyIE1vZHVsZSA9IHR5cGVvZiBEcmF3MTZDb3JlICE9PSAndW5kZWZpbmVkJyA/IERyYXcxNkNvcmUgOiB7fTsKCi8vIC0tcHJlLWpzZXMgYXJlIGVtaXR0ZWQgYWZ0ZXIgdGhlIE1vZHVsZSBpbnRlZ3JhdGlvbiBjb2RlLCBzbyB0aGF0IHRoZXkgY2FuCi8vIHJlZmVyIHRvIE1vZHVsZSAoaWYgdGhleSBjaG9vc2U7IHRoZXkgY2FuIGFsc28gZGVmaW5lIE1vZHVsZSkKaWYgKHR5cGVvZiBEcmF3MTZDb3JlID09ICd1bmRlZmluZWQnKSB7Cgl2YXIgRHJhdzE2Q29yZSA9IE1vZHVsZTsKfQoKRHJhdzE2Q29yZS5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhdzE2Q2FudmFzJyk7CmlmICghRHJhdzE2Q29yZS5jYW52YXMpIHsKCURyYXcxNkNvcmUuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CglEcmF3MTZDb3JlLmNhbnZhcy5pZCA9ICdkcmF3MTZDYW52YXMnOwoJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChEcmF3MTZDb3JlLmNhbnZhcyk7Cn0KCkRyYXcxNkNvcmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIndlYmdsY29udGV4dGxvc3QiLCBmdW5jdGlvbihlKSB7Cgl3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoJZS5wcmV2ZW50RGVmYXVsdCgpOwp9LCBmYWxzZSk7CgppZiAoIURyYXcxNkNvcmUucHJpbnQpIHsKCURyYXcxNkNvcmUucHJpbnQgPSBjb25zb2xlLmxvZzsKfQoKaWYgKCFEcmF3MTZDb3JlLnByaW50RXJyKSB7CglEcmF3MTZDb3JlLnByaW50RXJyID0gY29uc29sZS5lcnJvcjsKfQoKCi8vIFNvbWV0aW1lcyBhbiBleGlzdGluZyBNb2R1bGUgb2JqZWN0IGV4aXN0cyB3aXRoIHByb3BlcnRpZXMKLy8gbWVhbnQgdG8gb3ZlcndyaXRlIHRoZSBkZWZhdWx0IG1vZHVsZSBmdW5jdGlvbmFsaXR5LiBIZXJlCi8vIHdlIGNvbGxlY3QgdGhvc2UgcHJvcGVydGllcyBhbmQgcmVhcHBseSBfYWZ0ZXJfIHdlIGNvbmZpZ3VyZQovLyB0aGUgY3VycmVudCBlbnZpcm9ubWVudCdzIGRlZmF1bHRzIHRvIGF2b2lkIGhhdmluZyB0byBiZSBzbwovLyBkZWZlbnNpdmUgZHVyaW5nIGluaXRpYWxpemF0aW9uLgp2YXIgbW9kdWxlT3ZlcnJpZGVzID0ge307CnZhciBrZXk7CmZvciAoa2V5IGluIE1vZHVsZSkgewogIGlmIChNb2R1bGUuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgbW9kdWxlT3ZlcnJpZGVzW2tleV0gPSBNb2R1bGVba2V5XTsKICB9Cn0KCk1vZHVsZVsnYXJndW1lbnRzJ10gPSBbXTsKTW9kdWxlWyd0aGlzUHJvZ3JhbSddID0gJy4vdGhpcy5wcm9ncmFtJzsKTW9kdWxlWydxdWl0J10gPSBmdW5jdGlvbihzdGF0dXMsIHRvVGhyb3cpIHsKICB0aHJvdyB0b1Rocm93Owp9OwpNb2R1bGVbJ3ByZVJ1biddID0gW107Ck1vZHVsZVsncG9zdFJ1biddID0gW107CgovLyBUaGUgZW52aXJvbm1lbnQgc2V0dXAgY29kZSBiZWxvdyBpcyBjdXN0b21pemVkIHRvIHVzZSBNb2R1bGUuCi8vICoqKiBFbnZpcm9ubWVudCBzZXR1cCBjb2RlICoqKgp2YXIgRU5WSVJPTk1FTlRfSVNfV0VCID0gZmFsc2U7CnZhciBFTlZJUk9OTUVOVF9JU19XT1JLRVIgPSBmYWxzZTsKdmFyIEVOVklST05NRU5UX0lTX05PREUgPSBmYWxzZTsKdmFyIEVOVklST05NRU5UX0lTX1NIRUxMID0gZmFsc2U7CgovLyBUaHJlZSBjb25maWd1cmF0aW9ucyB3ZSBjYW4gYmUgcnVubmluZyBpbjoKLy8gMSkgV2UgY291bGQgYmUgdGhlIGFwcGxpY2F0aW9uIG1haW4oKSB0aHJlYWQgcnVubmluZyBpbiB0aGUgbWFpbiBKUyBVSSB0aHJlYWQuIChFTlZJUk9OTUVOVF9JU19XT1JLRVIgPT0gZmFsc2UgYW5kIEVOVklST05NRU5UX0lTX1BUSFJFQUQgPT0gZmFsc2UpCi8vIDIpIFdlIGNvdWxkIGJlIHRoZSBhcHBsaWNhdGlvbiBtYWluKCkgdGhyZWFkIHByb3hpZWQgdG8gd29ya2VyLiAod2l0aCBFbXNjcmlwdGVuIC1zIFBST1hZX1RPX1dPUktFUj0xKSAoRU5WSVJPTk1FTlRfSVNfV09SS0VSID09IHRydWUsIEVOVklST05NRU5UX0lTX1BUSFJFQUQgPT0gZmFsc2UpCi8vIDMpIFdlIGNvdWxkIGJlIGFuIGFwcGxpY2F0aW9uIHB0aHJlYWQgcnVubmluZyBpbiBhIHdvcmtlci4gKEVOVklST05NRU5UX0lTX1dPUktFUiA9PSB0cnVlIGFuZCBFTlZJUk9OTUVOVF9JU19QVEhSRUFEID09IHRydWUpCgppZiAoTW9kdWxlWydFTlZJUk9OTUVOVCddKSB7CiAgaWYgKE1vZHVsZVsnRU5WSVJPTk1FTlQnXSA9PT0gJ1dFQicpIHsKICAgIEVOVklST05NRU5UX0lTX1dFQiA9IHRydWU7CiAgfSBlbHNlIGlmIChNb2R1bGVbJ0VOVklST05NRU5UJ10gPT09ICdXT1JLRVInKSB7CiAgICBFTlZJUk9OTUVOVF9JU19XT1JLRVIgPSB0cnVlOwogIH0gZWxzZSBpZiAoTW9kdWxlWydFTlZJUk9OTUVOVCddID09PSAnTk9ERScpIHsKICAgIEVOVklST05NRU5UX0lTX05PREUgPSB0cnVlOwogIH0gZWxzZSBpZiAoTW9kdWxlWydFTlZJUk9OTUVOVCddID09PSAnU0hFTEwnKSB7CiAgICBFTlZJUk9OTUVOVF9JU19TSEVMTCA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignTW9kdWxlW1wnRU5WSVJPTk1FTlRcJ10gdmFsdWUgaXMgbm90IHZhbGlkLiBtdXN0IGJlIG9uZSBvZjogV0VCfFdPUktFUnxOT0RFfFNIRUxMLicpOwogIH0KfSBlbHNlIHsKICBFTlZJUk9OTUVOVF9JU19XRUIgPSB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JzsKICBFTlZJUk9OTUVOVF9JU19XT1JLRVIgPSB0eXBlb2YgaW1wb3J0U2NyaXB0cyA9PT0gJ2Z1bmN0aW9uJzsKICBFTlZJUk9OTUVOVF9JU19OT0RFID0gdHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nICYmICFFTlZJUk9OTUVOVF9JU19XRUIgJiYgIUVOVklST05NRU5UX0lTX1dPUktFUjsKICBFTlZJUk9OTUVOVF9JU19TSEVMTCA9ICFFTlZJUk9OTUVOVF9JU19XRUIgJiYgIUVOVklST05NRU5UX0lTX05PREUgJiYgIUVOVklST05NRU5UX0lTX1dPUktFUjsKfQoKCmlmIChFTlZJUk9OTUVOVF9JU19OT0RFKSB7CiAgLy8gRXhwb3NlIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIHNhbWUgc2ltcGxlIHdheSB0aGF0IHRoZSBzaGVsbHMgd29yawogIC8vIE5vdGUgdGhhdCB3ZSBwb2xsdXRlIHRoZSBnbG9iYWwgbmFtZXNwYWNlIGhlcmUsIG90aGVyd2lzZSB3ZSBicmVhayBpbiBub2RlCiAgdmFyIG5vZGVGUzsKICB2YXIgbm9kZVBhdGg7CgogIE1vZHVsZVsncmVhZCddID0gZnVuY3Rpb24gc2hlbGxfcmVhZChmaWxlbmFtZSwgYmluYXJ5KSB7CiAgICB2YXIgcmV0OwogICAgcmV0ID0gdHJ5UGFyc2VBc0RhdGFVUkkoZmlsZW5hbWUpOwogICAgaWYgKCFyZXQpIHsKICAgICAgaWYgKCFub2RlRlMpIG5vZGVGUyA9IHJlcXVpcmUoJ2ZzJyk7CiAgICAgIGlmICghbm9kZVBhdGgpIG5vZGVQYXRoID0gcmVxdWlyZSgncGF0aCcpOwogICAgICBmaWxlbmFtZSA9IG5vZGVQYXRoWydub3JtYWxpemUnXShmaWxlbmFtZSk7CiAgICAgIHJldCA9IG5vZGVGU1sncmVhZEZpbGVTeW5jJ10oZmlsZW5hbWUpOwogICAgfQogICAgcmV0dXJuIGJpbmFyeSA/IHJldCA6IHJldC50b1N0cmluZygpOwogIH07CgogIE1vZHVsZVsncmVhZEJpbmFyeSddID0gZnVuY3Rpb24gcmVhZEJpbmFyeShmaWxlbmFtZSkgewogICAgdmFyIHJldCA9IE1vZHVsZVsncmVhZCddKGZpbGVuYW1lLCB0cnVlKTsKICAgIGlmICghcmV0LmJ1ZmZlcikgewogICAgICByZXQgPSBuZXcgVWludDhBcnJheShyZXQpOwogICAgfQogICAgYXNzZXJ0KHJldC5idWZmZXIpOwogICAgcmV0dXJuIHJldDsKICB9OwoKICBpZiAocHJvY2Vzc1snYXJndiddLmxlbmd0aCA+IDEpIHsKICAgIE1vZHVsZVsndGhpc1Byb2dyYW0nXSA9IHByb2Nlc3NbJ2FyZ3YnXVsxXS5yZXBsYWNlKC9cXC9nLCAnLycpOwogIH0KCiAgTW9kdWxlWydhcmd1bWVudHMnXSA9IHByb2Nlc3NbJ2FyZ3YnXS5zbGljZSgyKTsKCiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IE1vZHVsZTsKICB9CgogIHByb2Nlc3NbJ29uJ10oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgZnVuY3Rpb24oZXgpIHsKICAgIC8vIHN1cHByZXNzIEV4aXRTdGF0dXMgZXhjZXB0aW9ucyBmcm9tIHNob3dpbmcgYW4gZXJyb3IKICAgIGlmICghKGV4IGluc3RhbmNlb2YgRXhpdFN0YXR1cykpIHsKICAgICAgdGhyb3cgZXg7CiAgICB9CiAgfSk7CiAgLy8gQ3VycmVudGx5IG5vZGUgd2lsbCBzd2FsbG93IHVuaGFuZGxlZCByZWplY3Rpb25zLCBidXQgdGhpcyBiZWhhdmlvciBpcwogIC8vIGRlcHJlY2F0ZWQsIGFuZCBpbiB0aGUgZnV0dXJlIGl0IHdpbGwgZXhpdCB3aXRoIGVycm9yIHN0YXR1cy4KICBwcm9jZXNzWydvbiddKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBmdW5jdGlvbihyZWFzb24sIHApIHsKICAgIE1vZHVsZVsncHJpbnRFcnInXSgnbm9kZS5qcyBleGl0aW5nIGR1ZSB0byB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nKTsKICAgIHByb2Nlc3NbJ2V4aXQnXSgxKTsKICB9KTsKCiAgTW9kdWxlWydpbnNwZWN0J10gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnW0Vtc2NyaXB0ZW4gTW9kdWxlIG9iamVjdF0nOyB9Owp9CmVsc2UgaWYgKEVOVklST05NRU5UX0lTX1NIRUxMKSB7CiAgaWYgKHR5cGVvZiByZWFkICE9ICd1bmRlZmluZWQnKSB7CiAgICBNb2R1bGVbJ3JlYWQnXSA9IGZ1bmN0aW9uIHNoZWxsX3JlYWQoZikgewogICAgICB2YXIgZGF0YSA9IHRyeVBhcnNlQXNEYXRhVVJJKGYpOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIHJldHVybiBpbnRBcnJheVRvU3RyaW5nKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiByZWFkKGYpOwogICAgfTsKICB9CgogIE1vZHVsZVsncmVhZEJpbmFyeSddID0gZnVuY3Rpb24gcmVhZEJpbmFyeShmKSB7CiAgICB2YXIgZGF0YTsKICAgIGRhdGEgPSB0cnlQYXJzZUFzRGF0YVVSSShmKTsKICAgIGlmIChkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogICAgaWYgKHR5cGVvZiByZWFkYnVmZmVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShyZWFkYnVmZmVyKGYpKTsKICAgIH0KICAgIGRhdGEgPSByZWFkKGYsICdiaW5hcnknKTsKICAgIGFzc2VydCh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpOwogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgaWYgKHR5cGVvZiBzY3JpcHRBcmdzICE9ICd1bmRlZmluZWQnKSB7CiAgICBNb2R1bGVbJ2FyZ3VtZW50cyddID0gc2NyaXB0QXJnczsKICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHMgIT0gJ3VuZGVmaW5lZCcpIHsKICAgIE1vZHVsZVsnYXJndW1lbnRzJ10gPSBhcmd1bWVudHM7CiAgfQoKICBpZiAodHlwZW9mIHF1aXQgPT09ICdmdW5jdGlvbicpIHsKICAgIE1vZHVsZVsncXVpdCddID0gZnVuY3Rpb24oc3RhdHVzLCB0b1Rocm93KSB7CiAgICAgIHF1aXQoc3RhdHVzKTsKICAgIH0KICB9Cn0KZWxzZSBpZiAoRU5WSVJPTk1FTlRfSVNfV0VCIHx8IEVOVklST05NRU5UX0lTX1dPUktFUikgewogIE1vZHVsZVsncmVhZCddID0gZnVuY3Rpb24gc2hlbGxfcmVhZCh1cmwpIHsKICAgIHRyeSB7CiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgZmFsc2UpOwogICAgICB4aHIuc2VuZChudWxsKTsKICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVRleHQ7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgdmFyIGRhdGEgPSB0cnlQYXJzZUFzRGF0YVVSSSh1cmwpOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIHJldHVybiBpbnRBcnJheVRvU3RyaW5nKGRhdGEpOwogICAgICB9CiAgICAgIHRocm93IGVycjsKICAgIH0KICB9OwoKICBpZiAoRU5WSVJPTk1FTlRfSVNfV09SS0VSKSB7CiAgICBNb2R1bGVbJ3JlYWRCaW5hcnknXSA9IGZ1bmN0aW9uIHJlYWRCaW5hcnkodXJsKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIGZhbHNlKTsKICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJzsKICAgICAgICB4aHIuc2VuZChudWxsKTsKICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoeGhyLnJlc3BvbnNlKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdmFyIGRhdGEgPSB0cnlQYXJzZUFzRGF0YVVSSSh1cmwpOwogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICB9OwogIH0KCiAgTW9kdWxlWydyZWFkQXN5bmMnXSA9IGZ1bmN0aW9uIHJlYWRBc3luYyh1cmwsIG9ubG9hZCwgb25lcnJvcikgewogICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7CiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJzsKICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiB4aHJfb25sb2FkKCkgewogICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDAgfHwgKHhoci5zdGF0dXMgPT0gMCAmJiB4aHIucmVzcG9uc2UpKSB7IC8vIGZpbGUgVVJMcyBjYW4gcmV0dXJuIDAKICAgICAgICBvbmxvYWQoeGhyLnJlc3BvbnNlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB0cnlQYXJzZUFzRGF0YVVSSSh1cmwpOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIG9ubG9hZChkYXRhLmJ1ZmZlcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIG9uZXJyb3IoKTsKICAgIH07CiAgICB4aHIub25lcnJvciA9IG9uZXJyb3I7CiAgICB4aHIuc2VuZChudWxsKTsKICB9OwoKICBpZiAodHlwZW9mIGFyZ3VtZW50cyAhPSAndW5kZWZpbmVkJykgewogICAgTW9kdWxlWydhcmd1bWVudHMnXSA9IGFyZ3VtZW50czsKICB9CgogIE1vZHVsZVsnc2V0V2luZG93VGl0bGUnXSA9IGZ1bmN0aW9uKHRpdGxlKSB7IGRvY3VtZW50LnRpdGxlID0gdGl0bGUgfTsKfQplbHNlIHsKICAvLyBVbnJlYWNoYWJsZSBiZWNhdXNlIFNIRUxMIGlzIGRlcGVuZGVudCBvbiB0aGUgb3RoZXJzCiAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHJ1bnRpbWUgZW52aXJvbm1lbnQnKTsKfQoKLy8gY29uc29sZS5sb2cgaXMgY2hlY2tlZCBmaXJzdCwgYXMgJ3ByaW50JyBvbiB0aGUgd2ViIHdpbGwgb3BlbiBhIHByaW50IGRpYWxvZ3VlCi8vIHByaW50RXJyIGlzIHByZWZlcmFibGUgdG8gY29uc29sZS53YXJuICh3b3JrcyBiZXR0ZXIgaW4gc2hlbGxzKQovLyBiaW5kKGNvbnNvbGUpIGlzIG5lY2Vzc2FyeSB0byBmaXggSUUvRWRnZSBjbG9zZWQgZGV2IHRvb2xzIHBhbmVsIGJlaGF2aW9yLgpNb2R1bGVbJ3ByaW50J10gPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgPyBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpIDogKHR5cGVvZiBwcmludCAhPT0gJ3VuZGVmaW5lZCcgPyBwcmludCA6IG51bGwpOwpNb2R1bGVbJ3ByaW50RXJyJ10gPSB0eXBlb2YgcHJpbnRFcnIgIT09ICd1bmRlZmluZWQnID8gcHJpbnRFcnIgOiAoKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLndhcm4uYmluZChjb25zb2xlKSkgfHwgTW9kdWxlWydwcmludCddKTsKCi8vICoqKiBFbnZpcm9ubWVudCBzZXR1cCBjb2RlICoqKgoKLy8gQ2xvc3VyZSBoZWxwZXJzCk1vZHVsZS5wcmludCA9IE1vZHVsZVsncHJpbnQnXTsKTW9kdWxlLnByaW50RXJyID0gTW9kdWxlWydwcmludEVyciddOwoKLy8gTWVyZ2UgYmFjayBpbiB0aGUgb3ZlcnJpZGVzCmZvciAoa2V5IGluIG1vZHVsZU92ZXJyaWRlcykgewogIGlmIChtb2R1bGVPdmVycmlkZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgTW9kdWxlW2tleV0gPSBtb2R1bGVPdmVycmlkZXNba2V5XTsKICB9Cn0KLy8gRnJlZSB0aGUgb2JqZWN0IGhpZXJhcmNoeSBjb250YWluZWQgaW4gdGhlIG92ZXJyaWRlcywgdGhpcyBsZXRzIHRoZSBHQwovLyByZWNsYWltIGRhdGEgdXNlZCBlLmcuIGluIG1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCwgd2hpY2ggaXMgYSBsYXJnZSB0eXBlZCBhcnJheS4KbW9kdWxlT3ZlcnJpZGVzID0gdW5kZWZpbmVkOwoKCgovLyB7e1BSRUFNQkxFX0FERElUSU9OU319Cgp2YXIgU1RBQ0tfQUxJR04gPSAxNjsKCi8vIHN0YWNrIG1hbmFnZW1lbnQsIGFuZCBvdGhlciBmdW5jdGlvbmFsaXR5IHRoYXQgaXMgcHJvdmlkZWQgYnkgdGhlIGNvbXBpbGVkIGNvZGUsCi8vIHNob3VsZCBub3QgYmUgdXNlZCBiZWZvcmUgaXQgaXMgcmVhZHkKc3RhY2tTYXZlID0gc3RhY2tSZXN0b3JlID0gc3RhY2tBbGxvYyA9IHNldFRlbXBSZXQwID0gZ2V0VGVtcFJldDAgPSBmdW5jdGlvbigpIHsKICBhYm9ydCgnY2Fubm90IHVzZSB0aGUgc3RhY2sgYmVmb3JlIGNvbXBpbGVkIGNvZGUgaXMgcmVhZHkgdG8gcnVuLCBhbmQgaGFzIHByb3ZpZGVkIHN0YWNrIGFjY2VzcycpOwp9OwoKZnVuY3Rpb24gc3RhdGljQWxsb2Moc2l6ZSkgewogIGFzc2VydCghc3RhdGljU2VhbGVkKTsKICB2YXIgcmV0ID0gU1RBVElDVE9QOwogIFNUQVRJQ1RPUCA9IChTVEFUSUNUT1AgKyBzaXplICsgMTUpICYgLTE2OwogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGR5bmFtaWNBbGxvYyhzaXplKSB7CiAgYXNzZXJ0KERZTkFNSUNUT1BfUFRSKTsKICB2YXIgcmV0ID0gSEVBUDMyW0RZTkFNSUNUT1BfUFRSPj4yXTsKICB2YXIgZW5kID0gKHJldCArIHNpemUgKyAxNSkgJiAtMTY7CiAgSEVBUDMyW0RZTkFNSUNUT1BfUFRSPj4yXSA9IGVuZDsKICBpZiAoZW5kID49IFRPVEFMX01FTU9SWSkgewogICAgdmFyIHN1Y2Nlc3MgPSBlbmxhcmdlTWVtb3J5KCk7CiAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgSEVBUDMyW0RZTkFNSUNUT1BfUFRSPj4yXSA9IHJldDsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGFsaWduTWVtb3J5KHNpemUsIGZhY3RvcikgewogIGlmICghZmFjdG9yKSBmYWN0b3IgPSBTVEFDS19BTElHTjsgLy8gc3RhY2sgYWxpZ25tZW50ICgxNi1ieXRlKSBieSBkZWZhdWx0CiAgdmFyIHJldCA9IHNpemUgPSBNYXRoLmNlaWwoc2l6ZSAvIGZhY3RvcikgKiBmYWN0b3I7CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gZ2V0TmF0aXZlVHlwZVNpemUodHlwZSkgewogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnaTEnOiBjYXNlICdpOCc6IHJldHVybiAxOwogICAgY2FzZSAnaTE2JzogcmV0dXJuIDI7CiAgICBjYXNlICdpMzInOiByZXR1cm4gNDsKICAgIGNhc2UgJ2k2NCc6IHJldHVybiA4OwogICAgY2FzZSAnZmxvYXQnOiByZXR1cm4gNDsKICAgIGNhc2UgJ2RvdWJsZSc6IHJldHVybiA4OwogICAgZGVmYXVsdDogewogICAgICBpZiAodHlwZVt0eXBlLmxlbmd0aC0xXSA9PT0gJyonKSB7CiAgICAgICAgcmV0dXJuIDQ7IC8vIEEgcG9pbnRlcgogICAgICB9IGVsc2UgaWYgKHR5cGVbMF0gPT09ICdpJykgewogICAgICAgIHZhciBiaXRzID0gcGFyc2VJbnQodHlwZS5zdWJzdHIoMSkpOwogICAgICAgIGFzc2VydChiaXRzICUgOCA9PT0gMCk7CiAgICAgICAgcmV0dXJuIGJpdHMgLyA4OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiB3YXJuT25jZSh0ZXh0KSB7CiAgaWYgKCF3YXJuT25jZS5zaG93bikgd2Fybk9uY2Uuc2hvd24gPSB7fTsKICBpZiAoIXdhcm5PbmNlLnNob3duW3RleHRdKSB7CiAgICB3YXJuT25jZS5zaG93blt0ZXh0XSA9IDE7CiAgICBNb2R1bGUucHJpbnRFcnIodGV4dCk7CiAgfQp9CgoKCnZhciBqc0NhbGxTdGFydEluZGV4ID0gMTsKdmFyIGZ1bmN0aW9uUG9pbnRlcnMgPSBuZXcgQXJyYXkoMCk7CgovLyAnc2lnJyBwYXJhbWV0ZXIgaXMgb25seSB1c2VkIG9uIExMVk0gd2FzbSBiYWNrZW5kCmZ1bmN0aW9uIGFkZEZ1bmN0aW9uKGZ1bmMsIHNpZykgewogIGlmICh0eXBlb2Ygc2lnID09PSAndW5kZWZpbmVkJykgewogICAgTW9kdWxlLnByaW50RXJyKCdXYXJuaW5nOiBhZGRGdW5jdGlvbjogUHJvdmlkZSBhIHdhc20gZnVuY3Rpb24gc2lnbmF0dXJlICcgKwogICAgICAgICAgICAgICAgICAgICdzdHJpbmcgYXMgYSBzZWNvbmQgYXJndW1lbnQnKTsKICB9CiAgdmFyIGJhc2UgPSAwOwogIGZvciAodmFyIGkgPSBiYXNlOyBpIDwgYmFzZSArIDA7IGkrKykgewogICAgaWYgKCFmdW5jdGlvblBvaW50ZXJzW2ldKSB7CiAgICAgIGZ1bmN0aW9uUG9pbnRlcnNbaV0gPSBmdW5jOwogICAgICByZXR1cm4ganNDYWxsU3RhcnRJbmRleCArIGk7CiAgICB9CiAgfQogIHRocm93ICdGaW5pc2hlZCB1cCBhbGwgcmVzZXJ2ZWQgZnVuY3Rpb24gcG9pbnRlcnMuIFVzZSBhIGhpZ2hlciB2YWx1ZSBmb3IgUkVTRVJWRURfRlVOQ1RJT05fUE9JTlRFUlMuJzsKfQoKZnVuY3Rpb24gcmVtb3ZlRnVuY3Rpb24oaW5kZXgpIHsKICBmdW5jdGlvblBvaW50ZXJzW2luZGV4LWpzQ2FsbFN0YXJ0SW5kZXhdID0gbnVsbDsKfQoKdmFyIGZ1bmNXcmFwcGVycyA9IHt9OwoKZnVuY3Rpb24gZ2V0RnVuY1dyYXBwZXIoZnVuYywgc2lnKSB7CiAgaWYgKCFmdW5jKSByZXR1cm47IC8vIG9uIG51bGwgcG9pbnRlciwgcmV0dXJuIHVuZGVmaW5lZAogIGFzc2VydChzaWcpOwogIGlmICghZnVuY1dyYXBwZXJzW3NpZ10pIHsKICAgIGZ1bmNXcmFwcGVyc1tzaWddID0ge307CiAgfQogIHZhciBzaWdDYWNoZSA9IGZ1bmNXcmFwcGVyc1tzaWddOwogIGlmICghc2lnQ2FjaGVbZnVuY10pIHsKICAgIC8vIG9wdGltaXplIGF3YXkgYXJndW1lbnRzIHVzYWdlIGluIGNvbW1vbiBjYXNlcwogICAgaWYgKHNpZy5sZW5ndGggPT09IDEpIHsKICAgICAgc2lnQ2FjaGVbZnVuY10gPSBmdW5jdGlvbiBkeW5DYWxsX3dyYXBwZXIoKSB7CiAgICAgICAgcmV0dXJuIGR5bkNhbGwoc2lnLCBmdW5jKTsKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoc2lnLmxlbmd0aCA9PT0gMikgewogICAgICBzaWdDYWNoZVtmdW5jXSA9IGZ1bmN0aW9uIGR5bkNhbGxfd3JhcHBlcihhcmcpIHsKICAgICAgICByZXR1cm4gZHluQ2FsbChzaWcsIGZ1bmMsIFthcmddKTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGdlbmVyYWwgY2FzZQogICAgICBzaWdDYWNoZVtmdW5jXSA9IGZ1bmN0aW9uIGR5bkNhbGxfd3JhcHBlcigpIHsKICAgICAgICByZXR1cm4gZHluQ2FsbChzaWcsIGZ1bmMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwogICAgICB9OwogICAgfQogIH0KICByZXR1cm4gc2lnQ2FjaGVbZnVuY107Cn0KCgpmdW5jdGlvbiBtYWtlQmlnSW50KGxvdywgaGlnaCwgdW5zaWduZWQpIHsKICByZXR1cm4gdW5zaWduZWQgPyAoKCsoKGxvdz4+PjApKSkrKCgrKChoaWdoPj4+MCkpKSo0Mjk0OTY3Mjk2LjApKSA6ICgoKygobG93Pj4+MCkpKSsoKCsoKGhpZ2h8MCkpKSo0Mjk0OTY3Mjk2LjApKTsKfQoKZnVuY3Rpb24gZHluQ2FsbChzaWcsIHB0ciwgYXJncykgewogIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoKSB7CiAgICBhc3NlcnQoYXJncy5sZW5ndGggPT0gc2lnLmxlbmd0aC0xKTsKICAgIGFzc2VydCgoJ2R5bkNhbGxfJyArIHNpZykgaW4gTW9kdWxlLCAnYmFkIGZ1bmN0aW9uIHBvaW50ZXIgdHlwZSAtIG5vIHRhYmxlIGZvciBzaWcgXCcnICsgc2lnICsgJ1wnJyk7CiAgICByZXR1cm4gTW9kdWxlWydkeW5DYWxsXycgKyBzaWddLmFwcGx5KG51bGwsIFtwdHJdLmNvbmNhdChhcmdzKSk7CiAgfSBlbHNlIHsKICAgIGFzc2VydChzaWcubGVuZ3RoID09IDEpOwogICAgYXNzZXJ0KCgnZHluQ2FsbF8nICsgc2lnKSBpbiBNb2R1bGUsICdiYWQgZnVuY3Rpb24gcG9pbnRlciB0eXBlIC0gbm8gdGFibGUgZm9yIHNpZyBcJycgKyBzaWcgKyAnXCcnKTsKICAgIHJldHVybiBNb2R1bGVbJ2R5bkNhbGxfJyArIHNpZ10uY2FsbChudWxsLCBwdHIpOwogIH0KfQoKCmZ1bmN0aW9uIGdldENvbXBpbGVyU2V0dGluZyhuYW1lKSB7CiAgdGhyb3cgJ1lvdSBtdXN0IGJ1aWxkIHdpdGggLXMgUkVUQUlOX0NPTVBJTEVSX1NFVFRJTkdTPTEgZm9yIGdldENvbXBpbGVyU2V0dGluZyBvciBlbXNjcmlwdGVuX2dldF9jb21waWxlcl9zZXR0aW5nIHRvIHdvcmsnOwp9Cgp2YXIgUnVudGltZSA9IHsKICAvLyBGSVhNRSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBsYXllciBmb3IgcG9ydHMuIFN1cHBvcnQgc29tZSBSdW50aW1lLioKICAvLyAgICAgICBmb3Igbm93LCBmaXggaXQgdGhlcmUsIHRoZW4gcmVtb3ZlIGl0IGZyb20gaGVyZS4gVGhhdCB3YXkgd2UKICAvLyAgICAgICBjYW4gbWluaW1pemUgYW55IHBlcmlvZCBvZiBicmVha2FnZS4KICBkeW5DYWxsOiBkeW5DYWxsLCAvLyBmb3IgU0RMMiBwb3J0CiAgLy8gaGVscGZ1bCBlcnJvcnMKICBnZXRUZW1wUmV0MDogZnVuY3Rpb24oKSB7IGFib3J0KCdnZXRUZW1wUmV0MCgpIGlzIG5vdyBhIHRvcC1sZXZlbCBmdW5jdGlvbiwgYWZ0ZXIgcmVtb3ZpbmcgdGhlIFJ1bnRpbWUgb2JqZWN0LiBSZW1vdmUgIlJ1bnRpbWUuIicpIH0sCiAgc3RhdGljQWxsb2M6IGZ1bmN0aW9uKCkgeyBhYm9ydCgnc3RhdGljQWxsb2MoKSBpcyBub3cgYSB0b3AtbGV2ZWwgZnVuY3Rpb24sIGFmdGVyIHJlbW92aW5nIHRoZSBSdW50aW1lIG9iamVjdC4gUmVtb3ZlICJSdW50aW1lLiInKSB9LAogIHN0YWNrQWxsb2M6IGZ1bmN0aW9uKCkgeyBhYm9ydCgnc3RhY2tBbGxvYygpIGlzIG5vdyBhIHRvcC1sZXZlbCBmdW5jdGlvbiwgYWZ0ZXIgcmVtb3ZpbmcgdGhlIFJ1bnRpbWUgb2JqZWN0LiBSZW1vdmUgIlJ1bnRpbWUuIicpIH0sCn07CgovLyBUaGUgYWRkcmVzcyBnbG9iYWxzIGJlZ2luIGF0LiBWZXJ5IGxvdyBpbiBtZW1vcnksIGZvciBjb2RlIHNpemUgYW5kIG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzLgovLyBBYm92ZSAwIGlzIHN0YXRpYyBtZW1vcnksIHN0YXJ0aW5nIHdpdGggZ2xvYmFscy4KLy8gVGhlbiB0aGUgc3RhY2suCi8vIFRoZW4gJ2R5bmFtaWMnIG1lbW9yeSBmb3Igc2Jyay4KdmFyIEdMT0JBTF9CQVNFID0gODsKCgoKLy8gPT09IFByZWFtYmxlIGxpYnJhcnkgc3R1ZmYgPT09CgovLyBEb2N1bWVudGF0aW9uIGZvciB0aGUgcHVibGljIEFQSXMgZGVmaW5lZCBpbiB0aGlzIGZpbGUgbXVzdCBiZSB1cGRhdGVkIGluOgovLyAgICBzaXRlL3NvdXJjZS9kb2NzL2FwaV9yZWZlcmVuY2UvcHJlYW1ibGUuanMucnN0Ci8vIEEgcHJlYnVpbHQgbG9jYWwgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRhdGlvbiBpcyBhdmFpbGFibGUgYXQ6Ci8vICAgIHNpdGUvYnVpbGQvdGV4dC9kb2NzL2FwaV9yZWZlcmVuY2UvcHJlYW1ibGUuanMudHh0Ci8vIFlvdSBjYW4gYWxzbyBidWlsZCBkb2NzIGxvY2FsbHkgYXMgSFRNTCBvciBvdGhlciBmb3JtYXRzIGluIHNpdGUvCi8vIEFuIG9ubGluZSBIVE1MIHZlcnNpb24gKHdoaWNoIG1heSBiZSBvZiBhIGRpZmZlcmVudCB2ZXJzaW9uIG9mIEVtc2NyaXB0ZW4pCi8vICAgIGlzIHVwIGF0IGh0dHA6Ly9rcmlwa2VuLmdpdGh1Yi5pby9lbXNjcmlwdGVuLXNpdGUvZG9jcy9hcGlfcmVmZXJlbmNlL3ByZWFtYmxlLmpzLmh0bWwKCgoKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFJ1bnRpbWUgZXNzZW50aWFscwovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnZhciBBQk9SVCA9IDA7IC8vIHdoZXRoZXIgd2UgYXJlIHF1aXR0aW5nIHRoZSBhcHBsaWNhdGlvbi4gbm8gY29kZSBzaG91bGQgcnVuIGFmdGVyIHRoaXMuIHNldCBpbiBleGl0KCkgYW5kIGFib3J0KCkKdmFyIEVYSVRTVEFUVVMgPSAwOwoKLyoqIEB0eXBlIHtmdW5jdGlvbigqLCBzdHJpbmc9KX0gKi8KZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgdGV4dCkgewogIGlmICghY29uZGl0aW9uKSB7CiAgICBhYm9ydCgnQXNzZXJ0aW9uIGZhaWxlZDogJyArIHRleHQpOwogIH0KfQoKdmFyIGdsb2JhbFNjb3BlID0gdGhpczsKCi8vIFJldHVybnMgdGhlIEMgZnVuY3Rpb24gd2l0aCBhIHNwZWNpZmllZCBpZGVudGlmaWVyIChmb3IgQysrLCB5b3UgbmVlZCB0byBkbyBtYW51YWwgbmFtZSBtYW5nbGluZykKZnVuY3Rpb24gZ2V0Q0Z1bmMoaWRlbnQpIHsKICB2YXIgZnVuYyA9IE1vZHVsZVsnXycgKyBpZGVudF07IC8vIGNsb3N1cmUgZXhwb3J0ZWQgZnVuY3Rpb24KICBhc3NlcnQoZnVuYywgJ0Nhbm5vdCBjYWxsIHVua25vd24gZnVuY3Rpb24gJyArIGlkZW50ICsgJywgbWFrZSBzdXJlIGl0IGlzIGV4cG9ydGVkJyk7CiAgcmV0dXJuIGZ1bmM7Cn0KCnZhciBKU2Z1bmNzID0gewogIC8vIEhlbHBlcnMgZm9yIGN3cmFwIC0tIGl0IGNhbid0IHJlZmVyIHRvIFJ1bnRpbWUgZGlyZWN0bHkgYmVjYXVzZSBpdCBtaWdodAogIC8vIGJlIHJlbmFtZWQgYnkgY2xvc3VyZSwgaW5zdGVhZCBpdCBjYWxscyBKU2Z1bmNzWydzdGFja1NhdmUnXS5ib2R5IHRvIGZpbmQKICAvLyBvdXQgd2hhdCB0aGUgbWluaWZpZWQgZnVuY3Rpb24gbmFtZSBpcy4KICAnc3RhY2tTYXZlJzogZnVuY3Rpb24oKSB7CiAgICBzdGFja1NhdmUoKQogIH0sCiAgJ3N0YWNrUmVzdG9yZSc6IGZ1bmN0aW9uKCkgewogICAgc3RhY2tSZXN0b3JlKCkKICB9LAogIC8vIHR5cGUgY29udmVyc2lvbiBmcm9tIGpzIHRvIGMKICAnYXJyYXlUb0MnIDogZnVuY3Rpb24oYXJyKSB7CiAgICB2YXIgcmV0ID0gc3RhY2tBbGxvYyhhcnIubGVuZ3RoKTsKICAgIHdyaXRlQXJyYXlUb01lbW9yeShhcnIsIHJldCk7CiAgICByZXR1cm4gcmV0OwogIH0sCiAgJ3N0cmluZ1RvQycgOiBmdW5jdGlvbihzdHIpIHsKICAgIHZhciByZXQgPSAwOwogICAgaWYgKHN0ciAhPT0gbnVsbCAmJiBzdHIgIT09IHVuZGVmaW5lZCAmJiBzdHIgIT09IDApIHsgLy8gbnVsbCBzdHJpbmcKICAgICAgLy8gYXQgbW9zdCA0IGJ5dGVzIHBlciBVVEYtOCBjb2RlIHBvaW50LCArMSBmb3IgdGhlIHRyYWlsaW5nICdcMCcKICAgICAgdmFyIGxlbiA9IChzdHIubGVuZ3RoIDw8IDIpICsgMTsKICAgICAgcmV0ID0gc3RhY2tBbGxvYyhsZW4pOwogICAgICBzdHJpbmdUb1VURjgoc3RyLCByZXQsIGxlbik7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KfTsKLy8gRm9yIGZhc3QgbG9va3VwIG9mIGNvbnZlcnNpb24gZnVuY3Rpb25zCnZhciB0b0MgPSB7J3N0cmluZycgOiBKU2Z1bmNzWydzdHJpbmdUb0MnXSwgJ2FycmF5JyA6IEpTZnVuY3NbJ2FycmF5VG9DJ119OwoKLy8gQyBjYWxsaW5nIGludGVyZmFjZS4KZnVuY3Rpb24gY2NhbGwgKGlkZW50LCByZXR1cm5UeXBlLCBhcmdUeXBlcywgYXJncywgb3B0cykgewogIHZhciBmdW5jID0gZ2V0Q0Z1bmMoaWRlbnQpOwogIHZhciBjQXJncyA9IFtdOwogIHZhciBzdGFjayA9IDA7CiAgYXNzZXJ0KHJldHVyblR5cGUgIT09ICdhcnJheScsICdSZXR1cm4gdHlwZSBzaG91bGQgbm90IGJlICJhcnJheSIuJyk7CiAgaWYgKGFyZ3MpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgY29udmVydGVyID0gdG9DW2FyZ1R5cGVzW2ldXTsKICAgICAgaWYgKGNvbnZlcnRlcikgewogICAgICAgIGlmIChzdGFjayA9PT0gMCkgc3RhY2sgPSBzdGFja1NhdmUoKTsKICAgICAgICBjQXJnc1tpXSA9IGNvbnZlcnRlcihhcmdzW2ldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjQXJnc1tpXSA9IGFyZ3NbaV07CiAgICAgIH0KICAgIH0KICB9CiAgdmFyIHJldCA9IGZ1bmMuYXBwbHkobnVsbCwgY0FyZ3MpOwogIGlmIChyZXR1cm5UeXBlID09PSAnc3RyaW5nJykgcmV0ID0gUG9pbnRlcl9zdHJpbmdpZnkocmV0KTsKICBpZiAoc3RhY2sgIT09IDApIHsKICAgIHN0YWNrUmVzdG9yZShzdGFjayk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGN3cmFwIChpZGVudCwgcmV0dXJuVHlwZSwgYXJnVHlwZXMpIHsKICBhcmdUeXBlcyA9IGFyZ1R5cGVzIHx8IFtdOwogIHZhciBjZnVuYyA9IGdldENGdW5jKGlkZW50KTsKICAvLyBXaGVuIHRoZSBmdW5jdGlvbiB0YWtlcyBudW1iZXJzIGFuZCByZXR1cm5zIGEgbnVtYmVyLCB3ZSBjYW4ganVzdCByZXR1cm4KICAvLyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24KICB2YXIgbnVtZXJpY0FyZ3MgPSBhcmdUeXBlcy5ldmVyeShmdW5jdGlvbih0eXBlKXsgcmV0dXJuIHR5cGUgPT09ICdudW1iZXInfSk7CiAgdmFyIG51bWVyaWNSZXQgPSByZXR1cm5UeXBlICE9PSAnc3RyaW5nJzsKICBpZiAobnVtZXJpY1JldCAmJiBudW1lcmljQXJncykgewogICAgcmV0dXJuIGNmdW5jOwogIH0KICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gY2NhbGwoaWRlbnQsIHJldHVyblR5cGUsIGFyZ1R5cGVzLCBhcmd1bWVudHMpOwogIH0KfQoKLyoqIEB0eXBlIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgc3RyaW5nLCBib29sZWFuPSl9ICovCmZ1bmN0aW9uIHNldFZhbHVlKHB0ciwgdmFsdWUsIHR5cGUsIG5vU2FmZSkgewogIHR5cGUgPSB0eXBlIHx8ICdpOCc7CiAgaWYgKHR5cGUuY2hhckF0KHR5cGUubGVuZ3RoLTEpID09PSAnKicpIHR5cGUgPSAnaTMyJzsgLy8gcG9pbnRlcnMgYXJlIDMyLWJpdAogICAgc3dpdGNoKHR5cGUpIHsKICAgICAgY2FzZSAnaTEnOiBIRUFQOFsoKHB0cik+PjApXT12YWx1ZTsgYnJlYWs7CiAgICAgIGNhc2UgJ2k4JzogSEVBUDhbKChwdHIpPj4wKV09dmFsdWU7IGJyZWFrOwogICAgICBjYXNlICdpMTYnOiBIRUFQMTZbKChwdHIpPj4xKV09dmFsdWU7IGJyZWFrOwogICAgICBjYXNlICdpMzInOiBIRUFQMzJbKChwdHIpPj4yKV09dmFsdWU7IGJyZWFrOwogICAgICBjYXNlICdpNjQnOiAodGVtcEk2NCA9IFt2YWx1ZT4+PjAsKHRlbXBEb3VibGU9dmFsdWUsKCsoTWF0aF9hYnModGVtcERvdWJsZSkpKSA+PSAxLjAgPyAodGVtcERvdWJsZSA+IDAuMCA/ICgoTWF0aF9taW4oKCsoTWF0aF9mbG9vcigodGVtcERvdWJsZSkvNDI5NDk2NzI5Ni4wKSkpLCA0Mjk0OTY3Mjk1LjApKXwwKT4+PjAgOiAofn4oKCsoTWF0aF9jZWlsKCh0ZW1wRG91YmxlIC0gKygoKH5+KHRlbXBEb3VibGUpKSk+Pj4wKSkvNDI5NDk2NzI5Ni4wKSkpKSk+Pj4wKSA6IDApXSxIRUFQMzJbKChwdHIpPj4yKV09dGVtcEk2NFswXSxIRUFQMzJbKCgocHRyKSsoNCkpPj4yKV09dGVtcEk2NFsxXSk7IGJyZWFrOwogICAgICBjYXNlICdmbG9hdCc6IEhFQVBGMzJbKChwdHIpPj4yKV09dmFsdWU7IGJyZWFrOwogICAgICBjYXNlICdkb3VibGUnOiBIRUFQRjY0WygocHRyKT4+MyldPXZhbHVlOyBicmVhazsKICAgICAgZGVmYXVsdDogYWJvcnQoJ2ludmFsaWQgdHlwZSBmb3Igc2V0VmFsdWU6ICcgKyB0eXBlKTsKICAgIH0KfQoKLyoqIEB0eXBlIHtmdW5jdGlvbihudW1iZXIsIHN0cmluZywgYm9vbGVhbj0pfSAqLwpmdW5jdGlvbiBnZXRWYWx1ZShwdHIsIHR5cGUsIG5vU2FmZSkgewogIHR5cGUgPSB0eXBlIHx8ICdpOCc7CiAgaWYgKHR5cGUuY2hhckF0KHR5cGUubGVuZ3RoLTEpID09PSAnKicpIHR5cGUgPSAnaTMyJzsgLy8gcG9pbnRlcnMgYXJlIDMyLWJpdAogICAgc3dpdGNoKHR5cGUpIHsKICAgICAgY2FzZSAnaTEnOiByZXR1cm4gSEVBUDhbKChwdHIpPj4wKV07CiAgICAgIGNhc2UgJ2k4JzogcmV0dXJuIEhFQVA4WygocHRyKT4+MCldOwogICAgICBjYXNlICdpMTYnOiByZXR1cm4gSEVBUDE2WygocHRyKT4+MSldOwogICAgICBjYXNlICdpMzInOiByZXR1cm4gSEVBUDMyWygocHRyKT4+MildOwogICAgICBjYXNlICdpNjQnOiByZXR1cm4gSEVBUDMyWygocHRyKT4+MildOwogICAgICBjYXNlICdmbG9hdCc6IHJldHVybiBIRUFQRjMyWygocHRyKT4+MildOwogICAgICBjYXNlICdkb3VibGUnOiByZXR1cm4gSEVBUEY2NFsoKHB0cik+PjMpXTsKICAgICAgZGVmYXVsdDogYWJvcnQoJ2ludmFsaWQgdHlwZSBmb3IgZ2V0VmFsdWU6ICcgKyB0eXBlKTsKICAgIH0KICByZXR1cm4gbnVsbDsKfQoKdmFyIEFMTE9DX05PUk1BTCA9IDA7IC8vIFRyaWVzIHRvIHVzZSBfbWFsbG9jKCkKdmFyIEFMTE9DX1NUQUNLID0gMTsgLy8gTGl2ZXMgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgY3VycmVudCBmdW5jdGlvbiBjYWxsCnZhciBBTExPQ19TVEFUSUMgPSAyOyAvLyBDYW5ub3QgYmUgZnJlZWQKdmFyIEFMTE9DX0RZTkFNSUMgPSAzOyAvLyBDYW5ub3QgYmUgZnJlZWQgZXhjZXB0IHRocm91Z2ggc2Jyawp2YXIgQUxMT0NfTk9ORSA9IDQ7IC8vIERvIG5vdCBhbGxvY2F0ZQoKLy8gYWxsb2NhdGUoKTogVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlLiBZb3UgY2FuIHVzZSBpdCB5b3Vyc2VsZiBhcyB3ZWxsLCBidXQgdGhlIGludGVyZmFjZQovLyAgICAgICAgICAgICBpcyBhIGxpdHRsZSB0cmlja3kgKHNlZSBkb2NzIHJpZ2h0IGJlbG93KS4gVGhlIHJlYXNvbiBpcyB0aGF0IGl0IGlzIG9wdGltaXplZAovLyAgICAgICAgICAgICBmb3IgbXVsdGlwbGUgc3ludGF4ZXMgdG8gc2F2ZSBzcGFjZSBpbiBnZW5lcmF0ZWQgY29kZS4gU28geW91IHNob3VsZAovLyAgICAgICAgICAgICBub3JtYWxseSBub3QgdXNlIGFsbG9jYXRlKCksIGFuZCBpbnN0ZWFkIGFsbG9jYXRlIG1lbW9yeSB1c2luZyBfbWFsbG9jKCksCi8vICAgICAgICAgICAgIGluaXRpYWxpemUgaXQgd2l0aCBzZXRWYWx1ZSgpLCBhbmQgc28gZm9ydGguCi8vIEBzbGFiOiBBbiBhcnJheSBvZiBkYXRhLCBvciBhIG51bWJlci4gSWYgYSBudW1iZXIsIHRoZW4gdGhlIHNpemUgb2YgdGhlIGJsb2NrIHRvIGFsbG9jYXRlLAovLyAgICAgICAgaW4gKmJ5dGVzKiAobm90ZSB0aGF0IHRoaXMgaXMgc29tZXRpbWVzIGNvbmZ1c2luZzogdGhlIG5leHQgcGFyYW1ldGVyIGRvZXMgbm90Ci8vICAgICAgICBhZmZlY3QgdGhpcyEpCi8vIEB0eXBlczogRWl0aGVyIGFuIGFycmF5IG9mIHR5cGVzLCBvbmUgZm9yIGVhY2ggYnl0ZSAob3IgMCBpZiBubyB0eXBlIGF0IHRoYXQgcG9zaXRpb24pLAovLyAgICAgICAgIG9yIGEgc2luZ2xlIHR5cGUgd2hpY2ggaXMgdXNlZCBmb3IgdGhlIGVudGlyZSBibG9jay4gVGhpcyBvbmx5IG1hdHRlcnMgaWYgdGhlcmUKLy8gICAgICAgICBpcyBpbml0aWFsIGRhdGEgLSBpZiBAc2xhYiBpcyBhIG51bWJlciwgdGhlbiB0aGlzIGRvZXMgbm90IG1hdHRlciBhdCBhbGwgYW5kIGlzCi8vICAgICAgICAgaWdub3JlZC4KLy8gQGFsbG9jYXRvcjogSG93IHRvIGFsbG9jYXRlIG1lbW9yeSwgc2VlIEFMTE9DXyoKLyoqIEB0eXBlIHtmdW5jdGlvbigoVHlwZWRBcnJheXxBcnJheTxudW1iZXI+fG51bWJlciksIHN0cmluZywgbnVtYmVyLCBudW1iZXI9KX0gKi8KZnVuY3Rpb24gYWxsb2NhdGUoc2xhYiwgdHlwZXMsIGFsbG9jYXRvciwgcHRyKSB7CiAgdmFyIHplcm9pbml0LCBzaXplOwogIGlmICh0eXBlb2Ygc2xhYiA9PT0gJ251bWJlcicpIHsKICAgIHplcm9pbml0ID0gdHJ1ZTsKICAgIHNpemUgPSBzbGFiOwogIH0gZWxzZSB7CiAgICB6ZXJvaW5pdCA9IGZhbHNlOwogICAgc2l6ZSA9IHNsYWIubGVuZ3RoOwogIH0KCiAgdmFyIHNpbmdsZVR5cGUgPSB0eXBlb2YgdHlwZXMgPT09ICdzdHJpbmcnID8gdHlwZXMgOiBudWxsOwoKICB2YXIgcmV0OwogIGlmIChhbGxvY2F0b3IgPT0gQUxMT0NfTk9ORSkgewogICAgcmV0ID0gcHRyOwogIH0gZWxzZSB7CiAgICByZXQgPSBbdHlwZW9mIF9tYWxsb2MgPT09ICdmdW5jdGlvbicgPyBfbWFsbG9jIDogc3RhdGljQWxsb2MsIHN0YWNrQWxsb2MsIHN0YXRpY0FsbG9jLCBkeW5hbWljQWxsb2NdW2FsbG9jYXRvciA9PT0gdW5kZWZpbmVkID8gQUxMT0NfU1RBVElDIDogYWxsb2NhdG9yXShNYXRoLm1heChzaXplLCBzaW5nbGVUeXBlID8gMSA6IHR5cGVzLmxlbmd0aCkpOwogIH0KCiAgaWYgKHplcm9pbml0KSB7CiAgICB2YXIgc3RvcDsKICAgIHB0ciA9IHJldDsKICAgIGFzc2VydCgocmV0ICYgMykgPT0gMCk7CiAgICBzdG9wID0gcmV0ICsgKHNpemUgJiB+Myk7CiAgICBmb3IgKDsgcHRyIDwgc3RvcDsgcHRyICs9IDQpIHsKICAgICAgSEVBUDMyWygocHRyKT4+MildPTA7CiAgICB9CiAgICBzdG9wID0gcmV0ICsgc2l6ZTsKICAgIHdoaWxlIChwdHIgPCBzdG9wKSB7CiAgICAgIEhFQVA4WygocHRyKyspPj4wKV09MDsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQoKICBpZiAoc2luZ2xlVHlwZSA9PT0gJ2k4JykgewogICAgaWYgKHNsYWIuc3ViYXJyYXkgfHwgc2xhYi5zbGljZSkgewogICAgICBIRUFQVTguc2V0KC8qKiBAdHlwZSB7IVVpbnQ4QXJyYXl9ICovIChzbGFiKSwgcmV0KTsKICAgIH0gZWxzZSB7CiAgICAgIEhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoc2xhYiksIHJldCk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KCiAgdmFyIGkgPSAwLCB0eXBlLCB0eXBlU2l6ZSwgcHJldmlvdXNUeXBlOwogIHdoaWxlIChpIDwgc2l6ZSkgewogICAgdmFyIGN1cnIgPSBzbGFiW2ldOwoKICAgIHR5cGUgPSBzaW5nbGVUeXBlIHx8IHR5cGVzW2ldOwogICAgaWYgKHR5cGUgPT09IDApIHsKICAgICAgaSsrOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIGFzc2VydCh0eXBlLCAnTXVzdCBrbm93IHdoYXQgdHlwZSB0byBzdG9yZSBpbiBhbGxvY2F0ZSEnKTsKCiAgICBpZiAodHlwZSA9PSAnaTY0JykgdHlwZSA9ICdpMzInOyAvLyBzcGVjaWFsIGNhc2U6IHdlIGhhdmUgb25lIGkzMiBoZXJlLCBhbmQgb25lIGkzMiBsYXRlcgoKICAgIHNldFZhbHVlKHJldCtpLCBjdXJyLCB0eXBlKTsKCiAgICAvLyBubyBuZWVkIHRvIGxvb2sgdXAgc2l6ZSB1bmxlc3MgdHlwZSBjaGFuZ2VzLCBzbyBjYWNoZSBpdAogICAgaWYgKHByZXZpb3VzVHlwZSAhPT0gdHlwZSkgewogICAgICB0eXBlU2l6ZSA9IGdldE5hdGl2ZVR5cGVTaXplKHR5cGUpOwogICAgICBwcmV2aW91c1R5cGUgPSB0eXBlOwogICAgfQogICAgaSArPSB0eXBlU2l6ZTsKICB9CgogIHJldHVybiByZXQ7Cn0KCi8vIEFsbG9jYXRlIG1lbW9yeSBkdXJpbmcgYW55IHN0YWdlIG9mIHN0YXJ0dXAgLSBzdGF0aWMgbWVtb3J5IGVhcmx5IG9uLCBkeW5hbWljIG1lbW9yeSBsYXRlciwgbWFsbG9jIHdoZW4gcmVhZHkKZnVuY3Rpb24gZ2V0TWVtb3J5KHNpemUpIHsKICBpZiAoIXN0YXRpY1NlYWxlZCkgcmV0dXJuIHN0YXRpY0FsbG9jKHNpemUpOwogIGlmICghcnVudGltZUluaXRpYWxpemVkKSByZXR1cm4gZHluYW1pY0FsbG9jKHNpemUpOwogIHJldHVybiBfbWFsbG9jKHNpemUpOwp9CgovKiogQHR5cGUge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyPSl9ICovCmZ1bmN0aW9uIFBvaW50ZXJfc3RyaW5naWZ5KHB0ciwgbGVuZ3RoKSB7CiAgaWYgKGxlbmd0aCA9PT0gMCB8fCAhcHRyKSByZXR1cm4gJyc7CiAgLy8gVE9ETzogdXNlIFRleHREZWNvZGVyCiAgLy8gRmluZCB0aGUgbGVuZ3RoLCBhbmQgY2hlY2sgZm9yIFVURiB3aGlsZSBkb2luZyBzbwogIHZhciBoYXNVdGYgPSAwOwogIHZhciB0OwogIHZhciBpID0gMDsKICB3aGlsZSAoMSkgewogICAgYXNzZXJ0KHB0ciArIGkgPCBUT1RBTF9NRU1PUlkpOwogICAgdCA9IEhFQVBVOFsoKChwdHIpKyhpKSk+PjApXTsKICAgIGhhc1V0ZiB8PSB0OwogICAgaWYgKHQgPT0gMCAmJiAhbGVuZ3RoKSBicmVhazsKICAgIGkrKzsKICAgIGlmIChsZW5ndGggJiYgaSA9PSBsZW5ndGgpIGJyZWFrOwogIH0KICBpZiAoIWxlbmd0aCkgbGVuZ3RoID0gaTsKCiAgdmFyIHJldCA9ICcnOwoKICBpZiAoaGFzVXRmIDwgMTI4KSB7CiAgICB2YXIgTUFYX0NIVU5LID0gMTAyNDsgLy8gc3BsaXQgdXAgaW50byBjaHVua3MsIGJlY2F1c2UgLmFwcGx5IG9uIGEgaHVnZSBzdHJpbmcgY2FuIG92ZXJmbG93IHRoZSBzdGFjawogICAgdmFyIGN1cnI7CiAgICB3aGlsZSAobGVuZ3RoID4gMCkgewogICAgICBjdXJyID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIEhFQVBVOC5zdWJhcnJheShwdHIsIHB0ciArIE1hdGgubWluKGxlbmd0aCwgTUFYX0NIVU5LKSkpOwogICAgICByZXQgPSByZXQgPyByZXQgKyBjdXJyIDogY3VycjsKICAgICAgcHRyICs9IE1BWF9DSFVOSzsKICAgICAgbGVuZ3RoIC09IE1BWF9DSFVOSzsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQogIHJldHVybiBVVEY4VG9TdHJpbmcocHRyKTsKfQoKLy8gR2l2ZW4gYSBwb2ludGVyICdwdHInIHRvIGEgbnVsbC10ZXJtaW5hdGVkIEFTQ0lJLWVuY29kZWQgc3RyaW5nIGluIHRoZSBlbXNjcmlwdGVuIEhFQVAsIHJldHVybnMKLy8gYSBjb3B5IG9mIHRoYXQgc3RyaW5nIGFzIGEgSmF2YXNjcmlwdCBTdHJpbmcgb2JqZWN0LgoKZnVuY3Rpb24gQXNjaWlUb1N0cmluZyhwdHIpIHsKICB2YXIgc3RyID0gJyc7CiAgd2hpbGUgKDEpIHsKICAgIHZhciBjaCA9IEhFQVA4WygocHRyKyspPj4wKV07CiAgICBpZiAoIWNoKSByZXR1cm4gc3RyOwogICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpOwogIH0KfQoKLy8gQ29waWVzIHRoZSBnaXZlbiBKYXZhc2NyaXB0IFN0cmluZyBvYmplY3QgJ3N0cicgdG8gdGhlIGVtc2NyaXB0ZW4gSEVBUCBhdCBhZGRyZXNzICdvdXRQdHInLAovLyBudWxsLXRlcm1pbmF0ZWQgYW5kIGVuY29kZWQgaW4gQVNDSUkgZm9ybS4gVGhlIGNvcHkgd2lsbCByZXF1aXJlIGF0IG1vc3Qgc3RyLmxlbmd0aCsxIGJ5dGVzIG9mIHNwYWNlIGluIHRoZSBIRUFQLgoKZnVuY3Rpb24gc3RyaW5nVG9Bc2NpaShzdHIsIG91dFB0cikgewogIHJldHVybiB3cml0ZUFzY2lpVG9NZW1vcnkoc3RyLCBvdXRQdHIsIGZhbHNlKTsKfQoKLy8gR2l2ZW4gYSBwb2ludGVyICdwdHInIHRvIGEgbnVsbC10ZXJtaW5hdGVkIFVURjgtZW5jb2RlZCBzdHJpbmcgaW4gdGhlIGdpdmVuIGFycmF5IHRoYXQgY29udGFpbnMgdWludDggdmFsdWVzLCByZXR1cm5zCi8vIGEgY29weSBvZiB0aGF0IHN0cmluZyBhcyBhIEphdmFzY3JpcHQgU3RyaW5nIG9iamVjdC4KCnZhciBVVEY4RGVjb2RlciA9IHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKSA6IHVuZGVmaW5lZDsKZnVuY3Rpb24gVVRGOEFycmF5VG9TdHJpbmcodThBcnJheSwgaWR4KSB7CiAgdmFyIGVuZFB0ciA9IGlkeDsKICAvLyBUZXh0RGVjb2RlciBuZWVkcyB0byBrbm93IHRoZSBieXRlIGxlbmd0aCBpbiBhZHZhbmNlLCBpdCBkb2Vzbid0IHN0b3Agb24gbnVsbCB0ZXJtaW5hdG9yIGJ5IGl0c2VsZi4KICAvLyBBbHNvLCB1c2UgdGhlIGxlbmd0aCBpbmZvIHRvIGF2b2lkIHJ1bm5pbmcgdGlueSBzdHJpbmdzIHRocm91Z2ggVGV4dERlY29kZXIsIHNpbmNlIC5zdWJhcnJheSgpIGFsbG9jYXRlcyBnYXJiYWdlLgogIHdoaWxlICh1OEFycmF5W2VuZFB0cl0pICsrZW5kUHRyOwoKICBpZiAoZW5kUHRyIC0gaWR4ID4gMTYgJiYgdThBcnJheS5zdWJhcnJheSAmJiBVVEY4RGVjb2RlcikgewogICAgcmV0dXJuIFVURjhEZWNvZGVyLmRlY29kZSh1OEFycmF5LnN1YmFycmF5KGlkeCwgZW5kUHRyKSk7CiAgfSBlbHNlIHsKICAgIHZhciB1MCwgdTEsIHUyLCB1MywgdTQsIHU1OwoKICAgIHZhciBzdHIgPSAnJzsKICAgIHdoaWxlICgxKSB7CiAgICAgIC8vIEZvciBVVEY4IGJ5dGUgc3RydWN0dXJlLCBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtOCNEZXNjcmlwdGlvbiBhbmQgaHR0cHM6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzIyNzkudHh0IGFuZCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzYyOQogICAgICB1MCA9IHU4QXJyYXlbaWR4KytdOwogICAgICBpZiAoIXUwKSByZXR1cm4gc3RyOwogICAgICBpZiAoISh1MCAmIDB4ODApKSB7IHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHUwKTsgY29udGludWU7IH0KICAgICAgdTEgPSB1OEFycmF5W2lkeCsrXSAmIDYzOwogICAgICBpZiAoKHUwICYgMHhFMCkgPT0gMHhDMCkgeyBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKHUwICYgMzEpIDw8IDYpIHwgdTEpOyBjb250aW51ZTsgfQogICAgICB1MiA9IHU4QXJyYXlbaWR4KytdICYgNjM7CiAgICAgIGlmICgodTAgJiAweEYwKSA9PSAweEUwKSB7CiAgICAgICAgdTAgPSAoKHUwICYgMTUpIDw8IDEyKSB8ICh1MSA8PCA2KSB8IHUyOwogICAgICB9IGVsc2UgewogICAgICAgIHUzID0gdThBcnJheVtpZHgrK10gJiA2MzsKICAgICAgICBpZiAoKHUwICYgMHhGOCkgPT0gMHhGMCkgewogICAgICAgICAgdTAgPSAoKHUwICYgNykgPDwgMTgpIHwgKHUxIDw8IDEyKSB8ICh1MiA8PCA2KSB8IHUzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1NCA9IHU4QXJyYXlbaWR4KytdICYgNjM7CiAgICAgICAgICBpZiAoKHUwICYgMHhGQykgPT0gMHhGOCkgewogICAgICAgICAgICB1MCA9ICgodTAgJiAzKSA8PCAyNCkgfCAodTEgPDwgMTgpIHwgKHUyIDw8IDEyKSB8ICh1MyA8PCA2KSB8IHU0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdTUgPSB1OEFycmF5W2lkeCsrXSAmIDYzOwogICAgICAgICAgICB1MCA9ICgodTAgJiAxKSA8PCAzMCkgfCAodTEgPDwgMjQpIHwgKHUyIDw8IDE4KSB8ICh1MyA8PCAxMikgfCAodTQgPDwgNikgfCB1NTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHUwIDwgMHgxMDAwMCkgewogICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHUwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgY2ggPSB1MCAtIDB4MTAwMDA7CiAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhEODAwIHwgKGNoID4+IDEwKSwgMHhEQzAwIHwgKGNoICYgMHgzRkYpKTsKICAgICAgfQogICAgfQogIH0KfQoKLy8gR2l2ZW4gYSBwb2ludGVyICdwdHInIHRvIGEgbnVsbC10ZXJtaW5hdGVkIFVURjgtZW5jb2RlZCBzdHJpbmcgaW4gdGhlIGVtc2NyaXB0ZW4gSEVBUCwgcmV0dXJucwovLyBhIGNvcHkgb2YgdGhhdCBzdHJpbmcgYXMgYSBKYXZhc2NyaXB0IFN0cmluZyBvYmplY3QuCgpmdW5jdGlvbiBVVEY4VG9TdHJpbmcocHRyKSB7CiAgcmV0dXJuIFVURjhBcnJheVRvU3RyaW5nKEhFQVBVOCxwdHIpOwp9CgovLyBDb3BpZXMgdGhlIGdpdmVuIEphdmFzY3JpcHQgU3RyaW5nIG9iamVjdCAnc3RyJyB0byB0aGUgZ2l2ZW4gYnl0ZSBhcnJheSBhdCBhZGRyZXNzICdvdXRJZHgnLAovLyBlbmNvZGVkIGluIFVURjggZm9ybSBhbmQgbnVsbC10ZXJtaW5hdGVkLiBUaGUgY29weSB3aWxsIHJlcXVpcmUgYXQgbW9zdCBzdHIubGVuZ3RoKjQrMSBieXRlcyBvZiBzcGFjZSBpbiB0aGUgSEVBUC4KLy8gVXNlIHRoZSBmdW5jdGlvbiBsZW5ndGhCeXRlc1VURjggdG8gY29tcHV0ZSB0aGUgZXhhY3QgbnVtYmVyIG9mIGJ5dGVzIChleGNsdWRpbmcgbnVsbCB0ZXJtaW5hdG9yKSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCB3cml0ZS4KLy8gUGFyYW1ldGVyczoKLy8gICBzdHI6IHRoZSBKYXZhc2NyaXB0IHN0cmluZyB0byBjb3B5LgovLyAgIG91dFU4QXJyYXk6IHRoZSBhcnJheSB0byBjb3B5IHRvLiBFYWNoIGluZGV4IGluIHRoaXMgYXJyYXkgaXMgYXNzdW1lZCB0byBiZSBvbmUgOC1ieXRlIGVsZW1lbnQuCi8vICAgb3V0SWR4OiBUaGUgc3RhcnRpbmcgb2Zmc2V0IGluIHRoZSBhcnJheSB0byBiZWdpbiB0aGUgY29weWluZy4KLy8gICBtYXhCeXRlc1RvV3JpdGU6IFRoZSBtYXhpbXVtIG51bWJlciBvZiBieXRlcyB0aGlzIGZ1bmN0aW9uIGNhbiB3cml0ZSB0byB0aGUgYXJyYXkuIFRoaXMgY291bnQgc2hvdWxkIGluY2x1ZGUgdGhlIG51bGwKLy8gICAgICAgICAgICAgICAgICAgIHRlcm1pbmF0b3IsIGkuZS4gaWYgbWF4Qnl0ZXNUb1dyaXRlPTEsIG9ubHkgdGhlIG51bGwgdGVybWluYXRvciB3aWxsIGJlIHdyaXR0ZW4gYW5kIG5vdGhpbmcgZWxzZS4KLy8gICAgICAgICAgICAgICAgICAgIG1heEJ5dGVzVG9Xcml0ZT0wIGRvZXMgbm90IHdyaXRlIGFueSBieXRlcyB0byB0aGUgb3V0cHV0LCBub3QgZXZlbiB0aGUgbnVsbCB0ZXJtaW5hdG9yLgovLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgd3JpdHRlbiwgRVhDTFVESU5HIHRoZSBudWxsIHRlcm1pbmF0b3IuCgpmdW5jdGlvbiBzdHJpbmdUb1VURjhBcnJheShzdHIsIG91dFU4QXJyYXksIG91dElkeCwgbWF4Qnl0ZXNUb1dyaXRlKSB7CiAgaWYgKCEobWF4Qnl0ZXNUb1dyaXRlID4gMCkpIC8vIFBhcmFtZXRlciBtYXhCeXRlc1RvV3JpdGUgaXMgbm90IG9wdGlvbmFsLiBOZWdhdGl2ZSB2YWx1ZXMsIDAsIG51bGwsIHVuZGVmaW5lZCBhbmQgZmFsc2UgZWFjaCBkb24ndCB3cml0ZSBvdXQgYW55IGJ5dGVzLgogICAgcmV0dXJuIDA7CgogIHZhciBzdGFydElkeCA9IG91dElkeDsKICB2YXIgZW5kSWR4ID0gb3V0SWR4ICsgbWF4Qnl0ZXNUb1dyaXRlIC0gMTsgLy8gLTEgZm9yIHN0cmluZyBudWxsIHRlcm1pbmF0b3IuCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIC8vIEdvdGNoYTogY2hhckNvZGVBdCByZXR1cm5zIGEgMTYtYml0IHdvcmQgdGhhdCBpcyBhIFVURi0xNiBlbmNvZGVkIGNvZGUgdW5pdCwgbm90IGEgVW5pY29kZSBjb2RlIHBvaW50IG9mIHRoZSBjaGFyYWN0ZXIhIFNvIGRlY29kZSBVVEYxNi0+VVRGMzItPlVURjguCiAgICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL2ZhcS91dGZfYm9tLmh0bWwjdXRmMTYtMwogICAgLy8gRm9yIFVURjggYnl0ZSBzdHJ1Y3R1cmUsIHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uIGFuZCBodHRwczovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMjI3OS50eHQgYW5kIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjI5CiAgICB2YXIgdSA9IHN0ci5jaGFyQ29kZUF0KGkpOyAvLyBwb3NzaWJseSBhIGxlYWQgc3Vycm9nYXRlCiAgICBpZiAodSA+PSAweEQ4MDAgJiYgdSA8PSAweERGRkYpIHUgPSAweDEwMDAwICsgKCh1ICYgMHgzRkYpIDw8IDEwKSB8IChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgzRkYpOwogICAgaWYgKHUgPD0gMHg3RikgewogICAgICBpZiAob3V0SWR4ID49IGVuZElkeCkgYnJlYWs7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gdTsKICAgIH0gZWxzZSBpZiAodSA8PSAweDdGRikgewogICAgICBpZiAob3V0SWR4ICsgMSA+PSBlbmRJZHgpIGJyZWFrOwogICAgICBvdXRVOEFycmF5W291dElkeCsrXSA9IDB4QzAgfCAodSA+PiA2KTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKHUgJiA2Myk7CiAgICB9IGVsc2UgaWYgKHUgPD0gMHhGRkZGKSB7CiAgICAgIGlmIChvdXRJZHggKyAyID49IGVuZElkeCkgYnJlYWs7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gMHhFMCB8ICh1ID4+IDEyKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDYpICYgNjMpOwogICAgICBvdXRVOEFycmF5W291dElkeCsrXSA9IDB4ODAgfCAodSAmIDYzKTsKICAgIH0gZWxzZSBpZiAodSA8PSAweDFGRkZGRikgewogICAgICBpZiAob3V0SWR4ICsgMyA+PSBlbmRJZHgpIGJyZWFrOwogICAgICBvdXRVOEFycmF5W291dElkeCsrXSA9IDB4RjAgfCAodSA+PiAxOCk7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gMHg4MCB8ICgodSA+PiAxMikgJiA2Myk7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gMHg4MCB8ICgodSA+PiA2KSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKHUgJiA2Myk7CiAgICB9IGVsc2UgaWYgKHUgPD0gMHgzRkZGRkZGKSB7CiAgICAgIGlmIChvdXRJZHggKyA0ID49IGVuZElkeCkgYnJlYWs7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gMHhGOCB8ICh1ID4+IDI0KTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDE4KSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDEyKSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDYpICYgNjMpOwogICAgICBvdXRVOEFycmF5W291dElkeCsrXSA9IDB4ODAgfCAodSAmIDYzKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChvdXRJZHggKyA1ID49IGVuZElkeCkgYnJlYWs7CiAgICAgIG91dFU4QXJyYXlbb3V0SWR4KytdID0gMHhGQyB8ICh1ID4+IDMwKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDI0KSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDE4KSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDEyKSAmIDYzKTsKICAgICAgb3V0VThBcnJheVtvdXRJZHgrK10gPSAweDgwIHwgKCh1ID4+IDYpICYgNjMpOwogICAgICBvdXRVOEFycmF5W291dElkeCsrXSA9IDB4ODAgfCAodSAmIDYzKTsKICAgIH0KICB9CiAgLy8gTnVsbC10ZXJtaW5hdGUgdGhlIHBvaW50ZXIgdG8gdGhlIGJ1ZmZlci4KICBvdXRVOEFycmF5W291dElkeF0gPSAwOwogIHJldHVybiBvdXRJZHggLSBzdGFydElkeDsKfQoKLy8gQ29waWVzIHRoZSBnaXZlbiBKYXZhc2NyaXB0IFN0cmluZyBvYmplY3QgJ3N0cicgdG8gdGhlIGVtc2NyaXB0ZW4gSEVBUCBhdCBhZGRyZXNzICdvdXRQdHInLAovLyBudWxsLXRlcm1pbmF0ZWQgYW5kIGVuY29kZWQgaW4gVVRGOCBmb3JtLiBUaGUgY29weSB3aWxsIHJlcXVpcmUgYXQgbW9zdCBzdHIubGVuZ3RoKjQrMSBieXRlcyBvZiBzcGFjZSBpbiB0aGUgSEVBUC4KLy8gVXNlIHRoZSBmdW5jdGlvbiBsZW5ndGhCeXRlc1VURjggdG8gY29tcHV0ZSB0aGUgZXhhY3QgbnVtYmVyIG9mIGJ5dGVzIChleGNsdWRpbmcgbnVsbCB0ZXJtaW5hdG9yKSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCB3cml0ZS4KLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4sIEVYQ0xVRElORyB0aGUgbnVsbCB0ZXJtaW5hdG9yLgoKZnVuY3Rpb24gc3RyaW5nVG9VVEY4KHN0ciwgb3V0UHRyLCBtYXhCeXRlc1RvV3JpdGUpIHsKICBhc3NlcnQodHlwZW9mIG1heEJ5dGVzVG9Xcml0ZSA9PSAnbnVtYmVyJywgJ3N0cmluZ1RvVVRGOChzdHIsIG91dFB0ciwgbWF4Qnl0ZXNUb1dyaXRlKSBpcyBtaXNzaW5nIHRoZSB0aGlyZCBwYXJhbWV0ZXIgdGhhdCBzcGVjaWZpZXMgdGhlIGxlbmd0aCBvZiB0aGUgb3V0cHV0IGJ1ZmZlciEnKTsKICByZXR1cm4gc3RyaW5nVG9VVEY4QXJyYXkoc3RyLCBIRUFQVTgsb3V0UHRyLCBtYXhCeXRlc1RvV3JpdGUpOwp9CgovLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgdGhlIGdpdmVuIEphdmFzY3JpcHQgc3RyaW5nIHRha2VzIGlmIGVuY29kZWQgYXMgYSBVVEY4IGJ5dGUgYXJyYXksIEVYQ0xVRElORyB0aGUgbnVsbCB0ZXJtaW5hdG9yIGJ5dGUuCgpmdW5jdGlvbiBsZW5ndGhCeXRlc1VURjgoc3RyKSB7CiAgdmFyIGxlbiA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIC8vIEdvdGNoYTogY2hhckNvZGVBdCByZXR1cm5zIGEgMTYtYml0IHdvcmQgdGhhdCBpcyBhIFVURi0xNiBlbmNvZGVkIGNvZGUgdW5pdCwgbm90IGEgVW5pY29kZSBjb2RlIHBvaW50IG9mIHRoZSBjaGFyYWN0ZXIhIFNvIGRlY29kZSBVVEYxNi0+VVRGMzItPlVURjguCiAgICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL2ZhcS91dGZfYm9tLmh0bWwjdXRmMTYtMwogICAgdmFyIHUgPSBzdHIuY2hhckNvZGVBdChpKTsgLy8gcG9zc2libHkgYSBsZWFkIHN1cnJvZ2F0ZQogICAgaWYgKHUgPj0gMHhEODAwICYmIHUgPD0gMHhERkZGKSB1ID0gMHgxMDAwMCArICgodSAmIDB4M0ZGKSA8PCAxMCkgfCAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4M0ZGKTsKICAgIGlmICh1IDw9IDB4N0YpIHsKICAgICAgKytsZW47CiAgICB9IGVsc2UgaWYgKHUgPD0gMHg3RkYpIHsKICAgICAgbGVuICs9IDI7CiAgICB9IGVsc2UgaWYgKHUgPD0gMHhGRkZGKSB7CiAgICAgIGxlbiArPSAzOwogICAgfSBlbHNlIGlmICh1IDw9IDB4MUZGRkZGKSB7CiAgICAgIGxlbiArPSA0OwogICAgfSBlbHNlIGlmICh1IDw9IDB4M0ZGRkZGRikgewogICAgICBsZW4gKz0gNTsKICAgIH0gZWxzZSB7CiAgICAgIGxlbiArPSA2OwogICAgfQogIH0KICByZXR1cm4gbGVuOwp9CgovLyBHaXZlbiBhIHBvaW50ZXIgJ3B0cicgdG8gYSBudWxsLXRlcm1pbmF0ZWQgVVRGMTZMRS1lbmNvZGVkIHN0cmluZyBpbiB0aGUgZW1zY3JpcHRlbiBIRUFQLCByZXR1cm5zCi8vIGEgY29weSBvZiB0aGF0IHN0cmluZyBhcyBhIEphdmFzY3JpcHQgU3RyaW5nIG9iamVjdC4KCnZhciBVVEYxNkRlY29kZXIgPSB0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnID8gbmV3IFRleHREZWNvZGVyKCd1dGYtMTZsZScpIDogdW5kZWZpbmVkOwpmdW5jdGlvbiBVVEYxNlRvU3RyaW5nKHB0cikgewogIGFzc2VydChwdHIgJSAyID09IDAsICdQb2ludGVyIHBhc3NlZCB0byBVVEYxNlRvU3RyaW5nIG11c3QgYmUgYWxpZ25lZCB0byB0d28gYnl0ZXMhJyk7CiAgdmFyIGVuZFB0ciA9IHB0cjsKICAvLyBUZXh0RGVjb2RlciBuZWVkcyB0byBrbm93IHRoZSBieXRlIGxlbmd0aCBpbiBhZHZhbmNlLCBpdCBkb2Vzbid0IHN0b3Agb24gbnVsbCB0ZXJtaW5hdG9yIGJ5IGl0c2VsZi4KICAvLyBBbHNvLCB1c2UgdGhlIGxlbmd0aCBpbmZvIHRvIGF2b2lkIHJ1bm5pbmcgdGlueSBzdHJpbmdzIHRocm91Z2ggVGV4dERlY29kZXIsIHNpbmNlIC5zdWJhcnJheSgpIGFsbG9jYXRlcyBnYXJiYWdlLgogIHZhciBpZHggPSBlbmRQdHIgPj4gMTsKICB3aGlsZSAoSEVBUDE2W2lkeF0pICsraWR4OwogIGVuZFB0ciA9IGlkeCA8PCAxOwoKICBpZiAoZW5kUHRyIC0gcHRyID4gMzIgJiYgVVRGMTZEZWNvZGVyKSB7CiAgICByZXR1cm4gVVRGMTZEZWNvZGVyLmRlY29kZShIRUFQVTguc3ViYXJyYXkocHRyLCBlbmRQdHIpKTsKICB9IGVsc2UgewogICAgdmFyIGkgPSAwOwoKICAgIHZhciBzdHIgPSAnJzsKICAgIHdoaWxlICgxKSB7CiAgICAgIHZhciBjb2RlVW5pdCA9IEhFQVAxNlsoKChwdHIpKyhpKjIpKT4+MSldOwogICAgICBpZiAoY29kZVVuaXQgPT0gMCkgcmV0dXJuIHN0cjsKICAgICAgKytpOwogICAgICAvLyBmcm9tQ2hhckNvZGUgY29uc3RydWN0cyBhIGNoYXJhY3RlciBmcm9tIGEgVVRGLTE2IGNvZGUgdW5pdCwgc28gd2UgY2FuIHBhc3MgdGhlIFVURjE2IHN0cmluZyByaWdodCB0aHJvdWdoLgogICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlVW5pdCk7CiAgICB9CiAgfQp9CgovLyBDb3BpZXMgdGhlIGdpdmVuIEphdmFzY3JpcHQgU3RyaW5nIG9iamVjdCAnc3RyJyB0byB0aGUgZW1zY3JpcHRlbiBIRUFQIGF0IGFkZHJlc3MgJ291dFB0cicsCi8vIG51bGwtdGVybWluYXRlZCBhbmQgZW5jb2RlZCBpbiBVVEYxNiBmb3JtLiBUaGUgY29weSB3aWxsIHJlcXVpcmUgYXQgbW9zdCBzdHIubGVuZ3RoKjQrMiBieXRlcyBvZiBzcGFjZSBpbiB0aGUgSEVBUC4KLy8gVXNlIHRoZSBmdW5jdGlvbiBsZW5ndGhCeXRlc1VURjE2KCkgdG8gY29tcHV0ZSB0aGUgZXhhY3QgbnVtYmVyIG9mIGJ5dGVzIChleGNsdWRpbmcgbnVsbCB0ZXJtaW5hdG9yKSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCB3cml0ZS4KLy8gUGFyYW1ldGVyczoKLy8gICBzdHI6IHRoZSBKYXZhc2NyaXB0IHN0cmluZyB0byBjb3B5LgovLyAgIG91dFB0cjogQnl0ZSBhZGRyZXNzIGluIEVtc2NyaXB0ZW4gSEVBUCB3aGVyZSB0byB3cml0ZSB0aGUgc3RyaW5nIHRvLgovLyAgIG1heEJ5dGVzVG9Xcml0ZTogVGhlIG1heGltdW0gbnVtYmVyIG9mIGJ5dGVzIHRoaXMgZnVuY3Rpb24gY2FuIHdyaXRlIHRvIHRoZSBhcnJheS4gVGhpcyBjb3VudCBzaG91bGQgaW5jbHVkZSB0aGUgbnVsbAovLyAgICAgICAgICAgICAgICAgICAgdGVybWluYXRvciwgaS5lLiBpZiBtYXhCeXRlc1RvV3JpdGU9Miwgb25seSB0aGUgbnVsbCB0ZXJtaW5hdG9yIHdpbGwgYmUgd3JpdHRlbiBhbmQgbm90aGluZyBlbHNlLgovLyAgICAgICAgICAgICAgICAgICAgbWF4Qnl0ZXNUb1dyaXRlPDIgZG9lcyBub3Qgd3JpdGUgYW55IGJ5dGVzIHRvIHRoZSBvdXRwdXQsIG5vdCBldmVuIHRoZSBudWxsIHRlcm1pbmF0b3IuCi8vIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuLCBFWENMVURJTkcgdGhlIG51bGwgdGVybWluYXRvci4KCmZ1bmN0aW9uIHN0cmluZ1RvVVRGMTYoc3RyLCBvdXRQdHIsIG1heEJ5dGVzVG9Xcml0ZSkgewogIGFzc2VydChvdXRQdHIgJSAyID09IDAsICdQb2ludGVyIHBhc3NlZCB0byBzdHJpbmdUb1VURjE2IG11c3QgYmUgYWxpZ25lZCB0byB0d28gYnl0ZXMhJyk7CiAgYXNzZXJ0KHR5cGVvZiBtYXhCeXRlc1RvV3JpdGUgPT0gJ251bWJlcicsICdzdHJpbmdUb1VURjE2KHN0ciwgb3V0UHRyLCBtYXhCeXRlc1RvV3JpdGUpIGlzIG1pc3NpbmcgdGhlIHRoaXJkIHBhcmFtZXRlciB0aGF0IHNwZWNpZmllcyB0aGUgbGVuZ3RoIG9mIHRoZSBvdXRwdXQgYnVmZmVyIScpOwogIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5OiBpZiBtYXggYnl0ZXMgaXMgbm90IHNwZWNpZmllZCwgYXNzdW1lIHVuc2FmZSB1bmJvdW5kZWQgd3JpdGUgaXMgYWxsb3dlZC4KICBpZiAobWF4Qnl0ZXNUb1dyaXRlID09PSB1bmRlZmluZWQpIHsKICAgIG1heEJ5dGVzVG9Xcml0ZSA9IDB4N0ZGRkZGRkY7CiAgfQogIGlmIChtYXhCeXRlc1RvV3JpdGUgPCAyKSByZXR1cm4gMDsKICBtYXhCeXRlc1RvV3JpdGUgLT0gMjsgLy8gTnVsbCB0ZXJtaW5hdG9yLgogIHZhciBzdGFydFB0ciA9IG91dFB0cjsKICB2YXIgbnVtQ2hhcnNUb1dyaXRlID0gKG1heEJ5dGVzVG9Xcml0ZSA8IHN0ci5sZW5ndGgqMikgPyAobWF4Qnl0ZXNUb1dyaXRlIC8gMikgOiBzdHIubGVuZ3RoOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQ2hhcnNUb1dyaXRlOyArK2kpIHsKICAgIC8vIGNoYXJDb2RlQXQgcmV0dXJucyBhIFVURi0xNiBlbmNvZGVkIGNvZGUgdW5pdCwgc28gaXQgY2FuIGJlIGRpcmVjdGx5IHdyaXR0ZW4gdG8gdGhlIEhFQVAuCiAgICB2YXIgY29kZVVuaXQgPSBzdHIuY2hhckNvZGVBdChpKTsgLy8gcG9zc2libHkgYSBsZWFkIHN1cnJvZ2F0ZQogICAgSEVBUDE2Wygob3V0UHRyKT4+MSldPWNvZGVVbml0OwogICAgb3V0UHRyICs9IDI7CiAgfQogIC8vIE51bGwtdGVybWluYXRlIHRoZSBwb2ludGVyIHRvIHRoZSBIRUFQLgogIEhFQVAxNlsoKG91dFB0cik+PjEpXT0wOwogIHJldHVybiBvdXRQdHIgLSBzdGFydFB0cjsKfQoKLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRoZSBnaXZlbiBKYXZhc2NyaXB0IHN0cmluZyB0YWtlcyBpZiBlbmNvZGVkIGFzIGEgVVRGMTYgYnl0ZSBhcnJheSwgRVhDTFVESU5HIHRoZSBudWxsIHRlcm1pbmF0b3IgYnl0ZS4KCmZ1bmN0aW9uIGxlbmd0aEJ5dGVzVVRGMTYoc3RyKSB7CiAgcmV0dXJuIHN0ci5sZW5ndGgqMjsKfQoKZnVuY3Rpb24gVVRGMzJUb1N0cmluZyhwdHIpIHsKICBhc3NlcnQocHRyICUgNCA9PSAwLCAnUG9pbnRlciBwYXNzZWQgdG8gVVRGMzJUb1N0cmluZyBtdXN0IGJlIGFsaWduZWQgdG8gZm91ciBieXRlcyEnKTsKICB2YXIgaSA9IDA7CgogIHZhciBzdHIgPSAnJzsKICB3aGlsZSAoMSkgewogICAgdmFyIHV0ZjMyID0gSEVBUDMyWygoKHB0cikrKGkqNCkpPj4yKV07CiAgICBpZiAodXRmMzIgPT0gMCkKICAgICAgcmV0dXJuIHN0cjsKICAgICsraTsKICAgIC8vIEdvdGNoYTogZnJvbUNoYXJDb2RlIGNvbnN0cnVjdHMgYSBjaGFyYWN0ZXIgZnJvbSBhIFVURi0xNiBlbmNvZGVkIGNvZGUgKHBhaXIpLCBub3QgZnJvbSBhIFVuaWNvZGUgY29kZSBwb2ludCEgU28gZW5jb2RlIHRoZSBjb2RlIHBvaW50IHRvIFVURi0xNiBmb3IgY29uc3RydWN0aW5nLgogICAgLy8gU2VlIGh0dHA6Ly91bmljb2RlLm9yZy9mYXEvdXRmX2JvbS5odG1sI3V0ZjE2LTMKICAgIGlmICh1dGYzMiA+PSAweDEwMDAwKSB7CiAgICAgIHZhciBjaCA9IHV0ZjMyIC0gMHgxMDAwMDsKICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhEODAwIHwgKGNoID4+IDEwKSwgMHhEQzAwIHwgKGNoICYgMHgzRkYpKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHV0ZjMyKTsKICAgIH0KICB9Cn0KCi8vIENvcGllcyB0aGUgZ2l2ZW4gSmF2YXNjcmlwdCBTdHJpbmcgb2JqZWN0ICdzdHInIHRvIHRoZSBlbXNjcmlwdGVuIEhFQVAgYXQgYWRkcmVzcyAnb3V0UHRyJywKLy8gbnVsbC10ZXJtaW5hdGVkIGFuZCBlbmNvZGVkIGluIFVURjMyIGZvcm0uIFRoZSBjb3B5IHdpbGwgcmVxdWlyZSBhdCBtb3N0IHN0ci5sZW5ndGgqNCs0IGJ5dGVzIG9mIHNwYWNlIGluIHRoZSBIRUFQLgovLyBVc2UgdGhlIGZ1bmN0aW9uIGxlbmd0aEJ5dGVzVVRGMzIoKSB0byBjb21wdXRlIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgKGV4Y2x1ZGluZyBudWxsIHRlcm1pbmF0b3IpIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIHdyaXRlLgovLyBQYXJhbWV0ZXJzOgovLyAgIHN0cjogdGhlIEphdmFzY3JpcHQgc3RyaW5nIHRvIGNvcHkuCi8vICAgb3V0UHRyOiBCeXRlIGFkZHJlc3MgaW4gRW1zY3JpcHRlbiBIRUFQIHdoZXJlIHRvIHdyaXRlIHRoZSBzdHJpbmcgdG8uCi8vICAgbWF4Qnl0ZXNUb1dyaXRlOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgYnl0ZXMgdGhpcyBmdW5jdGlvbiBjYW4gd3JpdGUgdG8gdGhlIGFycmF5LiBUaGlzIGNvdW50IHNob3VsZCBpbmNsdWRlIHRoZSBudWxsCi8vICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hdG9yLCBpLmUuIGlmIG1heEJ5dGVzVG9Xcml0ZT00LCBvbmx5IHRoZSBudWxsIHRlcm1pbmF0b3Igd2lsbCBiZSB3cml0dGVuIGFuZCBub3RoaW5nIGVsc2UuCi8vICAgICAgICAgICAgICAgICAgICBtYXhCeXRlc1RvV3JpdGU8NCBkb2VzIG5vdCB3cml0ZSBhbnkgYnl0ZXMgdG8gdGhlIG91dHB1dCwgbm90IGV2ZW4gdGhlIG51bGwgdGVybWluYXRvci4KLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4sIEVYQ0xVRElORyB0aGUgbnVsbCB0ZXJtaW5hdG9yLgoKZnVuY3Rpb24gc3RyaW5nVG9VVEYzMihzdHIsIG91dFB0ciwgbWF4Qnl0ZXNUb1dyaXRlKSB7CiAgYXNzZXJ0KG91dFB0ciAlIDQgPT0gMCwgJ1BvaW50ZXIgcGFzc2VkIHRvIHN0cmluZ1RvVVRGMzIgbXVzdCBiZSBhbGlnbmVkIHRvIGZvdXIgYnl0ZXMhJyk7CiAgYXNzZXJ0KHR5cGVvZiBtYXhCeXRlc1RvV3JpdGUgPT0gJ251bWJlcicsICdzdHJpbmdUb1VURjMyKHN0ciwgb3V0UHRyLCBtYXhCeXRlc1RvV3JpdGUpIGlzIG1pc3NpbmcgdGhlIHRoaXJkIHBhcmFtZXRlciB0aGF0IHNwZWNpZmllcyB0aGUgbGVuZ3RoIG9mIHRoZSBvdXRwdXQgYnVmZmVyIScpOwogIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5OiBpZiBtYXggYnl0ZXMgaXMgbm90IHNwZWNpZmllZCwgYXNzdW1lIHVuc2FmZSB1bmJvdW5kZWQgd3JpdGUgaXMgYWxsb3dlZC4KICBpZiAobWF4Qnl0ZXNUb1dyaXRlID09PSB1bmRlZmluZWQpIHsKICAgIG1heEJ5dGVzVG9Xcml0ZSA9IDB4N0ZGRkZGRkY7CiAgfQogIGlmIChtYXhCeXRlc1RvV3JpdGUgPCA0KSByZXR1cm4gMDsKICB2YXIgc3RhcnRQdHIgPSBvdXRQdHI7CiAgdmFyIGVuZFB0ciA9IHN0YXJ0UHRyICsgbWF4Qnl0ZXNUb1dyaXRlIC0gNDsKICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkgewogICAgLy8gR290Y2hhOiBjaGFyQ29kZUF0IHJldHVybnMgYSAxNi1iaXQgd29yZCB0aGF0IGlzIGEgVVRGLTE2IGVuY29kZWQgY29kZSB1bml0LCBub3QgYSBVbmljb2RlIGNvZGUgcG9pbnQgb2YgdGhlIGNoYXJhY3RlciEgV2UgbXVzdCBkZWNvZGUgdGhlIHN0cmluZyB0byBVVEYtMzIgdG8gdGhlIGhlYXAuCiAgICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL2ZhcS91dGZfYm9tLmh0bWwjdXRmMTYtMwogICAgdmFyIGNvZGVVbml0ID0gc3RyLmNoYXJDb2RlQXQoaSk7IC8vIHBvc3NpYmx5IGEgbGVhZCBzdXJyb2dhdGUKICAgIGlmIChjb2RlVW5pdCA+PSAweEQ4MDAgJiYgY29kZVVuaXQgPD0gMHhERkZGKSB7CiAgICAgIHZhciB0cmFpbFN1cnJvZ2F0ZSA9IHN0ci5jaGFyQ29kZUF0KCsraSk7CiAgICAgIGNvZGVVbml0ID0gMHgxMDAwMCArICgoY29kZVVuaXQgJiAweDNGRikgPDwgMTApIHwgKHRyYWlsU3Vycm9nYXRlICYgMHgzRkYpOwogICAgfQogICAgSEVBUDMyWygob3V0UHRyKT4+MildPWNvZGVVbml0OwogICAgb3V0UHRyICs9IDQ7CiAgICBpZiAob3V0UHRyICsgNCA+IGVuZFB0cikgYnJlYWs7CiAgfQogIC8vIE51bGwtdGVybWluYXRlIHRoZSBwb2ludGVyIHRvIHRoZSBIRUFQLgogIEhFQVAzMlsoKG91dFB0cik+PjIpXT0wOwogIHJldHVybiBvdXRQdHIgLSBzdGFydFB0cjsKfQoKLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRoZSBnaXZlbiBKYXZhc2NyaXB0IHN0cmluZyB0YWtlcyBpZiBlbmNvZGVkIGFzIGEgVVRGMTYgYnl0ZSBhcnJheSwgRVhDTFVESU5HIHRoZSBudWxsIHRlcm1pbmF0b3IgYnl0ZS4KCmZ1bmN0aW9uIGxlbmd0aEJ5dGVzVVRGMzIoc3RyKSB7CiAgdmFyIGxlbiA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIC8vIEdvdGNoYTogY2hhckNvZGVBdCByZXR1cm5zIGEgMTYtYml0IHdvcmQgdGhhdCBpcyBhIFVURi0xNiBlbmNvZGVkIGNvZGUgdW5pdCwgbm90IGEgVW5pY29kZSBjb2RlIHBvaW50IG9mIHRoZSBjaGFyYWN0ZXIhIFdlIG11c3QgZGVjb2RlIHRoZSBzdHJpbmcgdG8gVVRGLTMyIHRvIHRoZSBoZWFwLgogICAgLy8gU2VlIGh0dHA6Ly91bmljb2RlLm9yZy9mYXEvdXRmX2JvbS5odG1sI3V0ZjE2LTMKICAgIHZhciBjb2RlVW5pdCA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgaWYgKGNvZGVVbml0ID49IDB4RDgwMCAmJiBjb2RlVW5pdCA8PSAweERGRkYpICsraTsgLy8gcG9zc2libHkgYSBsZWFkIHN1cnJvZ2F0ZSwgc28gc2tpcCBvdmVyIHRoZSB0YWlsIHN1cnJvZ2F0ZS4KICAgIGxlbiArPSA0OwogIH0KCiAgcmV0dXJuIGxlbjsKfQoKLy8gQWxsb2NhdGUgaGVhcCBzcGFjZSBmb3IgYSBKUyBzdHJpbmcsIGFuZCB3cml0ZSBpdCB0aGVyZS4KLy8gSXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBjYWxsZXIgdG8gZnJlZSgpIHRoYXQgbWVtb3J5LgpmdW5jdGlvbiBhbGxvY2F0ZVVURjgoc3RyKSB7CiAgdmFyIHNpemUgPSBsZW5ndGhCeXRlc1VURjgoc3RyKSArIDE7CiAgdmFyIHJldCA9IF9tYWxsb2Moc2l6ZSk7CiAgaWYgKHJldCkgc3RyaW5nVG9VVEY4QXJyYXkoc3RyLCBIRUFQOCwgcmV0LCBzaXplKTsKICByZXR1cm4gcmV0Owp9CgovLyBBbGxvY2F0ZSBzdGFjayBzcGFjZSBmb3IgYSBKUyBzdHJpbmcsIGFuZCB3cml0ZSBpdCB0aGVyZS4KZnVuY3Rpb24gYWxsb2NhdGVVVEY4T25TdGFjayhzdHIpIHsKICB2YXIgc2l6ZSA9IGxlbmd0aEJ5dGVzVVRGOChzdHIpICsgMTsKICB2YXIgcmV0ID0gc3RhY2tBbGxvYyhzaXplKTsKICBzdHJpbmdUb1VURjhBcnJheShzdHIsIEhFQVA4LCByZXQsIHNpemUpOwogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGRlbWFuZ2xlKGZ1bmMpIHsKICB3YXJuT25jZSgnd2FybmluZzogYnVpbGQgd2l0aCAgLXMgREVNQU5HTEVfU1VQUE9SVD0xICB0byBsaW5rIGluIGxpYmN4eGFiaSBkZW1hbmdsaW5nJyk7CiAgcmV0dXJuIGZ1bmM7Cn0KCmZ1bmN0aW9uIGRlbWFuZ2xlQWxsKHRleHQpIHsKICB2YXIgcmVnZXggPQogICAgL19fWltcd1xkX10rL2c7CiAgcmV0dXJuIHRleHQucmVwbGFjZShyZWdleCwKICAgIGZ1bmN0aW9uKHgpIHsKICAgICAgdmFyIHkgPSBkZW1hbmdsZSh4KTsKICAgICAgcmV0dXJuIHggPT09IHkgPyB4IDogKHggKyAnIFsnICsgeSArICddJyk7CiAgICB9KTsKfQoKZnVuY3Rpb24ganNTdGFja1RyYWNlKCkgewogIHZhciBlcnIgPSBuZXcgRXJyb3IoKTsKICBpZiAoIWVyci5zdGFjaykgewogICAgLy8gSUUxMCsgc3BlY2lhbCBjYXNlczogSXQgZG9lcyBoYXZlIGNhbGxzdGFjayBpbmZvLCBidXQgaXQgaXMgb25seSBwb3B1bGF0ZWQgaWYgYW4gRXJyb3Igb2JqZWN0IGlzIHRocm93biwKICAgIC8vIHNvIHRyeSB0aGF0IGFzIGEgc3BlY2lhbC1jYXNlLgogICAgdHJ5IHsKICAgICAgdGhyb3cgbmV3IEVycm9yKDApOwogICAgfSBjYXRjaChlKSB7CiAgICAgIGVyciA9IGU7CiAgICB9CiAgICBpZiAoIWVyci5zdGFjaykgewogICAgICByZXR1cm4gJyhubyBzdGFjayB0cmFjZSBhdmFpbGFibGUpJzsKICAgIH0KICB9CiAgcmV0dXJuIGVyci5zdGFjay50b1N0cmluZygpOwp9CgpmdW5jdGlvbiBzdGFja1RyYWNlKCkgewogIHZhciBqcyA9IGpzU3RhY2tUcmFjZSgpOwogIGlmIChNb2R1bGVbJ2V4dHJhU3RhY2tUcmFjZSddKSBqcyArPSAnXG4nICsgTW9kdWxlWydleHRyYVN0YWNrVHJhY2UnXSgpOwogIHJldHVybiBkZW1hbmdsZUFsbChqcyk7Cn0KCi8vIE1lbW9yeSBtYW5hZ2VtZW50Cgp2YXIgUEFHRV9TSVpFID0gMTYzODQ7CnZhciBXQVNNX1BBR0VfU0laRSA9IDY1NTM2Owp2YXIgQVNNSlNfUEFHRV9TSVpFID0gMTY3NzcyMTY7CnZhciBNSU5fVE9UQUxfTUVNT1JZID0gMTY3NzcyMTY7CgpmdW5jdGlvbiBhbGlnblVwKHgsIG11bHRpcGxlKSB7CiAgaWYgKHggJSBtdWx0aXBsZSA+IDApIHsKICAgIHggKz0gbXVsdGlwbGUgLSAoeCAlIG11bHRpcGxlKTsKICB9CiAgcmV0dXJuIHg7Cn0KCnZhciBIRUFQLAovKiogQHR5cGUge0FycmF5QnVmZmVyfSAqLwogIGJ1ZmZlciwKLyoqIEB0eXBlIHtJbnQ4QXJyYXl9ICovCiAgSEVBUDgsCi8qKiBAdHlwZSB7VWludDhBcnJheX0gKi8KICBIRUFQVTgsCi8qKiBAdHlwZSB7SW50MTZBcnJheX0gKi8KICBIRUFQMTYsCi8qKiBAdHlwZSB7VWludDE2QXJyYXl9ICovCiAgSEVBUFUxNiwKLyoqIEB0eXBlIHtJbnQzMkFycmF5fSAqLwogIEhFQVAzMiwKLyoqIEB0eXBlIHtVaW50MzJBcnJheX0gKi8KICBIRUFQVTMyLAovKiogQHR5cGUge0Zsb2F0MzJBcnJheX0gKi8KICBIRUFQRjMyLAovKiogQHR5cGUge0Zsb2F0NjRBcnJheX0gKi8KICBIRUFQRjY0OwoKZnVuY3Rpb24gdXBkYXRlR2xvYmFsQnVmZmVyKGJ1ZikgewogIE1vZHVsZVsnYnVmZmVyJ10gPSBidWZmZXIgPSBidWY7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCkgewogIE1vZHVsZVsnSEVBUDgnXSA9IEhFQVA4ID0gbmV3IEludDhBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUDE2J10gPSBIRUFQMTYgPSBuZXcgSW50MTZBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUDMyJ10gPSBIRUFQMzIgPSBuZXcgSW50MzJBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUFU4J10gPSBIRUFQVTggPSBuZXcgVWludDhBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUFUxNiddID0gSEVBUFUxNiA9IG5ldyBVaW50MTZBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUFUzMiddID0gSEVBUFUzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpOwogIE1vZHVsZVsnSEVBUEYzMiddID0gSEVBUEYzMiA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTsKICBNb2R1bGVbJ0hFQVBGNjQnXSA9IEhFQVBGNjQgPSBuZXcgRmxvYXQ2NEFycmF5KGJ1ZmZlcik7Cn0KCnZhciBTVEFUSUNfQkFTRSwgU1RBVElDVE9QLCBzdGF0aWNTZWFsZWQ7IC8vIHN0YXRpYyBhcmVhCnZhciBTVEFDS19CQVNFLCBTVEFDS1RPUCwgU1RBQ0tfTUFYOyAvLyBzdGFjayBhcmVhCnZhciBEWU5BTUlDX0JBU0UsIERZTkFNSUNUT1BfUFRSOyAvLyBkeW5hbWljIGFyZWEgaGFuZGxlZCBieSBzYnJrCgogIFNUQVRJQ19CQVNFID0gU1RBVElDVE9QID0gU1RBQ0tfQkFTRSA9IFNUQUNLVE9QID0gU1RBQ0tfTUFYID0gRFlOQU1JQ19CQVNFID0gRFlOQU1JQ1RPUF9QVFIgPSAwOwogIHN0YXRpY1NlYWxlZCA9IGZhbHNlOwoKCi8vIEluaXRpYWxpemVzIHRoZSBzdGFjayBjb29raWUuIENhbGxlZCBhdCB0aGUgc3RhcnR1cCBvZiBtYWluIGFuZCBhdCB0aGUgc3RhcnR1cCBvZiBlYWNoIHRocmVhZCBpbiBwdGhyZWFkcyBtb2RlLgpmdW5jdGlvbiB3cml0ZVN0YWNrQ29va2llKCkgewogIGFzc2VydCgoU1RBQ0tfTUFYICYgMykgPT0gMCk7CiAgSEVBUFUzMlsoU1RBQ0tfTUFYID4+IDIpLTFdID0gMHgwMjEzNTQ2NzsKICBIRUFQVTMyWyhTVEFDS19NQVggPj4gMiktMl0gPSAweDg5QkFDREZFOwp9CgpmdW5jdGlvbiBjaGVja1N0YWNrQ29va2llKCkgewogIGlmIChIRUFQVTMyWyhTVEFDS19NQVggPj4gMiktMV0gIT0gMHgwMjEzNTQ2NyB8fCBIRUFQVTMyWyhTVEFDS19NQVggPj4gMiktMl0gIT0gMHg4OUJBQ0RGRSkgewogICAgYWJvcnQoJ1N0YWNrIG92ZXJmbG93ISBTdGFjayBjb29raWUgaGFzIGJlZW4gb3ZlcndyaXR0ZW4sIGV4cGVjdGVkIGhleCBkd29yZHMgMHg4OUJBQ0RGRSBhbmQgMHgwMjEzNTQ2NywgYnV0IHJlY2VpdmVkIDB4JyArIEhFQVBVMzJbKFNUQUNLX01BWCA+PiAyKS0yXS50b1N0cmluZygxNikgKyAnICcgKyBIRUFQVTMyWyhTVEFDS19NQVggPj4gMiktMV0udG9TdHJpbmcoMTYpKTsKICB9CiAgLy8gQWxzbyB0ZXN0IHRoZSBnbG9iYWwgYWRkcmVzcyAwIGZvciBpbnRlZ3JpdHkuIFRoaXMgY2hlY2sgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBTQUZFX1NQTElUX01FTU9SWSB0aG91Z2gsIHNpbmNlIHRoYXQgbW9kZSBhbHJlYWR5IHRlc3RzIGFsbCBhZGRyZXNzIDAgYWNjZXNzZXMgb24gaXRzIG93bi4KICBpZiAoSEVBUDMyWzBdICE9PSAweDYzNzM2ZDY1IC8qICdlbXNjJyAqLykgdGhyb3cgJ1J1bnRpbWUgZXJyb3I6IFRoZSBhcHBsaWNhdGlvbiBoYXMgY29ycnVwdGVkIGl0cyBoZWFwIG1lbW9yeSBhcmVhIChhZGRyZXNzIHplcm8pISc7Cn0KCmZ1bmN0aW9uIGFib3J0U3RhY2tPdmVyZmxvdyhhbGxvY1NpemUpIHsKICBhYm9ydCgnU3RhY2sgb3ZlcmZsb3chIEF0dGVtcHRlZCB0byBhbGxvY2F0ZSAnICsgYWxsb2NTaXplICsgJyBieXRlcyBvbiB0aGUgc3RhY2ssIGJ1dCBzdGFjayBoYXMgb25seSAnICsgKFNUQUNLX01BWCAtIHN0YWNrU2F2ZSgpICsgYWxsb2NTaXplKSArICcgYnl0ZXMgYXZhaWxhYmxlIScpOwp9CgpmdW5jdGlvbiBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeSgpIHsKICBhYm9ydCgnQ2Fubm90IGVubGFyZ2UgbWVtb3J5IGFycmF5cy4gRWl0aGVyICgxKSBjb21waWxlIHdpdGggIC1zIFRPVEFMX01FTU9SWT1YICB3aXRoIFggaGlnaGVyIHRoYW4gdGhlIGN1cnJlbnQgdmFsdWUgJyArIFRPVEFMX01FTU9SWSArICcsICgyKSBjb21waWxlIHdpdGggIC1zIEFMTE9XX01FTU9SWV9HUk9XVEg9MSAgd2hpY2ggYWxsb3dzIGluY3JlYXNpbmcgdGhlIHNpemUgYXQgcnVudGltZSBidXQgcHJldmVudHMgc29tZSBvcHRpbWl6YXRpb25zLCAoMykgc2V0IE1vZHVsZS5UT1RBTF9NRU1PUlkgdG8gYSBoaWdoZXIgdmFsdWUgYmVmb3JlIHRoZSBwcm9ncmFtIHJ1bnMsIG9yICg0KSBpZiB5b3Ugd2FudCBtYWxsb2MgdG8gcmV0dXJuIE5VTEwgKDApIGluc3RlYWQgb2YgdGhpcyBhYm9ydCwgY29tcGlsZSB3aXRoICAtcyBBQk9SVElOR19NQUxMT0M9MCAnKTsKfQoKCmZ1bmN0aW9uIGVubGFyZ2VNZW1vcnkoKSB7CiAgYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnkoKTsKfQoKCnZhciBUT1RBTF9TVEFDSyA9IE1vZHVsZVsnVE9UQUxfU1RBQ0snXSB8fCA1MjQyODgwOwp2YXIgVE9UQUxfTUVNT1JZID0gTW9kdWxlWydUT1RBTF9NRU1PUlknXSB8fCAxNjc3NzIxNjsKaWYgKFRPVEFMX01FTU9SWSA8IFRPVEFMX1NUQUNLKSBNb2R1bGUucHJpbnRFcnIoJ1RPVEFMX01FTU9SWSBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gVE9UQUxfU1RBQ0ssIHdhcyAnICsgVE9UQUxfTUVNT1JZICsgJyEgKFRPVEFMX1NUQUNLPScgKyBUT1RBTF9TVEFDSyArICcpJyk7CgovLyBJbml0aWFsaXplIHRoZSBydW50aW1lJ3MgbWVtb3J5Ci8vIGNoZWNrIGZvciBmdWxsIGVuZ2luZSBzdXBwb3J0ICh1c2Ugc3RyaW5nICdzdWJhcnJheScgdG8gYXZvaWQgY2xvc3VyZSBjb21waWxlciBjb25mdXNpb24pCmFzc2VydCh0eXBlb2YgSW50MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEZsb2F0NjRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgSW50MzJBcnJheS5wcm90b3R5cGUuc3ViYXJyYXkgIT09IHVuZGVmaW5lZCAmJiBJbnQzMkFycmF5LnByb3RvdHlwZS5zZXQgIT09IHVuZGVmaW5lZCwKICAgICAgICdKUyBlbmdpbmUgZG9lcyBub3QgcHJvdmlkZSBmdWxsIHR5cGVkIGFycmF5IHN1cHBvcnQnKTsKCgoKLy8gVXNlIGEgcHJvdmlkZWQgYnVmZmVyLCBpZiB0aGVyZSBpcyBvbmUsIG9yIGVsc2UgYWxsb2NhdGUgYSBuZXcgb25lCmlmIChNb2R1bGVbJ2J1ZmZlciddKSB7CiAgYnVmZmVyID0gTW9kdWxlWydidWZmZXInXTsKICBhc3NlcnQoYnVmZmVyLmJ5dGVMZW5ndGggPT09IFRPVEFMX01FTU9SWSwgJ3Byb3ZpZGVkIGJ1ZmZlciBzaG91bGQgYmUgJyArIFRPVEFMX01FTU9SWSArICcgYnl0ZXMsIGJ1dCBpdCBpcyAnICsgYnVmZmVyLmJ5dGVMZW5ndGgpOwp9IGVsc2UgewogIC8vIFVzZSBhIFdlYkFzc2VtYmx5IG1lbW9yeSB3aGVyZSBhdmFpbGFibGUKICB7CiAgICBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoVE9UQUxfTUVNT1JZKTsKICB9CiAgYXNzZXJ0KGJ1ZmZlci5ieXRlTGVuZ3RoID09PSBUT1RBTF9NRU1PUlkpOwogIE1vZHVsZVsnYnVmZmVyJ10gPSBidWZmZXI7Cn0KdXBkYXRlR2xvYmFsQnVmZmVyVmlld3MoKTsKCgpmdW5jdGlvbiBnZXRUb3RhbE1lbW9yeSgpIHsKICByZXR1cm4gVE9UQUxfTUVNT1JZOwp9CgovLyBFbmRpYW5uZXNzIGNoZWNrIChub3RlOiBhc3N1bWVzIGNvbXBpbGVyIGFyY2ggd2FzIGxpdHRsZS1lbmRpYW4pCiAgSEVBUDMyWzBdID0gMHg2MzczNmQ2NTsgLyogJ2Vtc2MnICovCkhFQVAxNlsxXSA9IDB4NjM3MzsKaWYgKEhFQVBVOFsyXSAhPT0gMHg3MyB8fCBIRUFQVThbM10gIT09IDB4NjMpIHRocm93ICdSdW50aW1lIGVycm9yOiBleHBlY3RlZCB0aGUgc3lzdGVtIHRvIGJlIGxpdHRsZS1lbmRpYW4hJzsKCmZ1bmN0aW9uIGNhbGxSdW50aW1lQ2FsbGJhY2tzKGNhbGxiYWNrcykgewogIHdoaWxlKGNhbGxiYWNrcy5sZW5ndGggPiAwKSB7CiAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFja3Muc2hpZnQoKTsKICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykgewogICAgICBjYWxsYmFjaygpOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHZhciBmdW5jID0gY2FsbGJhY2suZnVuYzsKICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ251bWJlcicpIHsKICAgICAgaWYgKGNhbGxiYWNrLmFyZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgTW9kdWxlWydkeW5DYWxsX3YnXShmdW5jKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBNb2R1bGVbJ2R5bkNhbGxfdmknXShmdW5jLCBjYWxsYmFjay5hcmcpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBmdW5jKGNhbGxiYWNrLmFyZyA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNhbGxiYWNrLmFyZyk7CiAgICB9CiAgfQp9Cgp2YXIgX19BVFBSRVJVTl9fICA9IFtdOyAvLyBmdW5jdGlvbnMgY2FsbGVkIGJlZm9yZSB0aGUgcnVudGltZSBpcyBpbml0aWFsaXplZAp2YXIgX19BVElOSVRfXyAgICA9IFtdOyAvLyBmdW5jdGlvbnMgY2FsbGVkIGR1cmluZyBzdGFydHVwCnZhciBfX0FUTUFJTl9fICAgID0gW107IC8vIGZ1bmN0aW9ucyBjYWxsZWQgd2hlbiBtYWluKCkgaXMgdG8gYmUgcnVuCnZhciBfX0FURVhJVF9fICAgID0gW107IC8vIGZ1bmN0aW9ucyBjYWxsZWQgZHVyaW5nIHNodXRkb3duCnZhciBfX0FUUE9TVFJVTl9fID0gW107IC8vIGZ1bmN0aW9ucyBjYWxsZWQgYWZ0ZXIgdGhlIHJ1bnRpbWUgaGFzIGV4aXRlZAoKdmFyIHJ1bnRpbWVJbml0aWFsaXplZCA9IGZhbHNlOwp2YXIgcnVudGltZUV4aXRlZCA9IGZhbHNlOwoKCmZ1bmN0aW9uIHByZVJ1bigpIHsKICAvLyBjb21wYXRpYmlsaXR5IC0gbWVyZ2UgaW4gYW55dGhpbmcgZnJvbSBNb2R1bGVbJ3ByZVJ1biddIGF0IHRoaXMgdGltZQogIGlmIChNb2R1bGVbJ3ByZVJ1biddKSB7CiAgICBpZiAodHlwZW9mIE1vZHVsZVsncHJlUnVuJ10gPT0gJ2Z1bmN0aW9uJykgTW9kdWxlWydwcmVSdW4nXSA9IFtNb2R1bGVbJ3ByZVJ1biddXTsKICAgIHdoaWxlIChNb2R1bGVbJ3ByZVJ1biddLmxlbmd0aCkgewogICAgICBhZGRPblByZVJ1bihNb2R1bGVbJ3ByZVJ1biddLnNoaWZ0KCkpOwogICAgfQogIH0KICBjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUUFJFUlVOX18pOwp9CgpmdW5jdGlvbiBlbnN1cmVJbml0UnVudGltZSgpIHsKICBjaGVja1N0YWNrQ29va2llKCk7CiAgaWYgKHJ1bnRpbWVJbml0aWFsaXplZCkgcmV0dXJuOwogIHJ1bnRpbWVJbml0aWFsaXplZCA9IHRydWU7CiAgY2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVElOSVRfXyk7Cn0KCmZ1bmN0aW9uIHByZU1haW4oKSB7CiAgY2hlY2tTdGFja0Nvb2tpZSgpOwogIGNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRNQUlOX18pOwp9CgpmdW5jdGlvbiBleGl0UnVudGltZSgpIHsKICBjaGVja1N0YWNrQ29va2llKCk7CiAgY2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVEVYSVRfXyk7CiAgcnVudGltZUV4aXRlZCA9IHRydWU7Cn0KCmZ1bmN0aW9uIHBvc3RSdW4oKSB7CiAgY2hlY2tTdGFja0Nvb2tpZSgpOwogIC8vIGNvbXBhdGliaWxpdHkgLSBtZXJnZSBpbiBhbnl0aGluZyBmcm9tIE1vZHVsZVsncG9zdFJ1biddIGF0IHRoaXMgdGltZQogIGlmIChNb2R1bGVbJ3Bvc3RSdW4nXSkgewogICAgaWYgKHR5cGVvZiBNb2R1bGVbJ3Bvc3RSdW4nXSA9PSAnZnVuY3Rpb24nKSBNb2R1bGVbJ3Bvc3RSdW4nXSA9IFtNb2R1bGVbJ3Bvc3RSdW4nXV07CiAgICB3aGlsZSAoTW9kdWxlWydwb3N0UnVuJ10ubGVuZ3RoKSB7CiAgICAgIGFkZE9uUG9zdFJ1bihNb2R1bGVbJ3Bvc3RSdW4nXS5zaGlmdCgpKTsKICAgIH0KICB9CiAgY2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBPU1RSVU5fXyk7Cn0KCmZ1bmN0aW9uIGFkZE9uUHJlUnVuKGNiKSB7CiAgX19BVFBSRVJVTl9fLnVuc2hpZnQoY2IpOwp9CgpmdW5jdGlvbiBhZGRPbkluaXQoY2IpIHsKICBfX0FUSU5JVF9fLnVuc2hpZnQoY2IpOwp9CgpmdW5jdGlvbiBhZGRPblByZU1haW4oY2IpIHsKICBfX0FUTUFJTl9fLnVuc2hpZnQoY2IpOwp9CgpmdW5jdGlvbiBhZGRPbkV4aXQoY2IpIHsKICBfX0FURVhJVF9fLnVuc2hpZnQoY2IpOwp9CgpmdW5jdGlvbiBhZGRPblBvc3RSdW4oY2IpIHsKICBfX0FUUE9TVFJVTl9fLnVuc2hpZnQoY2IpOwp9CgovLyBEZXByZWNhdGVkOiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgYmUgY2FsbGVkIGJlY2F1c2UgaXQgaXMgdW5zYWZlIGFuZCBkb2VzIG5vdCBwcm92aWRlCi8vIGEgbWF4aW11bSBsZW5ndGggbGltaXQgb2YgaG93IG1hbnkgYnl0ZXMgaXQgaXMgYWxsb3dlZCB0byB3cml0ZS4gUHJlZmVyIGNhbGxpbmcgdGhlCi8vIGZ1bmN0aW9uIHN0cmluZ1RvVVRGOEFycmF5KCkgaW5zdGVhZCwgd2hpY2ggdGFrZXMgaW4gYSBtYXhpbXVtIGxlbmd0aCB0aGF0IGNhbiBiZSB1c2VkCi8vIHRvIGJlIHNlY3VyZSBmcm9tIG91dCBvZiBib3VuZHMgd3JpdGVzLgovKiogQGRlcHJlY2F0ZWQgKi8KZnVuY3Rpb24gd3JpdGVTdHJpbmdUb01lbW9yeShzdHJpbmcsIGJ1ZmZlciwgZG9udEFkZE51bGwpIHsKICB3YXJuT25jZSgnd3JpdGVTdHJpbmdUb01lbW9yeSBpcyBkZXByZWNhdGVkIGFuZCBzaG91bGQgbm90IGJlIGNhbGxlZCEgVXNlIHN0cmluZ1RvVVRGOCgpIGluc3RlYWQhJyk7CgogIHZhciAvKiogQHR5cGUge251bWJlcn0gKi8gbGFzdENoYXIsIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyBlbmQ7CiAgaWYgKGRvbnRBZGROdWxsKSB7CiAgICAvLyBzdHJpbmdUb1VURjhBcnJheSBhbHdheXMgYXBwZW5kcyBudWxsLiBJZiB3ZSBkb24ndCB3YW50IHRvIGRvIHRoYXQsIHJlbWVtYmVyIHRoZQogICAgLy8gY2hhcmFjdGVyIHRoYXQgZXhpc3RlZCBhdCB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIG51bGwgd2lsbCBiZSBwbGFjZWQsIGFuZCByZXN0b3JlCiAgICAvLyB0aGF0IGFmdGVyIHRoZSB3cml0ZSAoYmVsb3cpLgogICAgZW5kID0gYnVmZmVyICsgbGVuZ3RoQnl0ZXNVVEY4KHN0cmluZyk7CiAgICBsYXN0Q2hhciA9IEhFQVA4W2VuZF07CiAgfQogIHN0cmluZ1RvVVRGOChzdHJpbmcsIGJ1ZmZlciwgSW5maW5pdHkpOwogIGlmIChkb250QWRkTnVsbCkgSEVBUDhbZW5kXSA9IGxhc3RDaGFyOyAvLyBSZXN0b3JlIHRoZSB2YWx1ZSB1bmRlciB0aGUgbnVsbCBjaGFyYWN0ZXIuCn0KCmZ1bmN0aW9uIHdyaXRlQXJyYXlUb01lbW9yeShhcnJheSwgYnVmZmVyKSB7CiAgYXNzZXJ0KGFycmF5Lmxlbmd0aCA+PSAwLCAnd3JpdGVBcnJheVRvTWVtb3J5IGFycmF5IG11c3QgaGF2ZSBhIGxlbmd0aCAoc2hvdWxkIGJlIGFuIGFycmF5IG9yIHR5cGVkIGFycmF5KScpCiAgSEVBUDguc2V0KGFycmF5LCBidWZmZXIpOwp9CgpmdW5jdGlvbiB3cml0ZUFzY2lpVG9NZW1vcnkoc3RyLCBidWZmZXIsIGRvbnRBZGROdWxsKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIGFzc2VydChzdHIuY2hhckNvZGVBdChpKSA9PT0gc3RyLmNoYXJDb2RlQXQoaSkmMHhmZik7CiAgICBIRUFQOFsoKGJ1ZmZlcisrKT4+MCldPXN0ci5jaGFyQ29kZUF0KGkpOwogIH0KICAvLyBOdWxsLXRlcm1pbmF0ZSB0aGUgcG9pbnRlciB0byB0aGUgSEVBUC4KICBpZiAoIWRvbnRBZGROdWxsKSBIRUFQOFsoKGJ1ZmZlcik+PjApXT0wOwp9CgpmdW5jdGlvbiB1blNpZ24odmFsdWUsIGJpdHMsIGlnbm9yZSkgewogIGlmICh2YWx1ZSA+PSAwKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIHJldHVybiBiaXRzIDw9IDMyID8gMipNYXRoLmFicygxIDw8IChiaXRzLTEpKSArIHZhbHVlIC8vIE5lZWQgc29tZSB0cmlja2VyeSwgc2luY2UgaWYgYml0cyA9PSAzMiwgd2UgYXJlIHJpZ2h0IGF0IHRoZSBsaW1pdCBvZiB0aGUgYml0cyBKUyB1c2VzIGluIGJpdHNoaWZ0cwogICAgICAgICAgICAgICAgICAgIDogTWF0aC5wb3coMiwgYml0cykgICAgICAgICArIHZhbHVlOwp9CmZ1bmN0aW9uIHJlU2lnbih2YWx1ZSwgYml0cywgaWdub3JlKSB7CiAgaWYgKHZhbHVlIDw9IDApIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CiAgdmFyIGhhbGYgPSBiaXRzIDw9IDMyID8gTWF0aC5hYnMoMSA8PCAoYml0cy0xKSkgLy8gYWJzIGlzIG5lZWRlZCBpZiBiaXRzID09IDMyCiAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5wb3coMiwgYml0cy0xKTsKICBpZiAodmFsdWUgPj0gaGFsZiAmJiAoYml0cyA8PSAzMiB8fCB2YWx1ZSA+IGhhbGYpKSB7IC8vIGZvciBodWdlIHZhbHVlcywgd2UgY2FuIGhpdCB0aGUgcHJlY2lzaW9uIGxpbWl0IGFuZCBhbHdheXMgZ2V0IHRydWUgaGVyZS4gc28gZG9uJ3QgZG8gdGhhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0LCBpbiBnZW5lcmFsIHRoZXJlIGlzIG5vIHBlcmZlY3Qgc29sdXRpb24gaGVyZS4gV2l0aCA2NC1iaXQgaW50cywgd2UgZ2V0IHJvdW5kaW5nIGFuZCBlcnJvcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEluIGk2NCBtb2RlIDEsIHJlc2lnbiB0aGUgdHdvIHBhcnRzIHNlcGFyYXRlbHkgYW5kIHNhZmVseQogICAgdmFsdWUgPSAtMipoYWxmICsgdmFsdWU7IC8vIENhbm5vdCBiaXRzaGlmdCBoYWxmLCBhcyBpdCBtYXkgYmUgYXQgdGhlIGxpbWl0IG9mIHRoZSBiaXRzIEpTIHVzZXMgaW4gYml0c2hpZnRzCiAgfQogIHJldHVybiB2YWx1ZTsKfQoKYXNzZXJ0KE1hdGhbJ2ltdWwnXSAmJiBNYXRoWydmcm91bmQnXSAmJiBNYXRoWydjbHozMiddICYmIE1hdGhbJ3RydW5jJ10sICd0aGlzIGlzIGEgbGVnYWN5IGJyb3dzZXIsIGJ1aWxkIHdpdGggTEVHQUNZX1ZNX1NVUFBPUlQnKTsKCnZhciBNYXRoX2FicyA9IE1hdGguYWJzOwp2YXIgTWF0aF9jb3MgPSBNYXRoLmNvczsKdmFyIE1hdGhfc2luID0gTWF0aC5zaW47CnZhciBNYXRoX3RhbiA9IE1hdGgudGFuOwp2YXIgTWF0aF9hY29zID0gTWF0aC5hY29zOwp2YXIgTWF0aF9hc2luID0gTWF0aC5hc2luOwp2YXIgTWF0aF9hdGFuID0gTWF0aC5hdGFuOwp2YXIgTWF0aF9hdGFuMiA9IE1hdGguYXRhbjI7CnZhciBNYXRoX2V4cCA9IE1hdGguZXhwOwp2YXIgTWF0aF9sb2cgPSBNYXRoLmxvZzsKdmFyIE1hdGhfc3FydCA9IE1hdGguc3FydDsKdmFyIE1hdGhfY2VpbCA9IE1hdGguY2VpbDsKdmFyIE1hdGhfZmxvb3IgPSBNYXRoLmZsb29yOwp2YXIgTWF0aF9wb3cgPSBNYXRoLnBvdzsKdmFyIE1hdGhfaW11bCA9IE1hdGguaW11bDsKdmFyIE1hdGhfZnJvdW5kID0gTWF0aC5mcm91bmQ7CnZhciBNYXRoX3JvdW5kID0gTWF0aC5yb3VuZDsKdmFyIE1hdGhfbWluID0gTWF0aC5taW47CnZhciBNYXRoX21heCA9IE1hdGgubWF4Owp2YXIgTWF0aF9jbHozMiA9IE1hdGguY2x6MzI7CnZhciBNYXRoX3RydW5jID0gTWF0aC50cnVuYzsKCi8vIEEgY291bnRlciBvZiBkZXBlbmRlbmNpZXMgZm9yIGNhbGxpbmcgcnVuKCkuIElmIHdlIG5lZWQgdG8KLy8gZG8gYXN5bmNocm9ub3VzIHdvcmsgYmVmb3JlIHJ1bm5pbmcsIGluY3JlbWVudCB0aGlzIGFuZAovLyBkZWNyZW1lbnQgaXQuIEluY3JlbWVudGluZyBtdXN0IGhhcHBlbiBpbiBhIHBsYWNlIGxpa2UKLy8gUFJFX1JVTl9BRERJVElPTlMgKHVzZWQgYnkgZW1jYyB0byBhZGQgZmlsZSBwcmVsb2FkaW5nKS4KLy8gTm90ZSB0aGF0IHlvdSBjYW4gYWRkIGRlcGVuZGVuY2llcyBpbiBwcmVSdW4sIGV2ZW4gdGhvdWdoCi8vIGl0IGhhcHBlbnMgcmlnaHQgYmVmb3JlIHJ1biAtIHJ1biB3aWxsIGJlIHBvc3Rwb25lZCB1bnRpbAovLyB0aGUgZGVwZW5kZW5jaWVzIGFyZSBtZXQuCnZhciBydW5EZXBlbmRlbmNpZXMgPSAwOwp2YXIgcnVuRGVwZW5kZW5jeVdhdGNoZXIgPSBudWxsOwp2YXIgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gbnVsbDsgLy8gb3ZlcnJpZGRlbiB0byB0YWtlIGRpZmZlcmVudCBhY3Rpb25zIHdoZW4gYWxsIHJ1biBkZXBlbmRlbmNpZXMgYXJlIGZ1bGZpbGxlZAp2YXIgcnVuRGVwZW5kZW5jeVRyYWNraW5nID0ge307CgpmdW5jdGlvbiBnZXRVbmlxdWVSdW5EZXBlbmRlbmN5KGlkKSB7CiAgdmFyIG9yaWcgPSBpZDsKICB3aGlsZSAoMSkgewogICAgaWYgKCFydW5EZXBlbmRlbmN5VHJhY2tpbmdbaWRdKSByZXR1cm4gaWQ7CiAgICBpZCA9IG9yaWcgKyBNYXRoLnJhbmRvbSgpOwogIH0KICByZXR1cm4gaWQ7Cn0KCmZ1bmN0aW9uIGFkZFJ1bkRlcGVuZGVuY3koaWQpIHsKICBydW5EZXBlbmRlbmNpZXMrKzsKICBpZiAoTW9kdWxlWydtb25pdG9yUnVuRGVwZW5kZW5jaWVzJ10pIHsKICAgIE1vZHVsZVsnbW9uaXRvclJ1bkRlcGVuZGVuY2llcyddKHJ1bkRlcGVuZGVuY2llcyk7CiAgfQogIGlmIChpZCkgewogICAgYXNzZXJ0KCFydW5EZXBlbmRlbmN5VHJhY2tpbmdbaWRdKTsKICAgIHJ1bkRlcGVuZGVuY3lUcmFja2luZ1tpZF0gPSAxOwogICAgaWYgKHJ1bkRlcGVuZGVuY3lXYXRjaGVyID09PSBudWxsICYmIHR5cGVvZiBzZXRJbnRlcnZhbCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgLy8gQ2hlY2sgZm9yIG1pc3NpbmcgZGVwZW5kZW5jaWVzIGV2ZXJ5IGZldyBzZWNvbmRzCiAgICAgIHJ1bkRlcGVuZGVuY3lXYXRjaGVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKEFCT1JUKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKHJ1bkRlcGVuZGVuY3lXYXRjaGVyKTsKICAgICAgICAgIHJ1bkRlcGVuZGVuY3lXYXRjaGVyID0gbnVsbDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHNob3duID0gZmFsc2U7CiAgICAgICAgZm9yICh2YXIgZGVwIGluIHJ1bkRlcGVuZGVuY3lUcmFja2luZykgewogICAgICAgICAgaWYgKCFzaG93bikgewogICAgICAgICAgICBzaG93biA9IHRydWU7CiAgICAgICAgICAgIE1vZHVsZS5wcmludEVycignc3RpbGwgd2FpdGluZyBvbiBydW4gZGVwZW5kZW5jaWVzOicpOwogICAgICAgICAgfQogICAgICAgICAgTW9kdWxlLnByaW50RXJyKCdkZXBlbmRlbmN5OiAnICsgZGVwKTsKICAgICAgICB9CiAgICAgICAgaWYgKHNob3duKSB7CiAgICAgICAgICBNb2R1bGUucHJpbnRFcnIoJyhlbmQgb2YgbGlzdCknKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDAwKTsKICAgIH0KICB9IGVsc2UgewogICAgTW9kdWxlLnByaW50RXJyKCd3YXJuaW5nOiBydW4gZGVwZW5kZW5jeSBhZGRlZCB3aXRob3V0IElEJyk7CiAgfQp9CgpmdW5jdGlvbiByZW1vdmVSdW5EZXBlbmRlbmN5KGlkKSB7CiAgcnVuRGVwZW5kZW5jaWVzLS07CiAgaWYgKE1vZHVsZVsnbW9uaXRvclJ1bkRlcGVuZGVuY2llcyddKSB7CiAgICBNb2R1bGVbJ21vbml0b3JSdW5EZXBlbmRlbmNpZXMnXShydW5EZXBlbmRlbmNpZXMpOwogIH0KICBpZiAoaWQpIHsKICAgIGFzc2VydChydW5EZXBlbmRlbmN5VHJhY2tpbmdbaWRdKTsKICAgIGRlbGV0ZSBydW5EZXBlbmRlbmN5VHJhY2tpbmdbaWRdOwogIH0gZWxzZSB7CiAgICBNb2R1bGUucHJpbnRFcnIoJ3dhcm5pbmc6IHJ1biBkZXBlbmRlbmN5IHJlbW92ZWQgd2l0aG91dCBJRCcpOwogIH0KICBpZiAocnVuRGVwZW5kZW5jaWVzID09IDApIHsKICAgIGlmIChydW5EZXBlbmRlbmN5V2F0Y2hlciAhPT0gbnVsbCkgewogICAgICBjbGVhckludGVydmFsKHJ1bkRlcGVuZGVuY3lXYXRjaGVyKTsKICAgICAgcnVuRGVwZW5kZW5jeVdhdGNoZXIgPSBudWxsOwogICAgfQogICAgaWYgKGRlcGVuZGVuY2llc0Z1bGZpbGxlZCkgewogICAgICB2YXIgY2FsbGJhY2sgPSBkZXBlbmRlbmNpZXNGdWxmaWxsZWQ7CiAgICAgIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IG51bGw7CiAgICAgIGNhbGxiYWNrKCk7IC8vIGNhbiBhZGQgYW5vdGhlciBkZXBlbmRlbmNpZXNGdWxmaWxsZWQKICAgIH0KICB9Cn0KCk1vZHVsZVsicHJlbG9hZGVkSW1hZ2VzIl0gPSB7fTsgLy8gbWFwcyB1cmwgdG8gaW1hZ2UgZGF0YQpNb2R1bGVbInByZWxvYWRlZEF1ZGlvcyJdID0ge307IC8vIG1hcHMgdXJsIHRvIGF1ZGlvIGRhdGEKCgoKdmFyIG1lbW9yeUluaXRpYWxpemVyID0gbnVsbDsKCgoKdmFyIC8qIHNob3cgZXJyb3JzIG9uIGxpa2VseSBjYWxscyB0byBGUyB3aGVuIGl0IHdhcyBub3QgaW5jbHVkZWQgKi8gRlMgPSB7CiAgZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgYWJvcnQoJ0ZpbGVzeXN0ZW0gc3VwcG9ydCAoRlMpIHdhcyBub3QgaW5jbHVkZWQuIFRoZSBwcm9ibGVtIGlzIHRoYXQgeW91IGFyZSB1c2luZyBmaWxlcyBmcm9tIEpTLCBidXQgZmlsZXMgd2VyZSBub3QgdXNlZCBmcm9tIEMvQysrLCBzbyBmaWxlc3lzdGVtIHN1cHBvcnQgd2FzIG5vdCBhdXRvLWluY2x1ZGVkLiBZb3UgY2FuIGZvcmNlLWluY2x1ZGUgZmlsZXN5c3RlbSBzdXBwb3J0IHdpdGggIC1zIEZPUkNFX0ZJTEVTWVNURU09MScpOwogIH0sCiAgaW5pdDogZnVuY3Rpb24oKSB7IEZTLmVycm9yKCkgfSwKICBjcmVhdGVEYXRhRmlsZTogZnVuY3Rpb24oKSB7IEZTLmVycm9yKCkgfSwKICBjcmVhdGVQcmVsb2FkZWRGaWxlOiBmdW5jdGlvbigpIHsgRlMuZXJyb3IoKSB9LAogIGNyZWF0ZUxhenlGaWxlOiBmdW5jdGlvbigpIHsgRlMuZXJyb3IoKSB9LAogIG9wZW46IGZ1bmN0aW9uKCkgeyBGUy5lcnJvcigpIH0sCiAgbWtkZXY6IGZ1bmN0aW9uKCkgeyBGUy5lcnJvcigpIH0sCiAgcmVnaXN0ZXJEZXZpY2U6IGZ1bmN0aW9uKCkgeyBGUy5lcnJvcigpIH0sCiAgYW5hbHl6ZVBhdGg6IGZ1bmN0aW9uKCkgeyBGUy5lcnJvcigpIH0sCiAgbG9hZEZpbGVzRnJvbURCOiBmdW5jdGlvbigpIHsgRlMuZXJyb3IoKSB9LAoKICBFcnJub0Vycm9yOiBmdW5jdGlvbiBFcnJub0Vycm9yKCkgeyBGUy5lcnJvcigpIH0sCn07Ck1vZHVsZVsnRlNfY3JlYXRlRGF0YUZpbGUnXSA9IEZTLmNyZWF0ZURhdGFGaWxlOwpNb2R1bGVbJ0ZTX2NyZWF0ZVByZWxvYWRlZEZpbGUnXSA9IEZTLmNyZWF0ZVByZWxvYWRlZEZpbGU7CgoKCi8vIFByZWZpeCBvZiBkYXRhIFVSSXMgZW1pdHRlZCBieSBTSU5HTEVfRklMRSBhbmQgcmVsYXRlZCBvcHRpb25zLgp2YXIgZGF0YVVSSVByZWZpeCA9ICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsJzsKCi8vIEluZGljYXRlcyB3aGV0aGVyIGZpbGVuYW1lIGlzIGEgYmFzZTY0IGRhdGEgVVJJLgpmdW5jdGlvbiBpc0RhdGFVUkkoZmlsZW5hbWUpIHsKICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID8KICAgICAgZmlsZW5hbWUuc3RhcnRzV2l0aChkYXRhVVJJUHJlZml4KSA6CiAgICAgIGZpbGVuYW1lLmluZGV4T2YoZGF0YVVSSVByZWZpeCkgPT09IDA7Cn0KCgoKCgovLyA9PT0gQm9keSA9PT0KCnZhciBBU01fQ09OU1RTID0gW107CgoKCgoKU1RBVElDX0JBU0UgPSBHTE9CQUxfQkFTRTsKClNUQVRJQ1RPUCA9IFNUQVRJQ19CQVNFICsgMjA4MDsKLyogZ2xvYmFsIGluaXRpYWxpemVycyAqLyAgX19BVElOSVRfXy5wdXNoKHsgZnVuYzogZnVuY3Rpb24oKSB7IF9fR0xPQkFMX19zdWJfSV9EcmF3MTZDb3JlX2NwcCgpIH0gfSk7CgoKbWVtb3J5SW5pdGlhbGl6ZXIgPSAiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LDVBQUFBRUFCQUFBTUFRQUFvQUVBQUNBQUFBQUFBQUFBREFFQUFFMEJBQUF3QUFBQUFBQUFBT1FBQUFCdUFRQUFEQUVBQUhzQkFBQVFBQUFBQUFBQUFBd0JBQURSQVFBQUNBQUFBQUFBQUFBQkFBQUFCUUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBZ0FBQUFNQUFBQWdCQUFBQUFRQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBQ3YvLy8vOEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGd0FBQUFBQUFBQUVBQUFBQVFBQUFBRkFBQUFCZ0FBQUFjQUFBQUlBQUFBQ1FBQUFBb0FBQUFMQUFBQUFBQUFBRGdBQUFBRUFBQUFEQUFBQUFZQUFBQUhBQUFBQ0FBQUFBMEFBQUFPQUFBQUR3QUFBQUFBQUFCSUFBQUFFQUFBQUJFQUFBQVNBQUFBVTNRNVpYaGpaWEIwYVc5dUFFNHhNRjlmWTNoNFlXSnBkakV4Tmw5ZmMyaHBiVjkwZVhCbFgybHVabTlGQUZOME9YUjVjR1ZmYVc1bWJ3Qk9NVEJmWDJONGVHRmlhWFl4TWpCZlgzTnBYMk5zWVhOelgzUjVjR1ZmYVc1bWIwVUFUakV3WDE5amVIaGhZbWwyTVRFM1gxOWpiR0Z6YzE5MGVYQmxYMmx1Wm05RkFITjBaRG82WW1Ga1gyRnNiRzlqQUZOME9XSmhaRjloYkd4dll3PT0iOwoKCgoKCi8qIG5vIG1lbW9yeSBpbml0aWFsaXplciAqLwp2YXIgdGVtcERvdWJsZVB0ciA9IFNUQVRJQ1RPUDsgU1RBVElDVE9QICs9IDE2OwoKYXNzZXJ0KHRlbXBEb3VibGVQdHIgJSA4ID09IDApOwoKZnVuY3Rpb24gY29weVRlbXBGbG9hdChwdHIpIHsgLy8gZnVuY3Rpb25zLCBiZWNhdXNlIGlubGluaW5nIHRoaXMgY29kZSBpbmNyZWFzZXMgY29kZSBzaXplIHRvbyBtdWNoCgogIEhFQVA4W3RlbXBEb3VibGVQdHJdID0gSEVBUDhbcHRyXTsKCiAgSEVBUDhbdGVtcERvdWJsZVB0cisxXSA9IEhFQVA4W3B0cisxXTsKCiAgSEVBUDhbdGVtcERvdWJsZVB0cisyXSA9IEhFQVA4W3B0cisyXTsKCiAgSEVBUDhbdGVtcERvdWJsZVB0ciszXSA9IEhFQVA4W3B0ciszXTsKCn0KCmZ1bmN0aW9uIGNvcHlUZW1wRG91YmxlKHB0cikgewoKICBIRUFQOFt0ZW1wRG91YmxlUHRyXSA9IEhFQVA4W3B0cl07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrMV0gPSBIRUFQOFtwdHIrMV07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrMl0gPSBIRUFQOFtwdHIrMl07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrM10gPSBIRUFQOFtwdHIrM107CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrNF0gPSBIRUFQOFtwdHIrNF07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrNV0gPSBIRUFQOFtwdHIrNV07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrNl0gPSBIRUFQOFtwdHIrNl07CgogIEhFQVA4W3RlbXBEb3VibGVQdHIrN10gPSBIRUFQOFtwdHIrN107Cgp9CgovLyB7e1BSRV9MSUJSQVJZfX0KCgogIAogIAogIHZhciBQQVRIPXtzcGxpdFBhdGg6ZnVuY3Rpb24gKGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHNwbGl0UGF0aFJlID0gL14oXC8/fCkoW1xzXFNdKj8pKCg/OlwuezEsMn18W15cL10rP3wpKFwuW14uXC9dKnwpKSg/OltcL10qKSQvOwogICAgICAgIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTsKICAgICAgfSxub3JtYWxpemVBcnJheTpmdW5jdGlvbiAocGFydHMsIGFsbG93QWJvdmVSb290KSB7CiAgICAgICAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDAKICAgICAgICB2YXIgdXAgPSAwOwogICAgICAgIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgdmFyIGxhc3QgPSBwYXJ0c1tpXTsKICAgICAgICAgIGlmIChsYXN0ID09PSAnLicpIHsKICAgICAgICAgICAgcGFydHMuc3BsaWNlKGksIDEpOwogICAgICAgICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7CiAgICAgICAgICAgIHBhcnRzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgdXArKzsKICAgICAgICAgIH0gZWxzZSBpZiAodXApIHsKICAgICAgICAgICAgcGFydHMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICB1cC0tOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBpZiB0aGUgcGF0aCBpcyBhbGxvd2VkIHRvIGdvIGFib3ZlIHRoZSByb290LCByZXN0b3JlIGxlYWRpbmcgLi5zCiAgICAgICAgaWYgKGFsbG93QWJvdmVSb290KSB7CiAgICAgICAgICBmb3IgKDsgdXA7IHVwLS0pIHsKICAgICAgICAgICAgcGFydHMudW5zaGlmdCgnLi4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHBhcnRzOwogICAgICB9LG5vcm1hbGl6ZTpmdW5jdGlvbiAocGF0aCkgewogICAgICAgIHZhciBpc0Fic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJywKICAgICAgICAgICAgdHJhaWxpbmdTbGFzaCA9IHBhdGguc3Vic3RyKC0xKSA9PT0gJy8nOwogICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aAogICAgICAgIHBhdGggPSBQQVRILm5vcm1hbGl6ZUFycmF5KHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoZnVuY3Rpb24ocCkgewogICAgICAgICAgcmV0dXJuICEhcDsKICAgICAgICB9KSwgIWlzQWJzb2x1dGUpLmpvaW4oJy8nKTsKICAgICAgICBpZiAoIXBhdGggJiYgIWlzQWJzb2x1dGUpIHsKICAgICAgICAgIHBhdGggPSAnLic7CiAgICAgICAgfQogICAgICAgIGlmIChwYXRoICYmIHRyYWlsaW5nU2xhc2gpIHsKICAgICAgICAgIHBhdGggKz0gJy8nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoOwogICAgICB9LGRpcm5hbWU6ZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gUEFUSC5zcGxpdFBhdGgocGF0aCksCiAgICAgICAgICAgIHJvb3QgPSByZXN1bHRbMF0sCiAgICAgICAgICAgIGRpciA9IHJlc3VsdFsxXTsKICAgICAgICBpZiAoIXJvb3QgJiYgIWRpcikgewogICAgICAgICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyCiAgICAgICAgICByZXR1cm4gJy4nOwogICAgICAgIH0KICAgICAgICBpZiAoZGlyKSB7CiAgICAgICAgICAvLyBJdCBoYXMgYSBkaXJuYW1lLCBzdHJpcCB0cmFpbGluZyBzbGFzaAogICAgICAgICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByb290ICsgZGlyOwogICAgICB9LGJhc2VuYW1lOmZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgLy8gRU1TQ1JJUFRFTiByZXR1cm4gJy8nJyBmb3IgJy8nLCBub3QgYW4gZW1wdHkgc3RyaW5nCiAgICAgICAgaWYgKHBhdGggPT09ICcvJykgcmV0dXJuICcvJzsKICAgICAgICB2YXIgbGFzdFNsYXNoID0gcGF0aC5sYXN0SW5kZXhPZignLycpOwogICAgICAgIGlmIChsYXN0U2xhc2ggPT09IC0xKSByZXR1cm4gcGF0aDsKICAgICAgICByZXR1cm4gcGF0aC5zdWJzdHIobGFzdFNsYXNoKzEpOwogICAgICB9LGV4dG5hbWU6ZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICByZXR1cm4gUEFUSC5zcGxpdFBhdGgocGF0aClbM107CiAgICAgIH0sam9pbjpmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsKICAgICAgICByZXR1cm4gUEFUSC5ub3JtYWxpemUocGF0aHMuam9pbignLycpKTsKICAgICAgfSxqb2luMjpmdW5jdGlvbiAobCwgcikgewogICAgICAgIHJldHVybiBQQVRILm5vcm1hbGl6ZShsICsgJy8nICsgcik7CiAgICAgIH0scmVzb2x2ZTpmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHJlc29sdmVkUGF0aCA9ICcnLAogICAgICAgICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlOwogICAgICAgIGZvciAodmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSA+PSAtMSAmJiAhcmVzb2x2ZWRBYnNvbHV0ZTsgaS0tKSB7CiAgICAgICAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogRlMuY3dkKCk7CiAgICAgICAgICAvLyBTa2lwIGVtcHR5IGFuZCBpbnZhbGlkIGVudHJpZXMKICAgICAgICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIXBhdGgpIHsKICAgICAgICAgICAgcmV0dXJuICcnOyAvLyBhbiBpbnZhbGlkIHBvcnRpb24gaW52YWxpZGF0ZXMgdGhlIHdob2xlIHRoaW5nCiAgICAgICAgICB9CiAgICAgICAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoOwogICAgICAgICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7CiAgICAgICAgfQogICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXQKICAgICAgICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscykKICAgICAgICByZXNvbHZlZFBhdGggPSBQQVRILm5vcm1hbGl6ZUFycmF5KHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLmZpbHRlcihmdW5jdGlvbihwKSB7CiAgICAgICAgICByZXR1cm4gISFwOwogICAgICAgIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpOwogICAgICAgIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJzsKICAgICAgfSxyZWxhdGl2ZTpmdW5jdGlvbiAoZnJvbSwgdG8pIHsKICAgICAgICBmcm9tID0gUEFUSC5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTsKICAgICAgICB0byA9IFBBVEgucmVzb2x2ZSh0bykuc3Vic3RyKDEpOwogICAgICAgIGZ1bmN0aW9uIHRyaW0oYXJyKSB7CiAgICAgICAgICB2YXIgc3RhcnQgPSAwOwogICAgICAgICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykgewogICAgICAgICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGVuZCA9IGFyci5sZW5ndGggLSAxOwogICAgICAgICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkgewogICAgICAgICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFtdOwogICAgICAgICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKICAgICAgICB9CiAgICAgICAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTsKICAgICAgICB2YXIgdG9QYXJ0cyA9IHRyaW0odG8uc3BsaXQoJy8nKSk7CiAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGZyb21QYXJ0cy5sZW5ndGgsIHRvUGFydHMubGVuZ3RoKTsKICAgICAgICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChmcm9tUGFydHNbaV0gIT09IHRvUGFydHNbaV0pIHsKICAgICAgICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBvdXRwdXRQYXJ0cyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIG91dHB1dFBhcnRzLnB1c2goJy4uJyk7CiAgICAgICAgfQogICAgICAgIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7CiAgICAgICAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTsKICAgICAgfX07CiAgCiAgCiAgCiAgZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcF90aW1pbmcobW9kZSwgdmFsdWUpIHsKICAgICAgQnJvd3Nlci5tYWluTG9vcC50aW1pbmdNb2RlID0gbW9kZTsKICAgICAgQnJvd3Nlci5tYWluTG9vcC50aW1pbmdWYWx1ZSA9IHZhbHVlOwogIAogICAgICBpZiAoIUJyb3dzZXIubWFpbkxvb3AuZnVuYykgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcF90aW1pbmc6IENhbm5vdCBzZXQgdGltaW5nIG1vZGUgZm9yIG1haW4gbG9vcCBzaW5jZSBhIG1haW4gbG9vcCBkb2VzIG5vdCBleGlzdCEgQ2FsbCBlbXNjcmlwdGVuX3NldF9tYWluX2xvb3AgZmlyc3QgdG8gc2V0IG9uZSB1cC4nKTsKICAgICAgICByZXR1cm4gMTsgLy8gUmV0dXJuIG5vbi16ZXJvIG9uIGZhaWx1cmUsIGNhbid0IHNldCB0aW1pbmcgbW9kZSB3aGVuIHRoZXJlIGlzIG5vIG1haW4gbG9vcC4KICAgICAgfQogIAogICAgICBpZiAobW9kZSA9PSAwIC8qRU1fVElNSU5HX1NFVFRJTUVPVVQqLykgewogICAgICAgIEJyb3dzZXIubWFpbkxvb3Auc2NoZWR1bGVyID0gZnVuY3Rpb24gQnJvd3Nlcl9tYWluTG9vcF9zY2hlZHVsZXJfc2V0VGltZW91dCgpIHsKICAgICAgICAgIHZhciB0aW1lVW50aWxOZXh0VGljayA9IE1hdGgubWF4KDAsIEJyb3dzZXIubWFpbkxvb3AudGlja1N0YXJ0VGltZSArIHZhbHVlIC0gX2Vtc2NyaXB0ZW5fZ2V0X25vdygpKXwwOwogICAgICAgICAgc2V0VGltZW91dChCcm93c2VyLm1haW5Mb29wLnJ1bm5lciwgdGltZVVudGlsTmV4dFRpY2spOyAvLyBkb2luZyB0aGlzIGVhY2ggdGltZSBtZWFucyB0aGF0IG9uIGV4Y2VwdGlvbiwgd2Ugc3RvcAogICAgICAgIH07CiAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5tZXRob2QgPSAndGltZW91dCc7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PSAxIC8qRU1fVElNSU5HX1JBRiovKSB7CiAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5zY2hlZHVsZXIgPSBmdW5jdGlvbiBCcm93c2VyX21haW5Mb29wX3NjaGVkdWxlcl9yQUYoKSB7CiAgICAgICAgICBCcm93c2VyLnJlcXVlc3RBbmltYXRpb25GcmFtZShCcm93c2VyLm1haW5Mb29wLnJ1bm5lcik7CiAgICAgICAgfTsKICAgICAgICBCcm93c2VyLm1haW5Mb29wLm1ldGhvZCA9ICdyQUYnOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gMiAvKkVNX1RJTUlOR19TRVRJTU1FRElBVEUqLykgewogICAgICAgIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgLy8gRW11bGF0ZSBzZXRJbW1lZGlhdGUuIChub3RlOiBub3QgYSBjb21wbGV0ZSBwb2x5ZmlsbCwgd2UgZG9uJ3QgZW11bGF0ZSBjbGVhckltbWVkaWF0ZSgpIHRvIGtlZXAgY29kZSBzaXplIHRvIG1pbmltdW0sIHNpbmNlIG5vdCBuZWVkZWQpCiAgICAgICAgICB2YXIgc2V0SW1tZWRpYXRlcyA9IFtdOwogICAgICAgICAgdmFyIGVtc2NyaXB0ZW5NYWluTG9vcE1lc3NhZ2VJZCA9ICdzZXRpbW1lZGlhdGUnOwogICAgICAgICAgZnVuY3Rpb24gQnJvd3Nlcl9zZXRJbW1lZGlhdGVfbWVzc2FnZUhhbmRsZXIoZXZlbnQpIHsKICAgICAgICAgICAgLy8gV2hlbiBjYWxsZWQgaW4gY3VycmVudCB0aHJlYWQgb3IgV29ya2VyLCB0aGUgbWFpbiBsb29wIElEIGlzIHN0cnVjdHVyZWQgc2xpZ2h0bHkgZGlmZmVyZW50IHRvIGFjY29tbW9kYXRlIGZvciAtLXByb3h5LXRvLXdvcmtlciBydW50aW1lIGxpc3RlbmluZyB0byBXb3JrZXIgZXZlbnRzLAogICAgICAgICAgICAvLyBzbyBjaGVjayBmb3IgYm90aCBjYXNlcy4KICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEgPT09IGVtc2NyaXB0ZW5NYWluTG9vcE1lc3NhZ2VJZCB8fCBldmVudC5kYXRhLnRhcmdldCA9PT0gZW1zY3JpcHRlbk1haW5Mb29wTWVzc2FnZUlkKSB7CiAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgc2V0SW1tZWRpYXRlcy5zaGlmdCgpKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBCcm93c2VyX3NldEltbWVkaWF0ZV9tZXNzYWdlSGFuZGxlciwgdHJ1ZSk7CiAgICAgICAgICBzZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiBCcm93c2VyX2VtdWxhdGVkX3NldEltbWVkaWF0ZShmdW5jKSB7CiAgICAgICAgICAgIHNldEltbWVkaWF0ZXMucHVzaChmdW5jKTsKICAgICAgICAgICAgaWYgKEVOVklST05NRU5UX0lTX1dPUktFUikgewogICAgICAgICAgICAgIGlmIChNb2R1bGVbJ3NldEltbWVkaWF0ZXMnXSA9PT0gdW5kZWZpbmVkKSBNb2R1bGVbJ3NldEltbWVkaWF0ZXMnXSA9IFtdOwogICAgICAgICAgICAgIE1vZHVsZVsnc2V0SW1tZWRpYXRlcyddLnB1c2goZnVuYyk7CiAgICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe3RhcmdldDogZW1zY3JpcHRlbk1haW5Mb29wTWVzc2FnZUlkfSk7IC8vIEluIC0tcHJveHktdG8td29ya2VyLCByb3V0ZSB0aGUgbWVzc2FnZSB2aWEgcHJveHlDbGllbnQuanMKICAgICAgICAgICAgfSBlbHNlIHBvc3RNZXNzYWdlKGVtc2NyaXB0ZW5NYWluTG9vcE1lc3NhZ2VJZCwgIioiKTsgLy8gT24gdGhlIG1haW4gdGhyZWFkLCBjYW4ganVzdCBzZW5kIHRoZSBtZXNzYWdlIHRvIGl0c2VsZi4KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5zY2hlZHVsZXIgPSBmdW5jdGlvbiBCcm93c2VyX21haW5Mb29wX3NjaGVkdWxlcl9zZXRJbW1lZGlhdGUoKSB7CiAgICAgICAgICBzZXRJbW1lZGlhdGUoQnJvd3Nlci5tYWluTG9vcC5ydW5uZXIpOwogICAgICAgIH07CiAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5tZXRob2QgPSAnaW1tZWRpYXRlJzsKICAgICAgfQogICAgICByZXR1cm4gMDsKICAgIH0KICAKICBmdW5jdGlvbiBfZW1zY3JpcHRlbl9nZXRfbm93KCkgeyBhYm9ydCgpIH1mdW5jdGlvbiBfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wKGZ1bmMsIGZwcywgc2ltdWxhdGVJbmZpbml0ZUxvb3AsIGFyZywgbm9TZXRUaW1pbmcpIHsKICAgICAgTW9kdWxlWydub0V4aXRSdW50aW1lJ10gPSB0cnVlOwogIAogICAgICBhc3NlcnQoIUJyb3dzZXIubWFpbkxvb3AuZnVuYywgJ2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcDogdGhlcmUgY2FuIG9ubHkgYmUgb25lIG1haW4gbG9vcCBmdW5jdGlvbiBhdCBvbmNlOiBjYWxsIGVtc2NyaXB0ZW5fY2FuY2VsX21haW5fbG9vcCB0byBjYW5jZWwgdGhlIHByZXZpb3VzIG9uZSBiZWZvcmUgc2V0dGluZyBhIG5ldyBvbmUgd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVycy4nKTsKICAKICAgICAgQnJvd3Nlci5tYWluTG9vcC5mdW5jID0gZnVuYzsKICAgICAgQnJvd3Nlci5tYWluTG9vcC5hcmcgPSBhcmc7CiAgCiAgICAgIHZhciBicm93c2VySXRlcmF0aW9uRnVuYzsKICAgICAgaWYgKHR5cGVvZiBhcmcgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgYnJvd3Nlckl0ZXJhdGlvbkZ1bmMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIE1vZHVsZVsnZHluQ2FsbF92aSddKGZ1bmMsIGFyZyk7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBicm93c2VySXRlcmF0aW9uRnVuYyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgTW9kdWxlWydkeW5DYWxsX3YnXShmdW5jKTsKICAgICAgICB9OwogICAgICB9CiAgCiAgICAgIHZhciB0aGlzTWFpbkxvb3BJZCA9IEJyb3dzZXIubWFpbkxvb3AuY3VycmVudGx5UnVubmluZ01haW5sb29wOwogIAogICAgICBCcm93c2VyLm1haW5Mb29wLnJ1bm5lciA9IGZ1bmN0aW9uIEJyb3dzZXJfbWFpbkxvb3BfcnVubmVyKCkgewogICAgICAgIGlmIChBQk9SVCkgcmV0dXJuOwogICAgICAgIGlmIChCcm93c2VyLm1haW5Mb29wLnF1ZXVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciBzdGFydCA9IERhdGUubm93KCk7CiAgICAgICAgICB2YXIgYmxvY2tlciA9IEJyb3dzZXIubWFpbkxvb3AucXVldWUuc2hpZnQoKTsKICAgICAgICAgIGJsb2NrZXIuZnVuYyhibG9ja2VyLmFyZyk7CiAgICAgICAgICBpZiAoQnJvd3Nlci5tYWluTG9vcC5yZW1haW5pbmdCbG9ja2VycykgewogICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gQnJvd3Nlci5tYWluTG9vcC5yZW1haW5pbmdCbG9ja2VyczsKICAgICAgICAgICAgdmFyIG5leHQgPSByZW1haW5pbmclMSA9PSAwID8gcmVtYWluaW5nLTEgOiBNYXRoLmZsb29yKHJlbWFpbmluZyk7CiAgICAgICAgICAgIGlmIChibG9ja2VyLmNvdW50ZWQpIHsKICAgICAgICAgICAgICBCcm93c2VyLm1haW5Mb29wLnJlbWFpbmluZ0Jsb2NrZXJzID0gbmV4dDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBub3QgY291bnRlZCwgYnV0IG1vdmUgdGhlIHByb2dyZXNzIGFsb25nIGEgdGlueSBiaXQKICAgICAgICAgICAgICBuZXh0ID0gbmV4dCArIDAuNTsgLy8gZG8gbm90IHN0ZWFsIGFsbCB0aGUgbmV4dCBvbmUncyBwcm9ncmVzcwogICAgICAgICAgICAgIEJyb3dzZXIubWFpbkxvb3AucmVtYWluaW5nQmxvY2tlcnMgPSAoOCpyZW1haW5pbmcgKyBuZXh0KS85OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZygnbWFpbiBsb29wIGJsb2NrZXIgIicgKyBibG9ja2VyLm5hbWUgKyAnIiB0b29rICcgKyAoRGF0ZS5ub3coKSAtIHN0YXJ0KSArICcgbXMnKTsgLy8sIGxlZnQ6ICcgKyBCcm93c2VyLm1haW5Mb29wLnJlbWFpbmluZ0Jsb2NrZXJzKTsKICAgICAgICAgIEJyb3dzZXIubWFpbkxvb3AudXBkYXRlU3RhdHVzKCk7CiAgICAgICAgICAKICAgICAgICAgIC8vIGNhdGNoZXMgcGF1c2UvcmVzdW1lIG1haW4gbG9vcCBmcm9tIGJsb2NrZXIgZXhlY3V0aW9uCiAgICAgICAgICBpZiAodGhpc01haW5Mb29wSWQgPCBCcm93c2VyLm1haW5Mb29wLmN1cnJlbnRseVJ1bm5pbmdNYWlubG9vcCkgcmV0dXJuOwogICAgICAgICAgCiAgICAgICAgICBzZXRUaW1lb3V0KEJyb3dzZXIubWFpbkxvb3AucnVubmVyLCAwKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgCiAgICAgICAgLy8gY2F0Y2ggcGF1c2VzIGZyb20gbm9uLW1haW4gbG9vcCBzb3VyY2VzCiAgICAgICAgaWYgKHRoaXNNYWluTG9vcElkIDwgQnJvd3Nlci5tYWluTG9vcC5jdXJyZW50bHlSdW5uaW5nTWFpbmxvb3ApIHJldHVybjsKICAKICAgICAgICAvLyBJbXBsZW1lbnQgdmVyeSBiYXNpYyBzd2FwIGludGVydmFsIGNvbnRyb2wKICAgICAgICBCcm93c2VyLm1haW5Mb29wLmN1cnJlbnRGcmFtZU51bWJlciA9IEJyb3dzZXIubWFpbkxvb3AuY3VycmVudEZyYW1lTnVtYmVyICsgMSB8IDA7CiAgICAgICAgaWYgKEJyb3dzZXIubWFpbkxvb3AudGltaW5nTW9kZSA9PSAxLypFTV9USU1JTkdfUkFGKi8gJiYgQnJvd3Nlci5tYWluTG9vcC50aW1pbmdWYWx1ZSA+IDEgJiYgQnJvd3Nlci5tYWluTG9vcC5jdXJyZW50RnJhbWVOdW1iZXIgJSBCcm93c2VyLm1haW5Mb29wLnRpbWluZ1ZhbHVlICE9IDApIHsKICAgICAgICAgIC8vIE5vdCB0aGUgc2NoZWR1bGVkIHRpbWUgdG8gcmVuZGVyIHRoaXMgZnJhbWUgLSBza2lwLgogICAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5zY2hlZHVsZXIoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKEJyb3dzZXIubWFpbkxvb3AudGltaW5nTW9kZSA9PSAwLypFTV9USU1JTkdfU0VUVElNRU9VVCovKSB7CiAgICAgICAgICBCcm93c2VyLm1haW5Mb29wLnRpY2tTdGFydFRpbWUgPSBfZW1zY3JpcHRlbl9nZXRfbm93KCk7CiAgICAgICAgfQogIAogICAgICAgIC8vIFNpZ25hbCBHTCByZW5kZXJpbmcgbGF5ZXIgdGhhdCBwcm9jZXNzaW5nIG9mIGEgbmV3IGZyYW1lIGlzIGFib3V0IHRvIHN0YXJ0LiBUaGlzIGhlbHBzIGl0IG9wdGltaXplCiAgICAgICAgLy8gVkJPIGRvdWJsZS1idWZmZXJpbmcgYW5kIHJlZHVjZSBHUFUgc3RhbGxzLgogIAogIAogICAgICAgIGlmIChCcm93c2VyLm1haW5Mb29wLm1ldGhvZCA9PT0gJ3RpbWVvdXQnICYmIE1vZHVsZS5jdHgpIHsKICAgICAgICAgIE1vZHVsZS5wcmludEVycignTG9va3MgbGlrZSB5b3UgYXJlIHJlbmRlcmluZyB3aXRob3V0IHVzaW5nIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgdGhlIG1haW4gbG9vcC4gWW91IHNob3VsZCB1c2UgMCBmb3IgdGhlIGZyYW1lIHJhdGUgaW4gZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wIGluIG9yZGVyIHRvIHVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsIGFzIHRoYXQgY2FuIGdyZWF0bHkgaW1wcm92ZSB5b3VyIGZyYW1lIHJhdGVzIScpOwogICAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5tZXRob2QgPSAnJzsgLy8ganVzdCB3YXJuIG9uY2UgcGVyIGNhbGwgdG8gc2V0IG1haW4gbG9vcAogICAgICAgIH0KICAKICAgICAgICBCcm93c2VyLm1haW5Mb29wLnJ1bkl0ZXIoYnJvd3Nlckl0ZXJhdGlvbkZ1bmMpOwogIAogICAgICAgIGNoZWNrU3RhY2tDb29raWUoKTsKICAKICAgICAgICAvLyBjYXRjaCBwYXVzZXMgZnJvbSB0aGUgbWFpbiBsb29wIGl0c2VsZgogICAgICAgIGlmICh0aGlzTWFpbkxvb3BJZCA8IEJyb3dzZXIubWFpbkxvb3AuY3VycmVudGx5UnVubmluZ01haW5sb29wKSByZXR1cm47CiAgCiAgICAgICAgLy8gUXVldWUgbmV3IGF1ZGlvIGRhdGEuIFRoaXMgaXMgaW1wb3J0YW50IHRvIGJlIHJpZ2h0IGFmdGVyIHRoZSBtYWluIGxvb3AgaW52b2NhdGlvbiwgc28gdGhhdCB3ZSB3aWxsIGltbWVkaWF0ZWx5IGJlIGFibGUKICAgICAgICAvLyB0byBxdWV1ZSB0aGUgbmV3ZXN0IHByb2R1Y2VkIGF1ZGlvIHNhbXBsZXMuCiAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgYWRkaW5nIHByZS0gYW5kIHBvc3QtIHJBRiBjYWxsYmFja3Mgc28gdGhhdCBHTC5uZXdSZW5kZXJpbmdGcmFtZVN0YXJ0ZWQoKSBhbmQgU0RMLmF1ZGlvLnF1ZXVlTmV3QXVkaW9EYXRhKCkKICAgICAgICAvLyAgICAgICBkbyBub3QgbmVlZCB0byBiZSBoYXJkY29kZWQgaW50byB0aGlzIGZ1bmN0aW9uLCBidXQgY2FuIGJlIG1vcmUgZ2VuZXJpYy4KICAgICAgICBpZiAodHlwZW9mIFNETCA9PT0gJ29iamVjdCcgJiYgU0RMLmF1ZGlvICYmIFNETC5hdWRpby5xdWV1ZU5ld0F1ZGlvRGF0YSkgU0RMLmF1ZGlvLnF1ZXVlTmV3QXVkaW9EYXRhKCk7CiAgCiAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5zY2hlZHVsZXIoKTsKICAgICAgfQogIAogICAgICBpZiAoIW5vU2V0VGltaW5nKSB7CiAgICAgICAgaWYgKGZwcyAmJiBmcHMgPiAwKSBfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wX3RpbWluZygwLypFTV9USU1JTkdfU0VUVElNRU9VVCovLCAxMDAwLjAgLyBmcHMpOwogICAgICAgIGVsc2UgX2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcF90aW1pbmcoMS8qRU1fVElNSU5HX1JBRiovLCAxKTsgLy8gRG8gckFGIGJ5IHJlbmRlcmluZyBlYWNoIGZyYW1lIChubyBkZWNpbWF0aW5nKQogIAogICAgICAgIEJyb3dzZXIubWFpbkxvb3Auc2NoZWR1bGVyKCk7CiAgICAgIH0KICAKICAgICAgaWYgKHNpbXVsYXRlSW5maW5pdGVMb29wKSB7CiAgICAgICAgdGhyb3cgJ1NpbXVsYXRlSW5maW5pdGVMb29wJzsKICAgICAgfQogICAgfXZhciBCcm93c2VyPXttYWluTG9vcDp7c2NoZWR1bGVyOm51bGwsbWV0aG9kOiIiLGN1cnJlbnRseVJ1bm5pbmdNYWlubG9vcDowLGZ1bmM6bnVsbCxhcmc6MCx0aW1pbmdNb2RlOjAsdGltaW5nVmFsdWU6MCxjdXJyZW50RnJhbWVOdW1iZXI6MCxxdWV1ZTpbXSxwYXVzZTpmdW5jdGlvbiAoKSB7CiAgICAgICAgICBCcm93c2VyLm1haW5Mb29wLnNjaGVkdWxlciA9IG51bGw7CiAgICAgICAgICBCcm93c2VyLm1haW5Mb29wLmN1cnJlbnRseVJ1bm5pbmdNYWlubG9vcCsrOyAvLyBJbmNyZW1lbnRpbmcgdGhpcyBzaWduYWxzIHRoZSBwcmV2aW91cyBtYWluIGxvb3AgdGhhdCBpdCdzIG5vdyBiZWNvbWUgb2xkLCBhbmQgaXQgbXVzdCByZXR1cm4uCiAgICAgICAgfSxyZXN1bWU6ZnVuY3Rpb24gKCkgewogICAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5jdXJyZW50bHlSdW5uaW5nTWFpbmxvb3ArKzsKICAgICAgICAgIHZhciB0aW1pbmdNb2RlID0gQnJvd3Nlci5tYWluTG9vcC50aW1pbmdNb2RlOwogICAgICAgICAgdmFyIHRpbWluZ1ZhbHVlID0gQnJvd3Nlci5tYWluTG9vcC50aW1pbmdWYWx1ZTsKICAgICAgICAgIHZhciBmdW5jID0gQnJvd3Nlci5tYWluTG9vcC5mdW5jOwogICAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5mdW5jID0gbnVsbDsKICAgICAgICAgIF9lbXNjcmlwdGVuX3NldF9tYWluX2xvb3AoZnVuYywgMCwgZmFsc2UsIEJyb3dzZXIubWFpbkxvb3AuYXJnLCB0cnVlIC8qIGRvIG5vdCBzZXQgdGltaW5nIGFuZCBjYWxsIHNjaGVkdWxlciwgd2Ugd2lsbCBkbyBpdCBvbiB0aGUgbmV4dCBsaW5lcyAqLyk7CiAgICAgICAgICBfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wX3RpbWluZyh0aW1pbmdNb2RlLCB0aW1pbmdWYWx1ZSk7CiAgICAgICAgICBCcm93c2VyLm1haW5Mb29wLnNjaGVkdWxlcigpOwogICAgICAgIH0sdXBkYXRlU3RhdHVzOmZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChNb2R1bGVbJ3NldFN0YXR1cyddKSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gTW9kdWxlWydzdGF0dXNNZXNzYWdlJ10gfHwgJ1BsZWFzZSB3YWl0Li4uJzsKICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IEJyb3dzZXIubWFpbkxvb3AucmVtYWluaW5nQmxvY2tlcnM7CiAgICAgICAgICAgIHZhciBleHBlY3RlZCA9IEJyb3dzZXIubWFpbkxvb3AuZXhwZWN0ZWRCbG9ja2VyczsKICAgICAgICAgICAgaWYgKHJlbWFpbmluZykgewogICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPCBleHBlY3RlZCkgewogICAgICAgICAgICAgICAgTW9kdWxlWydzZXRTdGF0dXMnXShtZXNzYWdlICsgJyAoJyArIChleHBlY3RlZCAtIHJlbWFpbmluZykgKyAnLycgKyBleHBlY3RlZCArICcpJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIE1vZHVsZVsnc2V0U3RhdHVzJ10obWVzc2FnZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIE1vZHVsZVsnc2V0U3RhdHVzJ10oJycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSxydW5JdGVyOmZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICBpZiAoQUJPUlQpIHJldHVybjsKICAgICAgICAgIGlmIChNb2R1bGVbJ3ByZU1haW5Mb29wJ10pIHsKICAgICAgICAgICAgdmFyIHByZVJldCA9IE1vZHVsZVsncHJlTWFpbkxvb3AnXSgpOwogICAgICAgICAgICBpZiAocHJlUmV0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybjsgLy8gfHJldHVybiBmYWxzZXwgc2tpcHMgYSBmcmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmdW5jKCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhpdFN0YXR1cykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgZS5zdGFjaykgTW9kdWxlLnByaW50RXJyKCdleGNlcHRpb24gdGhyb3duOiAnICsgW2UsIGUuc3RhY2tdKTsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoTW9kdWxlWydwb3N0TWFpbkxvb3AnXSkgTW9kdWxlWydwb3N0TWFpbkxvb3AnXSgpOwogICAgICAgIH19LGlzRnVsbHNjcmVlbjpmYWxzZSxwb2ludGVyTG9jazpmYWxzZSxtb2R1bGVDb250ZXh0Q3JlYXRlZENhbGxiYWNrczpbXSx3b3JrZXJzOltdLGluaXQ6ZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghTW9kdWxlWyJwcmVsb2FkUGx1Z2lucyJdKSBNb2R1bGVbInByZWxvYWRQbHVnaW5zIl0gPSBbXTsgLy8gbmVlZHMgdG8gZXhpc3QgZXZlbiBpbiB3b3JrZXJzCiAgCiAgICAgICAgaWYgKEJyb3dzZXIuaW5pdHRlZCkgcmV0dXJuOwogICAgICAgIEJyb3dzZXIuaW5pdHRlZCA9IHRydWU7CiAgCiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBCbG9iKCk7CiAgICAgICAgICBCcm93c2VyLmhhc0Jsb2JDb25zdHJ1Y3RvciA9IHRydWU7CiAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICBCcm93c2VyLmhhc0Jsb2JDb25zdHJ1Y3RvciA9IGZhbHNlOwogICAgICAgICAgY29uc29sZS5sb2coIndhcm5pbmc6IG5vIGJsb2IgY29uc3RydWN0b3IsIGNhbm5vdCBjcmVhdGUgYmxvYnMgd2l0aCBtaW1ldHlwZXMiKTsKICAgICAgICB9CiAgICAgICAgQnJvd3Nlci5CbG9iQnVpbGRlciA9IHR5cGVvZiBNb3pCbG9iQnVpbGRlciAhPSAidW5kZWZpbmVkIiA/IE1vekJsb2JCdWlsZGVyIDogKHR5cGVvZiBXZWJLaXRCbG9iQnVpbGRlciAhPSAidW5kZWZpbmVkIiA/IFdlYktpdEJsb2JCdWlsZGVyIDogKCFCcm93c2VyLmhhc0Jsb2JDb25zdHJ1Y3RvciA/IGNvbnNvbGUubG9nKCJ3YXJuaW5nOiBubyBCbG9iQnVpbGRlciIpIDogbnVsbCkpOwogICAgICAgIEJyb3dzZXIuVVJMT2JqZWN0ID0gdHlwZW9mIHdpbmRvdyAhPSAidW5kZWZpbmVkIiA/ICh3aW5kb3cuVVJMID8gd2luZG93LlVSTCA6IHdpbmRvdy53ZWJraXRVUkwpIDogdW5kZWZpbmVkOwogICAgICAgIGlmICghTW9kdWxlLm5vSW1hZ2VEZWNvZGluZyAmJiB0eXBlb2YgQnJvd3Nlci5VUkxPYmplY3QgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygid2FybmluZzogQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGNyZWF0aW5nIG9iamVjdCBVUkxzLiBCdWlsdC1pbiBicm93c2VyIGltYWdlIGRlY29kaW5nIHdpbGwgbm90IGJlIGF2YWlsYWJsZS4iKTsKICAgICAgICAgIE1vZHVsZS5ub0ltYWdlRGVjb2RpbmcgPSB0cnVlOwogICAgICAgIH0KICAKICAgICAgICAvLyBTdXBwb3J0IGZvciBwbHVnaW5zIHRoYXQgY2FuIHByb2Nlc3MgcHJlbG9hZGVkIGZpbGVzLiBZb3UgY2FuIGFkZCBtb3JlIG9mIHRoZXNlIHRvCiAgICAgICAgLy8geW91ciBhcHAgYnkgY3JlYXRpbmcgYW5kIGFwcGVuZGluZyB0byBNb2R1bGUucHJlbG9hZFBsdWdpbnMuCiAgICAgICAgLy8KICAgICAgICAvLyBFYWNoIHBsdWdpbiBpcyBhc2tlZCBpZiBpdCBjYW4gaGFuZGxlIGEgZmlsZSBiYXNlZCBvbiB0aGUgZmlsZSdzIG5hbWUuIElmIGl0IGNhbiwKICAgICAgICAvLyBpdCBpcyBnaXZlbiB0aGUgZmlsZSdzIHJhdyBkYXRhLiBXaGVuIGl0IGlzIGRvbmUsIGl0IGNhbGxzIGEgY2FsbGJhY2sgd2l0aCB0aGUgZmlsZSdzCiAgICAgICAgLy8gKHBvc3NpYmx5IG1vZGlmaWVkKSBkYXRhLiBGb3IgZXhhbXBsZSwgYSBwbHVnaW4gbWlnaHQgZGVjb21wcmVzcyBhIGZpbGUsIG9yIGl0CiAgICAgICAgLy8gbWlnaHQgY3JlYXRlIHNvbWUgc2lkZSBkYXRhIHN0cnVjdHVyZSBmb3IgdXNlIGxhdGVyIChsaWtlIGFuIEltYWdlIGVsZW1lbnQsIGV0Yy4pLgogIAogICAgICAgIHZhciBpbWFnZVBsdWdpbiA9IHt9OwogICAgICAgIGltYWdlUGx1Z2luWydjYW5IYW5kbGUnXSA9IGZ1bmN0aW9uIGltYWdlUGx1Z2luX2NhbkhhbmRsZShuYW1lKSB7CiAgICAgICAgICByZXR1cm4gIU1vZHVsZS5ub0ltYWdlRGVjb2RpbmcgJiYgL1wuKGpwZ3xqcGVnfHBuZ3xibXApJC9pLnRlc3QobmFtZSk7CiAgICAgICAgfTsKICAgICAgICBpbWFnZVBsdWdpblsnaGFuZGxlJ10gPSBmdW5jdGlvbiBpbWFnZVBsdWdpbl9oYW5kbGUoYnl0ZUFycmF5LCBuYW1lLCBvbmxvYWQsIG9uZXJyb3IpIHsKICAgICAgICAgIHZhciBiID0gbnVsbDsKICAgICAgICAgIGlmIChCcm93c2VyLmhhc0Jsb2JDb25zdHJ1Y3RvcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGIgPSBuZXcgQmxvYihbYnl0ZUFycmF5XSwgeyB0eXBlOiBCcm93c2VyLmdldE1pbWV0eXBlKG5hbWUpIH0pOwogICAgICAgICAgICAgIGlmIChiLnNpemUgIT09IGJ5dGVBcnJheS5sZW5ndGgpIHsgLy8gU2FmYXJpIGJ1ZyAjMTE4NjMwCiAgICAgICAgICAgICAgICAvLyBTYWZhcmkncyBCbG9iIGNhbiBvbmx5IHRha2UgYW4gQXJyYXlCdWZmZXIKICAgICAgICAgICAgICAgIGIgPSBuZXcgQmxvYihbKG5ldyBVaW50OEFycmF5KGJ5dGVBcnJheSkpLmJ1ZmZlcl0sIHsgdHlwZTogQnJvd3Nlci5nZXRNaW1ldHlwZShuYW1lKSB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgIHdhcm5PbmNlKCdCbG9iIGNvbnN0cnVjdG9yIHByZXNlbnQgYnV0IGZhaWxzOiAnICsgZSArICc7IGZhbGxpbmcgYmFjayB0byBibG9iIGJ1aWxkZXInKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFiKSB7CiAgICAgICAgICAgIHZhciBiYiA9IG5ldyBCcm93c2VyLkJsb2JCdWlsZGVyKCk7CiAgICAgICAgICAgIGJiLmFwcGVuZCgobmV3IFVpbnQ4QXJyYXkoYnl0ZUFycmF5KSkuYnVmZmVyKTsgLy8gd2UgbmVlZCB0byBwYXNzIGEgYnVmZmVyLCBhbmQgbXVzdCBjb3B5IHRoZSBhcnJheSB0byBnZXQgdGhlIHJpZ2h0IGRhdGEgcmFuZ2UKICAgICAgICAgICAgYiA9IGJiLmdldEJsb2IoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciB1cmwgPSBCcm93c2VyLlVSTE9iamVjdC5jcmVhdGVPYmplY3RVUkwoYik7CiAgICAgICAgICBhc3NlcnQodHlwZW9mIHVybCA9PSAnc3RyaW5nJywgJ2NyZWF0ZU9iamVjdFVSTCBtdXN0IHJldHVybiBhIHVybCBhcyBhIHN0cmluZycpOwogICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uIGltZ19vbmxvYWQoKSB7CiAgICAgICAgICAgIGFzc2VydChpbWcuY29tcGxldGUsICdJbWFnZSAnICsgbmFtZSArICcgY291bGQgbm90IGJlIGRlY29kZWQnKTsKICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7CiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICAgICAgICAgICAgTW9kdWxlWyJwcmVsb2FkZWRJbWFnZXMiXVtuYW1lXSA9IGNhbnZhczsKICAgICAgICAgICAgQnJvd3Nlci5VUkxPYmplY3QucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgICAgIGlmIChvbmxvYWQpIG9ubG9hZChieXRlQXJyYXkpOwogICAgICAgICAgfTsKICAgICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24gaW1nX29uZXJyb3IoZXZlbnQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlICcgKyB1cmwgKyAnIGNvdWxkIG5vdCBiZSBkZWNvZGVkJyk7CiAgICAgICAgICAgIGlmIChvbmVycm9yKSBvbmVycm9yKCk7CiAgICAgICAgICB9OwogICAgICAgICAgaW1nLnNyYyA9IHVybDsKICAgICAgICB9OwogICAgICAgIE1vZHVsZVsncHJlbG9hZFBsdWdpbnMnXS5wdXNoKGltYWdlUGx1Z2luKTsKICAKICAgICAgICB2YXIgYXVkaW9QbHVnaW4gPSB7fTsKICAgICAgICBhdWRpb1BsdWdpblsnY2FuSGFuZGxlJ10gPSBmdW5jdGlvbiBhdWRpb1BsdWdpbl9jYW5IYW5kbGUobmFtZSkgewogICAgICAgICAgcmV0dXJuICFNb2R1bGUubm9BdWRpb0RlY29kaW5nICYmIG5hbWUuc3Vic3RyKC00KSBpbiB7ICcub2dnJzogMSwgJy53YXYnOiAxLCAnLm1wMyc6IDEgfTsKICAgICAgICB9OwogICAgICAgIGF1ZGlvUGx1Z2luWydoYW5kbGUnXSA9IGZ1bmN0aW9uIGF1ZGlvUGx1Z2luX2hhbmRsZShieXRlQXJyYXksIG5hbWUsIG9ubG9hZCwgb25lcnJvcikgewogICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTsKICAgICAgICAgIGZ1bmN0aW9uIGZpbmlzaChhdWRpbykgewogICAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuOwogICAgICAgICAgICBkb25lID0gdHJ1ZTsKICAgICAgICAgICAgTW9kdWxlWyJwcmVsb2FkZWRBdWRpb3MiXVtuYW1lXSA9IGF1ZGlvOwogICAgICAgICAgICBpZiAob25sb2FkKSBvbmxvYWQoYnl0ZUFycmF5KTsKICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIGZhaWwoKSB7CiAgICAgICAgICAgIGlmIChkb25lKSByZXR1cm47CiAgICAgICAgICAgIGRvbmUgPSB0cnVlOwogICAgICAgICAgICBNb2R1bGVbInByZWxvYWRlZEF1ZGlvcyJdW25hbWVdID0gbmV3IEF1ZGlvKCk7IC8vIGVtcHR5IHNoaW0KICAgICAgICAgICAgaWYgKG9uZXJyb3IpIG9uZXJyb3IoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChCcm93c2VyLmhhc0Jsb2JDb25zdHJ1Y3RvcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHZhciBiID0gbmV3IEJsb2IoW2J5dGVBcnJheV0sIHsgdHlwZTogQnJvd3Nlci5nZXRNaW1ldHlwZShuYW1lKSB9KTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdXJsID0gQnJvd3Nlci5VUkxPYmplY3QuY3JlYXRlT2JqZWN0VVJMKGIpOyAvLyBYWFggd2UgbmV2ZXIgcmV2b2tlIHRoaXMhCiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgdXJsID09ICdzdHJpbmcnLCAnY3JlYXRlT2JqZWN0VVJMIG11c3QgcmV0dXJuIGEgdXJsIGFzIGEgc3RyaW5nJyk7CiAgICAgICAgICAgIHZhciBhdWRpbyA9IG5ldyBBdWRpbygpOwogICAgICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIGZ1bmN0aW9uKCkgeyBmaW5pc2goYXVkaW8pIH0sIGZhbHNlKTsgLy8gdXNlIGFkZEV2ZW50TGlzdGVuZXIgZHVlIHRvIGNocm9taXVtIGJ1ZyAxMjQ5MjYKICAgICAgICAgICAgYXVkaW8ub25lcnJvciA9IGZ1bmN0aW9uIGF1ZGlvX29uZXJyb3IoZXZlbnQpIHsKICAgICAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3YXJuaW5nOiBicm93c2VyIGNvdWxkIG5vdCBmdWxseSBkZWNvZGUgYXVkaW8gJyArIG5hbWUgKyAnLCB0cnlpbmcgc2xvd2VyIGJhc2U2NCBhcHByb2FjaCcpOwogICAgICAgICAgICAgIGZ1bmN0aW9uIGVuY29kZTY0KGRhdGEpIHsKICAgICAgICAgICAgICAgIHZhciBCQVNFID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgICAgICAgICAgICAgdmFyIFBBRCA9ICc9JzsKICAgICAgICAgICAgICAgIHZhciByZXQgPSAnJzsKICAgICAgICAgICAgICAgIHZhciBsZWZ0Y2hhciA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbGVmdGJpdHMgPSAwOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxlZnRjaGFyID0gKGxlZnRjaGFyIDw8IDgpIHwgZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgbGVmdGJpdHMgKz0gODsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGxlZnRiaXRzID49IDYpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY3VyciA9IChsZWZ0Y2hhciA+PiAobGVmdGJpdHMtNikpICYgMHgzZjsKICAgICAgICAgICAgICAgICAgICBsZWZ0Yml0cyAtPSA2OwogICAgICAgICAgICAgICAgICAgIHJldCArPSBCQVNFW2N1cnJdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobGVmdGJpdHMgPT0gMikgewogICAgICAgICAgICAgICAgICByZXQgKz0gQkFTRVsobGVmdGNoYXImMykgPDwgNF07CiAgICAgICAgICAgICAgICAgIHJldCArPSBQQUQgKyBQQUQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRiaXRzID09IDQpIHsKICAgICAgICAgICAgICAgICAgcmV0ICs9IEJBU0VbKGxlZnRjaGFyJjB4ZikgPDwgMl07CiAgICAgICAgICAgICAgICAgIHJldCArPSBQQUQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhdWRpby5zcmMgPSAnZGF0YTphdWRpby94LScgKyBuYW1lLnN1YnN0cigtMykgKyAnO2Jhc2U2NCwnICsgZW5jb2RlNjQoYnl0ZUFycmF5KTsKICAgICAgICAgICAgICBmaW5pc2goYXVkaW8pOyAvLyB3ZSBkb24ndCB3YWl0IGZvciBjb25maXJtYXRpb24gdGhpcyB3b3JrZWQgLSBidXQgaXQncyB3b3J0aCB0cnlpbmcKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYXVkaW8uc3JjID0gdXJsOwogICAgICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBjaHJvbWUgYnVnIDEyNDkyNiAtIHdlIGRvIG5vdCBhbHdheXMgZ2V0IG9uY2FucGxheXRocm91Z2ggb3Igb25lcnJvcgogICAgICAgICAgICBCcm93c2VyLnNhZmVTZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGZpbmlzaChhdWRpbyk7IC8vIHRyeSB0byB1c2UgaXQgZXZlbiB0aG91Z2ggaXQgaXMgbm90IG5lY2Vzc2FyaWx5IHJlYWR5IHRvIHBsYXkKICAgICAgICAgICAgfSwgMTAwMDApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIE1vZHVsZVsncHJlbG9hZFBsdWdpbnMnXS5wdXNoKGF1ZGlvUGx1Z2luKTsKICAKICAgICAgICAvLyBDYW52YXMgZXZlbnQgc2V0dXAKICAKICAgICAgICBmdW5jdGlvbiBwb2ludGVyTG9ja0NoYW5nZSgpIHsKICAgICAgICAgIEJyb3dzZXIucG9pbnRlckxvY2sgPSBkb2N1bWVudFsncG9pbnRlckxvY2tFbGVtZW50J10gPT09IE1vZHVsZVsnY2FudmFzJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFsnbW96UG9pbnRlckxvY2tFbGVtZW50J10gPT09IE1vZHVsZVsnY2FudmFzJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFsnd2Via2l0UG9pbnRlckxvY2tFbGVtZW50J10gPT09IE1vZHVsZVsnY2FudmFzJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFsnbXNQb2ludGVyTG9ja0VsZW1lbnQnXSA9PT0gTW9kdWxlWydjYW52YXMnXTsKICAgICAgICB9CiAgICAgICAgdmFyIGNhbnZhcyA9IE1vZHVsZVsnY2FudmFzJ107CiAgICAgICAgaWYgKGNhbnZhcykgewogICAgICAgICAgLy8gZm9yY2VkIGFzcGVjdCByYXRpbyBjYW4gYmUgZW5hYmxlZCBieSBkZWZpbmluZyAnZm9yY2VkQXNwZWN0UmF0aW8nIG9uIE1vZHVsZQogICAgICAgICAgLy8gTW9kdWxlWydmb3JjZWRBc3BlY3RSYXRpbyddID0gNCAvIDM7CiAgICAgICAgICAKICAgICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2sgPSBjYW52YXNbJ3JlcXVlc3RQb2ludGVyTG9jayddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzWydtb3pSZXF1ZXN0UG9pbnRlckxvY2snXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc1snd2Via2l0UmVxdWVzdFBvaW50ZXJMb2NrJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNbJ21zUmVxdWVzdFBvaW50ZXJMb2NrJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpe307CiAgICAgICAgICBjYW52YXMuZXhpdFBvaW50ZXJMb2NrID0gZG9jdW1lbnRbJ2V4aXRQb2ludGVyTG9jayddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ21vekV4aXRQb2ludGVyTG9jayddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ3dlYmtpdEV4aXRQb2ludGVyTG9jayddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ21zRXhpdFBvaW50ZXJMb2NrJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpe307IC8vIG5vLW9wIGlmIGZ1bmN0aW9uIGRvZXMgbm90IGV4aXN0CiAgICAgICAgICBjYW52YXMuZXhpdFBvaW50ZXJMb2NrID0gY2FudmFzLmV4aXRQb2ludGVyTG9jay5iaW5kKGRvY3VtZW50KTsKICAKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgcG9pbnRlckxvY2tDaGFuZ2UsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21venBvaW50ZXJsb2NrY2hhbmdlJywgcG9pbnRlckxvY2tDaGFuZ2UsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdHBvaW50ZXJsb2NrY2hhbmdlJywgcG9pbnRlckxvY2tDaGFuZ2UsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21zcG9pbnRlcmxvY2tjaGFuZ2UnLCBwb2ludGVyTG9ja0NoYW5nZSwgZmFsc2UpOwogIAogICAgICAgICAgaWYgKE1vZHVsZVsnZWxlbWVudFBvaW50ZXJMb2NrJ10pIHsKICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oZXYpIHsKICAgICAgICAgICAgICBpZiAoIUJyb3dzZXIucG9pbnRlckxvY2sgJiYgTW9kdWxlWydjYW52YXMnXS5yZXF1ZXN0UG9pbnRlckxvY2spIHsKICAgICAgICAgICAgICAgIE1vZHVsZVsnY2FudmFzJ10ucmVxdWVzdFBvaW50ZXJMb2NrKCk7CiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSxjcmVhdGVDb250ZXh0OmZ1bmN0aW9uIChjYW52YXMsIHVzZVdlYkdMLCBzZXRJbk1vZHVsZSwgd2ViR0xDb250ZXh0QXR0cmlidXRlcykgewogICAgICAgIGlmICh1c2VXZWJHTCAmJiBNb2R1bGUuY3R4ICYmIGNhbnZhcyA9PSBNb2R1bGUuY2FudmFzKSByZXR1cm4gTW9kdWxlLmN0eDsgLy8gbm8gbmVlZCB0byByZWNyZWF0ZSBHTCBjb250ZXh0IGlmIGl0J3MgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgZm9yIHRoaXMgY2FudmFzLgogIAogICAgICAgIHZhciBjdHg7CiAgICAgICAgdmFyIGNvbnRleHRIYW5kbGU7CiAgICAgICAgaWYgKHVzZVdlYkdMKSB7CiAgICAgICAgICAvLyBGb3IgR0xFUzIvZGVza3RvcCBHTCBjb21wYXRpYmlsaXR5LCBhZGp1c3QgYSBmZXcgZGVmYXVsdHMgdG8gYmUgZGlmZmVyZW50IHRvIFdlYkdMIGRlZmF1bHRzLCBzbyB0aGF0IHRoZXkgYWxpZ24gYmV0dGVyIHdpdGggdGhlIGRlc2t0b3AgZGVmYXVsdHMuCiAgICAgICAgICB2YXIgY29udGV4dEF0dHJpYnV0ZXMgPSB7CiAgICAgICAgICAgIGFudGlhbGlhczogZmFsc2UsCiAgICAgICAgICAgIGFscGhhOiBmYWxzZQogICAgICAgICAgfTsKICAKICAgICAgICAgIGlmICh3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgIGZvciAodmFyIGF0dHJpYnV0ZSBpbiB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgY29udGV4dEF0dHJpYnV0ZXNbYXR0cmlidXRlXSA9IHdlYkdMQ29udGV4dEF0dHJpYnV0ZXNbYXR0cmlidXRlXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogIAogICAgICAgICAgY29udGV4dEhhbmRsZSA9IEdMLmNyZWF0ZUNvbnRleHQoY2FudmFzLCBjb250ZXh0QXR0cmlidXRlcyk7CiAgICAgICAgICBpZiAoY29udGV4dEhhbmRsZSkgewogICAgICAgICAgICBjdHggPSBHTC5nZXRDb250ZXh0KGNvbnRleHRIYW5kbGUpLkdMY3R4OwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICB9CiAgCiAgICAgICAgaWYgKCFjdHgpIHJldHVybiBudWxsOwogIAogICAgICAgIGlmIChzZXRJbk1vZHVsZSkgewogICAgICAgICAgaWYgKCF1c2VXZWJHTCkgYXNzZXJ0KHR5cGVvZiBHTGN0eCA9PT0gJ3VuZGVmaW5lZCcsICdjYW5ub3Qgc2V0IGluIG1vZHVsZSBpZiBHTGN0eCBpcyB1c2VkLCBidXQgd2UgYXJlIGEgbm9uLUdMIGNvbnRleHQgdGhhdCB3b3VsZCByZXBsYWNlIGl0Jyk7CiAgCiAgICAgICAgICBNb2R1bGUuY3R4ID0gY3R4OwogICAgICAgICAgaWYgKHVzZVdlYkdMKSBHTC5tYWtlQ29udGV4dEN1cnJlbnQoY29udGV4dEhhbmRsZSk7CiAgICAgICAgICBNb2R1bGUudXNlV2ViR0wgPSB1c2VXZWJHTDsKICAgICAgICAgIEJyb3dzZXIubW9kdWxlQ29udGV4dENyZWF0ZWRDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihjYWxsYmFjaykgeyBjYWxsYmFjaygpIH0pOwogICAgICAgICAgQnJvd3Nlci5pbml0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjdHg7CiAgICAgIH0sZGVzdHJveUNvbnRleHQ6ZnVuY3Rpb24gKGNhbnZhcywgdXNlV2ViR0wsIHNldEluTW9kdWxlKSB7fSxmdWxsc2NyZWVuSGFuZGxlcnNJbnN0YWxsZWQ6ZmFsc2UsbG9ja1BvaW50ZXI6dW5kZWZpbmVkLHJlc2l6ZUNhbnZhczp1bmRlZmluZWQscmVxdWVzdEZ1bGxzY3JlZW46ZnVuY3Rpb24gKGxvY2tQb2ludGVyLCByZXNpemVDYW52YXMsIHZyRGV2aWNlKSB7CiAgICAgICAgQnJvd3Nlci5sb2NrUG9pbnRlciA9IGxvY2tQb2ludGVyOwogICAgICAgIEJyb3dzZXIucmVzaXplQ2FudmFzID0gcmVzaXplQ2FudmFzOwogICAgICAgIEJyb3dzZXIudnJEZXZpY2UgPSB2ckRldmljZTsKICAgICAgICBpZiAodHlwZW9mIEJyb3dzZXIubG9ja1BvaW50ZXIgPT09ICd1bmRlZmluZWQnKSBCcm93c2VyLmxvY2tQb2ludGVyID0gdHJ1ZTsKICAgICAgICBpZiAodHlwZW9mIEJyb3dzZXIucmVzaXplQ2FudmFzID09PSAndW5kZWZpbmVkJykgQnJvd3Nlci5yZXNpemVDYW52YXMgPSBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIEJyb3dzZXIudnJEZXZpY2UgPT09ICd1bmRlZmluZWQnKSBCcm93c2VyLnZyRGV2aWNlID0gbnVsbDsKICAKICAgICAgICB2YXIgY2FudmFzID0gTW9kdWxlWydjYW52YXMnXTsKICAgICAgICBmdW5jdGlvbiBmdWxsc2NyZWVuQ2hhbmdlKCkgewogICAgICAgICAgQnJvd3Nlci5pc0Z1bGxzY3JlZW4gPSBmYWxzZTsKICAgICAgICAgIHZhciBjYW52YXNDb250YWluZXIgPSBjYW52YXMucGFyZW50Tm9kZTsKICAgICAgICAgIGlmICgoZG9jdW1lbnRbJ2Z1bGxzY3JlZW5FbGVtZW50J10gfHwgZG9jdW1lbnRbJ21vekZ1bGxTY3JlZW5FbGVtZW50J10gfHwKICAgICAgICAgICAgICAgZG9jdW1lbnRbJ21zRnVsbHNjcmVlbkVsZW1lbnQnXSB8fCBkb2N1bWVudFsnd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQnXSB8fAogICAgICAgICAgICAgICBkb2N1bWVudFsnd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50J10pID09PSBjYW52YXNDb250YWluZXIpIHsKICAgICAgICAgICAgY2FudmFzLmV4aXRGdWxsc2NyZWVuID0gZG9jdW1lbnRbJ2V4aXRGdWxsc2NyZWVuJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ2NhbmNlbEZ1bGxTY3JlZW4nXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFsnbW96Q2FuY2VsRnVsbFNjcmVlbiddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Wydtc0V4aXRGdWxsc2NyZWVuJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICBjYW52YXMuZXhpdEZ1bGxzY3JlZW4gPSBjYW52YXMuZXhpdEZ1bGxzY3JlZW4uYmluZChkb2N1bWVudCk7CiAgICAgICAgICAgIGlmIChCcm93c2VyLmxvY2tQb2ludGVyKSBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrKCk7CiAgICAgICAgICAgIEJyb3dzZXIuaXNGdWxsc2NyZWVuID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKEJyb3dzZXIucmVzaXplQ2FudmFzKSBCcm93c2VyLnNldEZ1bGxzY3JlZW5DYW52YXNTaXplKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAKICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBmdWxsIHNjcmVlbiBzcGVjaWZpYyBwYXJlbnQgb2YgdGhlIGNhbnZhcyBhZ2FpbiB0byByZXN0b3JlIHRoZSBIVE1MIHN0cnVjdHVyZSBmcm9tIGJlZm9yZSBnb2luZyBmdWxsIHNjcmVlbgogICAgICAgICAgICBjYW52YXNDb250YWluZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2FudmFzLCBjYW52YXNDb250YWluZXIpOwogICAgICAgICAgICBjYW52YXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjYW52YXNDb250YWluZXIpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKEJyb3dzZXIucmVzaXplQ2FudmFzKSBCcm93c2VyLnNldFdpbmRvd2VkQ2FudmFzU2l6ZSgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKE1vZHVsZVsnb25GdWxsU2NyZWVuJ10pIE1vZHVsZVsnb25GdWxsU2NyZWVuJ10oQnJvd3Nlci5pc0Z1bGxzY3JlZW4pOwogICAgICAgICAgaWYgKE1vZHVsZVsnb25GdWxsc2NyZWVuJ10pIE1vZHVsZVsnb25GdWxsc2NyZWVuJ10oQnJvd3Nlci5pc0Z1bGxzY3JlZW4pOwogICAgICAgICAgQnJvd3Nlci51cGRhdGVDYW52YXNEaW1lbnNpb25zKGNhbnZhcyk7CiAgICAgICAgfQogIAogICAgICAgIGlmICghQnJvd3Nlci5mdWxsc2NyZWVuSGFuZGxlcnNJbnN0YWxsZWQpIHsKICAgICAgICAgIEJyb3dzZXIuZnVsbHNjcmVlbkhhbmRsZXJzSW5zdGFsbGVkID0gdHJ1ZTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdWxsc2NyZWVuQ2hhbmdlLCBmYWxzZSk7CiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpOwogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bGxzY3JlZW5DaGFuZ2UsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ01TRnVsbHNjcmVlbkNoYW5nZScsIGZ1bGxzY3JlZW5DaGFuZ2UsIGZhbHNlKTsKICAgICAgICB9CiAgCiAgICAgICAgLy8gY3JlYXRlIGEgbmV3IHBhcmVudCB0byBlbnN1cmUgdGhlIGNhbnZhcyBoYXMgbm8gc2libGluZ3MuIHRoaXMgYWxsb3dzIGJyb3dzZXJzIHRvIG9wdGltaXplIGZ1bGwgc2NyZWVuIHBlcmZvcm1hbmNlIHdoZW4gaXRzIHBhcmVudCBpcyB0aGUgZnVsbCBzY3JlZW4gcm9vdAogICAgICAgIHZhciBjYW52YXNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBjYW52YXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2FudmFzQ29udGFpbmVyLCBjYW52YXMpOwogICAgICAgIGNhbnZhc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpOwogIAogICAgICAgIC8vIHVzZSBwYXJlbnQgb2YgY2FudmFzIGFzIGZ1bGwgc2NyZWVuIHJvb3QgdG8gYWxsb3cgYXNwZWN0IHJhdGlvIGNvcnJlY3Rpb24gKEZpcmVmb3ggc3RyZXRjaGVzIHRoZSByb290IHRvIHNjcmVlbiBzaXplKQogICAgICAgIGNhbnZhc0NvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbiA9IGNhbnZhc0NvbnRhaW5lclsncmVxdWVzdEZ1bGxzY3JlZW4nXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRhaW5lclsnbW96UmVxdWVzdEZ1bGxTY3JlZW4nXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRhaW5lclsnbXNSZXF1ZXN0RnVsbHNjcmVlbiddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FudmFzQ29udGFpbmVyWyd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiddID8gZnVuY3Rpb24oKSB7IGNhbnZhc0NvbnRhaW5lclsnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nXShFbGVtZW50WydBTExPV19LRVlCT0FSRF9JTlBVVCddKSB9IDogbnVsbCkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYW52YXNDb250YWluZXJbJ3dlYmtpdFJlcXVlc3RGdWxsU2NyZWVuJ10gPyBmdW5jdGlvbigpIHsgY2FudmFzQ29udGFpbmVyWyd3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiddKEVsZW1lbnRbJ0FMTE9XX0tFWUJPQVJEX0lOUFVUJ10pIH0gOiBudWxsKTsKICAKICAgICAgICBpZiAodnJEZXZpY2UpIHsKICAgICAgICAgIGNhbnZhc0NvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbih7IHZyRGlzcGxheTogdnJEZXZpY2UgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbnZhc0NvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgICAgIH0KICAgICAgfSxyZXF1ZXN0RnVsbFNjcmVlbjpmdW5jdGlvbiAobG9ja1BvaW50ZXIsIHJlc2l6ZUNhbnZhcywgdnJEZXZpY2UpIHsKICAgICAgICAgIE1vZHVsZS5wcmludEVycignQnJvd3Nlci5yZXF1ZXN0RnVsbFNjcmVlbigpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBjYWxsIEJyb3dzZXIucmVxdWVzdEZ1bGxzY3JlZW4gaW5zdGVhZC4nKTsKICAgICAgICAgIEJyb3dzZXIucmVxdWVzdEZ1bGxTY3JlZW4gPSBmdW5jdGlvbihsb2NrUG9pbnRlciwgcmVzaXplQ2FudmFzLCB2ckRldmljZSkgewogICAgICAgICAgICByZXR1cm4gQnJvd3Nlci5yZXF1ZXN0RnVsbHNjcmVlbihsb2NrUG9pbnRlciwgcmVzaXplQ2FudmFzLCB2ckRldmljZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gQnJvd3Nlci5yZXF1ZXN0RnVsbHNjcmVlbihsb2NrUG9pbnRlciwgcmVzaXplQ2FudmFzLCB2ckRldmljZSk7CiAgICAgIH0sbmV4dFJBRjowLGZha2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWU6ZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAvLyB0cnkgdG8ga2VlcCA2MGZwcyBiZXR3ZWVuIGNhbGxzIHRvIGhlcmUKICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICBpZiAoQnJvd3Nlci5uZXh0UkFGID09PSAwKSB7CiAgICAgICAgICBCcm93c2VyLm5leHRSQUYgPSBub3cgKyAxMDAwLzYwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGlsZSAobm93ICsgMiA+PSBCcm93c2VyLm5leHRSQUYpIHsgLy8gZnVkZ2UgYSBsaXR0bGUsIHRvIGF2b2lkIHRpbWVyIGppdHRlciBjYXVzaW5nIHVzIHRvIGRvIGxvdHMgb2YgZGVsYXk6MAogICAgICAgICAgICBCcm93c2VyLm5leHRSQUYgKz0gMTAwMC82MDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGRlbGF5ID0gTWF0aC5tYXgoQnJvd3Nlci5uZXh0UkFGIC0gbm93LCAwKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmMsIGRlbGF5KTsKICAgICAgfSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWU6ZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmMpIHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHsgLy8gUHJvdmlkZSBmYWxsYmFjayB0byBzZXRUaW1lb3V0IGlmIHdpbmRvdyBpcyB1bmRlZmluZWQgKGUuZy4gaW4gTm9kZS5qcykKICAgICAgICAgIEJyb3dzZXIuZmFrZVJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7CiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbJ3JlcXVlc3RBbmltYXRpb25GcmFtZSddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dbJ21velJlcXVlc3RBbmltYXRpb25GcmFtZSddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dbJ3dlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dbJ21zUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1snb1JlcXVlc3RBbmltYXRpb25GcmFtZSddIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcm93c2VyLmZha2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7CiAgICAgICAgICB9CiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmMpOwogICAgICAgIH0KICAgICAgfSxzYWZlQ2FsbGJhY2s6ZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAoIUFCT1JUKSByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0sYWxsb3dBc3luY0NhbGxiYWNrczp0cnVlLHF1ZXVlZEFzeW5jQ2FsbGJhY2tzOltdLHBhdXNlQXN5bmNDYWxsYmFja3M6ZnVuY3Rpb24gKCkgewogICAgICAgIEJyb3dzZXIuYWxsb3dBc3luY0NhbGxiYWNrcyA9IGZhbHNlOwogICAgICB9LHJlc3VtZUFzeW5jQ2FsbGJhY2tzOmZ1bmN0aW9uICgpIHsgLy8gbWFya3MgZnV0dXJlIGNhbGxiYWNrcyBhcyBvayB0byBleGVjdXRlLCBhbmQgc3luY2hyb25vdXNseSBydW5zIGFueSByZW1haW5pbmcgb25lcyByaWdodCBub3cKICAgICAgICBCcm93c2VyLmFsbG93QXN5bmNDYWxsYmFja3MgPSB0cnVlOwogICAgICAgIGlmIChCcm93c2VyLnF1ZXVlZEFzeW5jQ2FsbGJhY2tzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciBjYWxsYmFja3MgPSBCcm93c2VyLnF1ZXVlZEFzeW5jQ2FsbGJhY2tzOwogICAgICAgICAgQnJvd3Nlci5xdWV1ZWRBc3luY0NhbGxiYWNrcyA9IFtdOwogICAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24oZnVuYykgewogICAgICAgICAgICBmdW5jKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sc2FmZVJlcXVlc3RBbmltYXRpb25GcmFtZTpmdW5jdGlvbiAoZnVuYykgewogICAgICAgIHJldHVybiBCcm93c2VyLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChBQk9SVCkgcmV0dXJuOwogICAgICAgICAgaWYgKEJyb3dzZXIuYWxsb3dBc3luY0NhbGxiYWNrcykgewogICAgICAgICAgICBmdW5jKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBCcm93c2VyLnF1ZXVlZEFzeW5jQ2FsbGJhY2tzLnB1c2goZnVuYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sc2FmZVNldFRpbWVvdXQ6ZnVuY3Rpb24gKGZ1bmMsIHRpbWVvdXQpIHsKICAgICAgICBNb2R1bGVbJ25vRXhpdFJ1bnRpbWUnXSA9IHRydWU7CiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAoQUJPUlQpIHJldHVybjsKICAgICAgICAgIGlmIChCcm93c2VyLmFsbG93QXN5bmNDYWxsYmFja3MpIHsKICAgICAgICAgICAgZnVuYygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQnJvd3Nlci5xdWV1ZWRBc3luY0NhbGxiYWNrcy5wdXNoKGZ1bmMpOwogICAgICAgICAgfQogICAgICAgIH0sIHRpbWVvdXQpOwogICAgICB9LHNhZmVTZXRJbnRlcnZhbDpmdW5jdGlvbiAoZnVuYywgdGltZW91dCkgewogICAgICAgIE1vZHVsZVsnbm9FeGl0UnVudGltZSddID0gdHJ1ZTsKICAgICAgICByZXR1cm4gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICBpZiAoQUJPUlQpIHJldHVybjsKICAgICAgICAgIGlmIChCcm93c2VyLmFsbG93QXN5bmNDYWxsYmFja3MpIHsKICAgICAgICAgICAgZnVuYygpOwogICAgICAgICAgfSAvLyBkcm9wIGl0IG9uIHRoZSBmbG9vciBvdGhlcndpc2UsIG5leHQgaW50ZXJ2YWwgd2lsbCBraWNrIGluCiAgICAgICAgfSwgdGltZW91dCk7CiAgICAgIH0sZ2V0TWltZXR5cGU6ZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgJ2pwZyc6ICdpbWFnZS9qcGVnJywKICAgICAgICAgICdqcGVnJzogJ2ltYWdlL2pwZWcnLAogICAgICAgICAgJ3BuZyc6ICdpbWFnZS9wbmcnLAogICAgICAgICAgJ2JtcCc6ICdpbWFnZS9ibXAnLAogICAgICAgICAgJ29nZyc6ICdhdWRpby9vZ2cnLAogICAgICAgICAgJ3dhdic6ICdhdWRpby93YXYnLAogICAgICAgICAgJ21wMyc6ICdhdWRpby9tcGVnJwogICAgICAgIH1bbmFtZS5zdWJzdHIobmFtZS5sYXN0SW5kZXhPZignLicpKzEpXTsKICAgICAgfSxnZXRVc2VyTWVkaWE6ZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICBpZighd2luZG93LmdldFVzZXJNZWRpYSkgewogICAgICAgICAgd2luZG93LmdldFVzZXJNZWRpYSA9IG5hdmlnYXRvclsnZ2V0VXNlck1lZGlhJ10gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3JbJ21vekdldFVzZXJNZWRpYSddOwogICAgICAgIH0KICAgICAgICB3aW5kb3cuZ2V0VXNlck1lZGlhKGZ1bmMpOwogICAgICB9LGdldE1vdmVtZW50WDpmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICByZXR1cm4gZXZlbnRbJ21vdmVtZW50WCddIHx8CiAgICAgICAgICAgICAgIGV2ZW50Wydtb3pNb3ZlbWVudFgnXSB8fAogICAgICAgICAgICAgICBldmVudFsnd2Via2l0TW92ZW1lbnRYJ10gfHwKICAgICAgICAgICAgICAgMDsKICAgICAgfSxnZXRNb3ZlbWVudFk6ZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIGV2ZW50Wydtb3ZlbWVudFknXSB8fAogICAgICAgICAgICAgICBldmVudFsnbW96TW92ZW1lbnRZJ10gfHwKICAgICAgICAgICAgICAgZXZlbnRbJ3dlYmtpdE1vdmVtZW50WSddIHx8CiAgICAgICAgICAgICAgIDA7CiAgICAgIH0sZ2V0TW91c2VXaGVlbERlbHRhOmZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBkZWx0YSA9IDA7CiAgICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7CiAgICAgICAgICBjYXNlICdET01Nb3VzZVNjcm9sbCc6IAogICAgICAgICAgICBkZWx0YSA9IGV2ZW50LmRldGFpbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdtb3VzZXdoZWVsJzogCiAgICAgICAgICAgIGRlbHRhID0gZXZlbnQud2hlZWxEZWx0YTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICd3aGVlbCc6IAogICAgICAgICAgICBkZWx0YSA9IGV2ZW50WydkZWx0YVknXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyAndW5yZWNvZ25pemVkIG1vdXNlIHdoZWVsIGV2ZW50OiAnICsgZXZlbnQudHlwZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRlbHRhOwogICAgICB9LG1vdXNlWDowLG1vdXNlWTowLG1vdXNlTW92ZW1lbnRYOjAsbW91c2VNb3ZlbWVudFk6MCx0b3VjaGVzOnt9LGxhc3RUb3VjaGVzOnt9LGNhbGN1bGF0ZU1vdXNlRXZlbnQ6ZnVuY3Rpb24gKGV2ZW50KSB7IC8vIGV2ZW50IHNob3VsZCBiZSBtb3VzZW1vdmUsIG1vdXNlZG93biBvciBtb3VzZXVwCiAgICAgICAgaWYgKEJyb3dzZXIucG9pbnRlckxvY2spIHsKICAgICAgICAgIC8vIFdoZW4gdGhlIHBvaW50ZXIgaXMgbG9ja2VkLCBjYWxjdWxhdGUgdGhlIGNvb3JkaW5hdGVzCiAgICAgICAgICAvLyBiYXNlZCBvbiB0aGUgbW92ZW1lbnQgb2YgdGhlIG1vdXNlLgogICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgRmlyZWZveCBidWcgNzY0NDk4CiAgICAgICAgICBpZiAoZXZlbnQudHlwZSAhPSAnbW91c2Vtb3ZlJyAmJgogICAgICAgICAgICAgICgnbW96TW92ZW1lbnRYJyBpbiBldmVudCkpIHsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZU1vdmVtZW50WCA9IEJyb3dzZXIubW91c2VNb3ZlbWVudFkgPSAwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZU1vdmVtZW50WCA9IEJyb3dzZXIuZ2V0TW92ZW1lbnRYKGV2ZW50KTsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZU1vdmVtZW50WSA9IEJyb3dzZXIuZ2V0TW92ZW1lbnRZKGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgLy8gY2hlY2sgaWYgU0RMIGlzIGF2YWlsYWJsZQogICAgICAgICAgaWYgKHR5cGVvZiBTREwgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZVggPSBTREwubW91c2VYICsgQnJvd3Nlci5tb3VzZU1vdmVtZW50WDsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZVkgPSBTREwubW91c2VZICsgQnJvd3Nlci5tb3VzZU1vdmVtZW50WTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGp1c3QgYWRkIHRoZSBtb3VzZSBkZWx0YSB0byB0aGUgY3VycmVudCBhYnNvbHV0IG1vdXNlIHBvc2l0aW9uCiAgICAgICAgICAgIC8vIEZJWE1FOiBpZGVhbGx5IHRoaXMgc2hvdWxkIGJlIGNsYW1wZWQgYWdhaW5zdCB0aGUgY2FudmFzIHNpemUgYW5kIHplcm8KICAgICAgICAgICAgQnJvd3Nlci5tb3VzZVggKz0gQnJvd3Nlci5tb3VzZU1vdmVtZW50WDsKICAgICAgICAgICAgQnJvd3Nlci5tb3VzZVkgKz0gQnJvd3Nlci5tb3VzZU1vdmVtZW50WTsKICAgICAgICAgIH0gICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBPdGhlcndpc2UsIGNhbGN1bGF0ZSB0aGUgbW92ZW1lbnQgYmFzZWQgb24gdGhlIGNoYW5nZXMKICAgICAgICAgIC8vIGluIHRoZSBjb29yZGluYXRlcy4KICAgICAgICAgIHZhciByZWN0ID0gTW9kdWxlWyJjYW52YXMiXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIHZhciBjdyA9IE1vZHVsZVsiY2FudmFzIl0ud2lkdGg7CiAgICAgICAgICB2YXIgY2ggPSBNb2R1bGVbImNhbnZhcyJdLmhlaWdodDsKICAKICAgICAgICAgIC8vIE5laXRoZXIgLnNjcm9sbFggb3IgLnBhZ2VYT2Zmc2V0IGFyZSBkZWZpbmVkIGluIGEgc3BlYywgYnV0CiAgICAgICAgICAvLyB3ZSBwcmVmZXIgLnNjcm9sbFggYmVjYXVzZSBpdCBpcyBjdXJyZW50bHkgaW4gYSBzcGVjIGRyYWZ0LgogICAgICAgICAgLy8gKHNlZTogaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1jc3NvbS12aWV3LTIwMTMxMjE3LykKICAgICAgICAgIHZhciBzY3JvbGxYID0gKCh0eXBlb2Ygd2luZG93LnNjcm9sbFggIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5zY3JvbGxYIDogd2luZG93LnBhZ2VYT2Zmc2V0KTsKICAgICAgICAgIHZhciBzY3JvbGxZID0gKCh0eXBlb2Ygd2luZG93LnNjcm9sbFkgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5zY3JvbGxZIDogd2luZG93LnBhZ2VZT2Zmc2V0KTsKICAgICAgICAgIC8vIElmIHRoaXMgYXNzZXJ0IGxhbmRzLCBpdCdzIGxpa2VseSBiZWNhdXNlIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBzY3JvbGxYIG9yIHBhZ2VYT2Zmc2V0CiAgICAgICAgICAvLyBhbmQgd2UgaGF2ZSBubyB2aWFibGUgZmFsbGJhY2suCiAgICAgICAgICBhc3NlcnQoKHR5cGVvZiBzY3JvbGxYICE9PSAndW5kZWZpbmVkJykgJiYgKHR5cGVvZiBzY3JvbGxZICE9PSAndW5kZWZpbmVkJyksICdVbmFibGUgdG8gcmV0cmlldmUgc2Nyb2xsIHBvc2l0aW9uLCBtb3VzZSBwb3NpdGlvbnMgbGlrZWx5IGJyb2tlbi4nKTsKICAKICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hzdGFydCcgfHwgZXZlbnQudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBldmVudC50eXBlID09PSAndG91Y2htb3ZlJykgewogICAgICAgICAgICB2YXIgdG91Y2ggPSBldmVudC50b3VjaDsKICAgICAgICAgICAgaWYgKHRvdWNoID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICByZXR1cm47IC8vIHRoZSAidG91Y2giIHByb3BlcnR5IGlzIG9ubHkgZGVmaW5lZCBpbiBTREwKICAKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYWRqdXN0ZWRYID0gdG91Y2gucGFnZVggLSAoc2Nyb2xsWCArIHJlY3QubGVmdCk7CiAgICAgICAgICAgIHZhciBhZGp1c3RlZFkgPSB0b3VjaC5wYWdlWSAtIChzY3JvbGxZICsgcmVjdC50b3ApOwogIAogICAgICAgICAgICBhZGp1c3RlZFggPSBhZGp1c3RlZFggKiAoY3cgLyByZWN0LndpZHRoKTsKICAgICAgICAgICAgYWRqdXN0ZWRZID0gYWRqdXN0ZWRZICogKGNoIC8gcmVjdC5oZWlnaHQpOwogIAogICAgICAgICAgICB2YXIgY29vcmRzID0geyB4OiBhZGp1c3RlZFgsIHk6IGFkanVzdGVkWSB9OwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaHN0YXJ0JykgewogICAgICAgICAgICAgIEJyb3dzZXIubGFzdFRvdWNoZXNbdG91Y2guaWRlbnRpZmllcl0gPSBjb29yZHM7CiAgICAgICAgICAgICAgQnJvd3Nlci50b3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdID0gY29vcmRzOwogICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaGVuZCcgfHwgZXZlbnQudHlwZSA9PT0gJ3RvdWNobW92ZScpIHsKICAgICAgICAgICAgICB2YXIgbGFzdCA9IEJyb3dzZXIudG91Y2hlc1t0b3VjaC5pZGVudGlmaWVyXTsKICAgICAgICAgICAgICBpZiAoIWxhc3QpIGxhc3QgPSBjb29yZHM7CiAgICAgICAgICAgICAgQnJvd3Nlci5sYXN0VG91Y2hlc1t0b3VjaC5pZGVudGlmaWVyXSA9IGxhc3Q7CiAgICAgICAgICAgICAgQnJvd3Nlci50b3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdID0gY29vcmRzOwogICAgICAgICAgICB9IAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgCiAgICAgICAgICB2YXIgeCA9IGV2ZW50LnBhZ2VYIC0gKHNjcm9sbFggKyByZWN0LmxlZnQpOwogICAgICAgICAgdmFyIHkgPSBldmVudC5wYWdlWSAtIChzY3JvbGxZICsgcmVjdC50b3ApOwogIAogICAgICAgICAgLy8gdGhlIGNhbnZhcyBtaWdodCBiZSBDU1Mtc2NhbGVkIGNvbXBhcmVkIHRvIGl0cyBiYWNrYnVmZmVyOwogICAgICAgICAgLy8gU0RMLXVzaW5nIGNvbnRlbnQgd2lsbCB3YW50IG1vdXNlIGNvb3JkaW5hdGVzIGluIHRlcm1zCiAgICAgICAgICAvLyBvZiBiYWNrYnVmZmVyIHVuaXRzLgogICAgICAgICAgeCA9IHggKiAoY3cgLyByZWN0LndpZHRoKTsKICAgICAgICAgIHkgPSB5ICogKGNoIC8gcmVjdC5oZWlnaHQpOwogIAogICAgICAgICAgQnJvd3Nlci5tb3VzZU1vdmVtZW50WCA9IHggLSBCcm93c2VyLm1vdXNlWDsKICAgICAgICAgIEJyb3dzZXIubW91c2VNb3ZlbWVudFkgPSB5IC0gQnJvd3Nlci5tb3VzZVk7CiAgICAgICAgICBCcm93c2VyLm1vdXNlWCA9IHg7CiAgICAgICAgICBCcm93c2VyLm1vdXNlWSA9IHk7CiAgICAgICAgfQogICAgICB9LGFzeW5jTG9hZDpmdW5jdGlvbiAodXJsLCBvbmxvYWQsIG9uZXJyb3IsIG5vUnVuRGVwKSB7CiAgICAgICAgdmFyIGRlcCA9ICFub1J1bkRlcCA/IGdldFVuaXF1ZVJ1bkRlcGVuZGVuY3koJ2FsICcgKyB1cmwpIDogJyc7CiAgICAgICAgTW9kdWxlWydyZWFkQXN5bmMnXSh1cmwsIGZ1bmN0aW9uKGFycmF5QnVmZmVyKSB7CiAgICAgICAgICBhc3NlcnQoYXJyYXlCdWZmZXIsICdMb2FkaW5nIGRhdGEgZmlsZSAiJyArIHVybCArICciIGZhaWxlZCAobm8gYXJyYXlCdWZmZXIpLicpOwogICAgICAgICAgb25sb2FkKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7CiAgICAgICAgICBpZiAoZGVwKSByZW1vdmVSdW5EZXBlbmRlbmN5KGRlcCk7CiAgICAgICAgfSwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIGlmIChvbmVycm9yKSB7CiAgICAgICAgICAgIG9uZXJyb3IoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93ICdMb2FkaW5nIGRhdGEgZmlsZSAiJyArIHVybCArICciIGZhaWxlZC4nOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChkZXApIGFkZFJ1bkRlcGVuZGVuY3koZGVwKTsKICAgICAgfSxyZXNpemVMaXN0ZW5lcnM6W10sdXBkYXRlUmVzaXplTGlzdGVuZXJzOmZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY2FudmFzID0gTW9kdWxlWydjYW52YXMnXTsKICAgICAgICBCcm93c2VyLnJlc2l6ZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGxpc3RlbmVyKSB7CiAgICAgICAgICBsaXN0ZW5lcihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIH0pOwogICAgICB9LHNldENhbnZhc1NpemU6ZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIG5vVXBkYXRlcykgewogICAgICAgIHZhciBjYW52YXMgPSBNb2R1bGVbJ2NhbnZhcyddOwogICAgICAgIEJyb3dzZXIudXBkYXRlQ2FudmFzRGltZW5zaW9ucyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgIGlmICghbm9VcGRhdGVzKSBCcm93c2VyLnVwZGF0ZVJlc2l6ZUxpc3RlbmVycygpOwogICAgICB9LHdpbmRvd2VkV2lkdGg6MCx3aW5kb3dlZEhlaWdodDowLHNldEZ1bGxzY3JlZW5DYW52YXNTaXplOmZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBjaGVjayBpZiBTREwgaXMgYXZhaWxhYmxlICAgCiAgICAgICAgaWYgKHR5cGVvZiBTREwgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIHZhciBmbGFncyA9IEhFQVBVMzJbKChTREwuc2NyZWVuKT4+MildOwogICAgICAgICAgZmxhZ3MgPSBmbGFncyB8IDB4MDA4MDAwMDA7IC8vIHNldCBTRExfRlVMTFNDUkVFTiBmbGFnCiAgICAgICAgICBIRUFQMzJbKChTREwuc2NyZWVuKT4+MildPWZsYWdzCiAgICAgICAgfQogICAgICAgIEJyb3dzZXIudXBkYXRlUmVzaXplTGlzdGVuZXJzKCk7CiAgICAgIH0sc2V0V2luZG93ZWRDYW52YXNTaXplOmZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBjaGVjayBpZiBTREwgaXMgYXZhaWxhYmxlICAgICAgIAogICAgICAgIGlmICh0eXBlb2YgU0RMICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB2YXIgZmxhZ3MgPSBIRUFQVTMyWygoU0RMLnNjcmVlbik+PjIpXTsKICAgICAgICAgIGZsYWdzID0gZmxhZ3MgJiB+MHgwMDgwMDAwMDsgLy8gY2xlYXIgU0RMX0ZVTExTQ1JFRU4gZmxhZwogICAgICAgICAgSEVBUDMyWygoU0RMLnNjcmVlbik+PjIpXT1mbGFncwogICAgICAgIH0KICAgICAgICBCcm93c2VyLnVwZGF0ZVJlc2l6ZUxpc3RlbmVycygpOwogICAgICB9LHVwZGF0ZUNhbnZhc0RpbWVuc2lvbnM6ZnVuY3Rpb24gKGNhbnZhcywgd05hdGl2ZSwgaE5hdGl2ZSkgewogICAgICAgIGlmICh3TmF0aXZlICYmIGhOYXRpdmUpIHsKICAgICAgICAgIGNhbnZhcy53aWR0aE5hdGl2ZSA9IHdOYXRpdmU7CiAgICAgICAgICBjYW52YXMuaGVpZ2h0TmF0aXZlID0gaE5hdGl2ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd05hdGl2ZSA9IGNhbnZhcy53aWR0aE5hdGl2ZTsKICAgICAgICAgIGhOYXRpdmUgPSBjYW52YXMuaGVpZ2h0TmF0aXZlOwogICAgICAgIH0KICAgICAgICB2YXIgdyA9IHdOYXRpdmU7CiAgICAgICAgdmFyIGggPSBoTmF0aXZlOwogICAgICAgIGlmIChNb2R1bGVbJ2ZvcmNlZEFzcGVjdFJhdGlvJ10gJiYgTW9kdWxlWydmb3JjZWRBc3BlY3RSYXRpbyddID4gMCkgewogICAgICAgICAgaWYgKHcvaCA8IE1vZHVsZVsnZm9yY2VkQXNwZWN0UmF0aW8nXSkgewogICAgICAgICAgICB3ID0gTWF0aC5yb3VuZChoICogTW9kdWxlWydmb3JjZWRBc3BlY3RSYXRpbyddKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGggPSBNYXRoLnJvdW5kKHcgLyBNb2R1bGVbJ2ZvcmNlZEFzcGVjdFJhdGlvJ10pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoKChkb2N1bWVudFsnZnVsbHNjcmVlbkVsZW1lbnQnXSB8fCBkb2N1bWVudFsnbW96RnVsbFNjcmVlbkVsZW1lbnQnXSB8fAogICAgICAgICAgICAgZG9jdW1lbnRbJ21zRnVsbHNjcmVlbkVsZW1lbnQnXSB8fCBkb2N1bWVudFsnd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQnXSB8fAogICAgICAgICAgICAgZG9jdW1lbnRbJ3dlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudCddKSA9PT0gY2FudmFzLnBhcmVudE5vZGUpICYmICh0eXBlb2Ygc2NyZWVuICE9ICd1bmRlZmluZWQnKSkgewogICAgICAgICAgIHZhciBmYWN0b3IgPSBNYXRoLm1pbihzY3JlZW4ud2lkdGggLyB3LCBzY3JlZW4uaGVpZ2h0IC8gaCk7CiAgICAgICAgICAgdyA9IE1hdGgucm91bmQodyAqIGZhY3Rvcik7CiAgICAgICAgICAgaCA9IE1hdGgucm91bmQoaCAqIGZhY3Rvcik7CiAgICAgICAgfQogICAgICAgIGlmIChCcm93c2VyLnJlc2l6ZUNhbnZhcykgewogICAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAgIT0gdykgY2FudmFzLndpZHRoICA9IHc7CiAgICAgICAgICBpZiAoY2FudmFzLmhlaWdodCAhPSBoKSBjYW52YXMuaGVpZ2h0ID0gaDsKICAgICAgICAgIGlmICh0eXBlb2YgY2FudmFzLnN0eWxlICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSggIndpZHRoIik7CiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiaGVpZ2h0Iik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjYW52YXMud2lkdGggICE9IHdOYXRpdmUpIGNhbnZhcy53aWR0aCAgPSB3TmF0aXZlOwogICAgICAgICAgaWYgKGNhbnZhcy5oZWlnaHQgIT0gaE5hdGl2ZSkgY2FudmFzLmhlaWdodCA9IGhOYXRpdmU7CiAgICAgICAgICBpZiAodHlwZW9mIGNhbnZhcy5zdHlsZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBpZiAodyAhPSB3TmF0aXZlIHx8IGggIT0gaE5hdGl2ZSkgewogICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5zZXRQcm9wZXJ0eSggIndpZHRoIiwgdyArICJweCIsICJpbXBvcnRhbnQiKTsKICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuc2V0UHJvcGVydHkoImhlaWdodCIsIGggKyAicHgiLCAiaW1wb3J0YW50Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLnJlbW92ZVByb3BlcnR5KCAid2lkdGgiKTsKICAgICAgICAgICAgICBjYW52YXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoImhlaWdodCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LHdnZXRSZXF1ZXN0czp7fSxuZXh0V2dldFJlcXVlc3RIYW5kbGU6MCxnZXROZXh0V2dldFJlcXVlc3RIYW5kbGU6ZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBoYW5kbGUgPSBCcm93c2VyLm5leHRXZ2V0UmVxdWVzdEhhbmRsZTsKICAgICAgICBCcm93c2VyLm5leHRXZ2V0UmVxdWVzdEhhbmRsZSsrOwogICAgICAgIHJldHVybiBoYW5kbGU7CiAgICAgIH19OwogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIAogIHZhciBfZW52aXJvbj1TVEFUSUNUT1A7IFNUQVRJQ1RPUCArPSAxNjs7dmFyIF9fX2Vudmlyb249X2Vudmlyb247ZnVuY3Rpb24gX19fYnVpbGRFbnZpcm9ubWVudChlbnYpIHsKICAgICAgLy8gV0FSTklORzogQXJiaXRyYXJ5IGxpbWl0IQogICAgICB2YXIgTUFYX0VOVl9WQUxVRVMgPSA2NDsKICAgICAgdmFyIFRPVEFMX0VOVl9TSVpFID0gMTAyNDsKICAKICAgICAgLy8gU3RhdGljYWxseSBhbGxvY2F0ZSBtZW1vcnkgZm9yIHRoZSBlbnZpcm9ubWVudC4KICAgICAgdmFyIHBvb2xQdHI7CiAgICAgIHZhciBlbnZQdHI7CiAgICAgIGlmICghX19fYnVpbGRFbnZpcm9ubWVudC5jYWxsZWQpIHsKICAgICAgICBfX19idWlsZEVudmlyb25tZW50LmNhbGxlZCA9IHRydWU7CiAgICAgICAgLy8gU2V0IGRlZmF1bHQgdmFsdWVzLiBVc2Ugc3RyaW5nIGtleXMgZm9yIENsb3N1cmUgQ29tcGlsZXIgY29tcGF0aWJpbGl0eS4KICAgICAgICBFTlZbJ1VTRVInXSA9IEVOVlsnTE9HTkFNRSddID0gJ3dlYl91c2VyJzsKICAgICAgICBFTlZbJ1BBVEgnXSA9ICcvJzsKICAgICAgICBFTlZbJ1BXRCddID0gJy8nOwogICAgICAgIEVOVlsnSE9NRSddID0gJy9ob21lL3dlYl91c2VyJzsKICAgICAgICBFTlZbJ0xBTkcnXSA9ICdDLlVURi04JzsKICAgICAgICBFTlZbJ18nXSA9IE1vZHVsZVsndGhpc1Byb2dyYW0nXTsKICAgICAgICAvLyBBbGxvY2F0ZSBtZW1vcnkuCiAgICAgICAgcG9vbFB0ciA9IHN0YXRpY0FsbG9jKFRPVEFMX0VOVl9TSVpFKTsKICAgICAgICBlbnZQdHIgPSBzdGF0aWNBbGxvYyhNQVhfRU5WX1ZBTFVFUyAqIDQpOwogICAgICAgIEhFQVAzMlsoKGVudlB0cik+PjIpXT1wb29sUHRyOwogICAgICAgIEhFQVAzMlsoKF9lbnZpcm9uKT4+MildPWVudlB0cjsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbnZQdHIgPSBIRUFQMzJbKChfZW52aXJvbik+PjIpXTsKICAgICAgICBwb29sUHRyID0gSEVBUDMyWygoZW52UHRyKT4+MildOwogICAgICB9CiAgCiAgICAgIC8vIENvbGxlY3Qga2V5PXZhbHVlIGxpbmVzLgogICAgICB2YXIgc3RyaW5ncyA9IFtdOwogICAgICB2YXIgdG90YWxTaXplID0gMDsKICAgICAgZm9yICh2YXIga2V5IGluIGVudikgewogICAgICAgIGlmICh0eXBlb2YgZW52W2tleV0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICB2YXIgbGluZSA9IGtleSArICc9JyArIGVudltrZXldOwogICAgICAgICAgc3RyaW5ncy5wdXNoKGxpbmUpOwogICAgICAgICAgdG90YWxTaXplICs9IGxpbmUubGVuZ3RoOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodG90YWxTaXplID4gVE9UQUxfRU5WX1NJWkUpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vudmlyb25tZW50IHNpemUgZXhjZWVkZWQgVE9UQUxfRU5WX1NJWkUhJyk7CiAgICAgIH0KICAKICAgICAgLy8gTWFrZSBuZXcuCiAgICAgIHZhciBwdHJTaXplID0gNDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxpbmUgPSBzdHJpbmdzW2ldOwogICAgICAgIHdyaXRlQXNjaWlUb01lbW9yeShsaW5lLCBwb29sUHRyKTsKICAgICAgICBIRUFQMzJbKCgoZW52UHRyKSsoaSAqIHB0clNpemUpKT4+MildPXBvb2xQdHI7CiAgICAgICAgcG9vbFB0ciArPSBsaW5lLmxlbmd0aCArIDE7CiAgICAgIH0KICAgICAgSEVBUDMyWygoKGVudlB0cikrKHN0cmluZ3MubGVuZ3RoICogcHRyU2l6ZSkpPj4yKV09MDsKICAgIH12YXIgRU5WPXt9O2Z1bmN0aW9uIF9nZXRlbnYobmFtZSkgewogICAgICAvLyBjaGFyICpnZXRlbnYoY29uc3QgY2hhciAqbmFtZSk7CiAgICAgIC8vIGh0dHA6Ly9wdWJzLm9wZW5ncm91cC5vcmcvb25saW5lcHVicy8wMDk2OTUzOTkvZnVuY3Rpb25zL2dldGVudi5odG1sCiAgICAgIGlmIChuYW1lID09PSAwKSByZXR1cm4gMDsKICAgICAgbmFtZSA9IFBvaW50ZXJfc3RyaW5naWZ5KG5hbWUpOwogICAgICBpZiAoIUVOVi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgcmV0dXJuIDA7CiAgCiAgICAgIGlmIChfZ2V0ZW52LnJldCkgX2ZyZWUoX2dldGVudi5yZXQpOwogICAgICBfZ2V0ZW52LnJldCA9IGFsbG9jYXRlVVRGOChFTlZbbmFtZV0pOwogICAgICByZXR1cm4gX2dldGVudi5yZXQ7CiAgICB9CiAgCiAgCiAgdmFyIEVSUk5PX0NPREVTPXtFUEVSTToxLEVOT0VOVDoyLEVTUkNIOjMsRUlOVFI6NCxFSU86NSxFTlhJTzo2LEUyQklHOjcsRU5PRVhFQzo4LEVCQURGOjksRUNISUxEOjEwLEVBR0FJTjoxMSxFV09VTERCTE9DSzoxMSxFTk9NRU06MTIsRUFDQ0VTOjEzLEVGQVVMVDoxNCxFTk9UQkxLOjE1LEVCVVNZOjE2LEVFWElTVDoxNyxFWERFVjoxOCxFTk9ERVY6MTksRU5PVERJUjoyMCxFSVNESVI6MjEsRUlOVkFMOjIyLEVORklMRToyMyxFTUZJTEU6MjQsRU5PVFRZOjI1LEVUWFRCU1k6MjYsRUZCSUc6MjcsRU5PU1BDOjI4LEVTUElQRToyOSxFUk9GUzozMCxFTUxJTks6MzEsRVBJUEU6MzIsRURPTTozMyxFUkFOR0U6MzQsRU5PTVNHOjQyLEVJRFJNOjQzLEVDSFJORzo0NCxFTDJOU1lOQzo0NSxFTDNITFQ6NDYsRUwzUlNUOjQ3LEVMTlJORzo0OCxFVU5BVENIOjQ5LEVOT0NTSTo1MCxFTDJITFQ6NTEsRURFQURMSzozNSxFTk9MQ0s6MzcsRUJBREU6NTIsRUJBRFI6NTMsRVhGVUxMOjU0LEVOT0FOTzo1NSxFQkFEUlFDOjU2LEVCQURTTFQ6NTcsRURFQURMT0NLOjM1LEVCRk9OVDo1OSxFTk9TVFI6NjAsRU5PREFUQTo2MSxFVElNRTo2MixFTk9TUjo2MyxFTk9ORVQ6NjQsRU5PUEtHOjY1LEVSRU1PVEU6NjYsRU5PTElOSzo2NyxFQURWOjY4LEVTUk1OVDo2OSxFQ09NTTo3MCxFUFJPVE86NzEsRU1VTFRJSE9QOjcyLEVET1RET1Q6NzMsRUJBRE1TRzo3NCxFTk9UVU5JUTo3NixFQkFERkQ6NzcsRVJFTUNIRzo3OCxFTElCQUNDOjc5LEVMSUJCQUQ6ODAsRUxJQlNDTjo4MSxFTElCTUFYOjgyLEVMSUJFWEVDOjgzLEVOT1NZUzozOCxFTk9URU1QVFk6MzksRU5BTUVUT09MT05HOjM2LEVMT09QOjQwLEVPUE5PVFNVUFA6OTUsRVBGTk9TVVBQT1JUOjk2LEVDT05OUkVTRVQ6MTA0LEVOT0JVRlM6MTA1LEVBRk5PU1VQUE9SVDo5NyxFUFJPVE9UWVBFOjkxLEVOT1RTT0NLOjg4LEVOT1BST1RPT1BUOjkyLEVTSFVURE9XTjoxMDgsRUNPTk5SRUZVU0VEOjExMSxFQUREUklOVVNFOjk4LEVDT05OQUJPUlRFRDoxMDMsRU5FVFVOUkVBQ0g6MTAxLEVORVRET1dOOjEwMCxFVElNRURPVVQ6MTEwLEVIT1NURE9XTjoxMTIsRUhPU1RVTlJFQUNIOjExMyxFSU5QUk9HUkVTUzoxMTUsRUFMUkVBRFk6MTE0LEVERVNUQUREUlJFUTo4OSxFTVNHU0laRTo5MCxFUFJPVE9OT1NVUFBPUlQ6OTMsRVNPQ0tUTk9TVVBQT1JUOjk0LEVBRERSTk9UQVZBSUw6OTksRU5FVFJFU0VUOjEwMixFSVNDT05OOjEwNixFTk9UQ09OTjoxMDcsRVRPT01BTllSRUZTOjEwOSxFVVNFUlM6ODcsRURRVU9UOjEyMixFU1RBTEU6MTE2LEVOT1RTVVA6OTUsRU5PTUVESVVNOjEyMyxFSUxTRVE6ODQsRU9WRVJGTE9XOjc1LEVDQU5DRUxFRDoxMjUsRU5PVFJFQ09WRVJBQkxFOjEzMSxFT1dORVJERUFEOjEzMCxFU1RSUElQRTo4Nn07CiAgCiAgZnVuY3Rpb24gX19fc2V0RXJyTm8odmFsdWUpIHsKICAgICAgaWYgKE1vZHVsZVsnX19fZXJybm9fbG9jYXRpb24nXSkgSEVBUDMyWygoTW9kdWxlWydfX19lcnJub19sb2NhdGlvbiddKCkpPj4yKV09dmFsdWU7CiAgICAgIGVsc2UgTW9kdWxlLnByaW50RXJyKCdmYWlsZWQgdG8gc2V0IGVycm5vIGZyb20gSlMnKTsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfWZ1bmN0aW9uIF9wdXRlbnYoc3RyaW5nKSB7CiAgICAgIC8vIGludCBwdXRlbnYoY2hhciAqc3RyaW5nKTsKICAgICAgLy8gaHR0cDovL3B1YnMub3Blbmdyb3VwLm9yZy9vbmxpbmVwdWJzLzAwOTY5NTM5OS9mdW5jdGlvbnMvcHV0ZW52Lmh0bWwKICAgICAgLy8gV0FSTklORzogQWNjb3JkaW5nIHRvIHRoZSBzdGFuZGFyZCAoYW5kIHRoZSBnbGliYyBpbXBsZW1lbnRhdGlvbiksIHRoZQogICAgICAvLyAgICAgICAgICBzdHJpbmcgaXMgdGFrZW4gYnkgcmVmZXJlbmNlIHNvIGZ1dHVyZSBjaGFuZ2VzIGFyZSByZWZsZWN0ZWQuCiAgICAgIC8vICAgICAgICAgIFdlIGNvcHkgaXQgaW5zdGVhZCwgcG9zc2libHkgYnJlYWtpbmcgc29tZSB1c2VzLgogICAgICBpZiAoc3RyaW5nID09PSAwKSB7CiAgICAgICAgX19fc2V0RXJyTm8oRVJSTk9fQ09ERVMuRUlOVkFMKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgc3RyaW5nID0gUG9pbnRlcl9zdHJpbmdpZnkoc3RyaW5nKTsKICAgICAgdmFyIHNwbGl0UG9pbnQgPSBzdHJpbmcuaW5kZXhPZignPScpCiAgICAgIGlmIChzdHJpbmcgPT09ICcnIHx8IHN0cmluZy5pbmRleE9mKCc9JykgPT09IC0xKSB7CiAgICAgICAgX19fc2V0RXJyTm8oRVJSTk9fQ09ERVMuRUlOVkFMKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgdmFyIG5hbWUgPSBzdHJpbmcuc2xpY2UoMCwgc3BsaXRQb2ludCk7CiAgICAgIHZhciB2YWx1ZSA9IHN0cmluZy5zbGljZShzcGxpdFBvaW50ICsgMSk7CiAgICAgIGlmICghKG5hbWUgaW4gRU5WKSB8fCBFTlZbbmFtZV0gIT09IHZhbHVlKSB7CiAgICAgICAgRU5WW25hbWVdID0gdmFsdWU7CiAgICAgICAgX19fYnVpbGRFbnZpcm9ubWVudChFTlYpOwogICAgICB9CiAgICAgIHJldHVybiAwOwogICAgfQogIAogIGZ1bmN0aW9uIF9TRExfUldGcm9tQ29uc3RNZW0obWVtLCBzaXplKSB7CiAgICAgIHZhciBpZCA9IFNETC5yd29wcy5sZW5ndGg7IC8vIFRPRE86IHJlY3ljbGUgaWRzIHdoZW4gdGhleSBhcmUgbnVsbAogICAgICBTREwucndvcHMucHVzaCh7IGJ5dGVzOiBtZW0sIGNvdW50OiBzaXplIH0pOwogICAgICByZXR1cm4gaWQ7CiAgICB9ZnVuY3Rpb24gX1RURl9Gb250SGVpZ2h0KGZvbnQpIHsKICAgICAgdmFyIGZvbnREYXRhID0gU0RMLmZvbnRzW2ZvbnRdOwogICAgICByZXR1cm4gZm9udERhdGEuc2l6ZTsKICAgIH1mdW5jdGlvbiBfVFRGX1NpemVUZXh0KGZvbnQsIHRleHQsIHcsIGgpIHsKICAgICAgdmFyIGZvbnREYXRhID0gU0RMLmZvbnRzW2ZvbnRdOwogICAgICBpZiAodykgewogICAgICAgIEhFQVAzMlsoKHcpPj4yKV09U0RMLmVzdGltYXRlVGV4dFdpZHRoKGZvbnREYXRhLCBQb2ludGVyX3N0cmluZ2lmeSh0ZXh0KSk7CiAgICAgIH0KICAgICAgaWYgKGgpIHsKICAgICAgICBIRUFQMzJbKChoKT4+MildPWZvbnREYXRhLnNpemU7CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9ZnVuY3Rpb24gX1RURl9SZW5kZXJUZXh0X1NvbGlkKGZvbnQsIHRleHQsIGNvbG9yKSB7CiAgICAgIC8vIFhYWCB0aGUgZm9udCBhbmQgY29sb3IgYXJlIGlnbm9yZWQKICAgICAgdGV4dCA9IFBvaW50ZXJfc3RyaW5naWZ5KHRleHQpIHx8ICcgJzsgLy8gaWYgZ2l2ZW4gYW4gZW1wdHkgc3RyaW5nLCBzdGlsbCByZXR1cm4gYSB2YWxpZCBzdXJmYWNlCiAgICAgIHZhciBmb250RGF0YSA9IFNETC5mb250c1tmb250XTsKICAgICAgdmFyIHcgPSBTREwuZXN0aW1hdGVUZXh0V2lkdGgoZm9udERhdGEsIHRleHQpOwogICAgICB2YXIgaCA9IGZvbnREYXRhLnNpemU7CiAgICAgIGNvbG9yID0gU0RMLmxvYWRDb2xvclRvQ1NTUkdCKGNvbG9yKTsgLy8gWFhYIGFscGhhIGJyZWFrcyBmb250cz8KICAgICAgdmFyIGZvbnRTdHJpbmcgPSBTREwubWFrZUZvbnRTdHJpbmcoaCwgZm9udERhdGEubmFtZSk7CiAgICAgIHZhciBzdXJmID0gU0RMLm1ha2VTdXJmYWNlKHcsIGgsIDAsIGZhbHNlLCAndGV4dDonICsgdGV4dCk7IC8vIGJvZ3VzIG51bWJlcnMuLgogICAgICB2YXIgc3VyZkRhdGEgPSBTREwuc3VyZmFjZXNbc3VyZl07CiAgICAgIHN1cmZEYXRhLmN0eC5zYXZlKCk7CiAgICAgIHN1cmZEYXRhLmN0eC5maWxsU3R5bGUgPSBjb2xvcjsKICAgICAgc3VyZkRhdGEuY3R4LmZvbnQgPSBmb250U3RyaW5nOwogICAgICAvLyB1c2UgYm90dG9tIGFsbGlnbWVudCwgYmVjYXVzZSBpdCB3b3JrcwogICAgICAvLyBzYW1lIGluIGFsbCBicm93c2VycywgbW9yZSBpbmZvIGhlcmU6CiAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTczNzg1MgogICAgICBzdXJmRGF0YS5jdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7CiAgICAgIHN1cmZEYXRhLmN0eC5maWxsVGV4dCh0ZXh0LCAwLCBofDApOwogICAgICBzdXJmRGF0YS5jdHgucmVzdG9yZSgpOwogICAgICByZXR1cm4gc3VyZjsKICAgIH1mdW5jdGlvbiBfTWl4X0hhbHRNdXNpYygpIHsKICAgICAgdmFyIGF1ZGlvID0gU0RMLm11c2ljLmF1ZGlvOwogICAgICBpZiAoYXVkaW8pIHsKICAgICAgICBhdWRpby5zcmMgPSBhdWRpby5zcmM7IC8vIHJld2luZCA8bWVkaWE+IGVsZW1lbnQKICAgICAgICBhdWRpby5jdXJyZW50UG9zaXRpb24gPSAwOyAvLyByZXdpbmQgV2ViIEF1ZGlvIGdyYXBoIHBsYXliYWNrLgogICAgICAgIGF1ZGlvLnBhdXNlKCk7CiAgICAgIH0KICAgICAgU0RMLm11c2ljLmF1ZGlvID0gbnVsbDsKICAgICAgaWYgKFNETC5ob29rTXVzaWNGaW5pc2hlZCkgewogICAgICAgIE1vZHVsZVsnZHluQ2FsbF92J10oU0RMLmhvb2tNdXNpY0ZpbmlzaGVkKTsKICAgICAgfQogICAgICByZXR1cm4gMDsKICAgIH1mdW5jdGlvbiBfTWl4X1BsYXlNdXNpYyhpZCwgbG9vcHMpIHsKICAgICAgLy8gUGF1c2Ugb2xkIG11c2ljIGlmIGl0IGV4aXN0cy4KICAgICAgaWYgKFNETC5tdXNpYy5hdWRpbykgewogICAgICAgIGlmICghU0RMLm11c2ljLmF1ZGlvLnBhdXNlZCkgTW9kdWxlLnByaW50RXJyKCdNdXNpYyBpcyBhbHJlYWR5IHBsYXlpbmcuICcgKyBTREwubXVzaWMuc291cmNlKTsKICAgICAgICBTREwubXVzaWMuYXVkaW8ucGF1c2UoKTsKICAgICAgfQogICAgICB2YXIgaW5mbyA9IFNETC5hdWRpb3NbaWRdOwogICAgICB2YXIgYXVkaW87CiAgICAgIGlmIChpbmZvLndlYkF1ZGlvKSB7IC8vIFBsYXkgdmlhIFdlYiBBdWRpbyBBUEkKICAgICAgICAvLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIFdlYkF1ZGlvIG9iamVjdC4KICAgICAgICBhdWRpbyA9IHt9OwogICAgICAgIGF1ZGlvLnJlc291cmNlID0gaW5mbzsgLy8gVGhpcyBuZXcgd2ViQXVkaW8gb2JqZWN0IGlzIGFuIGluc3RhbmNlIHRoYXQgcmVmZXJzIHRvIHRoaXMgZXhpc3RpbmcgcmVzb3VyY2UuCiAgICAgICAgYXVkaW8ucGF1c2VkID0gZmFsc2U7CiAgICAgICAgYXVkaW8uY3VycmVudFBvc2l0aW9uID0gMDsKICAgICAgICBhdWRpby5wbGF5ID0gZnVuY3Rpb24oKSB7IFNETC5wbGF5V2ViQXVkaW8odGhpcyk7IH0KICAgICAgICBhdWRpby5wYXVzZSA9IGZ1bmN0aW9uKCkgeyBTREwucGF1c2VXZWJBdWRpbyh0aGlzKTsgfQogICAgICB9IGVsc2UgaWYgKGluZm8uYXVkaW8pIHsgLy8gUGxheSB2aWEgdGhlIDxhdWRpbz4gZWxlbWVudAogICAgICAgIGF1ZGlvID0gaW5mby5hdWRpbzsKICAgICAgfQogICAgICBhdWRpb1snb25lbmRlZCddID0gZnVuY3Rpb24oKSB7IGlmIChTREwubXVzaWMuYXVkaW8gPT0gdGhpcykgX01peF9IYWx0TXVzaWMoKTsgfSAvLyB3aWxsIHNlbmQgY2FsbGJhY2sKICAgICAgYXVkaW8ubG9vcCA9IGxvb3BzICE9IDA7IC8vIFRPRE86IGhhbmRsZSBOIGxvb3BzIGZvciBmaW5pdGUgTgogICAgICBhdWRpby52b2x1bWUgPSBTREwubXVzaWMudm9sdW1lOwogICAgICBTREwubXVzaWMuYXVkaW8gPSBhdWRpbzsKICAgICAgYXVkaW8ucGxheSgpOwogICAgICByZXR1cm4gMDsKICAgIH1mdW5jdGlvbiBfTWl4X0ZyZWVDaHVuayhpZCkgewogICAgICBTREwuYXVkaW9zW2lkXSA9IG51bGw7CiAgICB9ZnVuY3Rpb24gX01peF9Mb2FkV0FWX1JXKHJ3b3BzSUQsIGZyZWVzcmMpIHsKICAgICAgdmFyIHJ3b3BzID0gU0RMLnJ3b3BzW3J3b3BzSURdOwogIAogIAogICAgICBpZiAocndvcHMgPT09IHVuZGVmaW5lZCkKICAgICAgICByZXR1cm4gMDsKICAKICAgICAgdmFyIGZpbGVuYW1lID0gJyc7CiAgICAgIHZhciBhdWRpbzsKICAgICAgdmFyIHdlYkF1ZGlvOwogICAgICB2YXIgYnl0ZXM7CiAgCiAgICAgIGlmIChyd29wcy5maWxlbmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZmlsZW5hbWUgPSBQQVRILnJlc29sdmUocndvcHMuZmlsZW5hbWUpOwogICAgICAgIHZhciByYXcgPSBNb2R1bGVbInByZWxvYWRlZEF1ZGlvcyJdW2ZpbGVuYW1lXTsKICAgICAgICBpZiAoIXJhdykgewogICAgICAgICAgaWYgKHJhdyA9PT0gbnVsbCkgTW9kdWxlLnByaW50RXJyKCdUcnlpbmcgdG8gcmV1c2UgcHJlbG9hZGVkIGF1ZGlvLCBidXQgZnJlZVByZWxvYWRlZE1lZGlhT25Vc2UgaXMgc2V0IScpOwogICAgICAgICAgaWYgKCFNb2R1bGUubm9BdWRpb0RlY29kaW5nKSB3YXJuT25jZSgnQ2Fubm90IGZpbmQgcHJlbG9hZGVkIGF1ZGlvICcgKyBmaWxlbmFtZSk7CiAgCiAgICAgICAgICAvLyBzZWUgaWYgd2UgY2FuIHJlYWQgdGhlIGZpbGUtY29udGVudHMgZnJvbSB0aGUgaW4tbWVtb3J5IEZTCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBieXRlcyA9IEZTLnJlYWRGaWxlKGZpbGVuYW1lKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgTW9kdWxlLnByaW50RXJyKCdDb3VsZG5cJ3QgZmluZCBmaWxlIGZvcjogJyArIGZpbGVuYW1lKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChNb2R1bGVbJ2ZyZWVQcmVsb2FkZWRNZWRpYU9uVXNlJ10pIHsKICAgICAgICAgIE1vZHVsZVsicHJlbG9hZGVkQXVkaW9zIl1bZmlsZW5hbWVdID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgYXVkaW8gPSByYXc7CiAgICAgIH0KICAgICAgZWxzZSBpZiAocndvcHMuYnl0ZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZvciBXZWIgQXVkaW8gY29udGV4dCBidWZmZXIgZGVjb2RpbmcsIHdlIG11c3QgbWFrZSBhIGNsb25lIG9mIHRoZSBhdWRpbyBkYXRhLCBidXQgZm9yIDxtZWRpYT4gZWxlbWVudCwKICAgICAgICAvLyBhIHZpZXcgdG8gZXhpc3RpbmcgZGF0YSBpcyBzdWZmaWNpZW50LgogICAgICAgIGlmIChTREwud2ViQXVkaW9BdmFpbGFibGUoKSkgYnl0ZXMgPSBIRUFQVTguYnVmZmVyLnNsaWNlKHJ3b3BzLmJ5dGVzLCByd29wcy5ieXRlcyArIHJ3b3BzLmNvdW50KTsKICAgICAgICBlbHNlIGJ5dGVzID0gSEVBUFU4LnN1YmFycmF5KHJ3b3BzLmJ5dGVzLCByd29wcy5ieXRlcyArIHJ3b3BzLmNvdW50KTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogIAogICAgICB2YXIgYXJyYXlCdWZmZXIgPSBieXRlcyA/IGJ5dGVzLmJ1ZmZlciB8fCBieXRlcyA6IGJ5dGVzOwogIAogICAgICAvLyBUbyBhbGxvdyB1c2VyIGNvZGUgdG8gd29yayBhcm91bmQgYnJvd3NlciBidWdzIHdpdGggYXVkaW8gcGxheWJhY2sgb24gPGF1ZGlvPiBlbGVtZW50cyBhbiBXZWIgQXVkaW8sIGVuYWJsZQogICAgICAvLyB0aGUgdXNlciBjb2RlIHRvIGhvb2sgaW4gYSBjYWxsYmFjayB0byBkZWNpZGUgb24gYSBmaWxlIGJhc2lzIHdoZXRoZXIgZWFjaCBmaWxlIHNob3VsZCB1c2UgV2ViIEF1ZGlvIG9yIDxhdWRpbz4gZm9yIGRlY29kaW5nIGFuZCBwbGF5YmFjay4KICAgICAgLy8gSW4gcGFydGljdWxhciwgc2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY1NDc4NyBhbmQgP2lkPTEwMTI4MDEgZm9yIHRyYWRlb2Zmcy4KICAgICAgdmFyIGNhblBsYXlXaXRoV2ViQXVkaW8gPSBNb2R1bGVbJ1NETF9jYW5QbGF5V2l0aFdlYkF1ZGlvJ10gPT09IHVuZGVmaW5lZCB8fCBNb2R1bGVbJ1NETF9jYW5QbGF5V2l0aFdlYkF1ZGlvJ10oZmlsZW5hbWUsIGFycmF5QnVmZmVyKTsKICAKICAgICAgaWYgKGJ5dGVzICE9PSB1bmRlZmluZWQgJiYgU0RMLndlYkF1ZGlvQXZhaWxhYmxlKCkgJiYgY2FuUGxheVdpdGhXZWJBdWRpbykgewogICAgICAgIGF1ZGlvID0gdW5kZWZpbmVkOwogICAgICAgIHdlYkF1ZGlvID0ge307CiAgICAgICAgLy8gVGhlIGF1ZGlvIGRlY29kaW5nIHByb2Nlc3MgaXMgYXN5bmNocm9ub3VzLCB3aGljaCBnaXZlcyB0cm91YmxlIGlmIHVzZXIgY29kZSBwbGF5cyB0aGUgYXVkaW8gZGF0YSBiYWNrIGltbWVkaWF0ZWx5CiAgICAgICAgLy8gYWZ0ZXIgbG9hZGluZy4gVGhlcmVmb3JlIHByZXBhcmUgYW4gYXJyYXkgb2YgY2FsbGJhY2sgaGFuZGxlcnMgdG8gcnVuIHdoZW4gdGhpcyBhdWRpbyBkZWNvZGluZyBpcyBjb21wbGV0ZSwgd2hpY2gKICAgICAgICAvLyB3aWxsIHRoZW4gc3RhcnQgdGhlIHBsYXliYWNrICh3aXRoIHNvbWUgZGVsYXkpLgogICAgICAgIHdlYkF1ZGlvLm9uRGVjb2RlQ29tcGxldGUgPSBbXTsgLy8gV2hpbGUgdGhpcyBtZW1iZXIgYXJyYXkgZXhpc3RzLCBkZWNvZGluZyBoYXNuJ3QgZmluaXNoZWQgeWV0LgogICAgICAgIGZ1bmN0aW9uIG9uRGVjb2RlQ29tcGxldGUoZGF0YSkgewogICAgICAgICAgd2ViQXVkaW8uZGVjb2RlZEJ1ZmZlciA9IGRhdGE7CiAgICAgICAgICAvLyBDYWxsIGFsbCBoYW5kbGVycyB0aGF0IHdlcmUgd2FpdGluZyBmb3IgdGhpcyBkZWNvZGUgdG8gZmluaXNoLCBhbmQgY2xlYXIgdGhlIGhhbmRsZXIgbGlzdC4KICAgICAgICAgIHdlYkF1ZGlvLm9uRGVjb2RlQ29tcGxldGUuZm9yRWFjaChmdW5jdGlvbihlKSB7IGUoKTsgfSk7CiAgICAgICAgICB3ZWJBdWRpby5vbkRlY29kZUNvbXBsZXRlID0gdW5kZWZpbmVkOyAvLyBEb24ndCBhbGxvdyBtb3JlIGNhbGxiYWNrIGhhbmRsZXJzIHNpbmNlIGF1ZGlvIGhhcyBmaW5pc2hlZCBkZWNvZGluZy4KICAgICAgICB9CiAgCiAgICAgICAgU0RMLmF1ZGlvQ29udGV4dFsnZGVjb2RlQXVkaW9EYXRhJ10oYXJyYXlCdWZmZXIsIG9uRGVjb2RlQ29tcGxldGUpOwogICAgICB9IGVsc2UgaWYgKGF1ZGlvID09PSB1bmRlZmluZWQgJiYgYnl0ZXMpIHsKICAgICAgICAvLyBIZXJlLCB3ZSBkaWRuJ3QgZmluZCBhIHByZWxvYWRlZCBhdWRpbyBidXQgd2UgZWl0aGVyIHdlcmUgcGFzc2VkIGEgZmlsZXBhdGggZm9yCiAgICAgICAgLy8gd2hpY2ggd2UgbG9hZGVkIGJ5dGVzLCBvciB3ZSB3ZXJlIHBhc3NlZCBzb21lIGJ5dGVzCiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbYnl0ZXNdLCB7dHlwZTogcndvcHMubWltZXR5cGV9KTsKICAgICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBhdWRpbyA9IG5ldyBBdWRpbygpOwogICAgICAgIGF1ZGlvLnNyYyA9IHVybDsKICAgICAgICBhdWRpby5tb3pBdWRpb0NoYW5uZWxUeXBlID0gJ2NvbnRlbnQnOyAvLyBidWd6aWxsYSA5MTAzNDAKICAgICAgfQogIAogICAgICB2YXIgaWQgPSBTREwuYXVkaW9zLmxlbmd0aDsKICAgICAgLy8gS2VlcCB0aGUgbG9hZGVkIGF1ZGlvIGluIHRoZSBhdWRpbyBhcnJheXMsIHJlYWR5IGZvciBwbGF5YmFjawogICAgICBTREwuYXVkaW9zLnB1c2goewogICAgICAgIHNvdXJjZTogZmlsZW5hbWUsCiAgICAgICAgYXVkaW86IGF1ZGlvLCAvLyBQb2ludHMgdG8gdGhlIDxhdWRpbz4gZWxlbWVudCwgaWYgbG9hZGVkCiAgICAgICAgd2ViQXVkaW86IHdlYkF1ZGlvIC8vIFBvaW50cyB0byBhIFdlYiBBdWRpbyAtc3BlY2lmaWMgcmVzb3VyY2Ugb2JqZWN0LCBpZiBsb2FkZWQKICAgICAgfSk7CiAgICAgIHJldHVybiBpZDsKICAgIH1mdW5jdGlvbiBfTWl4X1BsYXlDaGFubmVsKGNoYW5uZWwsIGlkLCBsb29wcykgewogICAgICAvLyBUT0RPOiBoYW5kbGUgZml4ZWQgYW1vdW50IG9mIE4gbG9vcHMuIEN1cnJlbnRseSBsb29wcyBlaXRoZXIgMCBvciBpbmZpbml0ZSB0aW1lcy4KICAKICAgICAgLy8gR2V0IHRoZSBhdWRpbyBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgSUQKICAgICAgdmFyIGluZm8gPSBTREwuYXVkaW9zW2lkXTsKICAgICAgaWYgKCFpbmZvKSByZXR1cm4gLTE7CiAgICAgIGlmICghaW5mby5hdWRpbyAmJiAhaW5mby53ZWJBdWRpbykgcmV0dXJuIC0xOwogIAogICAgICAvLyBJZiB0aGUgdXNlciBhc2tzIHVzIHRvIGFsbG9jYXRlIGEgY2hhbm5lbCBhdXRvbWF0aWNhbGx5LCBnZXQgdGhlIGZpcnN0CiAgICAgIC8vIGZyZWUgb25lLgogICAgICBpZiAoY2hhbm5lbCA9PSAtMSkgewogICAgICAgIGZvciAodmFyIGkgPSBTREwuY2hhbm5lbE1pbmltdW1OdW1iZXI7IGkgPCBTREwubnVtQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgaWYgKCFTREwuY2hhbm5lbHNbaV0uYXVkaW8pIHsKICAgICAgICAgICAgY2hhbm5lbCA9IGk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY2hhbm5lbCA9PSAtMSkgewogICAgICAgICAgTW9kdWxlLnByaW50RXJyKCdBbGwgJyArIFNETC5udW1DaGFubmVscyArICcgY2hhbm5lbHMgaW4gdXNlIScpOwogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgY2hhbm5lbEluZm8gPSBTREwuY2hhbm5lbHNbY2hhbm5lbF07CiAgICAgIHZhciBhdWRpbzsKICAgICAgaWYgKGluZm8ud2ViQXVkaW8pIHsKICAgICAgICAvLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIFdlYkF1ZGlvIG9iamVjdC4KICAgICAgICBhdWRpbyA9IHt9OwogICAgICAgIGF1ZGlvLnJlc291cmNlID0gaW5mbzsgLy8gVGhpcyBuZXcgb2JqZWN0IGlzIGFuIGluc3RhbmNlIHRoYXQgcmVmZXJzIHRvIHRoaXMgZXhpc3RpbmcgcmVzb3VyY2UuCiAgICAgICAgYXVkaW8ucGF1c2VkID0gZmFsc2U7CiAgICAgICAgYXVkaW8uY3VycmVudFBvc2l0aW9uID0gMDsKICAgICAgICAvLyBNYWtlIG91ciBpbnN0YW5jZSBsb29rIHNpbWlsYXIgdG8gdGhlIGluc3RhbmNlIG9mIGEgPG1lZGlhPiB0byBtYWtlIGFwaSBzaW1wbGUuCiAgICAgICAgYXVkaW8ucGxheSA9IGZ1bmN0aW9uKCkgeyBTREwucGxheVdlYkF1ZGlvKHRoaXMpOyB9CiAgICAgICAgYXVkaW8ucGF1c2UgPSBmdW5jdGlvbigpIHsgU0RMLnBhdXNlV2ViQXVkaW8odGhpcyk7IH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBXZSBjbG9uZSB0aGUgYXVkaW8gbm9kZSB0byB1dGlsaXplIHRoZSBwcmVsb2FkZWQgYXVkaW8gYnVmZmVyLCBzaW5jZQogICAgICAgIC8vIHRoZSBicm93c2VyIGhhcyBhbHJlYWR5IHByZWxvYWRlZCB0aGUgYXVkaW8gZmlsZS4KICAgICAgICBhdWRpbyA9IGluZm8uYXVkaW8uY2xvbmVOb2RlKHRydWUpOwogICAgICAgIGF1ZGlvLm51bUNoYW5uZWxzID0gaW5mby5hdWRpby5udW1DaGFubmVsczsKICAgICAgICBhdWRpby5mcmVxdWVuY3kgPSBpbmZvLmF1ZGlvLmZyZXF1ZW5jeTsKICAgICAgfQogICAgICBhdWRpb1snb25lbmRlZCddID0gZnVuY3Rpb24gU0RMX2F1ZGlvX29uZW5kZWQoKSB7IC8vIFRPRE86IGNhY2hlIHRoZXNlCiAgICAgICAgaWYgKGNoYW5uZWxJbmZvLmF1ZGlvID09IHRoaXMpIHsgY2hhbm5lbEluZm8uYXVkaW8ucGF1c2VkID0gdHJ1ZTsgY2hhbm5lbEluZm8uYXVkaW8gPSBudWxsOyB9CiAgICAgICAgaWYgKFNETC5jaGFubmVsRmluaXNoZWQpIGdldEZ1bmNXcmFwcGVyKFNETC5jaGFubmVsRmluaXNoZWQsICd2aScpKGNoYW5uZWwpOwogICAgICB9CiAgICAgIGNoYW5uZWxJbmZvLmF1ZGlvID0gYXVkaW87CiAgICAgIC8vIFRPRE86IGhhbmRsZSBOIGxvb3BzLiBCZWhhdmlvciBtYXRjaGVzIE1peF9QbGF5TXVzaWMKICAgICAgYXVkaW8ubG9vcCA9IGxvb3BzICE9IDA7CiAgICAgIGF1ZGlvLnZvbHVtZSA9IGNoYW5uZWxJbmZvLnZvbHVtZTsKICAgICAgYXVkaW8ucGxheSgpOwogICAgICByZXR1cm4gY2hhbm5lbDsKICAgIH1mdW5jdGlvbiBfU0RMX1BhdXNlQXVkaW8ocGF1c2VPbikgewogICAgICBpZiAoIVNETC5hdWRpbykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAocGF1c2VPbikgewogICAgICAgIGlmIChTREwuYXVkaW8udGltZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KFNETC5hdWRpby50aW1lcik7CiAgICAgICAgICBTREwuYXVkaW8ubnVtQXVkaW9UaW1lcnNQZW5kaW5nID0gMDsKICAgICAgICAgIFNETC5hdWRpby50aW1lciA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIVNETC5hdWRpby50aW1lcikgewogICAgICAgIC8vIFN0YXJ0IHRoZSBhdWRpbyBwbGF5YmFjayB0aW1lciBjYWxsYmFjayBsb29wLgogICAgICAgIFNETC5hdWRpby5udW1BdWRpb1RpbWVyc1BlbmRpbmcgPSAxOwogICAgICAgIFNETC5hdWRpby50aW1lciA9IEJyb3dzZXIuc2FmZVNldFRpbWVvdXQoU0RMLmF1ZGlvLmNhbGxlciwgMSk7CiAgICAgIH0KICAgICAgU0RMLmF1ZGlvLnBhdXNlZCA9IHBhdXNlT247CiAgICB9ZnVuY3Rpb24gX1NETF9DbG9zZUF1ZGlvKCkgewogICAgICBpZiAoU0RMLmF1ZGlvKSB7CiAgICAgICAgX1NETF9QYXVzZUF1ZGlvKDEpOwogICAgICAgIF9mcmVlKFNETC5hdWRpby5idWZmZXIpOwogICAgICAgIFNETC5hdWRpbyA9IG51bGw7CiAgICAgICAgU0RMLmFsbG9jYXRlQ2hhbm5lbHMoMCk7CiAgICAgIH0KICAgIH1mdW5jdGlvbiBfU0RMX0xvY2tTdXJmYWNlKHN1cmYpIHsKICAgICAgdmFyIHN1cmZEYXRhID0gU0RMLnN1cmZhY2VzW3N1cmZdOwogIAogICAgICBzdXJmRGF0YS5sb2NrZWQrKzsKICAgICAgaWYgKHN1cmZEYXRhLmxvY2tlZCA+IDEpIHJldHVybiAwOwogIAogICAgICBpZiAoIXN1cmZEYXRhLmJ1ZmZlcikgewogICAgICAgIHN1cmZEYXRhLmJ1ZmZlciA9IF9tYWxsb2Moc3VyZkRhdGEud2lkdGggKiBzdXJmRGF0YS5oZWlnaHQgKiA0KTsKICAgICAgICBIRUFQMzJbKCgoc3VyZikrKDIwKSk+PjIpXT1zdXJmRGF0YS5idWZmZXI7CiAgICAgIH0KICAKICAgICAgLy8gTWFyayBpbiBDL0MrKy1hY2Nlc3NpYmxlIFNETCBzdHJ1Y3R1cmUKICAgICAgLy8gU0RMX1N1cmZhY2UgaGFzIHRoZSBmb2xsb3dpbmcgZmllbGRzOiBVaW50MzIgZmxhZ3MsIFNETF9QaXhlbEZvcm1hdCAqZm9ybWF0OyBpbnQgdywgaDsgVWludDE2IHBpdGNoOyB2b2lkICpwaXhlbHM7IC4uLgogICAgICAvLyBTbyB3ZSBoYXZlIGZpZWxkcyBhbGwgb2YgdGhlIHNhbWUgc2l6ZSwgYW5kIDUgb2YgdGhlbSBiZWZvcmUgdXMuCiAgICAgIC8vIFRPRE86IFVzZSBtYWNyb3MgbGlrZSBpbiBsaWJyYXJ5LmpzCiAgICAgIEhFQVAzMlsoKChzdXJmKSsoMjApKT4+MildPXN1cmZEYXRhLmJ1ZmZlcjsKICAKICAgICAgaWYgKHN1cmYgPT0gU0RMLnNjcmVlbiAmJiBNb2R1bGUuc2NyZWVuSXNSZWFkT25seSAmJiBzdXJmRGF0YS5pbWFnZSkgcmV0dXJuIDA7CiAgCiAgICAgIGlmIChTREwuZGVmYXVsdHMuZGlzY2FyZE9uTG9jaykgewogICAgICAgIGlmICghc3VyZkRhdGEuaW1hZ2UpIHsKICAgICAgICAgIHN1cmZEYXRhLmltYWdlID0gc3VyZkRhdGEuY3R4LmNyZWF0ZUltYWdlRGF0YShzdXJmRGF0YS53aWR0aCwgc3VyZkRhdGEuaGVpZ2h0KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFTREwuZGVmYXVsdHMub3BhcXVlRnJvbnRCdWZmZXIpIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdXJmRGF0YS5pbWFnZSA9IHN1cmZEYXRhLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc3VyZkRhdGEud2lkdGgsIHN1cmZEYXRhLmhlaWdodCk7CiAgICAgIH0KICAKICAgICAgLy8gRW11bGF0ZSBkZXNrdG9wIGJlaGF2aW9yIGFuZCBraWxsIGFscGhhIHZhbHVlcyBvbiB0aGUgbG9ja2VkIHN1cmZhY2UuICh2ZXJ5IGNvc3RseSEpIFNldCBTREwuZGVmYXVsdHMub3BhcXVlRnJvbnRCdWZmZXIgPSBmYWxzZQogICAgICAvLyBpZiB5b3UgZG9uJ3Qgd2FudCB0aGlzLgogICAgICBpZiAoc3VyZiA9PSBTREwuc2NyZWVuICYmIFNETC5kZWZhdWx0cy5vcGFxdWVGcm9udEJ1ZmZlcikgewogICAgICAgIHZhciBkYXRhID0gc3VyZkRhdGEuaW1hZ2UuZGF0YTsKICAgICAgICB2YXIgbnVtID0gZGF0YS5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0vNDsgaSsrKSB7CiAgICAgICAgICBkYXRhW2kqNCszXSA9IDI1NTsgLy8gb3BhY2l0eSwgYXMgY2FudmFzZXMgYmxlbmQgYWxwaGEKICAgICAgICB9CiAgICAgIH0KICAKICAgICAgaWYgKFNETC5kZWZhdWx0cy5jb3B5T25Mb2NrICYmICFTREwuZGVmYXVsdHMuZGlzY2FyZE9uTG9jaykgewogICAgICAgIC8vIENvcHkgcGl4ZWwgZGF0YSB0byBzb21ld2hlcmUgYWNjZXNzaWJsZSB0byAnQy9DKysnCiAgICAgICAgaWYgKHN1cmZEYXRhLmlzRmxhZ1NldCgweDAwMjAwMDAwIC8qIFNETF9IV1BBTEVUVEUgKi8pKSB7CiAgICAgICAgICAvLyBJZiB0aGlzIGlzIG5lYWRlZCB0aGVuCiAgICAgICAgICAvLyB3ZSBzaG91bGQgY29tcGFjdCB0aGUgZGF0YSBmcm9tIDMyYnBwIHRvIDhicHAgaW5kZXguCiAgICAgICAgICAvLyBJIHRoaW5rIGJlc3Qgd2F5IHRvIGltcGxlbWVudCB0aGlzIGlzIHVzZQogICAgICAgICAgLy8gYWRkaXRpb25hbCBjb2xvck1hcCBoYXNoIChjb2xvci0+aW5kZXgpLgogICAgICAgICAgLy8gU29tZXRoaW5nIGxpa2UgdGhpczoKICAgICAgICAgIC8vCiAgICAgICAgICAvLyB2YXIgc2l6ZSA9IHN1cmZEYXRhLndpZHRoICogc3VyZkRhdGEuaGVpZ2h0OwogICAgICAgICAgLy8gdmFyIGRhdGEgPSAnJzsKICAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpPHNpemU7IGkrKykgewogICAgICAgICAgLy8gICB2YXIgY29sb3IgPSBTREwudHJhbnNsYXRlUkdCQVRvQ29sb3IoCiAgICAgICAgICAvLyAgICAgc3VyZkRhdGEuaW1hZ2UuZGF0YVtpKjQgICBdLAogICAgICAgICAgLy8gICAgIHN1cmZEYXRhLmltYWdlLmRhdGFbaSo0ICsxXSwKICAgICAgICAgIC8vICAgICBzdXJmRGF0YS5pbWFnZS5kYXRhW2kqNCArMl0sCiAgICAgICAgICAvLyAgICAgMjU1KTsKICAgICAgICAgIC8vICAgdmFyIGluZGV4ID0gc3VyZkRhdGEuY29sb3JNYXBbY29sb3JdOwogICAgICAgICAgLy8gICBIRUFQOFsoKChzdXJmRGF0YS5idWZmZXIpKyhpKSk+PjApXT1pbmRleDsKICAgICAgICAgIC8vIH0KICAgICAgICAgIHRocm93ICdDb3B5T25Mb2NrIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIFNETF9Mb2NrU3VyZmFjZSB3aXRoIFNETF9IV1BBTEVUVEUgZmxhZyBzZXQnICsgbmV3IEVycm9yKCkuc3RhY2s7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEhFQVBVOC5zZXQoc3VyZkRhdGEuaW1hZ2UuZGF0YSwgc3VyZkRhdGEuYnVmZmVyKTsKICAgICAgICB9CiAgICAgIH0KICAKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgCiAgZnVuY3Rpb24gX1NETF9GcmVlUlcocndvcHNJRCkgewogICAgICBTREwucndvcHNbcndvcHNJRF0gPSBudWxsOwogICAgICB3aGlsZSAoU0RMLnJ3b3BzLmxlbmd0aCA+IDAgJiYgU0RMLnJ3b3BzW1NETC5yd29wcy5sZW5ndGgtMV0gPT09IG51bGwpIHsKICAgICAgICBTREwucndvcHMucG9wKCk7CiAgICAgIH0KICAgIH1mdW5jdGlvbiBfSU1HX0xvYWRfUlcocndvcHNJRCwgZnJlZVNyYykgewogICAgICB0cnkgewogICAgICAgIC8vIHN0Yl9pbWFnZSBpbnRlZ3JhdGlvbiBzdXBwb3J0CiAgICAgICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChyd29wcyAmJiBmcmVlU3JjKSBfU0RMX0ZyZWVSVyhyd29wc0lEKTsKICAgICAgICB9CiAgICAgICAgdmFyIGFkZENsZWFudXAgPSBmdW5jdGlvbihmdW5jKSB7CiAgICAgICAgICB2YXIgb2xkID0gY2xlYW51cDsKICAgICAgICAgIGNsZWFudXAgPSBmdW5jdGlvbiBhZGRlZF9jbGVhbnVwKCkgewogICAgICAgICAgICBvbGQoKTsKICAgICAgICAgICAgZnVuYygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgY2FsbFN0YkltYWdlID0gZnVuY3Rpb24oZnVuYywgcGFyYW1zKSB7CiAgICAgICAgICB2YXIgeCA9IE1vZHVsZVsnX21hbGxvYyddKDQpOwogICAgICAgICAgdmFyIHkgPSBNb2R1bGVbJ19tYWxsb2MnXSg0KTsKICAgICAgICAgIHZhciBjb21wID0gTW9kdWxlWydfbWFsbG9jJ10oNCk7CiAgICAgICAgICBhZGRDbGVhbnVwKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBNb2R1bGVbJ19mcmVlJ10oeCk7CiAgICAgICAgICAgIE1vZHVsZVsnX2ZyZWUnXSh5KTsKICAgICAgICAgICAgTW9kdWxlWydfZnJlZSddKGNvbXApOwogICAgICAgICAgICBpZiAoZGF0YSkgTW9kdWxlWydfc3RiaV9pbWFnZV9mcmVlJ10oZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBkYXRhID0gTW9kdWxlWydfJyArIGZ1bmNdLmFwcGx5KG51bGwsIHBhcmFtcy5jb25jYXQoW3gsIHksIGNvbXAsIDBdKSk7CiAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmF3RGF0YTogdHJ1ZSwKICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgd2lkdGg6IEhFQVAzMlsoKHgpPj4yKV0sCiAgICAgICAgICAgIGhlaWdodDogSEVBUDMyWygoeSk+PjIpXSwKICAgICAgICAgICAgc2l6ZTogSEVBUDMyWygoeCk+PjIpXSAqIEhFQVAzMlsoKHkpPj4yKV0gKiBIRUFQMzJbKChjb21wKT4+MildLAogICAgICAgICAgICBicHA6IEhFQVAzMlsoKGNvbXApPj4yKV0KICAgICAgICAgIH07CiAgICAgICAgfQogIAogICAgICAgIHZhciByd29wcyA9IFNETC5yd29wc1tyd29wc0lEXTsKICAgICAgICBpZiAocndvcHMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogIAogICAgICAgIHZhciBmaWxlbmFtZSA9IHJ3b3BzLmZpbGVuYW1lOwogICAgICAgIGlmIChmaWxlbmFtZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB3YXJuT25jZSgnT25seSBmaWxlIG5hbWVzIHRoYXQgaGF2ZSBiZWVuIHByZWxvYWRlZCBhcmUgc3VwcG9ydGVkIGZvciBJTUdfTG9hZF9SVy4gQ29uc2lkZXIgdXNpbmcgU1RCX0lNQUdFPTEgaWYgeW91IHdhbnQgc3luY2hyb25vdXMgaW1hZ2UgZGVjb2RpbmcgKHNlZSBzZXR0aW5ncy5qcyksIG9yIHBhY2thZ2UgZmlsZXMgd2l0aCAtLXVzZS1wcmVsb2FkLXBsdWdpbnMnKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAKICAgICAgICBpZiAoIXJhdykgewogICAgICAgICAgZmlsZW5hbWUgPSBQQVRILnJlc29sdmUoZmlsZW5hbWUpOwogICAgICAgICAgdmFyIHJhdyA9IE1vZHVsZVsicHJlbG9hZGVkSW1hZ2VzIl1bZmlsZW5hbWVdOwogICAgICAgICAgaWYgKCFyYXcpIHsKICAgICAgICAgICAgaWYgKHJhdyA9PT0gbnVsbCkgTW9kdWxlLnByaW50RXJyKCdUcnlpbmcgdG8gcmV1c2UgcHJlbG9hZGVkIGltYWdlLCBidXQgZnJlZVByZWxvYWRlZE1lZGlhT25Vc2UgaXMgc2V0IScpOwogICAgICAgICAgICB3YXJuT25jZSgnQ2Fubm90IGZpbmQgcHJlbG9hZGVkIGltYWdlICcgKyBmaWxlbmFtZSk7CiAgICAgICAgICAgIHdhcm5PbmNlKCdDYW5ub3QgZmluZCBwcmVsb2FkZWQgaW1hZ2UgJyArIGZpbGVuYW1lICsgJy4gQ29uc2lkZXIgdXNpbmcgU1RCX0lNQUdFPTEgaWYgeW91IHdhbnQgc3luY2hyb25vdXMgaW1hZ2UgZGVjb2RpbmcgKHNlZSBzZXR0aW5ncy5qcyksIG9yIHBhY2thZ2UgZmlsZXMgd2l0aCAtLXVzZS1wcmVsb2FkLXBsdWdpbnMnKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9IGVsc2UgaWYgKE1vZHVsZVsnZnJlZVByZWxvYWRlZE1lZGlhT25Vc2UnXSkgewogICAgICAgICAgICBNb2R1bGVbInByZWxvYWRlZEltYWdlcyJdW2ZpbGVuYW1lXSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogIAogICAgICAgIHZhciBzdXJmID0gU0RMLm1ha2VTdXJmYWNlKHJhdy53aWR0aCwgcmF3LmhlaWdodCwgMCwgZmFsc2UsICdsb2FkOicgKyBmaWxlbmFtZSk7CiAgICAgICAgdmFyIHN1cmZEYXRhID0gU0RMLnN1cmZhY2VzW3N1cmZdOwogICAgICAgIHN1cmZEYXRhLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAiY29weSI7CiAgICAgICAgaWYgKCFyYXcucmF3RGF0YSkgewogICAgICAgICAgc3VyZkRhdGEuY3R4LmRyYXdJbWFnZShyYXcsIDAsIDAsIHJhdy53aWR0aCwgcmF3LmhlaWdodCwgMCwgMCwgcmF3LndpZHRoLCByYXcuaGVpZ2h0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGltYWdlRGF0YSA9IHN1cmZEYXRhLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc3VyZkRhdGEud2lkdGgsIHN1cmZEYXRhLmhlaWdodCk7CiAgICAgICAgICBpZiAocmF3LmJwcCA9PSA0KSB7CiAgICAgICAgICAgIC8vIHJnYmEKICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KEhFQVBVOC5zdWJhcnJheSgocmF3LmRhdGEpLChyYXcuZGF0YStyYXcuc2l6ZSkpKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmF3LmJwcCA9PSAzKSB7CiAgICAgICAgICAgIC8vIHJnYgogICAgICAgICAgICB2YXIgcGl4ZWxzID0gcmF3LnNpemUvMzsKICAgICAgICAgICAgdmFyIGRhdGEgPSBpbWFnZURhdGEuZGF0YTsKICAgICAgICAgICAgdmFyIHNvdXJjZVB0ciA9IHJhdy5kYXRhOwogICAgICAgICAgICB2YXIgZGVzdFB0ciA9IDA7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGl4ZWxzOyBpKyspIHsKICAgICAgICAgICAgICBkYXRhW2Rlc3RQdHIrK10gPSBIRUFQVThbKChzb3VyY2VQdHIrKyk+PjApXTsKICAgICAgICAgICAgICBkYXRhW2Rlc3RQdHIrK10gPSBIRUFQVThbKChzb3VyY2VQdHIrKyk+PjApXTsKICAgICAgICAgICAgICBkYXRhW2Rlc3RQdHIrK10gPSBIRUFQVThbKChzb3VyY2VQdHIrKyk+PjApXTsKICAgICAgICAgICAgICBkYXRhW2Rlc3RQdHIrK10gPSAyNTU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAocmF3LmJwcCA9PSAyKSB7CiAgICAgICAgICAgIC8vIGdyYXlzY2FsZSArIGFscGhhCiAgICAgICAgICAgIHZhciBwaXhlbHMgPSByYXcuc2l6ZTsKICAgICAgICAgICAgdmFyIGRhdGEgPSBpbWFnZURhdGEuZGF0YTsKICAgICAgICAgICAgdmFyIHNvdXJjZVB0ciA9IHJhdy5kYXRhOwogICAgICAgICAgICB2YXIgZGVzdFB0ciA9IDA7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGl4ZWxzOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgZ3JheSA9IEhFQVBVOFsoKHNvdXJjZVB0cisrKT4+MCldOwogICAgICAgICAgICAgIHZhciBhbHBoYSA9IEhFQVBVOFsoKHNvdXJjZVB0cisrKT4+MCldOwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IGdyYXk7CiAgICAgICAgICAgICAgZGF0YVtkZXN0UHRyKytdID0gZ3JheTsKICAgICAgICAgICAgICBkYXRhW2Rlc3RQdHIrK10gPSBncmF5OwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IGFscGhhOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHJhdy5icHAgPT0gMSkgewogICAgICAgICAgICAvLyBncmF5c2NhbGUKICAgICAgICAgICAgdmFyIHBpeGVscyA9IHJhdy5zaXplOwogICAgICAgICAgICB2YXIgZGF0YSA9IGltYWdlRGF0YS5kYXRhOwogICAgICAgICAgICB2YXIgc291cmNlUHRyID0gcmF3LmRhdGE7CiAgICAgICAgICAgIHZhciBkZXN0UHRyID0gMDsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaXhlbHM7IGkrKykgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IEhFQVBVOFsoKHNvdXJjZVB0cisrKT4+MCldOwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IHZhbHVlOwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IHZhbHVlOwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IHZhbHVlOwogICAgICAgICAgICAgIGRhdGFbZGVzdFB0cisrXSA9IDI1NTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgTW9kdWxlLnByaW50RXJyKCdjYW5ub3QgaGFuZGxlIGJwcCAnICsgcmF3LmJwcCk7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQogICAgICAgICAgc3VyZkRhdGEuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApOwogICAgICAgIH0KICAgICAgICBzdXJmRGF0YS5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1vdmVyIjsKICAgICAgICAvLyBYWFggU0RMIGRvZXMgbm90IHNwZWNpZnkgdGhhdCBsb2FkZWQgaW1hZ2VzIG11c3QgaGF2ZSBhdmFpbGFibGUgcGl4ZWwgZGF0YSwgaW4gZmFjdAogICAgICAgIC8vICAgICB0aGVyZSBhcmUgY2FzZXMgd2hlcmUgeW91IGp1c3Qgd2FudCB0byBibGl0IHRoZW0sIHNvIHlvdSBqdXN0IG5lZWQgdGhlIGhhcmR3YXJlCiAgICAgICAgLy8gICAgIGFjY2VsZXJhdGVkIHZlcnNpb24uIEhvd2V2ZXIsIGNvZGUgZXZlcnl3aGVyZSBzZWVtcyB0byBhc3N1bWUgdGhhdCB0aGUgcGl4ZWxzCiAgICAgICAgLy8gICAgIGFyZSBpbiBmYWN0IGF2YWlsYWJsZSwgc28gd2UgcmV0cmlldmUgaXQgaGVyZS4gVGhpcyBkb2VzIGFkZCBvdmVyaGVhZCB0aG91Z2guCiAgICAgICAgX1NETF9Mb2NrU3VyZmFjZShzdXJmKTsKICAgICAgICBzdXJmRGF0YS5sb2NrZWQtLTsgLy8gVGhlIHN1cmZhY2UgaXMgbm90IGFjdHVhbGx5IGxvY2tlZCBpbiB0aGlzIGhhY2sKICAgICAgICBpZiAoU0RMLkdMKSB7CiAgICAgICAgICAvLyBBZnRlciBnZXR0aW5nIHRoZSBwaXhlbCBkYXRhLCB3ZSBjYW4gZnJlZSB0aGUgY2FudmFzIGFuZCBjb250ZXh0IGlmIHdlIGRvIG5vdCBuZWVkIHRvIGRvIDJEIGNhbnZhcyBibGl0dGluZwogICAgICAgICAgc3VyZkRhdGEuY2FudmFzID0gc3VyZkRhdGEuY3R4ID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cmY7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY2xlYW51cCgpOwogICAgICB9CiAgICB9CiAgCiAgZnVuY3Rpb24gX1NETF9SV0Zyb21GaWxlKF9uYW1lLCBtb2RlKSB7CiAgICAgIHZhciBpZCA9IFNETC5yd29wcy5sZW5ndGg7IC8vIFRPRE86IHJlY3ljbGUgaWRzIHdoZW4gdGhleSBhcmUgbnVsbAogICAgICB2YXIgbmFtZSA9IFBvaW50ZXJfc3RyaW5naWZ5KF9uYW1lKQogICAgICBTREwucndvcHMucHVzaCh7IGZpbGVuYW1lOiBuYW1lLCBtaW1ldHlwZTogQnJvd3Nlci5nZXRNaW1ldHlwZShuYW1lKSB9KTsKICAgICAgcmV0dXJuIGlkOwogICAgfWZ1bmN0aW9uIF9JTUdfTG9hZChmaWxlbmFtZSl7CiAgICAgIHZhciByd29wcyA9IF9TRExfUldGcm9tRmlsZShmaWxlbmFtZSk7CiAgICAgIHZhciByZXN1bHQgPSBfSU1HX0xvYWRfUlcocndvcHMsIDEpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfWZ1bmN0aW9uIF9TRExfVXBwZXJCbGl0U2NhbGVkKHNyYywgc3JjcmVjdCwgZHN0LCBkc3RyZWN0KSB7CiAgICAgIHJldHVybiBTREwuYmxpdFN1cmZhY2Uoc3JjLCBzcmNyZWN0LCBkc3QsIGRzdHJlY3QsIHRydWUpOwogICAgfWZ1bmN0aW9uIF9TRExfVXBwZXJCbGl0KHNyYywgc3JjcmVjdCwgZHN0LCBkc3RyZWN0KSB7CiAgICAgIHJldHVybiBTREwuYmxpdFN1cmZhY2Uoc3JjLCBzcmNyZWN0LCBkc3QsIGRzdHJlY3QsIGZhbHNlKTsKICAgIH1mdW5jdGlvbiBfU0RMX0dldFRpY2tzKCkgewogICAgICByZXR1cm4gKERhdGUubm93KCkgLSBTREwuc3RhcnRUaW1lKXwwOwogICAgfXZhciBTREw9e2RlZmF1bHRzOnt3aWR0aDozMjAsaGVpZ2h0OjIwMCxjb3B5T25Mb2NrOnRydWUsZGlzY2FyZE9uTG9jazpmYWxzZSxvcGFxdWVGcm9udEJ1ZmZlcjp0cnVlfSx2ZXJzaW9uOm51bGwsc3VyZmFjZXM6e30sY2FudmFzUG9vbDpbXSxldmVudHM6W10sZm9udHM6W251bGxdLGF1ZGlvczpbbnVsbF0scndvcHM6W251bGxdLG11c2ljOnthdWRpbzpudWxsLHZvbHVtZToxfSxtaXhlckZyZXF1ZW5jeToyMjA1MCxtaXhlckZvcm1hdDozMjc4NCxtaXhlck51bUNoYW5uZWxzOjIsbWl4ZXJDaHVua1NpemU6MTAyNCxjaGFubmVsTWluaW11bU51bWJlcjowLEdMOmZhbHNlLGdsQXR0cmlidXRlczp7MDozLDE6MywyOjIsMzowLDQ6MCw1OjEsNjoxNiw3OjAsODowLDk6MCwxMDowLDExOjAsMTI6MCwxMzowLDE0OjAsMTU6MSwxNjowLDE3OjAsMTg6MH0sa2V5Ym9hcmRTdGF0ZTpudWxsLGtleWJvYXJkTWFwOnt9LGNhblJlcXVlc3RGdWxsc2NyZWVuOmZhbHNlLGlzUmVxdWVzdGluZ0Z1bGxzY3JlZW46ZmFsc2UsdGV4dElucHV0OmZhbHNlLHN0YXJ0VGltZTpudWxsLGluaXRGbGFnczowLGJ1dHRvblN0YXRlOjAsbW9kU3RhdGU6MCxET01CdXR0b25zOlswLDAsMF0sRE9NRXZlbnRUb1NETEV2ZW50Ont9LFRPVUNIX0RFRkFVTFRfSUQ6MCxldmVudEhhbmRsZXI6bnVsbCxldmVudEhhbmRsZXJDb250ZXh0Om51bGwsZXZlbnRIYW5kbGVyVGVtcDowLGtleUNvZGVzOnsxNjoxMjQ5LDE3OjEyNDgsMTg6MTI1MCwyMDoxMDgxLDMzOjEwOTksMzQ6MTEwMiwzNToxMTAxLDM2OjEwOTgsMzc6MTEwNCwzODoxMTA2LDM5OjExMDMsNDA6MTEwNSw0NDozMTYsNDU6MTA5Nyw0NjoxMjcsOTE6MTI1MSw5MzoxMTI1LDk2OjExMjIsOTc6MTExMyw5ODoxMTE0LDk5OjExMTUsMTAwOjExMTYsMTAxOjExMTcsMTAyOjExMTgsMTAzOjExMTksMTA0OjExMjAsMTA1OjExMjEsMTA2OjExMDksMTA3OjExMTEsMTA5OjExMTAsMTEwOjExMjMsMTExOjExMDgsMTEyOjEwODIsMTEzOjEwODMsMTE0OjEwODQsMTE1OjEwODUsMTE2OjEwODYsMTE3OjEwODcsMTE4OjEwODgsMTE5OjEwODksMTIwOjEwOTAsMTIxOjEwOTEsMTIyOjEwOTIsMTIzOjEwOTMsMTI0OjExMjgsMTI1OjExMjksMTI2OjExMzAsMTI3OjExMzEsMTI4OjExMzIsMTI5OjExMzMsMTMwOjExMzQsMTMxOjExMzUsMTMyOjExMzYsMTMzOjExMzcsMTM0OjExMzgsMTM1OjExMzksMTQ0OjExMDcsMTYwOjk0LDE2MTozMywxNjI6MzQsMTYzOjM1LDE2NDozNiwxNjU6MzcsMTY2OjM4LDE2Nzo5NSwxNjg6NDAsMTY5OjQxLDE3MDo0MiwxNzE6NDMsMTcyOjEyNCwxNzM6NDUsMTc0OjEyMywxNzU6MTI1LDE3NjoxMjYsMTgxOjEyNywxODI6MTI5LDE4MzoxMjgsMTg4OjQ0LDE5MDo0NiwxOTE6NDcsMTkyOjk2LDIxOTo5MSwyMjA6OTIsMjIxOjkzLDIyMjozOSwyMjQ6MTI1MX0sc2NhbkNvZGVzOns4OjQyLDk6NDMsMTM6NDAsMjc6NDEsMzI6NDQsMzU6MjA0LDM5OjUzLDQ0OjU0LDQ2OjU1LDQ3OjU2LDQ4OjM5LDQ5OjMwLDUwOjMxLDUxOjMyLDUyOjMzLDUzOjM0LDU0OjM1LDU1OjM2LDU2OjM3LDU3OjM4LDU4OjIwMyw1OTo1MSw2MTo0Niw5MTo0Nyw5Mjo0OSw5Mzo0OCw5Njo1Miw5Nzo0LDk4OjUsOTk6NiwxMDA6NywxMDE6OCwxMDI6OSwxMDM6MTAsMTA0OjExLDEwNToxMiwxMDY6MTMsMTA3OjE0LDEwODoxNSwxMDk6MTYsMTEwOjE3LDExMToxOCwxMTI6MTksMTEzOjIwLDExNDoyMSwxMTU6MjIsMTE2OjIzLDExNzoyNCwxMTg6MjUsMTE5OjI2LDEyMDoyNywxMjE6MjgsMTIyOjI5LDEyNzo3NiwzMDU6MjI0LDMwODoyMjYsMzE2OjcwfSxsb2FkUmVjdDpmdW5jdGlvbiAocmVjdCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiBIRUFQMzJbKChyZWN0ICsgMCk+PjIpXSwKICAgICAgICAgIHk6IEhFQVAzMlsoKHJlY3QgKyA0KT4+MildLAogICAgICAgICAgdzogSEVBUDMyWygocmVjdCArIDgpPj4yKV0sCiAgICAgICAgICBoOiBIRUFQMzJbKChyZWN0ICsgMTIpPj4yKV0KICAgICAgICB9OwogICAgICB9LHVwZGF0ZVJlY3Q6ZnVuY3Rpb24gKHJlY3QsIHIpIHsKICAgICAgICBIRUFQMzJbKChyZWN0KT4+MildPXIueDsKICAgICAgICBIRUFQMzJbKCgocmVjdCkrKDQpKT4+MildPXIueTsKICAgICAgICBIRUFQMzJbKCgocmVjdCkrKDgpKT4+MildPXIudzsKICAgICAgICBIRUFQMzJbKCgocmVjdCkrKDEyKSk+PjIpXT1yLmg7CiAgICAgIH0saW50ZXJzZWN0aW9uT2ZSZWN0czpmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkgewogICAgICAgIHZhciBsZWZ0WCA9IE1hdGgubWF4KGZpcnN0LngsIHNlY29uZC54KTsKICAgICAgICB2YXIgbGVmdFkgPSBNYXRoLm1heChmaXJzdC55LCBzZWNvbmQueSk7CiAgICAgICAgdmFyIHJpZ2h0WCA9IE1hdGgubWluKGZpcnN0LnggKyBmaXJzdC53LCBzZWNvbmQueCArIHNlY29uZC53KTsKICAgICAgICB2YXIgcmlnaHRZID0gTWF0aC5taW4oZmlyc3QueSArIGZpcnN0LmgsIHNlY29uZC55ICsgc2Vjb25kLmgpOwogIAogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiBsZWZ0WCwKICAgICAgICAgIHk6IGxlZnRZLAogICAgICAgICAgdzogTWF0aC5tYXgobGVmdFgsIHJpZ2h0WCkgLSBsZWZ0WCwKICAgICAgICAgIGg6IE1hdGgubWF4KGxlZnRZLCByaWdodFkpIC0gbGVmdFkKICAgICAgICB9CiAgICAgIH0sY2hlY2tQaXhlbEZvcm1hdDpmdW5jdGlvbiAoZm10KSB7CiAgICAgICAgLy8gQ2FudmFzIHNjcmVlbnMgYXJlIGFsd2F5cyBSR0JBLgogICAgICAgIHZhciBmb3JtYXQgPSBIRUFQMzJbKChmbXQpPj4yKV07CiAgICAgICAgaWYgKGZvcm1hdCAhPSAtMjA0MjIyNDYzNikgewogICAgICAgICAgd2Fybk9uY2UoJ1Vuc3VwcG9ydGVkIHBpeGVsIGZvcm1hdCEnKTsKICAgICAgICB9CiAgICAgIH0sbG9hZENvbG9yVG9DU1NSR0I6ZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgdmFyIHJnYmEgPSBIRUFQMzJbKChjb2xvcik+PjIpXTsKICAgICAgICByZXR1cm4gJ3JnYignICsgKHJnYmEmMjU1KSArICcsJyArICgocmdiYSA+PiA4KSYyNTUpICsgJywnICsgKChyZ2JhID4+IDE2KSYyNTUpICsgJyknOwogICAgICB9LGxvYWRDb2xvclRvQ1NTUkdCQTpmdW5jdGlvbiAoY29sb3IpIHsKICAgICAgICB2YXIgcmdiYSA9IEhFQVAzMlsoKGNvbG9yKT4+MildOwogICAgICAgIHJldHVybiAncmdiYSgnICsgKHJnYmEmMjU1KSArICcsJyArICgocmdiYSA+PiA4KSYyNTUpICsgJywnICsgKChyZ2JhID4+IDE2KSYyNTUpICsgJywnICsgKCgocmdiYSA+PiAyNCkmMjU1KS8yNTUpICsgJyknOwogICAgICB9LHRyYW5zbGF0ZUNvbG9yVG9DU1NSR0JBOmZ1bmN0aW9uIChyZ2JhKSB7CiAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyAocmdiYSYweGZmKSArICcsJyArIChyZ2JhPj44ICYgMHhmZikgKyAnLCcgKyAocmdiYT4+MTYgJiAweGZmKSArICcsJyArIChyZ2JhPj4+MjQpLzB4ZmYgKyAnKSc7CiAgICAgIH0sdHJhbnNsYXRlUkdCQVRvQ1NTUkdCQTpmdW5jdGlvbiAociwgZywgYiwgYSkgewogICAgICAgIHJldHVybiAncmdiYSgnICsgKHImMHhmZikgKyAnLCcgKyAoZyYweGZmKSArICcsJyArIChiJjB4ZmYpICsgJywnICsgKGEmMHhmZikvMjU1ICsgJyknOwogICAgICB9LHRyYW5zbGF0ZVJHQkFUb0NvbG9yOmZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7CiAgICAgICAgcmV0dXJuIHIgfCBnIDw8IDggfCBiIDw8IDE2IHwgYSA8PCAyNDsKICAgICAgfSxtYWtlU3VyZmFjZTpmdW5jdGlvbiAod2lkdGgsIGhlaWdodCwgZmxhZ3MsIHVzZVBhZ2VDYW52YXMsIHNvdXJjZSwgcm1hc2ssIGdtYXNrLCBibWFzaywgYW1hc2spIHsKICAgICAgICBmbGFncyA9IGZsYWdzIHx8IDA7CiAgICAgICAgdmFyIGlzX1NETF9IV1NVUkZBQ0UgPSBmbGFncyAmIDB4MDAwMDAwMDE7CiAgICAgICAgdmFyIGlzX1NETF9IV1BBTEVUVEUgPSBmbGFncyAmIDB4MDAyMDAwMDA7CiAgICAgICAgdmFyIGlzX1NETF9PUEVOR0wgPSBmbGFncyAmIDB4MDQwMDAwMDA7CiAgCiAgICAgICAgdmFyIHN1cmYgPSBfbWFsbG9jKDYwKTsKICAgICAgICB2YXIgcGl4ZWxGb3JtYXQgPSBfbWFsbG9jKDQ0KTsKICAgICAgICAvL3N1cmZhY2Ugd2l0aCBTRExfSFdQQUxFVFRFIGZsYWcgaXMgOGJwcCBzdXJmYWNlICgxIGJ5dGUpCiAgICAgICAgdmFyIGJwcCA9IGlzX1NETF9IV1BBTEVUVEUgPyAxIDogNDsKICAgICAgICB2YXIgYnVmZmVyID0gMDsKICAKICAgICAgICAvLyBwcmVlbXB0aXZlbHkgaW5pdGlhbGl6ZSB0aGlzIGZvciBzb2Z0d2FyZSBzdXJmYWNlcywKICAgICAgICAvLyBvdGhlcndpc2UgaXQgd2lsbCBiZSBsYXppbHkgaW5pdGlhbGl6ZWQgaW5zaWRlIG9mIFNETF9Mb2NrU3VyZmFjZQogICAgICAgIGlmICghaXNfU0RMX0hXU1VSRkFDRSAmJiAhaXNfU0RMX09QRU5HTCkgewogICAgICAgICAgYnVmZmVyID0gX21hbGxvYyh3aWR0aCAqIGhlaWdodCAqIDQpOwogICAgICAgIH0KICAKICAgICAgICBIRUFQMzJbKChzdXJmKT4+MildPWZsYWdzOwogICAgICAgIEhFQVAzMlsoKChzdXJmKSsoNCkpPj4yKV09cGl4ZWxGb3JtYXQ7CiAgICAgICAgSEVBUDMyWygoKHN1cmYpKyg4KSk+PjIpXT13aWR0aDsKICAgICAgICBIRUFQMzJbKCgoc3VyZikrKDEyKSk+PjIpXT1oZWlnaHQ7CiAgICAgICAgSEVBUDMyWygoKHN1cmYpKygxNikpPj4yKV09d2lkdGggKiBicHA7ICAvLyBhc3N1bWluZyBSR0JBIG9yIGluZGV4ZWQgZm9yIG5vdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgdGhhdCBpcyB3aGF0IEltYWdlRGF0YSBnaXZlcyB1cyBpbiBicm93c2VycwogICAgICAgIEhFQVAzMlsoKChzdXJmKSsoMjApKT4+MildPWJ1ZmZlcjsKICAKICAgICAgICBIRUFQMzJbKCgoc3VyZikrKDM2KSk+PjIpXT0wOwogICAgICAgIEhFQVAzMlsoKChzdXJmKSsoNDApKT4+MildPTA7CiAgICAgICAgSEVBUDMyWygoKHN1cmYpKyg0NCkpPj4yKV09TW9kdWxlWyJjYW52YXMiXS53aWR0aDsKICAgICAgICBIRUFQMzJbKCgoc3VyZikrKDQ4KSk+PjIpXT1Nb2R1bGVbImNhbnZhcyJdLmhlaWdodDsKICAKICAgICAgICBIRUFQMzJbKCgoc3VyZikrKDU2KSk+PjIpXT0xOwogIAogICAgICAgIEhFQVAzMlsoKHBpeGVsRm9ybWF0KT4+MildPS0yMDQyMjI0NjM2OwogICAgICAgIEhFQVAzMlsoKChwaXhlbEZvcm1hdCkrKDQpKT4+MildPTA7Ly8gVE9ETwogICAgICAgIEhFQVA4WygoKHBpeGVsRm9ybWF0KSsoOCkpPj4wKV09YnBwICogODsKICAgICAgICBIRUFQOFsoKChwaXhlbEZvcm1hdCkrKDkpKT4+MCldPWJwcDsKICAKICAgICAgICBIRUFQMzJbKCgocGl4ZWxGb3JtYXQpKygxMikpPj4yKV09cm1hc2sgfHwgMHgwMDAwMDBmZjsKICAgICAgICBIRUFQMzJbKCgocGl4ZWxGb3JtYXQpKygxNikpPj4yKV09Z21hc2sgfHwgMHgwMDAwZmYwMDsKICAgICAgICBIRUFQMzJbKCgocGl4ZWxGb3JtYXQpKygyMCkpPj4yKV09Ym1hc2sgfHwgMHgwMGZmMDAwMDsKICAgICAgICBIRUFQMzJbKCgocGl4ZWxGb3JtYXQpKygyNCkpPj4yKV09YW1hc2sgfHwgMHhmZjAwMDAwMDsKICAKICAgICAgICAvLyBEZWNpZGUgaWYgd2Ugd2FudCB0byB1c2UgV2ViR0wgb3Igbm90CiAgICAgICAgU0RMLkdMID0gU0RMLkdMIHx8IGlzX1NETF9PUEVOR0w7CiAgICAgICAgdmFyIGNhbnZhczsKICAgICAgICBpZiAoIXVzZVBhZ2VDYW52YXMpIHsKICAgICAgICAgIGlmIChTREwuY2FudmFzUG9vbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNhbnZhcyA9IFNETC5jYW52YXNQb29sLnBvcCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICB9CiAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbnZhcyA9IE1vZHVsZVsnY2FudmFzJ107CiAgICAgICAgfQogIAogICAgICAgIHZhciB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzID0gewogICAgICAgICAgYW50aWFsaWFzOiAoKFNETC5nbEF0dHJpYnV0ZXNbMTMgLypTRExfR0xfTVVMVElTQU1QTEVCVUZGRVJTKi9dICE9IDApICYmIChTREwuZ2xBdHRyaWJ1dGVzWzE0IC8qU0RMX0dMX01VTFRJU0FNUExFU0FNUExFUyovXSA+IDEpKSwKICAgICAgICAgIGRlcHRoOiAoU0RMLmdsQXR0cmlidXRlc1s2IC8qU0RMX0dMX0RFUFRIX1NJWkUqL10gPiAwKSwKICAgICAgICAgIHN0ZW5jaWw6IChTREwuZ2xBdHRyaWJ1dGVzWzcgLypTRExfR0xfU1RFTkNJTF9TSVpFKi9dID4gMCksCiAgICAgICAgICBhbHBoYTogKFNETC5nbEF0dHJpYnV0ZXNbMyAvKlNETF9HTF9BTFBIQV9TSVpFKi9dID4gMCkKICAgICAgICB9OwogIAogICAgICAgIHZhciBjdHggPSBCcm93c2VyLmNyZWF0ZUNvbnRleHQoY2FudmFzLCBpc19TRExfT1BFTkdMLCB1c2VQYWdlQ2FudmFzLCB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKTsKICAKICAgICAgICBTREwuc3VyZmFjZXNbc3VyZl0gPSB7CiAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgIGNhbnZhczogY2FudmFzLAogICAgICAgICAgY3R4OiBjdHgsCiAgICAgICAgICBzdXJmOiBzdXJmLAogICAgICAgICAgYnVmZmVyOiBidWZmZXIsCiAgICAgICAgICBwaXhlbEZvcm1hdDogcGl4ZWxGb3JtYXQsCiAgICAgICAgICBhbHBoYTogMjU1LAogICAgICAgICAgZmxhZ3M6IGZsYWdzLAogICAgICAgICAgbG9ja2VkOiAwLAogICAgICAgICAgdXNlUGFnZUNhbnZhczogdXNlUGFnZUNhbnZhcywKICAgICAgICAgIHNvdXJjZTogc291cmNlLAogIAogICAgICAgICAgaXNGbGFnU2V0OiBmdW5jdGlvbihmbGFnKSB7CiAgICAgICAgICAgIHJldHVybiBmbGFncyAmIGZsYWc7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAKICAgICAgICByZXR1cm4gc3VyZjsKICAgICAgfSxjb3B5SW5kZXhlZENvbG9yRGF0YTpmdW5jdGlvbiAoc3VyZkRhdGEsIHJYLCByWSwgclcsIHJIKSB7CiAgICAgICAgLy8gSFdQQUxFVFRFIHdvcmtzIHdpdGggcGFsZXR0ZQogICAgICAgIC8vIHNldHRlZCBieSBTRExfU2V0Q29sb3JzCiAgICAgICAgaWYgKCFzdXJmRGF0YS5jb2xvcnMpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgCiAgICAgICAgdmFyIGZ1bGxXaWR0aCAgPSBNb2R1bGVbJ2NhbnZhcyddLndpZHRoOwogICAgICAgIHZhciBmdWxsSGVpZ2h0ID0gTW9kdWxlWydjYW52YXMnXS5oZWlnaHQ7CiAgCiAgICAgICAgdmFyIHN0YXJ0WCAgPSByWCB8fCAwOwogICAgICAgIHZhciBzdGFydFkgID0gclkgfHwgMDsKICAgICAgICB2YXIgZW5kWCAgICA9IChyVyB8fCAoZnVsbFdpZHRoIC0gc3RhcnRYKSkgKyBzdGFydFg7CiAgICAgICAgdmFyIGVuZFkgICAgPSAockggfHwgKGZ1bGxIZWlnaHQgLSBzdGFydFkpKSArIHN0YXJ0WTsKICAKICAgICAgICB2YXIgYnVmZmVyICA9IHN1cmZEYXRhLmJ1ZmZlcjsKICAKICAgICAgICBpZiAoIXN1cmZEYXRhLmltYWdlLmRhdGEzMikgewogICAgICAgICAgc3VyZkRhdGEuaW1hZ2UuZGF0YTMyID0gbmV3IFVpbnQzMkFycmF5KHN1cmZEYXRhLmltYWdlLmRhdGEuYnVmZmVyKTsKICAgICAgICB9CiAgICAgICAgdmFyIGRhdGEzMiAgID0gc3VyZkRhdGEuaW1hZ2UuZGF0YTMyOwogIAogICAgICAgIHZhciBjb2xvcnMzMiA9IHN1cmZEYXRhLmNvbG9yczMyOwogIAogICAgICAgIGZvciAodmFyIHkgPSBzdGFydFk7IHkgPCBlbmRZOyArK3kpIHsKICAgICAgICAgIHZhciBiYXNlID0geSAqIGZ1bGxXaWR0aDsKICAgICAgICAgIGZvciAodmFyIHggPSBzdGFydFg7IHggPCBlbmRYOyArK3gpIHsKICAgICAgICAgICAgZGF0YTMyW2Jhc2UgKyB4XSA9IGNvbG9yczMyW0hFQVBVOFsoKGJ1ZmZlciArIGJhc2UgKyB4KT4+MCldXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sZnJlZVN1cmZhY2U6ZnVuY3Rpb24gKHN1cmYpIHsKICAgICAgICB2YXIgcmVmY291bnRQb2ludGVyID0gc3VyZiArIDU2OwogICAgICAgIHZhciByZWZjb3VudCA9IEhFQVAzMlsoKHJlZmNvdW50UG9pbnRlcik+PjIpXTsKICAgICAgICBpZiAocmVmY291bnQgPiAxKSB7CiAgICAgICAgICBIRUFQMzJbKChyZWZjb3VudFBvaW50ZXIpPj4yKV09cmVmY291bnQgLSAxOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAKICAgICAgICB2YXIgaW5mbyA9IFNETC5zdXJmYWNlc1tzdXJmXTsKICAgICAgICBpZiAoIWluZm8udXNlUGFnZUNhbnZhcyAmJiBpbmZvLmNhbnZhcykgU0RMLmNhbnZhc1Bvb2wucHVzaChpbmZvLmNhbnZhcyk7CiAgICAgICAgaWYgKGluZm8uYnVmZmVyKSBfZnJlZShpbmZvLmJ1ZmZlcik7CiAgICAgICAgX2ZyZWUoaW5mby5waXhlbEZvcm1hdCk7CiAgICAgICAgX2ZyZWUoc3VyZik7CiAgICAgICAgU0RMLnN1cmZhY2VzW3N1cmZdID0gbnVsbDsKICAKICAgICAgICBpZiAoc3VyZiA9PT0gU0RMLnNjcmVlbikgewogICAgICAgICAgU0RMLnNjcmVlbiA9IG51bGw7CiAgICAgICAgfQogICAgICB9LGJsaXRTdXJmYWNlX19kZXBzOlsiU0RMX0xvY2tTdXJmYWNlIl0sYmxpdFN1cmZhY2U6ZnVuY3Rpb24gKHNyYywgc3JjcmVjdCwgZHN0LCBkc3RyZWN0LCBzY2FsZSkgewogICAgICAgIHZhciBzcmNEYXRhID0gU0RMLnN1cmZhY2VzW3NyY107CiAgICAgICAgdmFyIGRzdERhdGEgPSBTREwuc3VyZmFjZXNbZHN0XTsKICAgICAgICB2YXIgc3IsIGRyOwogICAgICAgIGlmIChzcmNyZWN0KSB7CiAgICAgICAgICBzciA9IFNETC5sb2FkUmVjdChzcmNyZWN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3IgPSB7IHg6IDAsIHk6IDAsIHc6IHNyY0RhdGEud2lkdGgsIGg6IHNyY0RhdGEuaGVpZ2h0IH07CiAgICAgICAgfQogICAgICAgIGlmIChkc3RyZWN0KSB7CiAgICAgICAgICBkciA9IFNETC5sb2FkUmVjdChkc3RyZWN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZHIgPSB7IHg6IDAsIHk6IDAsIHc6IHNyY0RhdGEud2lkdGgsIGg6IHNyY0RhdGEuaGVpZ2h0IH07CiAgICAgICAgfQogICAgICAgIGlmIChkc3REYXRhLmNsaXBSZWN0KSB7CiAgICAgICAgICB2YXIgd2lkdGhTY2FsZSA9ICghc2NhbGUgfHwgc3IudyA9PT0gMCkgPyAxIDogc3IudyAvIGRyLnc7CiAgICAgICAgICB2YXIgaGVpZ2h0U2NhbGUgPSAoIXNjYWxlIHx8IHNyLmggPT09IDApID8gMSA6IHNyLmggLyBkci5oOwogIAogICAgICAgICAgZHIgPSBTREwuaW50ZXJzZWN0aW9uT2ZSZWN0cyhkc3REYXRhLmNsaXBSZWN0LCBkcik7CiAgCiAgICAgICAgICBzci53ID0gZHIudyAqIHdpZHRoU2NhbGU7CiAgICAgICAgICBzci5oID0gZHIuaCAqIGhlaWdodFNjYWxlOwogIAogICAgICAgICAgaWYgKGRzdHJlY3QpIHsKICAgICAgICAgICAgU0RMLnVwZGF0ZVJlY3QoZHN0cmVjdCwgZHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgYmxpdHcsIGJsaXRoOwogICAgICAgIGlmIChzY2FsZSkgewogICAgICAgICAgYmxpdHcgPSBkci53OyBibGl0aCA9IGRyLmg7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJsaXR3ID0gc3IudzsgYmxpdGggPSBzci5oOwogICAgICAgIH0KICAgICAgICBpZiAoc3IudyA9PT0gMCB8fCBzci5oID09PSAwIHx8IGJsaXR3ID09PSAwIHx8IGJsaXRoID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdmFyIG9sZEFscGhhID0gZHN0RGF0YS5jdHguZ2xvYmFsQWxwaGE7CiAgICAgICAgZHN0RGF0YS5jdHguZ2xvYmFsQWxwaGEgPSBzcmNEYXRhLmFscGhhLzI1NTsKICAgICAgICBkc3REYXRhLmN0eC5kcmF3SW1hZ2Uoc3JjRGF0YS5jYW52YXMsIHNyLngsIHNyLnksIHNyLncsIHNyLmgsIGRyLngsIGRyLnksIGJsaXR3LCBibGl0aCk7CiAgICAgICAgZHN0RGF0YS5jdHguZ2xvYmFsQWxwaGEgPSBvbGRBbHBoYTsKICAgICAgICBpZiAoZHN0ICE9IFNETC5zY3JlZW4pIHsKICAgICAgICAgIC8vIFhYWCBBcyBpbiBJTUdfTG9hZCwgZm9yIGNvbXBhdGliaWxpdHkgd2Ugd3JpdGUgb3V0IHxwaXhlbHN8CiAgICAgICAgICB3YXJuT25jZSgnV0FSTklORzogY29weWluZyBjYW52YXMgZGF0YSB0byBtZW1vcnkgZm9yIGNvbXBhdGliaWxpdHknKTsKICAgICAgICAgIF9TRExfTG9ja1N1cmZhY2UoZHN0KTsKICAgICAgICAgIGRzdERhdGEubG9ja2VkLS07IC8vIFRoZSBzdXJmYWNlIGlzIG5vdCBhY3R1YWxseSBsb2NrZWQgaW4gdGhpcyBoYWNrCiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgICB9LGRvd25GaW5nZXJzOnt9LHNhdmVkS2V5ZG93bjpudWxsLHJlY2VpdmVFdmVudDpmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBmdW5jdGlvbiB1bnByZXNzQWxsUHJlc3NlZEtleXMoKSB7CiAgICAgICAgICAvLyBVbi1wcmVzcyBhbGwgcHJlc3NlZCBrZXlzOiBUT0RPCiAgICAgICAgICBmb3IgKHZhciBjb2RlIGluIFNETC5rZXlib2FyZE1hcCkgewogICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICdrZXl1cCcsCiAgICAgICAgICAgICAga2V5Q29kZTogU0RMLmtleWJvYXJkTWFwW2NvZGVdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgc3dpdGNoKGV2ZW50LnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ3RvdWNoc3RhcnQnOiBjYXNlICd0b3VjaG1vdmUnOiB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgCiAgICAgICAgICAgIHZhciB0b3VjaGVzID0gW107CiAgCiAgICAgICAgICAgIC8vIENsZWFyIG91dCBhbnkgdG91Y2hzdGFydCBldmVudHMgdGhhdCB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZAogICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC50b3VjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBldmVudC50b3VjaGVzW2ldOwogICAgICAgICAgICAgICAgaWYgKFNETC5kb3duRmluZ2Vyc1t0b3VjaC5pZGVudGlmaWVyXSAhPSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIFNETC5kb3duRmluZ2Vyc1t0b3VjaC5pZGVudGlmaWVyXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRvdWNoZXMucHVzaCh0b3VjaCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRvdWNoZXMgPSBldmVudC50b3VjaGVzOwogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIHZhciBmaXJzdFRvdWNoID0gdG91Y2hlc1swXTsKICAgICAgICAgICAgaWYgKGZpcnN0VG91Y2gpIHsKICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PSAndG91Y2hzdGFydCcpIHsKICAgICAgICAgICAgICAgIFNETC5ET01CdXR0b25zWzBdID0gMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdmFyIG1vdXNlRXZlbnRUeXBlOwogICAgICAgICAgICAgIHN3aXRjaChldmVudC50eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICd0b3VjaHN0YXJ0JzogbW91c2VFdmVudFR5cGUgPSAnbW91c2Vkb3duJzsgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICd0b3VjaG1vdmUnOiBtb3VzZUV2ZW50VHlwZSA9ICdtb3VzZW1vdmUnOyBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdmFyIG1vdXNlRXZlbnQgPSB7CiAgICAgICAgICAgICAgICB0eXBlOiBtb3VzZUV2ZW50VHlwZSwKICAgICAgICAgICAgICAgIGJ1dHRvbjogMCwKICAgICAgICAgICAgICAgIHBhZ2VYOiBmaXJzdFRvdWNoLmNsaWVudFgsCiAgICAgICAgICAgICAgICBwYWdlWTogZmlyc3RUb3VjaC5jbGllbnRZCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2gobW91c2VFdmVudCk7CiAgICAgICAgICAgIH0KICAKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHRvdWNoID0gdG91Y2hlc1tpXTsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogZXZlbnQudHlwZSwKICAgICAgICAgICAgICAgIHRvdWNoOiB0b3VjaAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ3RvdWNoZW5kJzogewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogIAogICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IGluIHRoZSBTREwuZG93bkZpbmdlcnMgaGFzaAogICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBmaW5nZXIgaXMgbm8gbG9uZ2VyIGRvd24uCiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldOwogICAgICAgICAgICAgIGlmIChTREwuZG93bkZpbmdlcnNbdG91Y2guaWRlbnRpZmllcl0gPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBTREwuZG93bkZpbmdlcnNbdG91Y2guaWRlbnRpZmllcl07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIHZhciBtb3VzZUV2ZW50ID0gewogICAgICAgICAgICAgIHR5cGU6ICdtb3VzZXVwJywKICAgICAgICAgICAgICBidXR0b246IDAsCiAgICAgICAgICAgICAgcGFnZVg6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsCiAgICAgICAgICAgICAgcGFnZVk6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgU0RMLkRPTUJ1dHRvbnNbMF0gPSAwOwogICAgICAgICAgICBTREwuZXZlbnRzLnB1c2gobW91c2VFdmVudCk7CiAgCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogJ3RvdWNoZW5kJywKICAgICAgICAgICAgICAgIHRvdWNoOiB0b3VjaAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ0RPTU1vdXNlU2Nyb2xsJzogY2FzZSAnbW91c2V3aGVlbCc6IGNhc2UgJ3doZWVsJzoKICAgICAgICAgICAgdmFyIGRlbHRhID0gLUJyb3dzZXIuZ2V0TW91c2VXaGVlbERlbHRhKGV2ZW50KTsgLy8gRmxpcCB0aGUgd2hlZWwgZGlyZWN0aW9uIHRvIHRyYW5zbGF0ZSBmcm9tIGJyb3dzZXIgd2hlZWwgZGlyZWN0aW9uICgrOmRvd24pIHRvIFNETCBkaXJlY3Rpb24gKCs6dXApCiAgICAgICAgICAgIGRlbHRhID0gKGRlbHRhID09IDApID8gMCA6IChkZWx0YSA+IDAgPyBNYXRoLm1heChkZWx0YSwgMSkgOiBNYXRoLm1pbihkZWx0YSwgLTEpKTsgLy8gUXVhbnRpemUgdG8gaW50ZWdlciBzbyB0aGF0IG1pbmltdW0gc2Nyb2xsIGlzIGF0IGxlYXN0ICsvLSAxLgogIAogICAgICAgICAgICAvLyBTaW11bGF0ZSBvbGQtc3R5bGUgU0RMIGV2ZW50cyByZXByZXNlbnRpbmcgbW91c2Ugd2hlZWwgaW5wdXQgYXMgYnV0dG9ucwogICAgICAgICAgICB2YXIgYnV0dG9uID0gZGVsdGEgPiAwID8gMyAvKlNETF9CVVRUT05fV0hFRUxVUC0xKi8gOiA0IC8qU0RMX0JVVFRPTl9XSEVFTERPV04tMSovOyAvLyBTdWJ0cmFjdCBvbmUgc2luY2UgSlMtPkMgbWFyc2hhbGxpbmcgaXMgZGVmaW5lZCB0byBhZGQgb25lIGJhY2suCiAgICAgICAgICAgIFNETC5ldmVudHMucHVzaCh7IHR5cGU6ICdtb3VzZWRvd24nLCBidXR0b246IGJ1dHRvbiwgcGFnZVg6IGV2ZW50LnBhZ2VYLCBwYWdlWTogZXZlbnQucGFnZVkgfSk7CiAgICAgICAgICAgIFNETC5ldmVudHMucHVzaCh7IHR5cGU6ICdtb3VzZXVwJywgYnV0dG9uOiBidXR0b24sIHBhZ2VYOiBldmVudC5wYWdlWCwgcGFnZVk6IGV2ZW50LnBhZ2VZIH0pOwogIAogICAgICAgICAgICAvLyBQYXNzIGEgZGVsdGEgbW90aW9uIGV2ZW50LgogICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goeyB0eXBlOiAnd2hlZWwnLCBkZWx0YVg6IDAsIGRlbHRhWTogZGVsdGEgfSk7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIElmIHdlIGRvbid0IHByZXZlbnQgdGhpcywgdGhlbiAnd2hlZWwnIGV2ZW50IHdpbGwgYmUgc2VudCBhZ2FpbiBieSB0aGUgYnJvd3NlciBhcyAnRE9NTW91c2VTY3JvbGwnIGFuZCB3ZSB3aWxsIHJlY2VpdmUgdGhpcyBzYW1lIGV2ZW50IHRoZSBzZWNvbmQgdGltZS4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdtb3VzZW1vdmUnOgogICAgICAgICAgICBpZiAoU0RMLkRPTUJ1dHRvbnNbMF0gPT09IDEpIHsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogJ3RvdWNobW92ZScsCiAgICAgICAgICAgICAgICB0b3VjaDogewogICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiAwLAogICAgICAgICAgICAgICAgICBkZXZpY2VJRDogLTEsCiAgICAgICAgICAgICAgICAgIHBhZ2VYOiBldmVudC5wYWdlWCwKICAgICAgICAgICAgICAgICAgcGFnZVk6IGV2ZW50LnBhZ2VZCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKEJyb3dzZXIucG9pbnRlckxvY2spIHsKICAgICAgICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBmaXJlZm94IGJ1ZyA3NTAxMTEKICAgICAgICAgICAgICBpZiAoJ21vek1vdmVtZW50WCcgaW4gZXZlbnQpIHsKICAgICAgICAgICAgICAgIGV2ZW50Wydtb3ZlbWVudFgnXSA9IGV2ZW50Wydtb3pNb3ZlbWVudFgnXTsKICAgICAgICAgICAgICAgIGV2ZW50Wydtb3ZlbWVudFknXSA9IGV2ZW50Wydtb3pNb3ZlbWVudFknXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgRmlyZWZveCBidWcgNzgyNzc3CiAgICAgICAgICAgICAgaWYgKGV2ZW50Wydtb3ZlbWVudFgnXSA9PSAwICYmIGV2ZW50Wydtb3ZlbWVudFknXSA9PSAwKSB7CiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgYSBtb3VzZW1vdmUgZXZlbnQgaWYgaXQgZG9lc24ndCBjb250YWluIGFueSBtb3ZlbWVudCBpbmZvCiAgICAgICAgICAgICAgICAvLyAod2l0aG91dCBwb2ludGVyIGxvY2ssIHdlIGluZmVyIG1vdmVtZW50IGZyb20gcGFnZVgvcGFnZVksIHNvIHRoaXMgY2hlY2sgaXMgdW5uZWNlc3NhcnkpCiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBmYWxsIHRocm91Z2gKICAgICAgICAgIGNhc2UgJ2tleWRvd24nOiBjYXNlICdrZXl1cCc6IGNhc2UgJ2tleXByZXNzJzogY2FzZSAnbW91c2Vkb3duJzogY2FzZSAnbW91c2V1cCc6CiAgICAgICAgICAgIC8vIElmIHdlIHByZXZlbnREZWZhdWx0IG9uIGtleWRvd24gZXZlbnRzLCB0aGUgc3Vic2VxdWVudCBrZXlwcmVzcyBldmVudHMKICAgICAgICAgICAgLy8gd29uJ3QgZmlyZS4gSG93ZXZlciwgaXQncyBmaW5lIChhbmQgaW4gc29tZSBjYXNlcyBuZWNlc3NhcnkpIHRvCiAgICAgICAgICAgIC8vIHByZXZlbnREZWZhdWx0IGZvciBrZXlzIHRoYXQgZG9uJ3QgZ2VuZXJhdGUgYSBjaGFyYWN0ZXIuIE90aGVyd2lzZSwKICAgICAgICAgICAgLy8gcHJldmVudERlZmF1bHQgaXMgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGluIGdlbmVyYWwuCiAgICAgICAgICAgIGlmIChldmVudC50eXBlICE9PSAna2V5ZG93bicgfHwgKCFTREwudW5pY29kZSAmJiAhU0RMLnRleHRJbnB1dCkgfHwgKGV2ZW50LmtleUNvZGUgPT09IDggLyogYmFja3NwYWNlICovIHx8IGV2ZW50LmtleUNvZGUgPT09IDkgLyogdGFiICovKSkgewogICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIH0KICAKICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlZG93bicpIHsKICAgICAgICAgICAgICBTREwuRE9NQnV0dG9uc1tldmVudC5idXR0b25dID0gMTsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogJ3RvdWNoc3RhcnQnLAogICAgICAgICAgICAgICAgdG91Y2g6IHsKICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogMCwKICAgICAgICAgICAgICAgICAgZGV2aWNlSUQ6IC0xLAogICAgICAgICAgICAgICAgICBwYWdlWDogZXZlbnQucGFnZVgsCiAgICAgICAgICAgICAgICAgIHBhZ2VZOiBldmVudC5wYWdlWQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNldXAnKSB7CiAgICAgICAgICAgICAgLy8gaWdub3JlIGV4dHJhIHVwcywgY2FuIGhhcHBlbiBpZiB3ZSBsZWF2ZSB0aGUgY2FudmFzIHdoaWxlIHByZXNzaW5nIGRvd24sIHRoZW4gcmV0dXJuLAogICAgICAgICAgICAgIC8vIHNpbmNlIHdlIGFkZCBhIG1vdXNldXAgaW4gdGhhdCBjYXNlCiAgICAgICAgICAgICAgaWYgKCFTREwuRE9NQnV0dG9uc1tldmVudC5idXR0b25dKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogIAogICAgICAgICAgICAgIFNETC5ldmVudHMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAndG91Y2hlbmQnLAogICAgICAgICAgICAgICAgdG91Y2g6IHsKICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogMCwKICAgICAgICAgICAgICAgICAgZGV2aWNlSUQ6IC0xLAogICAgICAgICAgICAgICAgICBwYWdlWDogZXZlbnQucGFnZVgsCiAgICAgICAgICAgICAgICAgIHBhZ2VZOiBldmVudC5wYWdlWQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIFNETC5ET01CdXR0b25zW2V2ZW50LmJ1dHRvbl0gPSAwOwogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIC8vIFdlIGNhbiBvbmx5IHJlcXVlc3QgZnVsbHNjcmVlbiBhcyB0aGUgcmVzdWx0IG9mIHVzZXIgaW5wdXQuCiAgICAgICAgICAgIC8vIER1ZSB0byB0aGlzIGxpbWl0YXRpb24sIHdlIHRvZ2dsZSBhIGJvb2xlYW4gb24ga2V5ZG93biB3aGljaAogICAgICAgICAgICAvLyBTRExfV01fVG9nZ2xlRnVsbFNjcmVlbiB3aWxsIGNoZWNrIGFuZCBzdWJzZXF1ZW50bHkgc2V0IGFub3RoZXIKICAgICAgICAgICAgLy8gZmxhZyBpbmRpY2F0aW5nIGZvciB1cyB0byByZXF1ZXN0IGZ1bGxzY3JlZW4gb24gdGhlIGZvbGxvd2luZwogICAgICAgICAgICAvLyBrZXl1cC4gVGhpcyBpc24ndCBwZXJmZWN0LCBidXQgaXQgZW5hYmxlcyBTRExfV01fVG9nZ2xlRnVsbFNjcmVlbgogICAgICAgICAgICAvLyB0byB3b3JrIGFzIHRoZSByZXN1bHQgb2YgYSBrZXlwcmVzcyAod2hpY2ggaXMgYW4gZXh0cmVtZWx5CiAgICAgICAgICAgIC8vIGNvbW1vbiB1c2UgY2FzZSkuCiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicpIHsKICAgICAgICAgICAgICBTREwuY2FuUmVxdWVzdEZ1bGxzY3JlZW4gPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXl1cCcgfHwgZXZlbnQudHlwZSA9PT0gJ21vdXNldXAnKSB7CiAgICAgICAgICAgICAgaWYgKFNETC5pc1JlcXVlc3RpbmdGdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICBNb2R1bGVbJ3JlcXVlc3RGdWxsc2NyZWVuJ10oLypsb2NrUG9pbnRlcj0qL3RydWUsIC8qcmVzaXplQ2FudmFzPSovdHJ1ZSk7CiAgICAgICAgICAgICAgICBTREwuaXNSZXF1ZXN0aW5nRnVsbHNjcmVlbiA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBTREwuY2FuUmVxdWVzdEZ1bGxzY3JlZW4gPSBmYWxzZTsKICAgICAgICAgICAgfQogIAogICAgICAgICAgICAvLyBTREwgZXhwZWN0cyBhIHVuaWNvZGUgY2hhcmFjdGVyIHRvIGJlIHBhc3NlZCB0byBpdHMga2V5ZG93biBldmVudHMuCiAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZSBicm93c2VyIEFQSXMgb25seSBwcm92aWRlIGEgY2hhckNvZGUgcHJvcGVydHkgb24KICAgICAgICAgICAgLy8ga2V5cHJlc3MgZXZlbnRzLCBzbyB3ZSBtdXN0IGJhY2tmaWxsIGluIGtleWRvd24gZXZlbnRzIHdpdGggdGhlaXIKICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBrZXlwcmVzcyBldmVudCdzIGNoYXJDb2RlLgogICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJyAmJiBTREwuc2F2ZWRLZXlkb3duKSB7CiAgICAgICAgICAgICAgLy8gY2hhckNvZGUgaXMgcmVhZC1vbmx5CiAgICAgICAgICAgICAgU0RMLnNhdmVkS2V5ZG93bi5rZXlwcmVzc0NoYXJDb2RlID0gZXZlbnQuY2hhckNvZGU7CiAgICAgICAgICAgICAgU0RMLnNhdmVkS2V5ZG93biA9IG51bGw7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nKSB7CiAgICAgICAgICAgICAgU0RMLnNhdmVkS2V5ZG93biA9IGV2ZW50OwogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIC8vIERvbid0IHB1c2gga2V5cHJlc3MgZXZlbnRzIHVubGVzcyBTRExfU3RhcnRUZXh0SW5wdXQgaGFzIGJlZW4gY2FsbGVkLgogICAgICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2tleXByZXNzJyB8fCBTREwudGV4dElucHV0KSB7CiAgICAgICAgICAgICAgU0RMLmV2ZW50cy5wdXNoKGV2ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ21vdXNlb3V0JzoKICAgICAgICAgICAgLy8gVW4tcHJlc3MgYWxsIHByZXNzZWQgbW91c2UgYnV0dG9ucywgYmVjYXVzZSB3ZSBtaWdodCBtaXNzIHRoZSByZWxlYXNlIG91dHNpZGUgb2YgdGhlIGNhbnZhcwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgICAgICAgIGlmIChTREwuRE9NQnV0dG9uc1tpXSkgewogICAgICAgICAgICAgICAgU0RMLmV2ZW50cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ21vdXNldXAnLAogICAgICAgICAgICAgICAgICBidXR0b246IGksCiAgICAgICAgICAgICAgICAgIHBhZ2VYOiBldmVudC5wYWdlWCwKICAgICAgICAgICAgICAgICAgcGFnZVk6IGV2ZW50LnBhZ2VZCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIFNETC5ET01CdXR0b25zW2ldID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdmb2N1cyc6CiAgICAgICAgICAgIFNETC5ldmVudHMucHVzaChldmVudCk7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnYmx1cic6CiAgICAgICAgICAgIFNETC5ldmVudHMucHVzaChldmVudCk7CiAgICAgICAgICAgIHVucHJlc3NBbGxQcmVzc2VkS2V5cygpOwogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Zpc2liaWxpdHljaGFuZ2UnOgogICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICd2aXNpYmlsaXR5Y2hhbmdlJywKICAgICAgICAgICAgICB2aXNpYmxlOiAhZG9jdW1lbnQuaGlkZGVuCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bnByZXNzQWxsUHJlc3NlZEtleXMoKTsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICd1bmxvYWQnOgogICAgICAgICAgICBpZiAoQnJvd3Nlci5tYWluTG9vcC5ydW5uZXIpIHsKICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goZXZlbnQpOwogICAgICAgICAgICAgIC8vIEZvcmNlLXJ1biBhIG1haW4gZXZlbnQgbG9vcCwgc2luY2Ugb3RoZXJ3aXNlIHRoaXMgZXZlbnQgd2lsbCBuZXZlciBiZSBjYXVnaHQhCiAgICAgICAgICAgICAgQnJvd3Nlci5tYWluTG9vcC5ydW5uZXIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBjYXNlICdyZXNpemUnOgogICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goZXZlbnQpOwogICAgICAgICAgICAvLyBtYW51YWxseSB0cmlnZ2VyZWQgcmVzaXplIGV2ZW50IGRvZXNuJ3QgaGF2ZSBhIHByZXZlbnREZWZhdWx0IG1lbWJlcgogICAgICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIHsKICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZiAoU0RMLmV2ZW50cy5sZW5ndGggPj0gMTAwMDApIHsKICAgICAgICAgIE1vZHVsZS5wcmludEVycignU0RMIGV2ZW50IHF1ZXVlIGZ1bGwsIGRyb3BwaW5nIGV2ZW50cycpOwogICAgICAgICAgU0RMLmV2ZW50cyA9IFNETC5ldmVudHMuc2xpY2UoMCwgMTAwMDApOwogICAgICAgIH0KICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgaGFuZGxlciBpbnN0YWxsZWQsIHRoaXMgd2lsbCBwdXNoIHRoZSBldmVudHMgdG8gdGhlIGFwcAogICAgICAgIC8vIGluc3RlYWQgb2YgdGhlIGFwcCBwb2xsaW5nIGZvciB0aGVtLgogICAgICAgIFNETC5mbHVzaEV2ZW50c1RvSGFuZGxlcigpOwogICAgICAgIHJldHVybjsKICAgICAgfSxsb29rdXBLZXlDb2RlRm9yRXZlbnQ6ZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGU7CiAgICAgICAgICBpZiAoY29kZSA+PSA2NSAmJiBjb2RlIDw9IDkwKSB7CiAgICAgICAgICAgIGNvZGUgKz0gMzI7IC8vIG1ha2UgbG93ZXJjYXNlIGZvciBTREwKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvZGUgPSBTREwua2V5Q29kZXNbZXZlbnQua2V5Q29kZV0gfHwgZXZlbnQua2V5Q29kZTsKICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBvbmUgb2YgdGhlIG1vZGlmaWVyIGtleXMgKDIyNCB8IDE8PDEwIC0gMjI3IHwgMTw8MTApLCBhbmQgdGhlIGV2ZW50IHNwZWNpZmllcyB0aGF0IGl0IGlzCiAgICAgICAgICAgIC8vIGEgcmlnaHQga2V5LCBhZGQgNCB0byBnZXQgdGhlIHJpZ2h0IGtleSBTREwga2V5IGNvZGUuCiAgICAgICAgICAgIGlmIChldmVudC5sb2NhdGlvbiA9PT0gS2V5Ym9hcmRFdmVudC5ET01fS0VZX0xPQ0FUSU9OX1JJR0hUICYmIGNvZGUgPj0gKDIyNCB8IDE8PDEwKSAmJiBjb2RlIDw9ICgyMjcgfCAxPDwxMCkpIHsKICAgICAgICAgICAgICBjb2RlICs9IDQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBjb2RlOwogICAgICB9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmIChldmVudC5oYW5kbGVkKSByZXR1cm47CiAgICAgICAgZXZlbnQuaGFuZGxlZCA9IHRydWU7CiAgCiAgICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7CiAgICAgICAgICBjYXNlICd0b3VjaHN0YXJ0JzogY2FzZSAndG91Y2hlbmQnOiBjYXNlICd0b3VjaG1vdmUnOiB7CiAgICAgICAgICAgIEJyb3dzZXIuY2FsY3VsYXRlTW91c2VFdmVudChldmVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAna2V5ZG93bic6IGNhc2UgJ2tleXVwJzogewogICAgICAgICAgICB2YXIgZG93biA9IGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJzsKICAgICAgICAgICAgdmFyIGNvZGUgPSBTREwubG9va3VwS2V5Q29kZUZvckV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgSEVBUDhbKCgoU0RMLmtleWJvYXJkU3RhdGUpKyhjb2RlKSk+PjApXT1kb3duOwogICAgICAgICAgICAvLyBUT0RPOiBsbWV0YSwgcm1ldGEsIG51bWxvY2ssIGNhcHNsb2NrLCBLTU9EX01PREUsIEtNT0RfUkVTRVJWRUQKICAgICAgICAgICAgU0RMLm1vZFN0YXRlID0gKEhFQVA4WygoKFNETC5rZXlib2FyZFN0YXRlKSsoMTI0OCkpPj4wKV0gPyAweDAwNDAgOiAwKSB8IC8vIEtNT0RfTENUUkwKICAgICAgICAgICAgICAoSEVBUDhbKCgoU0RMLmtleWJvYXJkU3RhdGUpKygxMjQ5KSk+PjApXSA/IDB4MDAwMSA6IDApIHwgLy8gS01PRF9MU0hJRlQKICAgICAgICAgICAgICAoSEVBUDhbKCgoU0RMLmtleWJvYXJkU3RhdGUpKygxMjUwKSk+PjApXSA/IDB4MDEwMCA6IDApIHwgLy8gS01PRF9MQUxUCiAgICAgICAgICAgICAgKEhFQVA4WygoKFNETC5rZXlib2FyZFN0YXRlKSsoMTI1MikpPj4wKV0gPyAweDAwODAgOiAwKSB8IC8vIEtNT0RfUkNUUkwKICAgICAgICAgICAgICAoSEVBUDhbKCgoU0RMLmtleWJvYXJkU3RhdGUpKygxMjUzKSk+PjApXSA/IDB4MDAwMiA6IDApIHwgLy8gS01PRF9SU0hJRlQKICAgICAgICAgICAgICAoSEVBUDhbKCgoU0RMLmtleWJvYXJkU3RhdGUpKygxMjU0KSk+PjApXSA/IDB4MDIwMCA6IDApOyAvLyAgS01PRF9SQUxUCiAgICAgICAgICAgIGlmIChkb3duKSB7CiAgICAgICAgICAgICAgU0RMLmtleWJvYXJkTWFwW2NvZGVdID0gZXZlbnQua2V5Q29kZTsgLy8gc2F2ZSB0aGUgRE9NIGlucHV0LCB3aGljaCB3ZSBjYW4gdXNlIHRvIHVucHJlc3MgaXQgZHVyaW5nIGJsdXIKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkZWxldGUgU0RMLmtleWJvYXJkTWFwW2NvZGVdOwogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzogY2FzZSAnbW91c2V1cCc6CiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09ICdtb3VzZWRvd24nKSB7CiAgICAgICAgICAgICAgLy8gU0RMX0JVVFRPTih4KSBpcyBkZWZpbmVkIGFzICgxIDw8ICgoeCktMSkpLiAgU0RMIGJ1dHRvbnMgYXJlIDEtMywKICAgICAgICAgICAgICAvLyBhbmQgRE9NIGJ1dHRvbnMgYXJlIDAtMiwgc28gdGhpcyBtZWFucyB0aGF0IHRoZSBiZWxvdyBmb3JtdWxhIGlzCiAgICAgICAgICAgICAgLy8gY29ycmVjdC4KICAgICAgICAgICAgICBTREwuYnV0dG9uU3RhdGUgfD0gMSA8PCBldmVudC5idXR0b247CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PSAnbW91c2V1cCcpIHsKICAgICAgICAgICAgICBTREwuYnV0dG9uU3RhdGUgJj0gfigxIDw8IGV2ZW50LmJ1dHRvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gZmFsbCB0aHJvdWdoCiAgICAgICAgICBjYXNlICdtb3VzZW1vdmUnOiB7CiAgICAgICAgICAgIEJyb3dzZXIuY2FsY3VsYXRlTW91c2VFdmVudChldmVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSxmbHVzaEV2ZW50c1RvSGFuZGxlcjpmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFTREwuZXZlbnRIYW5kbGVyKSByZXR1cm47CiAgCiAgICAgICAgd2hpbGUgKFNETC5wb2xsRXZlbnQoU0RMLmV2ZW50SGFuZGxlclRlbXApKSB7CiAgICAgICAgICBNb2R1bGVbJ2R5bkNhbGxfaWlpJ10oU0RMLmV2ZW50SGFuZGxlciwgU0RMLmV2ZW50SGFuZGxlckNvbnRleHQsIFNETC5ldmVudEhhbmRsZXJUZW1wKTsKICAgICAgICB9CiAgICAgIH0scG9sbEV2ZW50OmZ1bmN0aW9uIChwdHIpIHsKICAgICAgICBpZiAoU0RMLmluaXRGbGFncyAmIDB4MjAwICYmIFNETC5qb3lzdGlja0V2ZW50U3RhdGUpIHsKICAgICAgICAgIC8vIElmIFNETF9JTklUX0pPWVNUSUNLIHdhcyBzdXBwbGllZCBBTkQgdGhlIGpveXN0aWNrIHN5c3RlbSBpcyBjb25maWd1cmVkCiAgICAgICAgICAvLyB0byBhdXRvbWF0aWNhbGx5IHF1ZXJ5IGZvciBldmVudHMsIHF1ZXJ5IGZvciBqb3lzdGljayBldmVudHMuCiAgICAgICAgICBTREwucXVlcnlKb3lzdGlja3MoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHB0cikgewogICAgICAgICAgd2hpbGUgKFNETC5ldmVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBpZiAoU0RMLm1ha2VDRXZlbnQoU0RMLmV2ZW50cy5zaGlmdCgpLCBwdHIpICE9PSBmYWxzZSkgcmV0dXJuIDE7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gWFhYOiBzb21ld2hhdCByaXNreSBpbiB0aGF0IHdlIGRvIG5vdCBjaGVjayBpZiB0aGUgZXZlbnQgaXMgcmVhbCBvciBub3QgKG1ha2VDRXZlbnQgcmV0dXJucyBmYWxzZSkgaWYgbm8gcG9pbnRlciBzdXBwbGllZAogICAgICAgICAgcmV0dXJuIFNETC5ldmVudHMubGVuZ3RoID4gMDsKICAgICAgICB9CiAgICAgIH0sbWFrZUNFdmVudDpmdW5jdGlvbiAoZXZlbnQsIHB0cikgewogICAgICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAvLyBUaGlzIGlzIGEgcG9pbnRlciB0byBhIGNvcHkgb2YgYSBuYXRpdmUgQyBldmVudCB0aGF0IHdhcyBTRExfUHVzaEV2ZW50J2VkCiAgICAgICAgICBfbWVtY3B5KHB0ciwgZXZlbnQsIDI4KTsKICAgICAgICAgIF9mcmVlKGV2ZW50KTsgLy8gdGhlIGNvcHkgaXMgbm8gbG9uZ2VyIG5lZWRlZAogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAKICAgICAgICBTREwuaGFuZGxlRXZlbnQoZXZlbnQpOwogIAogICAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkgewogICAgICAgICAgY2FzZSAna2V5ZG93bic6IGNhc2UgJ2tleXVwJzogewogICAgICAgICAgICB2YXIgZG93biA9IGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJzsKICAgICAgICAgICAgLy9Nb2R1bGUucHJpbnQoJ1JlY2VpdmVkIGtleSBldmVudDogJyArIGV2ZW50LmtleUNvZGUpOwogICAgICAgICAgICB2YXIga2V5ID0gU0RMLmxvb2t1cEtleUNvZGVGb3JFdmVudChldmVudCk7CiAgICAgICAgICAgIHZhciBzY2FuOwogICAgICAgICAgICBpZiAoa2V5ID49IDEwMjQpIHsKICAgICAgICAgICAgICBzY2FuID0ga2V5IC0gMTAyNDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzY2FuID0gU0RMLnNjYW5Db2Rlc1trZXldIHx8IGtleTsKICAgICAgICAgICAgfQogIAogICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgSEVBUDhbKCgocHRyKSsoOCkpPj4wKV09ZG93biA/IDEgOiAwOwogICAgICAgICAgICBIRUFQOFsoKChwdHIpKyg5KSk+PjApXT0wOyAvLyBUT0RPCiAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKygxMikpPj4yKV09c2NhbjsKICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDE2KSk+PjIpXT1rZXk7CiAgICAgICAgICAgIEhFQVAxNlsoKChwdHIpKygyMCkpPj4xKV09U0RMLm1vZFN0YXRlOwogICAgICAgICAgICAvLyBzb21lIG5vbi1jaGFyYWN0ZXIga2V5cyAoZS5nLiBiYWNrc3BhY2UgYW5kIHRhYikgd29uJ3QgaGF2ZSBrZXlwcmVzc0NoYXJDb2RlIHNldCwgZmlsbCBpbiB3aXRoIHRoZSBrZXlDb2RlLgogICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjQpKT4+MildPWV2ZW50LmtleXByZXNzQ2hhckNvZGUgfHwga2V5OwogIAogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ2tleXByZXNzJzogewogICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgLy8gTm90IGZpbGxpbmcgaW4gd2luZG93SUQgZm9yIG5vdwogICAgICAgICAgICB2YXIgY1N0ciA9IGludEFycmF5RnJvbVN0cmluZyhTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmNoYXJDb2RlKSk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY1N0ci5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDggKyBpKSk+PjApXT1jU3RyW2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzogY2FzZSAnbW91c2V1cCc6IGNhc2UgJ21vdXNlbW92ZSc6IHsKICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgIT0gJ21vdXNlbW92ZScpIHsKICAgICAgICAgICAgICB2YXIgZG93biA9IGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nOwogICAgICAgICAgICAgIEhFQVAzMlsoKHB0cik+PjIpXT1TREwuRE9NRXZlbnRUb1NETEV2ZW50W2V2ZW50LnR5cGVdOwogICAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKyg0KSk+PjIpXT0wOwogICAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKyg4KSk+PjIpXT0wOwogICAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKygxMikpPj4yKV09MDsKICAgICAgICAgICAgICBIRUFQOFsoKChwdHIpKygxNikpPj4wKV09ZXZlbnQuYnV0dG9uKzE7IC8vIERPTSBidXR0b25zIGFyZSAwLTIsIFNETCAxLTMKICAgICAgICAgICAgICBIRUFQOFsoKChwdHIpKygxNykpPj4wKV09ZG93biA/IDEgOiAwOwogICAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKygyMCkpPj4yKV09QnJvd3Nlci5tb3VzZVg7CiAgICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDI0KSk+PjIpXT1Ccm93c2VyLm1vdXNlWTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoNCkpPj4yKV09MDsKICAgICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoOCkpPj4yKV09MDsKICAgICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoMTIpKT4+MildPTA7CiAgICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDE2KSk+PjIpXT1TREwuYnV0dG9uU3RhdGU7CiAgICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDIwKSk+PjIpXT1Ccm93c2VyLm1vdXNlWDsKICAgICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjQpKT4+MildPUJyb3dzZXIubW91c2VZOwogICAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKygyOCkpPj4yKV09QnJvd3Nlci5tb3VzZU1vdmVtZW50WDsKICAgICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoMzIpKT4+MildPUJyb3dzZXIubW91c2VNb3ZlbWVudFk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICd3aGVlbCc6IHsKICAgICAgICAgICAgSEVBUDMyWygocHRyKT4+MildPVNETC5ET01FdmVudFRvU0RMRXZlbnRbZXZlbnQudHlwZV07CiAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKygxNikpPj4yKV09ZXZlbnQuZGVsdGFYOwogICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjApKT4+MildPWV2ZW50LmRlbHRhWTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICd0b3VjaHN0YXJ0JzogY2FzZSAndG91Y2hlbmQnOiBjYXNlICd0b3VjaG1vdmUnOiB7CiAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LnRvdWNoOwogICAgICAgICAgICBpZiAoIUJyb3dzZXIudG91Y2hlc1t0b3VjaC5pZGVudGlmaWVyXSkgYnJlYWs7CiAgICAgICAgICAgIHZhciB3ID0gTW9kdWxlWydjYW52YXMnXS53aWR0aDsKICAgICAgICAgICAgdmFyIGggPSBNb2R1bGVbJ2NhbnZhcyddLmhlaWdodDsKICAgICAgICAgICAgdmFyIHggPSBCcm93c2VyLnRvdWNoZXNbdG91Y2guaWRlbnRpZmllcl0ueCAvIHc7CiAgICAgICAgICAgIHZhciB5ID0gQnJvd3Nlci50b3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdLnkgLyBoOwogICAgICAgICAgICB2YXIgbHggPSBCcm93c2VyLmxhc3RUb3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdLnggLyB3OwogICAgICAgICAgICB2YXIgbHkgPSBCcm93c2VyLmxhc3RUb3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdLnkgLyBoOwogICAgICAgICAgICB2YXIgZHggPSB4IC0gbHg7CiAgICAgICAgICAgIHZhciBkeSA9IHkgLSBseTsKICAgICAgICAgICAgaWYgKHRvdWNoWydkZXZpY2VJRCddID09PSB1bmRlZmluZWQpIHRvdWNoLmRldmljZUlEID0gU0RMLlRPVUNIX0RFRkFVTFRfSUQ7CiAgICAgICAgICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCAmJiBldmVudC50eXBlID09PSAndG91Y2htb3ZlJykgcmV0dXJuIGZhbHNlOyAvLyBkb24ndCBzZW5kIHRoZXNlIGlmIG5vdGhpbmcgaGFwcGVuZWQKICAgICAgICAgICAgSEVBUDMyWygocHRyKT4+MildPVNETC5ET01FdmVudFRvU0RMRXZlbnRbZXZlbnQudHlwZV07CiAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKyg0KSk+PjIpXT1fU0RMX0dldFRpY2tzKCk7CiAgICAgICAgICAgICh0ZW1wSTY0ID0gW3RvdWNoLmRldmljZUlEPj4+MCwodGVtcERvdWJsZT10b3VjaC5kZXZpY2VJRCwoKyhNYXRoX2Ficyh0ZW1wRG91YmxlKSkpID49IDEuMCA/ICh0ZW1wRG91YmxlID4gMC4wID8gKChNYXRoX21pbigoKyhNYXRoX2Zsb29yKCh0ZW1wRG91YmxlKS80Mjk0OTY3Mjk2LjApKSksIDQyOTQ5NjcyOTUuMCkpfDApPj4+MCA6ICh+figoKyhNYXRoX2NlaWwoKHRlbXBEb3VibGUgLSArKCgofn4odGVtcERvdWJsZSkpKT4+PjApKS80Mjk0OTY3Mjk2LjApKSkpKT4+PjApIDogMCldLEhFQVAzMlsoKChwdHIpKyg4KSk+PjIpXT10ZW1wSTY0WzBdLEhFQVAzMlsoKChwdHIpKygxMikpPj4yKV09dGVtcEk2NFsxXSk7CiAgICAgICAgICAgICh0ZW1wSTY0ID0gW3RvdWNoLmlkZW50aWZpZXI+Pj4wLCh0ZW1wRG91YmxlPXRvdWNoLmlkZW50aWZpZXIsKCsoTWF0aF9hYnModGVtcERvdWJsZSkpKSA+PSAxLjAgPyAodGVtcERvdWJsZSA+IDAuMCA/ICgoTWF0aF9taW4oKCsoTWF0aF9mbG9vcigodGVtcERvdWJsZSkvNDI5NDk2NzI5Ni4wKSkpLCA0Mjk0OTY3Mjk1LjApKXwwKT4+PjAgOiAofn4oKCsoTWF0aF9jZWlsKCh0ZW1wRG91YmxlIC0gKygoKH5+KHRlbXBEb3VibGUpKSk+Pj4wKSkvNDI5NDk2NzI5Ni4wKSkpKSk+Pj4wKSA6IDApXSxIRUFQMzJbKCgocHRyKSsoMTYpKT4+MildPXRlbXBJNjRbMF0sSEVBUDMyWygoKHB0cikrKDIwKSk+PjIpXT10ZW1wSTY0WzFdKTsKICAgICAgICAgICAgSEVBUEYzMlsoKChwdHIpKygyNCkpPj4yKV09eDsKICAgICAgICAgICAgSEVBUEYzMlsoKChwdHIpKygyOCkpPj4yKV09eTsKICAgICAgICAgICAgSEVBUEYzMlsoKChwdHIpKygzMikpPj4yKV09ZHg7CiAgICAgICAgICAgIEhFQVBGMzJbKCgocHRyKSsoMzYpKT4+MildPWR5OwogICAgICAgICAgICBpZiAodG91Y2guZm9yY2UgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIEhFQVBGMzJbKCgocHRyKSsoNDApKT4+MildPXRvdWNoLmZvcmNlOwogICAgICAgICAgICB9IGVsc2UgeyAvLyBObyBwcmVzc3VyZSBkYXRhLCBzZW5kIGEgZGlnaXRhbCAwLzEgcHJlc3N1cmUuCiAgICAgICAgICAgICAgSEVBUEYzMlsoKChwdHIpKyg0MCkpPj4yKV09ZXZlbnQudHlwZSA9PSAidG91Y2hlbmQiID8gMCA6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICd1bmxvYWQnOiB7CiAgICAgICAgICAgIEhFQVAzMlsoKHB0cik+PjIpXT1TREwuRE9NRXZlbnRUb1NETEV2ZW50W2V2ZW50LnR5cGVdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ3Jlc2l6ZSc6IHsKICAgICAgICAgICAgSEVBUDMyWygocHRyKT4+MildPVNETC5ET01FdmVudFRvU0RMRXZlbnRbZXZlbnQudHlwZV07CiAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKyg0KSk+PjIpXT1ldmVudC53OwogICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoOCkpPj4yKV09ZXZlbnQuaDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICdqb3lzdGlja19idXR0b25fdXAnOiBjYXNlICdqb3lzdGlja19idXR0b25fZG93bic6IHsKICAgICAgICAgICAgdmFyIHN0YXRlID0gZXZlbnQudHlwZSA9PT0gJ2pveXN0aWNrX2J1dHRvbl91cCcgPyAwIDogMTsKICAgICAgICAgICAgSEVBUDMyWygocHRyKT4+MildPVNETC5ET01FdmVudFRvU0RMRXZlbnRbZXZlbnQudHlwZV07CiAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDQpKT4+MCldPWV2ZW50LmluZGV4OwogICAgICAgICAgICBIRUFQOFsoKChwdHIpKyg1KSk+PjApXT1ldmVudC5idXR0b247CiAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDYpKT4+MCldPXN0YXRlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ2pveXN0aWNrX2F4aXNfbW90aW9uJzogewogICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgSEVBUDhbKCgocHRyKSsoNCkpPj4wKV09ZXZlbnQuaW5kZXg7CiAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDUpKT4+MCldPWV2ZW50LmF4aXM7CiAgICAgICAgICAgIEhFQVAzMlsoKChwdHIpKyg4KSk+PjIpXT1TREwuam95c3RpY2tBeGlzVmFsdWVDb252ZXJzaW9uKGV2ZW50LnZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICdmb2N1cyc6IHsKICAgICAgICAgICAgdmFyIFNETF9XSU5ET1dFVkVOVF9GT0NVU19HQUlORUQgPSAxMiAvKiBTRExfV0lORE9XRVZFTlRfRk9DVVNfR0FJTkVEICovOwogICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDQpKT4+MildPTA7CiAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDgpKT4+MCldPVNETF9XSU5ET1dFVkVOVF9GT0NVU19HQUlORUQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAnYmx1cic6IHsKICAgICAgICAgICAgdmFyIFNETF9XSU5ET1dFVkVOVF9GT0NVU19MT1NUID0gMTMgLyogU0RMX1dJTkRPV0VWRU5UX0ZPQ1VTX0xPU1QgKi87CiAgICAgICAgICAgIEhFQVAzMlsoKHB0cik+PjIpXT1TREwuRE9NRXZlbnRUb1NETEV2ZW50W2V2ZW50LnR5cGVdOwogICAgICAgICAgICBIRUFQMzJbKCgocHRyKSsoNCkpPj4yKV09MDsKICAgICAgICAgICAgSEVBUDhbKCgocHRyKSsoOCkpPj4wKV09U0RMX1dJTkRPV0VWRU5UX0ZPQ1VTX0xPU1Q7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAndmlzaWJpbGl0eWNoYW5nZSc6IHsKICAgICAgICAgICAgdmFyIFNETF9XSU5ET1dFVkVOVF9TSE9XTiAgPSAxIC8qIFNETF9XSU5ET1dFVkVOVF9TSE9XTiAqLzsKICAgICAgICAgICAgdmFyIFNETF9XSU5ET1dFVkVOVF9ISURERU4gPSAyIC8qIFNETF9XSU5ET1dFVkVOVF9ISURERU4gKi87CiAgICAgICAgICAgIHZhciB2aXNpYmlsaXR5RXZlbnRJRCA9IGV2ZW50LnZpc2libGUgPyBTRExfV0lORE9XRVZFTlRfU0hPV04gOiBTRExfV0lORE9XRVZFTlRfSElEREVOOwogICAgICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09U0RMLkRPTUV2ZW50VG9TRExFdmVudFtldmVudC50eXBlXTsKICAgICAgICAgICAgSEVBUDMyWygoKHB0cikrKDQpKT4+MildPTA7CiAgICAgICAgICAgIEhFQVA4WygoKHB0cikrKDgpKT4+MCldPXZpc2liaWxpdHlFdmVudElEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHQ6IHRocm93ICdVbmhhbmRsZWQgU0RMIGV2ZW50OiAnICsgZXZlbnQudHlwZTsKICAgICAgICB9CiAgICAgIH0sbWFrZUZvbnRTdHJpbmc6ZnVuY3Rpb24gKGhlaWdodCwgZm9udE5hbWUpIHsKICAgICAgICBpZiAoZm9udE5hbWUuY2hhckF0KDApICE9ICInIiAmJiBmb250TmFtZS5jaGFyQXQoMCkgIT0gJyInKSB7CiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9ydS9kb2NzL1dlYi9DU1MvZm9udC1mYW1pbHkKICAgICAgICAgIC8vIEZvbnQgZmFtaWx5IG5hbWVzIGNvbnRhaW5pbmcgd2hpdGVzcGFjZSBzaG91bGQgYmUgcXVvdGVkLgogICAgICAgICAgLy8gQlRXLCBxdW90ZSBhbGwgZm9udCBuYW1lcyBpcyBlYXNpZXIgdGhhbiBzZWFyY2hpbmcgc3BhY2VzCiAgICAgICAgICBmb250TmFtZSA9ICciJyArIGZvbnROYW1lICsgJyInOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaGVpZ2h0ICsgJ3B4ICcgKyBmb250TmFtZSArICcsIHNlcmlmJzsKICAgICAgfSxlc3RpbWF0ZVRleHRXaWR0aDpmdW5jdGlvbiAoZm9udERhdGEsIHRleHQpIHsKICAgICAgICB2YXIgaCA9IGZvbnREYXRhLnNpemU7CiAgICAgICAgdmFyIGZvbnRTdHJpbmcgPSBTREwubWFrZUZvbnRTdHJpbmcoaCwgZm9udERhdGEubmFtZSk7CiAgICAgICAgdmFyIHRlbXBDdHggPSBTREwudHRmQ29udGV4dDsKICAgICAgICBhc3NlcnQodGVtcEN0eCwgJ1RURl9Jbml0IG11c3QgaGF2ZSBiZWVuIGNhbGxlZCcpOwogICAgICAgIHRlbXBDdHguc2F2ZSgpOwogICAgICAgIHRlbXBDdHguZm9udCA9IGZvbnRTdHJpbmc7CiAgICAgICAgdmFyIHJldCA9IHRlbXBDdHgubWVhc3VyZVRleHQodGV4dCkud2lkdGggfCAwOwogICAgICAgIHRlbXBDdHgucmVzdG9yZSgpOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0sYWxsb2NhdGVDaGFubmVsczpmdW5jdGlvbiAobnVtKSB7IC8vIGNhbGxlZCBmcm9tIE1peF9BbGxvY2F0ZUNoYW5uZWxzIGFuZCBpbml0CiAgICAgICAgaWYgKFNETC5udW1DaGFubmVscyAmJiBTREwubnVtQ2hhbm5lbHMgPj0gbnVtICYmIG51bSAhPSAwKSByZXR1cm47CiAgICAgICAgU0RMLm51bUNoYW5uZWxzID0gbnVtOwogICAgICAgIFNETC5jaGFubmVscyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgICAgICAgIFNETC5jaGFubmVsc1tpXSA9IHsKICAgICAgICAgICAgYXVkaW86IG51bGwsCiAgICAgICAgICAgIHZvbHVtZTogMS4wCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSxzZXRHZXRWb2x1bWU6ZnVuY3Rpb24gKGluZm8sIHZvbHVtZSkgewogICAgICAgIGlmICghaW5mbykgcmV0dXJuIDA7CiAgICAgICAgdmFyIHJldCA9IGluZm8udm9sdW1lICogMTI4OyAvLyBNSVhfTUFYX1ZPTFVNRQogICAgICAgIGlmICh2b2x1bWUgIT0gLTEpIHsKICAgICAgICAgIGluZm8udm9sdW1lID0gTWF0aC5taW4oTWF0aC5tYXgodm9sdW1lLCAwKSwgMTI4KSAvIDEyODsKICAgICAgICAgIGlmIChpbmZvLmF1ZGlvKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaW5mby5hdWRpby52b2x1bWUgPSBpbmZvLnZvbHVtZTsgLy8gRm9yIDxhdWRpbz4gZWxlbWVudAogICAgICAgICAgICAgIGlmIChpbmZvLmF1ZGlvLndlYkF1ZGlvR2Fpbk5vZGUpIGluZm8uYXVkaW8ud2ViQXVkaW9HYWluTm9kZVsnZ2FpbiddWyd2YWx1ZSddID0gaW5mby52b2x1bWU7IC8vIEZvciBXZWJBdWRpbyBwbGF5YmFjawogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICBNb2R1bGUucHJpbnRFcnIoJ3NldEdldFZvbHVtZSBmYWlsZWQgdG8gc2V0IGF1ZGlvIHZvbHVtZTogJyArIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0sc2V0UGFubmVyUG9zaXRpb246ZnVuY3Rpb24gKGluZm8sIHgsIHksIHopIHsKICAgICAgICBpZiAoIWluZm8pIHJldHVybjsKICAgICAgICBpZiAoaW5mby5hdWRpbykgewogICAgICAgICAgaWYgKGluZm8uYXVkaW8ud2ViQXVkaW9QYW5uZXJOb2RlKSB7CiAgICAgICAgICAgIGluZm8uYXVkaW8ud2ViQXVkaW9QYW5uZXJOb2RlWydzZXRQb3NpdGlvbiddKHgsIHksIHopOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSxwbGF5V2ViQXVkaW86ZnVuY3Rpb24gKGF1ZGlvKSB7CiAgICAgICAgaWYgKCFhdWRpbykgcmV0dXJuOwogICAgICAgIGlmIChhdWRpby53ZWJBdWRpb05vZGUpIHJldHVybjsgLy8gVGhpcyBpbnN0YW5jZSBpcyBhbHJlYWR5IHBsYXlpbmcsIGRvbid0IHN0YXJ0IGFnYWluLgogICAgICAgIGlmICghU0RMLndlYkF1ZGlvQXZhaWxhYmxlKCkpIHJldHVybjsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIHdlYkF1ZGlvID0gYXVkaW8ucmVzb3VyY2Uud2ViQXVkaW87CiAgICAgICAgICBhdWRpby5wYXVzZWQgPSBmYWxzZTsKICAgICAgICAgIGlmICghd2ViQXVkaW8uZGVjb2RlZEJ1ZmZlcikgewogICAgICAgICAgICBpZiAod2ViQXVkaW8ub25EZWNvZGVDb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSBhYm9ydCgiQ2Fubm90IHBsYXkgYmFjayBhdWRpbyBvYmplY3QgdGhhdCB3YXMgbm90IGxvYWRlZCIpOwogICAgICAgICAgICB3ZWJBdWRpby5vbkRlY29kZUNvbXBsZXRlLnB1c2goZnVuY3Rpb24oKSB7IGlmICghYXVkaW8ucGF1c2VkKSBTREwucGxheVdlYkF1ZGlvKGF1ZGlvKTsgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvTm9kZSA9IFNETC5hdWRpb0NvbnRleHRbJ2NyZWF0ZUJ1ZmZlclNvdXJjZSddKCk7CiAgICAgICAgICBhdWRpby53ZWJBdWRpb05vZGVbJ2J1ZmZlciddID0gd2ViQXVkaW8uZGVjb2RlZEJ1ZmZlcjsKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvTm9kZVsnbG9vcCddID0gYXVkaW8ubG9vcDsKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvTm9kZVsnb25lbmRlZCddID0gZnVuY3Rpb24oKSB7IGF1ZGlvWydvbmVuZGVkJ10oKTsgfSAvLyBGb3IgPG1lZGlhPiBlbGVtZW50IGNvbXBhdGliaWxpdHksIHJvdXRlIHRoZSBvbmVuZGVkIHNpZ25hbCB0byB0aGUgaW5zdGFuY2UuCiAgCiAgICAgICAgICBhdWRpby53ZWJBdWRpb1Bhbm5lck5vZGUgPSBTREwuYXVkaW9Db250ZXh0WydjcmVhdGVQYW5uZXInXSgpOwogICAgICAgICAgLy8gYXZvaWQgQ2hyb21lIGJ1ZwogICAgICAgICAgLy8gSWYgcG9zeiA9IDAsIHRoZSBzb3VuZCB3aWxsIGNvbWUgZnJvbSBvbmx5IHRoZSByaWdodC4KICAgICAgICAgIC8vIEJ5IHBvc3ogPSAtMC41IChzbGlnaHRseSBhaGVhZCksIHRoZSBzb3VuZCB3aWxsIGNvbWUgZnJvbSByaWdodCBhbmQgbGVmdCBjb3JyZWN0bHkuCiAgICAgICAgICBhdWRpby53ZWJBdWRpb1Bhbm5lck5vZGVbInNldFBvc2l0aW9uIl0oMCwgMCwgLS41KTsKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvUGFubmVyTm9kZVsncGFubmluZ01vZGVsJ10gPSAnZXF1YWxwb3dlcic7CiAgCiAgICAgICAgICAvLyBBZGQgYW4gaW50ZXJtZWRpYXRlIGdhaW4gbm9kZSB0byBjb250cm9sIHZvbHVtZS4KICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvR2Fpbk5vZGUgPSBTREwuYXVkaW9Db250ZXh0WydjcmVhdGVHYWluJ10oKTsKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvR2Fpbk5vZGVbJ2dhaW4nXVsndmFsdWUnXSA9IGF1ZGlvLnZvbHVtZTsKICAKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvTm9kZVsnY29ubmVjdCddKGF1ZGlvLndlYkF1ZGlvUGFubmVyTm9kZSk7CiAgICAgICAgICBhdWRpby53ZWJBdWRpb1Bhbm5lck5vZGVbJ2Nvbm5lY3QnXShhdWRpby53ZWJBdWRpb0dhaW5Ob2RlKTsKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvR2Fpbk5vZGVbJ2Nvbm5lY3QnXShTREwuYXVkaW9Db250ZXh0WydkZXN0aW5hdGlvbiddKTsKICAKICAgICAgICAgIGF1ZGlvLndlYkF1ZGlvTm9kZVsnc3RhcnQnXSgwLCBhdWRpby5jdXJyZW50UG9zaXRpb24pOwogICAgICAgICAgYXVkaW8uc3RhcnRUaW1lID0gU0RMLmF1ZGlvQ29udGV4dFsnY3VycmVudFRpbWUnXSAtIGF1ZGlvLmN1cnJlbnRQb3NpdGlvbjsKICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgIE1vZHVsZS5wcmludEVycigncGxheVdlYkF1ZGlvIGZhaWxlZDogJyArIGUpOwogICAgICAgIH0KICAgICAgfSxwYXVzZVdlYkF1ZGlvOmZ1bmN0aW9uIChhdWRpbykgewogICAgICAgIGlmICghYXVkaW8pIHJldHVybjsKICAgICAgICBpZiAoYXVkaW8ud2ViQXVkaW9Ob2RlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBSZW1lbWJlciB3aGVyZSB3ZSBsZWZ0IG9mZiwgc28gdGhhdCBpZi93aGVuIHdlIHJlc3VtZSwgd2UgY2FuIHJlc3RhcnQgdGhlIHBsYXliYWNrIGF0IGEgcHJvcGVyIHBsYWNlLgogICAgICAgICAgICBhdWRpby5jdXJyZW50UG9zaXRpb24gPSAoU0RMLmF1ZGlvQ29udGV4dFsnY3VycmVudFRpbWUnXSAtIGF1ZGlvLnN0YXJ0VGltZSkgJSBhdWRpby5yZXNvdXJjZS53ZWJBdWRpby5kZWNvZGVkQnVmZmVyLmR1cmF0aW9uOwogICAgICAgICAgICAvLyBJbXBvcnRhbnQ6IFdoZW4gd2UgcmVhY2ggaGVyZSwgdGhlIGF1ZGlvIHBsYXliYWNrIGlzIHN0b3BwZWQgYnkgdGhlIHVzZXIuIEJ1dCB3aGVuIGNhbGxpbmcgLnN0b3AoKSBiZWxvdywgdGhlIFdlYiBBdWRpbwogICAgICAgICAgICAvLyBncmFwaCB3aWxsIHNlbmQgdGhlIG9uZW5kZWQgc2lnbmFsLCBidXQgd2UgZG9uJ3Qgd2FudCB0byBwcm9jZXNzIHRoYXQsIHNpbmNlIHBhdXNpbmcgc2hvdWxkIG5vdCBjbGVhci9kZXN0cm95IHRoZSBhdWRpbwogICAgICAgICAgICAvLyBjaGFubmVsLgogICAgICAgICAgICBhdWRpby53ZWJBdWRpb05vZGVbJ29uZW5kZWQnXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgYXVkaW8ud2ViQXVkaW9Ob2RlLnN0b3AoMCk7IC8vIDAgaXMgYSBkZWZhdWx0IHBhcmFtZXRlciwgYnV0IFdlYktpdCBpcyBjb25mdXNlZCBieSBpdCAjMzg2MQogICAgICAgICAgICBhdWRpby53ZWJBdWRpb05vZGUgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgTW9kdWxlLnByaW50RXJyKCdwYXVzZVdlYkF1ZGlvIGZhaWxlZDogJyArIGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhdWRpby5wYXVzZWQgPSB0cnVlOwogICAgICB9LG9wZW5BdWRpb0NvbnRleHQ6ZnVuY3Rpb24gKCkgewogICAgICAgIC8vIEluaXRpYWxpemUgV2ViIEF1ZGlvIEFQSSBpZiB3ZSBoYXZlbid0IGRvbmUgc28geWV0LiBOb3RlOiBPbmx5IGluaXRpYWxpemUgV2ViIEF1ZGlvIGNvbnRleHQgZXZlciBvbmNlIG9uIHRoZSB3ZWIgcGFnZSwKICAgICAgICAvLyBzaW5jZSBpbml0aWFsaXppbmcgbXVsdGlwbGUgdGltZXMgZmFpbHMgb24gQ2hyb21lIHNheWluZyAnYXVkaW8gcmVzb3VyY2VzIGhhdmUgYmVlbiBleGhhdXN0ZWQnLgogICAgICAgIGlmICghU0RMLmF1ZGlvQ29udGV4dCkgewogICAgICAgICAgaWYgKHR5cGVvZihBdWRpb0NvbnRleHQpICE9PSAndW5kZWZpbmVkJykgU0RMLmF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTsKICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZih3ZWJraXRBdWRpb0NvbnRleHQpICE9PSAndW5kZWZpbmVkJykgU0RMLmF1ZGlvQ29udGV4dCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTsKICAgICAgICB9CiAgICAgIH0sd2ViQXVkaW9BdmFpbGFibGU6ZnVuY3Rpb24gKCkgeyByZXR1cm4gISFTREwuYXVkaW9Db250ZXh0OyB9LGZpbGxXZWJBdWRpb0J1ZmZlckZyb21IZWFwOmZ1bmN0aW9uIChoZWFwUHRyLCBzaXplU2FtcGxlc1BlckNoYW5uZWwsIGRzdEF1ZGlvQnVmZmVyKSB7CiAgICAgICAgLy8gVGhlIGlucHV0IGF1ZGlvIGRhdGEgaXMgaW50ZXJsZWF2ZWQgYWNyb3NzIHRoZSBjaGFubmVscywgaS5lLiBbTCwgUiwgTCwgUiwgTCwgUiwgLi4uXSBhbmQgaXMgZWl0aGVyIDgtYml0IG9yIDE2LWJpdCBhcwogICAgICAgIC8vIHN1cHBvcnRlZCBieSB0aGUgU0RMIEFQSS4gVGhlIG91dHB1dCBhdWRpbyB3YXZlIGRhdGEgZm9yIFdlYiBBdWRpbyBBUEkgbXVzdCBiZSBpbiBwbGFuYXIgYnVmZmVycyBvZiBbLTEsMV0tbm9ybWFsaXplZCBGbG9hdDMyIGRhdGEsCiAgICAgICAgLy8gc28gcGVyZm9ybSBhIGJ1ZmZlciBjb252ZXJzaW9uIGZvciB0aGUgZGF0YS4KICAgICAgICB2YXIgbnVtQ2hhbm5lbHMgPSBTREwuYXVkaW8uY2hhbm5lbHM7CiAgICAgICAgZm9yKHZhciBjID0gMDsgYyA8IG51bUNoYW5uZWxzOyArK2MpIHsKICAgICAgICAgIHZhciBjaGFubmVsRGF0YSA9IGRzdEF1ZGlvQnVmZmVyWydnZXRDaGFubmVsRGF0YSddKGMpOwogICAgICAgICAgaWYgKGNoYW5uZWxEYXRhLmxlbmd0aCAhPSBzaXplU2FtcGxlc1BlckNoYW5uZWwpIHsKICAgICAgICAgICAgdGhyb3cgJ1dlYiBBdWRpbyBvdXRwdXQgYnVmZmVyIGxlbmd0aCBtaXNtYXRjaCEgRGVzdGluYXRpb24gc2l6ZTogJyArIGNoYW5uZWxEYXRhLmxlbmd0aCArICcgc2FtcGxlcyB2cyBleHBlY3RlZCAnICsgc2l6ZVNhbXBsZXNQZXJDaGFubmVsICsgJyBzYW1wbGVzISc7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoU0RMLmF1ZGlvLmZvcm1hdCA9PSAweDgwMTAgLypBVURJT19TMTZMU0IqLykgewogICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgc2l6ZVNhbXBsZXNQZXJDaGFubmVsOyArK2opIHsKICAgICAgICAgICAgICBjaGFubmVsRGF0YVtqXSA9IChIRUFQMTZbKCgoaGVhcFB0cikrKChqKm51bUNoYW5uZWxzICsgYykqMikpPj4xKV0pIC8gMHg4MDAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKFNETC5hdWRpby5mb3JtYXQgPT0gMHgwMDA4IC8qQVVESU9fVTgqLykgewogICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgc2l6ZVNhbXBsZXNQZXJDaGFubmVsOyArK2opIHsKICAgICAgICAgICAgICB2YXIgdiA9IChIRUFQOFsoKChoZWFwUHRyKSsoaipudW1DaGFubmVscyArIGMpKT4+MCldKTsKICAgICAgICAgICAgICBjaGFubmVsRGF0YVtqXSA9ICgodiA+PSAwKSA/IHYtMTI4IDogdisxMjgpIC8xMjg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sZGVidWdTdXJmYWNlOmZ1bmN0aW9uIChzdXJmRGF0YSkgewogICAgICAgIGNvbnNvbGUubG9nKCdkdW1waW5nIHN1cmZhY2UgJyArIFtzdXJmRGF0YS5zdXJmLCBzdXJmRGF0YS5zb3VyY2UsIHN1cmZEYXRhLndpZHRoLCBzdXJmRGF0YS5oZWlnaHRdKTsKICAgICAgICB2YXIgaW1hZ2UgPSBzdXJmRGF0YS5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHN1cmZEYXRhLndpZHRoLCBzdXJmRGF0YS5oZWlnaHQpOwogICAgICAgIHZhciBkYXRhID0gaW1hZ2UuZGF0YTsKICAgICAgICB2YXIgbnVtID0gTWF0aC5taW4oc3VyZkRhdGEud2lkdGgsIHN1cmZEYXRhLmhlaWdodCk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykgewogICAgICAgICAgY29uc29sZS5sb2coJyAgIGRpYWdvbmFsICcgKyBpICsgJzonICsgW2RhdGFbaSpzdXJmRGF0YS53aWR0aCo0ICsgaSo0ICsgMF0sIGRhdGFbaSpzdXJmRGF0YS53aWR0aCo0ICsgaSo0ICsgMV0sIGRhdGFbaSpzdXJmRGF0YS53aWR0aCo0ICsgaSo0ICsgMl0sIGRhdGFbaSpzdXJmRGF0YS53aWR0aCo0ICsgaSo0ICsgM11dKTsKICAgICAgICB9CiAgICAgIH0sam95c3RpY2tFdmVudFN0YXRlOjEsbGFzdEpveXN0aWNrU3RhdGU6e30sam95c3RpY2tOYW1lUG9vbDp7fSxyZWNvcmRKb3lzdGlja1N0YXRlOmZ1bmN0aW9uIChqb3lzdGljaywgc3RhdGUpIHsKICAgICAgICAvLyBTdGFuZGFyZGl6ZSBidXR0b24gc3RhdGUuCiAgICAgICAgdmFyIGJ1dHRvbnMgPSBuZXcgQXJyYXkoc3RhdGUuYnV0dG9ucy5sZW5ndGgpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUuYnV0dG9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYnV0dG9uc1tpXSA9IFNETC5nZXRKb3lzdGlja0J1dHRvblN0YXRlKHN0YXRlLmJ1dHRvbnNbaV0pOwogICAgICAgIH0KICAKICAgICAgICBTREwubGFzdEpveXN0aWNrU3RhdGVbam95c3RpY2tdID0gewogICAgICAgICAgYnV0dG9uczogYnV0dG9ucywKICAgICAgICAgIGF4ZXM6IHN0YXRlLmF4ZXMuc2xpY2UoMCksCiAgICAgICAgICB0aW1lc3RhbXA6IHN0YXRlLnRpbWVzdGFtcCwKICAgICAgICAgIGluZGV4OiBzdGF0ZS5pbmRleCwKICAgICAgICAgIGlkOiBzdGF0ZS5pZAogICAgICAgIH07CiAgICAgIH0sZ2V0Sm95c3RpY2tCdXR0b25TdGF0ZTpmdW5jdGlvbiAoYnV0dG9uKSB7CiAgICAgICAgaWYgKHR5cGVvZiBidXR0b24gPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvLyBDdXJyZW50IGdhbWVwYWQgQVBJIGVkaXRvcidzIGRyYWZ0IChGaXJlZm94IE5pZ2h0bHkpCiAgICAgICAgICAvLyBodHRwczovL2R2Y3MudzMub3JnL2hnL2dhbWVwYWQvcmF3LWZpbGUvZGVmYXVsdC9nYW1lcGFkLmh0bWwjaWRsLWRlZi1HYW1lcGFkQnV0dG9uCiAgICAgICAgICByZXR1cm4gYnV0dG9uWydwcmVzc2VkJ107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEN1cnJlbnQgZ2FtZXBhZCBBUEkgd29ya2luZyBkcmFmdCAoRmlyZWZveCAvIENocm9tZSBTdGFibGUpCiAgICAgICAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEyL1dELWdhbWVwYWQtMjAxMjA1MjkvI2dhbWVwYWQtaW50ZXJmYWNlCiAgICAgICAgICByZXR1cm4gYnV0dG9uID4gMDsKICAgICAgICB9CiAgICAgIH0scXVlcnlKb3lzdGlja3M6ZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGpveXN0aWNrIGluIFNETC5sYXN0Sm95c3RpY2tTdGF0ZSkgewogICAgICAgICAgdmFyIHN0YXRlID0gU0RMLmdldEdhbWVwYWQoam95c3RpY2sgLSAxKTsKICAgICAgICAgIHZhciBwcmV2U3RhdGUgPSBTREwubGFzdEpveXN0aWNrU3RhdGVbam95c3RpY2tdOwogICAgICAgICAgLy8gSWYgam95c3RpY2sgd2FzIHJlbW92ZWQsIHN0YXRlIHJldHVybnMgbnVsbC4KICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09ICd1bmRlZmluZWQnKSByZXR1cm47CiAgICAgICAgICAvLyBDaGVjayBvbmx5IGlmIHRoZSB0aW1lc3RhbXAgaGFzIGRpZmZlcmVkLgogICAgICAgICAgLy8gTk9URTogVGltZXN0YW1wIGlzIG5vdCBhdmFpbGFibGUgaW4gRmlyZWZveC4KICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGUudGltZXN0YW1wICE9PSAnbnVtYmVyJyB8fCBzdGF0ZS50aW1lc3RhbXAgIT09IHByZXZTdGF0ZS50aW1lc3RhbXApIHsKICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdGF0ZS5idXR0b25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIGJ1dHRvblN0YXRlID0gU0RMLmdldEpveXN0aWNrQnV0dG9uU3RhdGUoc3RhdGUuYnV0dG9uc1tpXSk7CiAgICAgICAgICAgICAgLy8gTk9URTogVGhlIHByZXZpb3VzIHN0YXRlIGFscmVhZHkgaGFzIGEgYm9vbGVhbiByZXByZXNlbnRhdGlvbiBvZgogICAgICAgICAgICAgIC8vICAgICAgIGl0cyBidXR0b24sIHNvIG5vIG5lZWQgdG8gc3RhbmRhcmRpemUgaXRzIGJ1dHRvbiBzdGF0ZSBoZXJlLgogICAgICAgICAgICAgIGlmIChidXR0b25TdGF0ZSAhPT0gcHJldlN0YXRlLmJ1dHRvbnNbaV0pIHsKICAgICAgICAgICAgICAgIC8vIEluc2VydCBidXR0b24tcHJlc3MgZXZlbnQuCiAgICAgICAgICAgICAgICBTREwuZXZlbnRzLnB1c2goewogICAgICAgICAgICAgICAgICB0eXBlOiBidXR0b25TdGF0ZSA/ICdqb3lzdGlja19idXR0b25fZG93bicgOiAnam95c3RpY2tfYnV0dG9uX3VwJywKICAgICAgICAgICAgICAgICAgam95c3RpY2s6IGpveXN0aWNrLAogICAgICAgICAgICAgICAgICBpbmRleDogam95c3RpY2sgLSAxLAogICAgICAgICAgICAgICAgICBidXR0b246IGkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RhdGUuYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChzdGF0ZS5heGVzW2ldICE9PSBwcmV2U3RhdGUuYXhlc1tpXSkgewogICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGF4ZXMtY2hhbmdlIGV2ZW50LgogICAgICAgICAgICAgICAgU0RMLmV2ZW50cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2pveXN0aWNrX2F4aXNfbW90aW9uJywKICAgICAgICAgICAgICAgICAgam95c3RpY2s6IGpveXN0aWNrLAogICAgICAgICAgICAgICAgICBpbmRleDogam95c3RpY2sgLSAxLAogICAgICAgICAgICAgICAgICBheGlzOiBpLAogICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUuYXhlc1tpXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgCiAgICAgICAgICAgIFNETC5yZWNvcmRKb3lzdGlja1N0YXRlKGpveXN0aWNrLCBzdGF0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LGpveXN0aWNrQXhpc1ZhbHVlQ29udmVyc2lvbjpmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAvLyBNYWtlIHN1cmUgdmFsdWUgaXMgcHJvcGVybHkgY2xhbXBlZAogICAgICAgIHZhbHVlID0gTWF0aC5taW4oMSwgTWF0aC5tYXgodmFsdWUsIC0xKSk7CiAgICAgICAgLy8gRW5zdXJlcyB0aGF0IDAgaXMgMCwgMSBpcyAzMjc2NywgYW5kIC0xIGlzIDMyNzY4LgogICAgICAgIHJldHVybiBNYXRoLmNlaWwoKCh2YWx1ZSsxKSAqIDMyNzY3LjUpIC0gMzI3NjgpOwogICAgICB9LGdldEdhbWVwYWRzOmZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZmNuID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzIHx8IG5hdmlnYXRvci53ZWJraXRHYW1lcGFkcyB8fCBuYXZpZ2F0b3IubW96R2FtZXBhZHMgfHwgbmF2aWdhdG9yLmdhbWVwYWRzIHx8IG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkczsKICAgICAgICBpZiAoZmNuICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIC8vIFRoZSBmdW5jdGlvbiBtdXN0IGJlIGFwcGxpZWQgb24gdGhlIG5hdmlnYXRvciBvYmplY3QuCiAgICAgICAgICByZXR1cm4gZmNuLmFwcGx5KG5hdmlnYXRvcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgIH0sZ2V0R2FtZXBhZDpmdW5jdGlvbiAoZGV2aWNlSW5kZXgpIHsKICAgICAgICB2YXIgZ2FtZXBhZHMgPSBTREwuZ2V0R2FtZXBhZHMoKTsKICAgICAgICBpZiAoZ2FtZXBhZHMubGVuZ3RoID4gZGV2aWNlSW5kZXggJiYgZGV2aWNlSW5kZXggPj0gMCkgewogICAgICAgICAgcmV0dXJuIGdhbWVwYWRzW2RldmljZUluZGV4XTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH19O2Z1bmN0aW9uIF9TRExfRmxpcChzdXJmKSB7CiAgICAgIC8vIFdlIGFjdHVhbGx5IGRvIHRoaXMgaW4gVW5sb2NrLCBzaW5jZSB0aGUgc2NyZWVuIHN1cmZhY2UgaGFzIGFzIGl0cyBjYW52YXMKICAgICAgLy8gYmFja2luZyB0aGUgcGFnZSBjYW52YXMgZWxlbWVudAogICAgfQoKICBmdW5jdGlvbiBfU0RMX0luaXQoaW5pdEZsYWdzKSB7CiAgICAgIFNETC5zdGFydFRpbWUgPSBEYXRlLm5vdygpOwogICAgICBTREwuaW5pdEZsYWdzID0gaW5pdEZsYWdzOwogIAogICAgICAvLyBjYXB0dXJlIGFsbCBrZXkgZXZlbnRzLiB3ZSBqdXN0IGtlZXAgZG93biBhbmQgdXAsIGJ1dCBhbHNvIGNhcHR1cmUgcHJlc3MgdG8gcHJldmVudCBkZWZhdWx0IGFjdGlvbnMKICAgICAgaWYgKCFNb2R1bGVbJ2RvTm90Q2FwdHVyZUtleWJvYXJkJ10pIHsKICAgICAgICB2YXIga2V5Ym9hcmRMaXN0ZW5pbmdFbGVtZW50ID0gTW9kdWxlWydrZXlib2FyZExpc3RlbmluZ0VsZW1lbnQnXSB8fCBkb2N1bWVudDsKICAgICAgICBrZXlib2FyZExpc3RlbmluZ0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIFNETC5yZWNlaXZlRXZlbnQpOwogICAgICAgIGtleWJvYXJkTGlzdGVuaW5nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIFNETC5yZWNlaXZlRXZlbnQpOwogICAgICAgIGtleWJvYXJkTGlzdGVuaW5nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsIFNETC5yZWNlaXZlRXZlbnQpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsIFNETC5yZWNlaXZlRXZlbnQpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwgU0RMLnJlY2VpdmVFdmVudCk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIFNETC5yZWNlaXZlRXZlbnQpOwogICAgICB9CiAgCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLCBTREwucmVjZWl2ZUV2ZW50KTsKICAgICAgU0RMLmtleWJvYXJkU3RhdGUgPSBfbWFsbG9jKDB4MTAwMDApOyAvLyBPdXIgU0RMIG5lZWRzIDUxMiwgYnV0IDY0SyBpcyBzYWZlIGZvciBvbGRlciBTRExzCiAgICAgIF9tZW1zZXQoU0RMLmtleWJvYXJkU3RhdGUsIDAsIDB4MTAwMDApOwogICAgICAvLyBJbml0aWFsaXplIHRoaXMgc3RydWN0dXJlIGNhcmVmdWxseSBmb3IgY2xvc3VyZQogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50WydrZXlkb3duJ10gICAgPSAweDMwMCAgLyogU0RMX0tFWURPV04gKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ2tleXVwJ10gICAgICA9IDB4MzAxICAvKiBTRExfS0VZVVAgKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ2tleXByZXNzJ10gICA9IDB4MzAzICAvKiBTRExfVEVYVElOUFVUICovOwogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50Wydtb3VzZWRvd24nXSAgPSAweDQwMSAgLyogU0RMX01PVVNFQlVUVE9ORE9XTiAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsnbW91c2V1cCddICAgID0gMHg0MDIgIC8qIFNETF9NT1VTRUJVVFRPTlVQICovOwogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50Wydtb3VzZW1vdmUnXSAgPSAweDQwMCAgLyogU0RMX01PVVNFTU9USU9OICovOwogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50Wyd3aGVlbCddICAgICAgPSAweDQwMyAgLyogU0RMX01PVVNFV0hFRUwgKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ3RvdWNoc3RhcnQnXSA9IDB4NzAwICAvKiBTRExfRklOR0VSRE9XTiAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsndG91Y2hlbmQnXSAgID0gMHg3MDEgIC8qIFNETF9GSU5HRVJVUCAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsndG91Y2htb3ZlJ10gID0gMHg3MDIgIC8qIFNETF9GSU5HRVJNT1RJT04gKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ3VubG9hZCddICAgICA9IDB4MTAwICAvKiBTRExfUVVJVCAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsncmVzaXplJ10gICAgID0gMHg3MDAxIC8qIFNETF9WSURFT1JFU0laRS9TRExfRVZFTlRfQ09NUEFUMiAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsndmlzaWJpbGl0eWNoYW5nZSddID0gMHgyMDAgLyogU0RMX1dJTkRPV0VWRU5UICovOwogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50Wydmb2N1cyddICAgICAgPSAweDIwMCAvKiBTRExfV0lORE9XRVZFTlQgKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ2JsdXInXSAgICAgICA9IDB4MjAwIC8qIFNETF9XSU5ET1dFVkVOVCAqLzsKICAKICAgICAgLy8gVGhlc2UgYXJlIG5vdCB0ZWNobmljYWxseSBET00gZXZlbnRzOyB0aGUgSFRNTCBnYW1lcGFkIEFQSSBpcyBwb2xsLWJhc2VkLgogICAgICAvLyBIb3dldmVyLCB3ZSBkZWZpbmUgdGhlbSBoZXJlLCBhcyB0aGUgcmVzdCBvZiB0aGUgU0RMIGNvZGUgYXNzdW1lcyB0aGF0CiAgICAgIC8vIGFsbCBTREwgZXZlbnRzIG9yaWdpbmF0ZSBhcyBET00gZXZlbnRzLgogICAgICBTREwuRE9NRXZlbnRUb1NETEV2ZW50Wydqb3lzdGlja19heGlzX21vdGlvbiddID0gMHg2MDAgLyogU0RMX0pPWUFYSVNNT1RJT04gKi87CiAgICAgIFNETC5ET01FdmVudFRvU0RMRXZlbnRbJ2pveXN0aWNrX2J1dHRvbl9kb3duJ10gPSAweDYwMyAvKiBTRExfSk9ZQlVUVE9ORE9XTiAqLzsKICAgICAgU0RMLkRPTUV2ZW50VG9TRExFdmVudFsnam95c3RpY2tfYnV0dG9uX3VwJ10gPSAweDYwNCAvKiBTRExfSk9ZQlVUVE9OVVAgKi87CiAgICAgIHJldHVybiAwOyAvLyBzdWNjZXNzCiAgICB9CgoKICAKICB2YXIgR0w9e2NvdW50ZXI6MSxsYXN0RXJyb3I6MCxidWZmZXJzOltdLG1hcHBlZEJ1ZmZlcnM6e30scHJvZ3JhbXM6W10sZnJhbWVidWZmZXJzOltdLHJlbmRlcmJ1ZmZlcnM6W10sdGV4dHVyZXM6W10sdW5pZm9ybXM6W10sc2hhZGVyczpbXSx2YW9zOltdLGNvbnRleHRzOltdLGN1cnJlbnRDb250ZXh0Om51bGwsb2Zmc2NyZWVuQ2FudmFzZXM6e30sdGltZXJRdWVyaWVzRVhUOltdLGJ5dGVTaXplQnlUeXBlUm9vdDo1MTIwLGJ5dGVTaXplQnlUeXBlOlsxLDEsMiwyLDQsNCw0LDIsMyw0LDhdLHByb2dyYW1JbmZvczp7fSxzdHJpbmdDYWNoZTp7fSx0ZW1wRml4ZWRMZW5ndGhBcnJheTpbXSxwYWNrQWxpZ25tZW50OjQsdW5wYWNrQWxpZ25tZW50OjQsaW5pdDpmdW5jdGlvbiAoKSB7CiAgICAgICAgR0wubWluaVRlbXBCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KEdMLk1JTklfVEVNUF9CVUZGRVJfU0laRSk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHTC5NSU5JX1RFTVBfQlVGRkVSX1NJWkU7IGkrKykgewogICAgICAgICAgR0wubWluaVRlbXBCdWZmZXJWaWV3c1tpXSA9IEdMLm1pbmlUZW1wQnVmZmVyLnN1YmFycmF5KDAsIGkrMSk7CiAgICAgICAgfQogIAogICAgICAgIC8vIEZvciBmdW5jdGlvbnMgc3VjaCBhcyBnbERyYXdCdWZmZXJzLCBnbEludmFsaWRhdGVGcmFtZWJ1ZmZlciBhbmQgZ2xJbnZhbGlkYXRlU3ViRnJhbWVidWZmZXIgdGhhdCBuZWVkIHRvIHBhc3MgYSBzaG9ydCBhcnJheSB0byB0aGUgV2ViR0wgQVBJLAogICAgICAgIC8vIGNyZWF0ZSBhIHNldCBvZiBzaG9ydCBmaXhlZC1sZW5ndGggYXJyYXlzIHRvIGF2b2lkIGhhdmluZyB0byBnZW5lcmF0ZSBhbnkgZ2FyYmFnZSB3aGVuIGNhbGxpbmcgdGhvc2UgZnVuY3Rpb25zLgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzI7IGkrKykgewogICAgICAgICAgR0wudGVtcEZpeGVkTGVuZ3RoQXJyYXkucHVzaChuZXcgQXJyYXkoaSkpOwogICAgICAgIH0KICAgICAgfSxyZWNvcmRFcnJvcjpmdW5jdGlvbiByZWNvcmRFcnJvcihlcnJvckNvZGUpIHsKICAgICAgICBpZiAoIUdMLmxhc3RFcnJvcikgewogICAgICAgICAgR0wubGFzdEVycm9yID0gZXJyb3JDb2RlOwogICAgICAgIH0KICAgICAgfSxnZXROZXdJZDpmdW5jdGlvbiAodGFibGUpIHsKICAgICAgICB2YXIgcmV0ID0gR0wuY291bnRlcisrOwogICAgICAgIGZvciAodmFyIGkgPSB0YWJsZS5sZW5ndGg7IGkgPCByZXQ7IGkrKykgewogICAgICAgICAgdGFibGVbaV0gPSBudWxsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogICAgICB9LE1JTklfVEVNUF9CVUZGRVJfU0laRToyNTYsbWluaVRlbXBCdWZmZXI6bnVsbCxtaW5pVGVtcEJ1ZmZlclZpZXdzOlswXSxnZXRTb3VyY2U6ZnVuY3Rpb24gKHNoYWRlciwgY291bnQsIHN0cmluZywgbGVuZ3RoKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9ICcnOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkgewogICAgICAgICAgdmFyIGZyYWc7CiAgICAgICAgICBpZiAobGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBsZW4gPSBIRUFQMzJbKCgobGVuZ3RoKSsoaSo0KSk+PjIpXTsKICAgICAgICAgICAgaWYgKGxlbiA8IDApIHsKICAgICAgICAgICAgICBmcmFnID0gUG9pbnRlcl9zdHJpbmdpZnkoSEVBUDMyWygoKHN0cmluZykrKGkqNCkpPj4yKV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZyYWcgPSBQb2ludGVyX3N0cmluZ2lmeShIRUFQMzJbKCgoc3RyaW5nKSsoaSo0KSk+PjIpXSwgbGVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZnJhZyA9IFBvaW50ZXJfc3RyaW5naWZ5KEhFQVAzMlsoKChzdHJpbmcpKyhpKjQpKT4+MildKTsKICAgICAgICAgIH0KICAgICAgICAgIHNvdXJjZSArPSBmcmFnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc291cmNlOwogICAgICB9LGNyZWF0ZUNvbnRleHQ6ZnVuY3Rpb24gKGNhbnZhcywgd2ViR0xDb250ZXh0QXR0cmlidXRlcykgewogICAgICAgIGlmICh0eXBlb2Ygd2ViR0xDb250ZXh0QXR0cmlidXRlc1snbWFqb3JWZXJzaW9uJ10gPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzWydtaW5vclZlcnNpb24nXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHdlYkdMQ29udGV4dEF0dHJpYnV0ZXNbJ21ham9yVmVyc2lvbiddID0gMTsKICAgICAgICAgIHdlYkdMQ29udGV4dEF0dHJpYnV0ZXNbJ21pbm9yVmVyc2lvbiddID0gMDsKICAgICAgICB9CiAgCiAgCiAgICAgICAgdmFyIGN0eDsKICAgICAgICB2YXIgZXJyb3JJbmZvID0gJz8nOwogICAgICAgIGZ1bmN0aW9uIG9uQ29udGV4dENyZWF0aW9uRXJyb3IoZXZlbnQpIHsKICAgICAgICAgIGVycm9ySW5mbyA9IGV2ZW50LnN0YXR1c01lc3NhZ2UgfHwgZXJyb3JJbmZvOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dGNyZWF0aW9uZXJyb3InLCBvbkNvbnRleHRDcmVhdGlvbkVycm9yLCBmYWxzZSk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAod2ViR0xDb250ZXh0QXR0cmlidXRlc1snbWFqb3JWZXJzaW9uJ10gPT0gMSAmJiB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzWydtaW5vclZlcnNpb24nXSA9PSAwKSB7CiAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIndlYmdsIiwgd2ViR0xDb250ZXh0QXR0cmlidXRlcykgfHwgY2FudmFzLmdldENvbnRleHQoImV4cGVyaW1lbnRhbC13ZWJnbCIsIHdlYkdMQ29udGV4dEF0dHJpYnV0ZXMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHdlYkdMQ29udGV4dEF0dHJpYnV0ZXNbJ21ham9yVmVyc2lvbiddID09IDIgJiYgd2ViR0xDb250ZXh0QXR0cmlidXRlc1snbWlub3JWZXJzaW9uJ10gPT0gMCkgewogICAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbDIiLCB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aHJvdyAnVW5zdXBwb3J0ZWQgV2ViR0wgY29udGV4dCB2ZXJzaW9uICcgKyBtYWpvclZlcnNpb24gKyAnLicgKyBtaW5vclZlcnNpb24gKyAnIScKICAgICAgICAgICAgfQogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dGNyZWF0aW9uZXJyb3InLCBvbkNvbnRleHRDcmVhdGlvbkVycm9yLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWN0eCkgdGhyb3cgJzooJzsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBNb2R1bGUucHJpbnQoJ0NvdWxkIG5vdCBjcmVhdGUgY2FudmFzOiAnICsgW2Vycm9ySW5mbywgZSwgSlNPTi5zdHJpbmdpZnkod2ViR0xDb250ZXh0QXR0cmlidXRlcyldKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAKICAgICAgICBpZiAoIWN0eCkgcmV0dXJuIDA7CiAgICAgICAgdmFyIGNvbnRleHQgPSBHTC5yZWdpc3RlckNvbnRleHQoY3R4LCB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKTsKICAgICAgICByZXR1cm4gY29udGV4dDsKICAgICAgfSxyZWdpc3RlckNvbnRleHQ6ZnVuY3Rpb24gKGN0eCwgd2ViR0xDb250ZXh0QXR0cmlidXRlcykgewogICAgICAgIHZhciBoYW5kbGUgPSBHTC5nZXROZXdJZChHTC5jb250ZXh0cyk7CiAgICAgICAgdmFyIGNvbnRleHQgPSB7CiAgICAgICAgICBoYW5kbGU6IGhhbmRsZSwKICAgICAgICAgIGF0dHJpYnV0ZXM6IHdlYkdMQ29udGV4dEF0dHJpYnV0ZXMsCiAgICAgICAgICB2ZXJzaW9uOiB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzWydtYWpvclZlcnNpb24nXSwKICAgICAgICAgIEdMY3R4OiBjdHgKICAgICAgICB9OwogIAogIAogICAgICAgIC8vIFN0b3JlIHRoZSBjcmVhdGVkIGNvbnRleHQgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGFjY2VzcyB0aGUgY29udGV4dCBnaXZlbiBhIGNhbnZhcyB3aXRob3V0IGhhdmluZyB0byBwYXNzIHRoZSBwYXJhbWV0ZXJzIGFnYWluLgogICAgICAgIGlmIChjdHguY2FudmFzKSBjdHguY2FudmFzLkdMY3R4T2JqZWN0ID0gY29udGV4dDsKICAgICAgICBHTC5jb250ZXh0c1toYW5kbGVdID0gY29udGV4dDsKICAgICAgICBpZiAodHlwZW9mIHdlYkdMQ29udGV4dEF0dHJpYnV0ZXNbJ2VuYWJsZUV4dGVuc2lvbnNCeURlZmF1bHQnXSA9PT0gJ3VuZGVmaW5lZCcgfHwgd2ViR0xDb250ZXh0QXR0cmlidXRlc1snZW5hYmxlRXh0ZW5zaW9uc0J5RGVmYXVsdCddKSB7CiAgICAgICAgICBHTC5pbml0RXh0ZW5zaW9ucyhjb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhbmRsZTsKICAgICAgfSxtYWtlQ29udGV4dEN1cnJlbnQ6ZnVuY3Rpb24gKGNvbnRleHRIYW5kbGUpIHsKICAgICAgICB2YXIgY29udGV4dCA9IEdMLmNvbnRleHRzW2NvbnRleHRIYW5kbGVdOwogICAgICAgIGlmICghY29udGV4dCkgcmV0dXJuIGZhbHNlOwogICAgICAgIEdMY3R4ID0gTW9kdWxlLmN0eCA9IGNvbnRleHQuR0xjdHg7IC8vIEFjdGl2ZSBXZWJHTCBjb250ZXh0IG9iamVjdC4KICAgICAgICBHTC5jdXJyZW50Q29udGV4dCA9IGNvbnRleHQ7IC8vIEFjdGl2ZSBFbXNjcmlwdGVuIEdMIGxheWVyIGNvbnRleHQgb2JqZWN0LgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9LGdldENvbnRleHQ6ZnVuY3Rpb24gKGNvbnRleHRIYW5kbGUpIHsKICAgICAgICByZXR1cm4gR0wuY29udGV4dHNbY29udGV4dEhhbmRsZV07CiAgICAgIH0sZGVsZXRlQ29udGV4dDpmdW5jdGlvbiAoY29udGV4dEhhbmRsZSkgewogICAgICAgIGlmIChHTC5jdXJyZW50Q29udGV4dCA9PT0gR0wuY29udGV4dHNbY29udGV4dEhhbmRsZV0pIEdMLmN1cnJlbnRDb250ZXh0ID0gbnVsbDsKICAgICAgICBpZiAodHlwZW9mIEpTRXZlbnRzID09PSAnb2JqZWN0JykgSlNFdmVudHMucmVtb3ZlQWxsSGFuZGxlcnNPblRhcmdldChHTC5jb250ZXh0c1tjb250ZXh0SGFuZGxlXS5HTGN0eC5jYW52YXMpOyAvLyBSZWxlYXNlIGFsbCBKUyBldmVudCBoYW5kbGVycyBvbiB0aGUgRE9NIGVsZW1lbnQgdGhhdCB0aGUgR0wgY29udGV4dCBpcyBhc3NvY2lhdGVkIHdpdGggc2luY2UgdGhlIGNvbnRleHQgaXMgbm93IGRlbGV0ZWQuCiAgICAgICAgaWYgKEdMLmNvbnRleHRzW2NvbnRleHRIYW5kbGVdICYmIEdMLmNvbnRleHRzW2NvbnRleHRIYW5kbGVdLkdMY3R4LmNhbnZhcykgR0wuY29udGV4dHNbY29udGV4dEhhbmRsZV0uR0xjdHguY2FudmFzLkdMY3R4T2JqZWN0ID0gdW5kZWZpbmVkOyAvLyBNYWtlIHN1cmUgdGhlIGNhbnZhcyBvYmplY3Qgbm8gbG9uZ2VyIHJlZmVycyB0byB0aGUgY29udGV4dCBvYmplY3Qgc28gdGhlcmUgYXJlIG5vIEdDIHN1cnByaXNlcy4KICAgICAgICBHTC5jb250ZXh0c1tjb250ZXh0SGFuZGxlXSA9IG51bGw7CiAgICAgIH0saW5pdEV4dGVuc2lvbnM6ZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgICAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRob3V0IGEgc3BlY2lmaWMgY29udGV4dCBvYmplY3QsIGluaXQgdGhlIGV4dGVuc2lvbnMgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgY29udGV4dC4KICAgICAgICBpZiAoIWNvbnRleHQpIGNvbnRleHQgPSBHTC5jdXJyZW50Q29udGV4dDsKICAKICAgICAgICBpZiAoY29udGV4dC5pbml0RXh0ZW5zaW9uc0RvbmUpIHJldHVybjsKICAgICAgICBjb250ZXh0LmluaXRFeHRlbnNpb25zRG9uZSA9IHRydWU7CiAgCiAgICAgICAgdmFyIEdMY3R4ID0gY29udGV4dC5HTGN0eDsKICAKICAgICAgICBjb250ZXh0Lm1heFZlcnRleEF0dHJpYnMgPSBHTGN0eC5nZXRQYXJhbWV0ZXIoR0xjdHguTUFYX1ZFUlRFWF9BVFRSSUJTKTsKICAKICAgICAgICAvLyBEZXRlY3QgdGhlIHByZXNlbmNlIG9mIGEgZmV3IGV4dGVuc2lvbnMgbWFudWFsbHksIHRoaXMgR0wgaW50ZXJvcCBsYXllciBpdHNlbGYgd2lsbCBuZWVkIHRvIGtub3cgaWYgdGhleSBleGlzdC4KICAKICAgICAgICBpZiAoY29udGV4dC52ZXJzaW9uIDwgMikgewogICAgICAgICAgLy8gRXh0ZW5zaW9uIGF2YWlsYWJsZSBmcm9tIEZpcmVmb3ggMjYgYW5kIEdvb2dsZSBDaHJvbWUgMzAKICAgICAgICAgIHZhciBpbnN0YW5jZWRBcnJheXNFeHQgPSBHTGN0eC5nZXRFeHRlbnNpb24oJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTsKICAgICAgICAgIGlmIChpbnN0YW5jZWRBcnJheXNFeHQpIHsKICAgICAgICAgICAgR0xjdHhbJ3ZlcnRleEF0dHJpYkRpdmlzb3InXSA9IGZ1bmN0aW9uKGluZGV4LCBkaXZpc29yKSB7IGluc3RhbmNlZEFycmF5c0V4dFsndmVydGV4QXR0cmliRGl2aXNvckFOR0xFJ10oaW5kZXgsIGRpdmlzb3IpOyB9OwogICAgICAgICAgICBHTGN0eFsnZHJhd0FycmF5c0luc3RhbmNlZCddID0gZnVuY3Rpb24obW9kZSwgZmlyc3QsIGNvdW50LCBwcmltY291bnQpIHsgaW5zdGFuY2VkQXJyYXlzRXh0WydkcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUnXShtb2RlLCBmaXJzdCwgY291bnQsIHByaW1jb3VudCk7IH07CiAgICAgICAgICAgIEdMY3R4WydkcmF3RWxlbWVudHNJbnN0YW5jZWQnXSA9IGZ1bmN0aW9uKG1vZGUsIGNvdW50LCB0eXBlLCBpbmRpY2VzLCBwcmltY291bnQpIHsgaW5zdGFuY2VkQXJyYXlzRXh0WydkcmF3RWxlbWVudHNJbnN0YW5jZWRBTkdMRSddKG1vZGUsIGNvdW50LCB0eXBlLCBpbmRpY2VzLCBwcmltY291bnQpOyB9OwogICAgICAgICAgfQogIAogICAgICAgICAgLy8gRXh0ZW5zaW9uIGF2YWlsYWJsZSBmcm9tIEZpcmVmb3ggMjUgYW5kIFdlYktpdAogICAgICAgICAgdmFyIHZhb0V4dCA9IEdMY3R4LmdldEV4dGVuc2lvbignT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKTsKICAgICAgICAgIGlmICh2YW9FeHQpIHsKICAgICAgICAgICAgR0xjdHhbJ2NyZWF0ZVZlcnRleEFycmF5J10gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHZhb0V4dFsnY3JlYXRlVmVydGV4QXJyYXlPRVMnXSgpOyB9OwogICAgICAgICAgICBHTGN0eFsnZGVsZXRlVmVydGV4QXJyYXknXSA9IGZ1bmN0aW9uKHZhbykgeyB2YW9FeHRbJ2RlbGV0ZVZlcnRleEFycmF5T0VTJ10odmFvKTsgfTsKICAgICAgICAgICAgR0xjdHhbJ2JpbmRWZXJ0ZXhBcnJheSddID0gZnVuY3Rpb24odmFvKSB7IHZhb0V4dFsnYmluZFZlcnRleEFycmF5T0VTJ10odmFvKTsgfTsKICAgICAgICAgICAgR0xjdHhbJ2lzVmVydGV4QXJyYXknXSA9IGZ1bmN0aW9uKHZhbykgeyByZXR1cm4gdmFvRXh0Wydpc1ZlcnRleEFycmF5T0VTJ10odmFvKTsgfTsKICAgICAgICAgIH0KICAKICAgICAgICAgIHZhciBkcmF3QnVmZmVyc0V4dCA9IEdMY3R4LmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyk7CiAgICAgICAgICBpZiAoZHJhd0J1ZmZlcnNFeHQpIHsKICAgICAgICAgICAgR0xjdHhbJ2RyYXdCdWZmZXJzJ10gPSBmdW5jdGlvbihuLCBidWZzKSB7IGRyYXdCdWZmZXJzRXh0WydkcmF3QnVmZmVyc1dFQkdMJ10obiwgYnVmcyk7IH07CiAgICAgICAgICB9CiAgICAgICAgfQogIAogICAgICAgIEdMY3R4LmRpc2pvaW50VGltZXJRdWVyeUV4dCA9IEdMY3R4LmdldEV4dGVuc2lvbigiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5Iik7CiAgCiAgICAgICAgLy8gVGhlc2UgYXJlIHRoZSAnc2FmZScgZmVhdHVyZS1lbmFibGluZyBleHRlbnNpb25zIHRoYXQgZG9uJ3QgYWRkIGFueSBwZXJmb3JtYW5jZSBpbXBhY3QgcmVsYXRlZCB0byBlLmcuIGRlYnVnZ2luZywgYW5kCiAgICAgICAgLy8gc2hvdWxkIGJlIGVuYWJsZWQgYnkgZGVmYXVsdCBzbyB0aGF0IGNsaWVudCBHTEVTMi9HTCBjb2RlIHdpbGwgbm90IG5lZWQgdG8gZ28gdGhyb3VnaCBleHRyYSBob29wcyB0byBnZXQgaXRzIHN0dWZmIHdvcmtpbmcuCiAgICAgICAgLy8gQXMgbmV3IGV4dGVuc2lvbnMgYXJlIHJhdGlmaWVkIGF0IGh0dHA6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvZXh0ZW5zaW9ucy8gLCBmZWVsIGZyZWUgdG8gYWRkIHlvdXIgbmV3IGV4dGVuc2lvbnMKICAgICAgICAvLyBoZXJlLCBhcyBsb25nIGFzIHRoZXkgZG9uJ3QgcHJvZHVjZSBhIHBlcmZvcm1hbmNlIGltcGFjdCBmb3IgdXNlcnMgdGhhdCBtaWdodCBub3QgYmUgdXNpbmcgdGhvc2UgZXh0ZW5zaW9ucy4KICAgICAgICAvLyBFLmcuIGRlYnVnZ2luZy1yZWxhdGVkIGV4dGVuc2lvbnMgc2hvdWxkIHByb2JhYmx5IGJlIG9mZiBieSBkZWZhdWx0LgogICAgICAgIHZhciBhdXRvbWF0aWNhbGx5RW5hYmxlZEV4dGVuc2lvbnMgPSBbICJPRVNfdGV4dHVyZV9mbG9hdCIsICJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0IiwgIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0IiwgIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjIiwgIldFQkdMX2RlcHRoX3RleHR1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJPRVNfZWxlbWVudF9pbmRleF91aW50IiwgIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyIsICJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyIiwgIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyIiwgIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hdGMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjIiwgIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCIsICJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQiLCAiRVhUX2ZyYWdfZGVwdGgiLCAiRVhUX3NSR0IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJXRUJHTF9kcmF3X2J1ZmZlcnMiLCAiV0VCR0xfc2hhcmVkX3Jlc291cmNlcyIsICJFWFRfc2hhZGVyX3RleHR1cmVfbG9kIiwgIkVYVF9jb2xvcl9idWZmZXJfZmxvYXQiXTsKICAKICAgICAgICBmdW5jdGlvbiBzaG91bGRFbmFibGVBdXRvbWF0aWNhbGx5KGV4dGVuc2lvbikgewogICAgICAgICAgdmFyIHJldCA9IGZhbHNlOwogICAgICAgICAgYXV0b21hdGljYWxseUVuYWJsZWRFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oaW5jbHVkZSkgewogICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmluZGV4T2YoaW5jbHVkZSkgIT0gLTEpIHsKICAgICAgICAgICAgICByZXQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQogIAogICAgICAgIHZhciBleHRzID0gR0xjdHguZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucygpOwogICAgICAgIGlmIChleHRzICYmIGV4dHMubGVuZ3RoID4gMCkgewogICAgICAgICAgR0xjdHguZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucygpLmZvckVhY2goZnVuY3Rpb24oZXh0KSB7CiAgICAgICAgICAgIGlmIChhdXRvbWF0aWNhbGx5RW5hYmxlZEV4dGVuc2lvbnMuaW5kZXhPZihleHQpICE9IC0xKSB7CiAgICAgICAgICAgICAgR0xjdHguZ2V0RXh0ZW5zaW9uKGV4dCk7IC8vIENhbGxpbmcgLmdldEV4dGVuc2lvbiBlbmFibGVzIHRoYXQgZXh0ZW5zaW9uIHBlcm1hbmVudGx5LCBubyBuZWVkIHRvIHN0b3JlIHRoZSByZXR1cm4gdmFsdWUgdG8gYmUgZW5hYmxlZC4KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LHBvcHVsYXRlVW5pZm9ybVRhYmxlOmZ1bmN0aW9uIChwcm9ncmFtKSB7CiAgICAgICAgdmFyIHAgPSBHTC5wcm9ncmFtc1twcm9ncmFtXTsKICAgICAgICBHTC5wcm9ncmFtSW5mb3NbcHJvZ3JhbV0gPSB7CiAgICAgICAgICB1bmlmb3Jtczoge30sCiAgICAgICAgICBtYXhVbmlmb3JtTGVuZ3RoOiAwLCAvLyBUaGlzIGlzIGVhZ2VybHkgY29tcHV0ZWQgYmVsb3csIHNpbmNlIHdlIGFscmVhZHkgZW51bWVyYXRlIGFsbCB1bmlmb3JtcyBhbnl3YXkuCiAgICAgICAgICBtYXhBdHRyaWJ1dGVMZW5ndGg6IC0xLCAvLyBUaGlzIGlzIGxhemlseSBjb21wdXRlZCBhbmQgY2FjaGVkLCBjb21wdXRlZCB3aGVuL2lmIGZpcnN0IGFza2VkLCAiLTEiIG1lYW5pbmcgbm90IGNvbXB1dGVkIHlldC4KICAgICAgICAgIG1heFVuaWZvcm1CbG9ja05hbWVMZW5ndGg6IC0xIC8vIExhemlseSBjb21wdXRlZCBhcyB3ZWxsCiAgICAgICAgfTsKICAKICAgICAgICB2YXIgcHRhYmxlID0gR0wucHJvZ3JhbUluZm9zW3Byb2dyYW1dOwogICAgICAgIHZhciB1dGFibGUgPSBwdGFibGUudW5pZm9ybXM7CiAgICAgICAgLy8gQSBwcm9ncmFtJ3MgdW5pZm9ybSB0YWJsZSBtYXBzIHRoZSBzdHJpbmcgbmFtZSBvZiBhbiB1bmlmb3JtIHRvIGFuIGludGVnZXIgbG9jYXRpb24gb2YgdGhhdCB1bmlmb3JtLgogICAgICAgIC8vIFRoZSBnbG9iYWwgR0wudW5pZm9ybXMgbWFwIG1hcHMgaW50ZWdlciBsb2NhdGlvbnMgdG8gV2ViR0xVbmlmb3JtTG9jYXRpb25zLgogICAgICAgIHZhciBudW1Vbmlmb3JtcyA9IEdMY3R4LmdldFByb2dyYW1QYXJhbWV0ZXIocCwgR0xjdHguQUNUSVZFX1VOSUZPUk1TKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVVuaWZvcm1zOyArK2kpIHsKICAgICAgICAgIHZhciB1ID0gR0xjdHguZ2V0QWN0aXZlVW5pZm9ybShwLCBpKTsKICAKICAgICAgICAgIHZhciBuYW1lID0gdS5uYW1lOwogICAgICAgICAgcHRhYmxlLm1heFVuaWZvcm1MZW5ndGggPSBNYXRoLm1heChwdGFibGUubWF4VW5pZm9ybUxlbmd0aCwgbmFtZS5sZW5ndGgrMSk7CiAgCiAgICAgICAgICAvLyBTdHJpcCBvZmYgYW55IHRyYWlsaW5nIGFycmF5IHNwZWNpZmllciB3ZSBtaWdodCBoYXZlIGdvdCwgZS5nLiAiWzBdIi4KICAgICAgICAgIGlmIChuYW1lLmluZGV4T2YoJ10nLCBuYW1lLmxlbmd0aC0xKSAhPT0gLTEpIHsKICAgICAgICAgICAgdmFyIGxzID0gbmFtZS5sYXN0SW5kZXhPZignWycpOwogICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBscyk7CiAgICAgICAgICB9CiAgCiAgICAgICAgICAvLyBPcHRpbWl6ZSBtZW1vcnkgdXNhZ2Ugc2xpZ2h0bHk6IElmIHdlIGhhdmUgYW4gYXJyYXkgb2YgdW5pZm9ybXMsIGUuZy4gJ3ZlYzMgY29sb3JzWzNdOycsIHRoZW4KICAgICAgICAgIC8vIG9ubHkgc3RvcmUgdGhlIHN0cmluZyAnY29sb3JzJyBpbiB1dGFibGUsIGFuZCAnY29sb3JzWzBdJywgJ2NvbG9yc1sxXScgYW5kICdjb2xvcnNbMl0nIHdpbGwgYmUgcGFyc2VkIGFzICdjb2xvcnMnK2kuCiAgICAgICAgICAvLyBOb3RlIHRoYXQgZm9yIHRoZSBHTC51bmlmb3JtcyB0YWJsZSwgd2Ugc3RpbGwgbmVlZCB0byBmZXRjaCB0aGUgYWxsIFdlYkdMVW5pZm9ybUxvY2F0aW9ucyBmb3IgYWxsIHRoZSBpbmRpY2VzLgogICAgICAgICAgdmFyIGxvYyA9IEdMY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwLCBuYW1lKTsKICAgICAgICAgIGlmIChsb2MgIT0gbnVsbCkKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIGlkID0gR0wuZ2V0TmV3SWQoR0wudW5pZm9ybXMpOwogICAgICAgICAgICB1dGFibGVbbmFtZV0gPSBbdS5zaXplLCBpZF07CiAgICAgICAgICAgIEdMLnVuaWZvcm1zW2lkXSA9IGxvYzsKICAKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCB1LnNpemU7ICsraikgewogICAgICAgICAgICAgIHZhciBuID0gbmFtZSArICdbJytqKyddJzsKICAgICAgICAgICAgICBsb2MgPSBHTGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocCwgbik7CiAgICAgICAgICAgICAgaWQgPSBHTC5nZXROZXdJZChHTC51bmlmb3Jtcyk7CiAgCiAgICAgICAgICAgICAgR0wudW5pZm9ybXNbaWRdID0gbG9jOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9fTtmdW5jdGlvbiBfU0RMX1NldFZpZGVvTW9kZSh3aWR0aCwgaGVpZ2h0LCBkZXB0aCwgZmxhZ3MpIHsKICAgICAgWyd0b3VjaHN0YXJ0JywgJ3RvdWNoZW5kJywgJ3RvdWNobW92ZScsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW1vdmUnLCAnRE9NTW91c2VTY3JvbGwnLCAnbW91c2V3aGVlbCcsICd3aGVlbCcsICdtb3VzZW91dCddLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBNb2R1bGVbJ2NhbnZhcyddLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIFNETC5yZWNlaXZlRXZlbnQsIHRydWUpOwogICAgICB9KTsKICAKICAgICAgdmFyIGNhbnZhcyA9IE1vZHVsZVsnY2FudmFzJ107CiAgCiAgICAgIC8vICgwLDApIG1lYW5zICd1c2UgZnVsbHNjcmVlbicgaW4gbmF0aXZlOyBpbiBFbXNjcmlwdGVuLCB1c2UgdGhlIGN1cnJlbnQgY2FudmFzIHNpemUuCiAgICAgIGlmICh3aWR0aCA9PSAwICYmIGhlaWdodCA9PSAwKSB7CiAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGg7CiAgICAgICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodDsKICAgICAgfQogIAogICAgICBpZiAoIVNETC5hZGRlZFJlc2l6ZUxpc3RlbmVyKSB7CiAgICAgICAgU0RMLmFkZGVkUmVzaXplTGlzdGVuZXIgPSB0cnVlOwogICAgICAgIEJyb3dzZXIucmVzaXplTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24odywgaCkgewogICAgICAgICAgaWYgKCFTREwuc2V0dGluZ1ZpZGVvTW9kZSkgewogICAgICAgICAgICBTREwucmVjZWl2ZUV2ZW50KHsKICAgICAgICAgICAgICB0eXBlOiAncmVzaXplJywKICAgICAgICAgICAgICB3OiB3LAogICAgICAgICAgICAgIGg6IGgKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAKICAgICAgaWYgKHdpZHRoICE9PSBjYW52YXMud2lkdGggfHwgaGVpZ2h0ICE9PSBjYW52YXMuaGVpZ2h0KSB7CiAgICAgICAgU0RMLnNldHRpbmdWaWRlb01vZGUgPSB0cnVlOyAvLyBTZXRWaWRlb01vZGUgaXRzZWxmIHNob3VsZCBub3QgdHJpZ2dlciByZXNpemUgZXZlbnRzCiAgICAgICAgQnJvd3Nlci5zZXRDYW52YXNTaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICAgIFNETC5zZXR0aW5nVmlkZW9Nb2RlID0gZmFsc2U7CiAgICAgIH0KICAKICAgICAgLy8gRnJlZSB0aGUgb2xkIHN1cmZhY2UgZmlyc3QgaWYgdGhlcmUgaXMgb25lCiAgICAgIGlmIChTREwuc2NyZWVuKSB7CiAgICAgICAgU0RMLmZyZWVTdXJmYWNlKFNETC5zY3JlZW4pOwogICAgICAgIGFzc2VydCghU0RMLnNjcmVlbik7CiAgICAgIH0KICAKICAgICAgaWYgKFNETC5HTCkgZmxhZ3MgPSBmbGFncyB8IDB4MDQwMDAwMDA7IC8vIFNETF9PUEVOR0wgLSBpZiB3ZSBhcmUgdXNpbmcgR0wsIHRoZW4gbGF0ZXIgY2FsbHMgdG8gU2V0VmlkZW9Nb2RlIG1heSBub3QgbWVudGlvbiBHTCwgYnV0IHdlIGRvIG5lZWQgaXQuIE9uY2UgaW4gR0wgbW9kZSwgd2UgbmV2ZXIgbGVhdmUgaXQuCiAgCiAgICAgIFNETC5zY3JlZW4gPSBTREwubWFrZVN1cmZhY2Uod2lkdGgsIGhlaWdodCwgZmxhZ3MsIHRydWUsICdzY3JlZW4nKTsKICAKICAgICAgcmV0dXJuIFNETC5zY3JlZW47CiAgICB9CgogIGZ1bmN0aW9uIF9TRExfVW5sb2NrU3VyZmFjZShzdXJmKSB7CiAgICAgIGFzc2VydCghU0RMLkdMKTsgLy8gaW4gR0wgbW9kZSB3ZSBkbyBub3Qga2VlcCBhcm91bmQgMkQgY2FudmFzZXMgYW5kIGNvbnRleHRzCiAgCiAgICAgIHZhciBzdXJmRGF0YSA9IFNETC5zdXJmYWNlc1tzdXJmXTsKICAKICAgICAgaWYgKCFzdXJmRGF0YS5sb2NrZWQgfHwgLS1zdXJmRGF0YS5sb2NrZWQgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgCiAgICAgIC8vIENvcHkgcGl4ZWwgZGF0YSB0byBpbWFnZQogICAgICBpZiAoc3VyZkRhdGEuaXNGbGFnU2V0KDB4MDAyMDAwMDAgLyogU0RMX0hXUEFMRVRURSAqLykpIHsKICAgICAgICBTREwuY29weUluZGV4ZWRDb2xvckRhdGEoc3VyZkRhdGEpOwogICAgICB9IGVsc2UgaWYgKCFzdXJmRGF0YS5jb2xvcnMpIHsKICAgICAgICB2YXIgZGF0YSA9IHN1cmZEYXRhLmltYWdlLmRhdGE7CiAgICAgICAgdmFyIGJ1ZmZlciA9IHN1cmZEYXRhLmJ1ZmZlcjsKICAgICAgICBhc3NlcnQoYnVmZmVyICUgNCA9PSAwLCAnSW52YWxpZCBidWZmZXIgb2Zmc2V0OiAnICsgYnVmZmVyKTsKICAgICAgICB2YXIgc3JjID0gYnVmZmVyID4+IDI7CiAgICAgICAgdmFyIGRzdCA9IDA7CiAgICAgICAgdmFyIGlzU2NyZWVuID0gc3VyZiA9PSBTREwuc2NyZWVuOwogICAgICAgIHZhciBudW07CiAgICAgICAgaWYgKHR5cGVvZiBDYW52YXNQaXhlbEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhIGluc3RhbmNlb2YgQ2FudmFzUGl4ZWxBcnJheSkgewogICAgICAgICAgLy8gSUUxMC9JRTExOiBJbWFnZURhdGEgb2JqZWN0cyBhcmUgYmFja2VkIGJ5IHRoZSBkZXByZWNhdGVkIENhbnZhc1BpeGVsQXJyYXksCiAgICAgICAgICAvLyBub3QgVUludDhDbGFtcGVkQXJyYXkuIFRoZXNlIGRvbid0IGhhdmUgYnVmZmVycywgc28gd2UgbmVlZCB0byByZXZlcnQKICAgICAgICAgIC8vIHRvIGNvcHlpbmcgYSBieXRlIGF0IGEgdGltZS4gV2UgZG8gdGhlIHVuZGVmaW5lZCBjaGVjayBiZWNhdXNlIG1vZGVybgogICAgICAgICAgLy8gYnJvd3NlcnMgZG8gbm90IGRlZmluZSBDYW52YXNQaXhlbEFycmF5IGFueW1vcmUuCiAgICAgICAgICBudW0gPSBkYXRhLmxlbmd0aDsKICAgICAgICAgIHdoaWxlIChkc3QgPCBudW0pIHsKICAgICAgICAgICAgdmFyIHZhbCA9IEhFQVAzMltzcmNdOyAvLyBUaGlzIGlzIG9wdGltaXplZC4gSW5zdGVhZCwgd2UgY291bGQgZG8gSEVBUDMyWygoKGJ1ZmZlcikrKGRzdCkpPj4yKV07CiAgICAgICAgICAgIGRhdGFbZHN0ICBdID0gdmFsICYgMHhmZjsKICAgICAgICAgICAgZGF0YVtkc3QrMV0gPSAodmFsID4+IDgpICYgMHhmZjsKICAgICAgICAgICAgZGF0YVtkc3QrMl0gPSAodmFsID4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICAgIGRhdGFbZHN0KzNdID0gaXNTY3JlZW4gPyAweGZmIDogKCh2YWwgPj4gMjQpICYgMHhmZik7CiAgICAgICAgICAgIHNyYysrOwogICAgICAgICAgICBkc3QgKz0gNDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGRhdGEzMiA9IG5ldyBVaW50MzJBcnJheShkYXRhLmJ1ZmZlcik7CiAgICAgICAgICBpZiAoaXNTY3JlZW4gJiYgU0RMLmRlZmF1bHRzLm9wYXF1ZUZyb250QnVmZmVyKSB7CiAgICAgICAgICAgIG51bSA9IGRhdGEzMi5sZW5ndGg7CiAgICAgICAgICAgIC8vIGxvZ2ljYWxseSB3ZSBuZWVkIHRvIGRvCiAgICAgICAgICAgIC8vICAgICAgd2hpbGUgKGRzdCA8IG51bSkgewogICAgICAgICAgICAvLyAgICAgICAgICBkYXRhMzJbZHN0KytdID0gSEVBUDMyW3NyYysrXSB8IDB4ZmYwMDAwMDAKICAgICAgICAgICAgLy8gICAgICB9CiAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBmYXN0ZXIgdGhvdWdoLCBiZWNhdXNlCiAgICAgICAgICAgIC8vIC5zZXQoKSBpcyBhbG1vc3QgZnJlZSAtIGVhc2lseSAxMHggZmFzdGVyIGR1ZSB0bwogICAgICAgICAgICAvLyBuYXRpdmUgbWVtY3B5IGVmZmljaWVuY2llcywgYW5kIHRoZSByZW1haW5pbmcgbG9vcAogICAgICAgICAgICAvLyBqdXN0IHN0b3Jlcywgbm90IGxvYWQgKyBzdG9yZSwgc28gaXQgaXMgZmFzdGVyCiAgICAgICAgICAgIGRhdGEzMi5zZXQoSEVBUDMyLnN1YmFycmF5KHNyYywgc3JjICsgbnVtKSk7CiAgICAgICAgICAgIHZhciBkYXRhOCA9IG5ldyBVaW50OEFycmF5KGRhdGEuYnVmZmVyKTsKICAgICAgICAgICAgdmFyIGkgPSAzOwogICAgICAgICAgICB2YXIgaiA9IGkgKyA0Km51bTsKICAgICAgICAgICAgaWYgKG51bSAlIDggPT0gMCkgewogICAgICAgICAgICAgIC8vIHVucm9sbGluZyBnaXZlcyBiaWcgc3BlZWR1cHMKICAgICAgICAgICAgICB3aGlsZSAoaSA8IGopIHsKICAgICAgICAgICAgICAgIGRhdGE4W2ldID0gMHhmZjsKICAgICAgICAgICAgICAgIGkgPSBpICsgNCB8IDA7CiAgICAgICAgICAgICAgICBkYXRhOFtpXSA9IDB4ZmY7CiAgICAgICAgICAgICAgICBpID0gaSArIDQgfCAwOwogICAgICAgICAgICAgICAgZGF0YThbaV0gPSAweGZmOwogICAgICAgICAgICAgICAgaSA9IGkgKyA0IHwgMDsKICAgICAgICAgICAgICAgIGRhdGE4W2ldID0gMHhmZjsKICAgICAgICAgICAgICAgIGkgPSBpICsgNCB8IDA7CiAgICAgICAgICAgICAgICBkYXRhOFtpXSA9IDB4ZmY7CiAgICAgICAgICAgICAgICBpID0gaSArIDQgfCAwOwogICAgICAgICAgICAgICAgZGF0YThbaV0gPSAweGZmOwogICAgICAgICAgICAgICAgaSA9IGkgKyA0IHwgMDsKICAgICAgICAgICAgICAgIGRhdGE4W2ldID0gMHhmZjsKICAgICAgICAgICAgICAgIGkgPSBpICsgNCB8IDA7CiAgICAgICAgICAgICAgICBkYXRhOFtpXSA9IDB4ZmY7CiAgICAgICAgICAgICAgICBpID0gaSArIDQgfCAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2hpbGUgKGkgPCBqKSB7CiAgICAgICAgICAgICAgICBkYXRhOFtpXSA9IDB4ZmY7CiAgICAgICAgICAgICAgICBpID0gaSArIDQgfCAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGF0YTMyLnNldChIRUFQMzIuc3ViYXJyYXkoc3JjLCBzcmMgKyBkYXRhMzIubGVuZ3RoKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciB3aWR0aCA9IE1vZHVsZVsnY2FudmFzJ10ud2lkdGg7CiAgICAgICAgdmFyIGhlaWdodCA9IE1vZHVsZVsnY2FudmFzJ10uaGVpZ2h0OwogICAgICAgIHZhciBzID0gc3VyZkRhdGEuYnVmZmVyOwogICAgICAgIHZhciBkYXRhID0gc3VyZkRhdGEuaW1hZ2UuZGF0YTsKICAgICAgICB2YXIgY29sb3JzID0gc3VyZkRhdGEuY29sb3JzOyAvLyBUT0RPOiBvcHRpbWl6ZSB1c2luZyBjb2xvcnMzMgogICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKICAgICAgICAgIHZhciBiYXNlID0geSp3aWR0aCo0OwogICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CiAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IGFib3ZlIGFib3V0IHNpZ25zCiAgICAgICAgICAgIHZhciB2YWwgPSBIRUFQVThbKChzKyspPj4wKV0gKiA0OwogICAgICAgICAgICB2YXIgc3RhcnQgPSBiYXNlICsgeCo0OwogICAgICAgICAgICBkYXRhW3N0YXJ0XSAgID0gY29sb3JzW3ZhbF07CiAgICAgICAgICAgIGRhdGFbc3RhcnQrMV0gPSBjb2xvcnNbdmFsKzFdOwogICAgICAgICAgICBkYXRhW3N0YXJ0KzJdID0gY29sb3JzW3ZhbCsyXTsKICAgICAgICAgIH0KICAgICAgICAgIHMgKz0gd2lkdGgqMzsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gQ29weSB0byBjYW52YXMKICAgICAgc3VyZkRhdGEuY3R4LnB1dEltYWdlRGF0YShzdXJmRGF0YS5pbWFnZSwgMCwgMCk7CiAgICAgIC8vIE5vdGUgdGhhdCB3ZSBzYXZlIHRoZSBpbWFnZSwgc28gZnV0dXJlIHdyaXRlcyBhcmUgZmFzdC4gQnV0LCBtZW1vcnkgaXMgbm90IHlldCByZWxlYXNlZAogICAgfQoKICBmdW5jdGlvbiBfX19jeGFfYWxsb2NhdGVfZXhjZXB0aW9uKHNpemUpIHsKICAgICAgcmV0dXJuIF9tYWxsb2Moc2l6ZSk7CiAgICB9CgogIAogIGZ1bmN0aW9uIF9fWlN0MTh1bmNhdWdodF9leGNlcHRpb252KCkgeyAvLyBzdGQ6OnVuY2F1Z2h0X2V4Y2VwdGlvbigpCiAgICAgIHJldHVybiAhIV9fWlN0MTh1bmNhdWdodF9leGNlcHRpb252LnVuY2F1Z2h0X2V4Y2VwdGlvbjsKICAgIH0KICAKICAKICAKICB2YXIgRVhDRVBUSU9OUz17bGFzdDowLGNhdWdodDpbXSxpbmZvczp7fSxkZUFkanVzdDpmdW5jdGlvbiAoYWRqdXN0ZWQpIHsKICAgICAgICBpZiAoIWFkanVzdGVkIHx8IEVYQ0VQVElPTlMuaW5mb3NbYWRqdXN0ZWRdKSByZXR1cm4gYWRqdXN0ZWQ7CiAgICAgICAgZm9yICh2YXIgcHRyIGluIEVYQ0VQVElPTlMuaW5mb3MpIHsKICAgICAgICAgIHZhciBpbmZvID0gRVhDRVBUSU9OUy5pbmZvc1twdHJdOwogICAgICAgICAgaWYgKGluZm8uYWRqdXN0ZWQgPT09IGFkanVzdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBwdHI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBhZGp1c3RlZDsKICAgICAgfSxhZGRSZWY6ZnVuY3Rpb24gKHB0cikgewogICAgICAgIGlmICghcHRyKSByZXR1cm47CiAgICAgICAgdmFyIGluZm8gPSBFWENFUFRJT05TLmluZm9zW3B0cl07CiAgICAgICAgaW5mby5yZWZjb3VudCsrOwogICAgICB9LGRlY1JlZjpmdW5jdGlvbiAocHRyKSB7CiAgICAgICAgaWYgKCFwdHIpIHJldHVybjsKICAgICAgICB2YXIgaW5mbyA9IEVYQ0VQVElPTlMuaW5mb3NbcHRyXTsKICAgICAgICBhc3NlcnQoaW5mby5yZWZjb3VudCA+IDApOwogICAgICAgIGluZm8ucmVmY291bnQtLTsKICAgICAgICAvLyBBIHJldGhyb3duIGV4Y2VwdGlvbiBjYW4gcmVhY2ggcmVmY291bnQgMDsgaXQgbXVzdCBub3QgYmUgZGlzY2FyZGVkCiAgICAgICAgLy8gSXRzIG5leHQgaGFuZGxlciB3aWxsIGNsZWFyIHRoZSByZXRocm93biBmbGFnIGFuZCBhZGRSZWYgaXQsIHByaW9yIHRvCiAgICAgICAgLy8gZmluYWwgZGVjUmVmIGFuZCBkZXN0cnVjdGlvbiBoZXJlCiAgICAgICAgaWYgKGluZm8ucmVmY291bnQgPT09IDAgJiYgIWluZm8ucmV0aHJvd24pIHsKICAgICAgICAgIGlmIChpbmZvLmRlc3RydWN0b3IpIHsKICAgICAgICAgICAgTW9kdWxlWydkeW5DYWxsX3ZpJ10oaW5mby5kZXN0cnVjdG9yLCBwdHIpOwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRlIEVYQ0VQVElPTlMuaW5mb3NbcHRyXTsKICAgICAgICAgIF9fX2N4YV9mcmVlX2V4Y2VwdGlvbihwdHIpOwogICAgICAgIH0KICAgICAgfSxjbGVhclJlZjpmdW5jdGlvbiAocHRyKSB7CiAgICAgICAgaWYgKCFwdHIpIHJldHVybjsKICAgICAgICB2YXIgaW5mbyA9IEVYQ0VQVElPTlMuaW5mb3NbcHRyXTsKICAgICAgICBpbmZvLnJlZmNvdW50ID0gMDsKICAgICAgfX07CiAgZnVuY3Rpb24gX19fcmVzdW1lRXhjZXB0aW9uKHB0cikgewogICAgICBpZiAoIUVYQ0VQVElPTlMubGFzdCkgeyBFWENFUFRJT05TLmxhc3QgPSBwdHI7IH0KICAgICAgdGhyb3cgcHRyOwogICAgfWZ1bmN0aW9uIF9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoKCkgewogICAgICB2YXIgdGhyb3duID0gRVhDRVBUSU9OUy5sYXN0OwogICAgICBpZiAoIXRocm93bikgewogICAgICAgIC8vIGp1c3QgcGFzcyB0aHJvdWdoIHRoZSBudWxsIHB0cgogICAgICAgIHJldHVybiAoKHNldFRlbXBSZXQwKDApLDApfDApOwogICAgICB9CiAgICAgIHZhciBpbmZvID0gRVhDRVBUSU9OUy5pbmZvc1t0aHJvd25dOwogICAgICB2YXIgdGhyb3dudHlwZSA9IGluZm8udHlwZTsKICAgICAgaWYgKCF0aHJvd250eXBlKSB7CiAgICAgICAgLy8ganVzdCBwYXNzIHRocm91Z2ggdGhlIHRocm93biBwdHIKICAgICAgICByZXR1cm4gKChzZXRUZW1wUmV0MCgwKSx0aHJvd24pfDApOwogICAgICB9CiAgICAgIHZhciB0eXBlQXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogIAogICAgICB2YXIgcG9pbnRlciA9IE1vZHVsZVsnX19fY3hhX2lzX3BvaW50ZXJfdHlwZSddKHRocm93bnR5cGUpOwogICAgICAvLyBjYW5fY2F0Y2ggcmVjZWl2ZXMgYSAqKiwgYWRkIGluZGlyZWN0aW9uCiAgICAgIGlmICghX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2guYnVmZmVyKSBfX19jeGFfZmluZF9tYXRjaGluZ19jYXRjaC5idWZmZXIgPSBfbWFsbG9jKDQpOwogICAgICBIRUFQMzJbKChfX19jeGFfZmluZF9tYXRjaGluZ19jYXRjaC5idWZmZXIpPj4yKV09dGhyb3duOwogICAgICB0aHJvd24gPSBfX19jeGFfZmluZF9tYXRjaGluZ19jYXRjaC5idWZmZXI7CiAgICAgIC8vIFRoZSBkaWZmZXJlbnQgY2F0Y2ggYmxvY2tzIGFyZSBkZW5vdGVkIGJ5IGRpZmZlcmVudCB0eXBlcy4KICAgICAgLy8gRHVlIHRvIGluaGVyaXRhbmNlLCB0aG9zZSB0eXBlcyBtYXkgbm90IHByZWNpc2VseSBtYXRjaCB0aGUKICAgICAgLy8gdHlwZSBvZiB0aGUgdGhyb3duIG9iamVjdC4gRmluZCBvbmUgd2hpY2ggbWF0Y2hlcywgYW5kCiAgICAgIC8vIHJldHVybiB0aGUgdHlwZSBvZiB0aGUgY2F0Y2ggYmxvY2sgd2hpY2ggc2hvdWxkIGJlIGNhbGxlZC4KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodHlwZUFycmF5W2ldICYmIE1vZHVsZVsnX19fY3hhX2Nhbl9jYXRjaCddKHR5cGVBcnJheVtpXSwgdGhyb3dudHlwZSwgdGhyb3duKSkgewogICAgICAgICAgdGhyb3duID0gSEVBUDMyWygodGhyb3duKT4+MildOyAvLyB1bmRvIGluZGlyZWN0aW9uCiAgICAgICAgICBpbmZvLmFkanVzdGVkID0gdGhyb3duOwogICAgICAgICAgcmV0dXJuICgoc2V0VGVtcFJldDAodHlwZUFycmF5W2ldKSx0aHJvd24pfDApOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBTaG91bGRuJ3QgaGFwcGVuIHVubGVzcyB3ZSBoYXZlIGJvZ3VzIGRhdGEgaW4gdHlwZUFycmF5CiAgICAgIC8vIG9yIGVuY291bnRlciBhIHR5cGUgZm9yIHdoaWNoIGVtc2NyaXB0ZW4gZG9lc24ndCBoYXZlIHN1aXRhYmxlCiAgICAgIC8vIHR5cGVpbmZvIGRlZmluZWQuIEJlc3QtZWZmb3J0cyBtYXRjaCBqdXN0IGluIGNhc2UuCiAgICAgIHRocm93biA9IEhFQVAzMlsoKHRocm93bik+PjIpXTsgLy8gdW5kbyBpbmRpcmVjdGlvbgogICAgICByZXR1cm4gKChzZXRUZW1wUmV0MCh0aHJvd250eXBlKSx0aHJvd24pfDApOwogICAgfWZ1bmN0aW9uIF9fX2N4YV90aHJvdyhwdHIsIHR5cGUsIGRlc3RydWN0b3IpIHsKICAgICAgRVhDRVBUSU9OUy5pbmZvc1twdHJdID0gewogICAgICAgIHB0cjogcHRyLAogICAgICAgIGFkanVzdGVkOiBwdHIsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBkZXN0cnVjdG9yOiBkZXN0cnVjdG9yLAogICAgICAgIHJlZmNvdW50OiAwLAogICAgICAgIGNhdWdodDogZmFsc2UsCiAgICAgICAgcmV0aHJvd246IGZhbHNlCiAgICAgIH07CiAgICAgIEVYQ0VQVElPTlMubGFzdCA9IHB0cjsKICAgICAgaWYgKCEoInVuY2F1Z2h0X2V4Y2VwdGlvbiIgaW4gX19aU3QxOHVuY2F1Z2h0X2V4Y2VwdGlvbnYpKSB7CiAgICAgICAgX19aU3QxOHVuY2F1Z2h0X2V4Y2VwdGlvbnYudW5jYXVnaHRfZXhjZXB0aW9uID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfX1pTdDE4dW5jYXVnaHRfZXhjZXB0aW9udi51bmNhdWdodF9leGNlcHRpb24rKzsKICAgICAgfQogICAgICB0aHJvdyBwdHI7CiAgICB9CgogIGZ1bmN0aW9uIF9fX2d4eF9wZXJzb25hbGl0eV92MCgpIHsKICAgIH0KCiAgZnVuY3Rpb24gX19fbG9jaygpIHt9CgogIAogIHZhciBTWVNDQUxMUz17dmFyYXJnczowLGdldDpmdW5jdGlvbiAodmFyYXJncykgewogICAgICAgIFNZU0NBTExTLnZhcmFyZ3MgKz0gNDsKICAgICAgICB2YXIgcmV0ID0gSEVBUDMyWygoKFNZU0NBTExTLnZhcmFyZ3MpLSg0KSk+PjIpXTsKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9LGdldFN0cjpmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHJldCA9IFBvaW50ZXJfc3RyaW5naWZ5KFNZU0NBTExTLmdldCgpKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9LGdldDY0OmZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbG93ID0gU1lTQ0FMTFMuZ2V0KCksIGhpZ2ggPSBTWVNDQUxMUy5nZXQoKTsKICAgICAgICBpZiAobG93ID49IDApIGFzc2VydChoaWdoID09PSAwKTsKICAgICAgICBlbHNlIGFzc2VydChoaWdoID09PSAtMSk7CiAgICAgICAgcmV0dXJuIGxvdzsKICAgICAgfSxnZXRaZXJvOmZ1bmN0aW9uICgpIHsKICAgICAgICBhc3NlcnQoU1lTQ0FMTFMuZ2V0KCkgPT09IDApOwogICAgICB9fTtmdW5jdGlvbiBfX19zeXNjYWxsMTQwKHdoaWNoLCB2YXJhcmdzKSB7U1lTQ0FMTFMudmFyYXJncyA9IHZhcmFyZ3M7CiAgdHJ5IHsKICAgLy8gbGxzZWVrCiAgICAgIHZhciBzdHJlYW0gPSBTWVNDQUxMUy5nZXRTdHJlYW1Gcm9tRkQoKSwgb2Zmc2V0X2hpZ2ggPSBTWVNDQUxMUy5nZXQoKSwgb2Zmc2V0X2xvdyA9IFNZU0NBTExTLmdldCgpLCByZXN1bHQgPSBTWVNDQUxMUy5nZXQoKSwgd2hlbmNlID0gU1lTQ0FMTFMuZ2V0KCk7CiAgICAgIC8vIE5PVEU6IG9mZnNldF9oaWdoIGlzIHVudXNlZCAtIEVtc2NyaXB0ZW4ncyBvZmZfdCBpcyAzMi1iaXQKICAgICAgdmFyIG9mZnNldCA9IG9mZnNldF9sb3c7CiAgICAgIEZTLmxsc2VlayhzdHJlYW0sIG9mZnNldCwgd2hlbmNlKTsKICAgICAgSEVBUDMyWygocmVzdWx0KT4+MildPXN0cmVhbS5wb3NpdGlvbjsKICAgICAgaWYgKHN0cmVhbS5nZXRkZW50cyAmJiBvZmZzZXQgPT09IDAgJiYgd2hlbmNlID09PSAwKSBzdHJlYW0uZ2V0ZGVudHMgPSBudWxsOyAvLyByZXNldCByZWFkZGlyIHN0YXRlCiAgICAgIHJldHVybiAwOwogICAgfSBjYXRjaCAoZSkgewogICAgaWYgKHR5cGVvZiBGUyA9PT0gJ3VuZGVmaW5lZCcgfHwgIShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpIGFib3J0KGUpOwogICAgcmV0dXJuIC1lLmVycm5vOwogIH0KICB9CgogIAogIGZ1bmN0aW9uIGZsdXNoX05PX0ZJTEVTWVNURU0oKSB7CiAgICAgIC8vIGZsdXNoIGFueXRoaW5nIHJlbWFpbmluZyBpbiB0aGUgYnVmZmVycyBkdXJpbmcgc2h1dGRvd24KICAgICAgdmFyIGZmbHVzaCA9IE1vZHVsZVsiX2ZmbHVzaCJdOwogICAgICBpZiAoZmZsdXNoKSBmZmx1c2goMCk7CiAgICAgIHZhciBwcmludENoYXIgPSBfX19zeXNjYWxsMTQ2LnByaW50Q2hhcjsKICAgICAgaWYgKCFwcmludENoYXIpIHJldHVybjsKICAgICAgdmFyIGJ1ZmZlcnMgPSBfX19zeXNjYWxsMTQ2LmJ1ZmZlcnM7CiAgICAgIGlmIChidWZmZXJzWzFdLmxlbmd0aCkgcHJpbnRDaGFyKDEsIDEwKTsKICAgICAgaWYgKGJ1ZmZlcnNbMl0ubGVuZ3RoKSBwcmludENoYXIoMiwgMTApOwogICAgfWZ1bmN0aW9uIF9fX3N5c2NhbGwxNDYod2hpY2gsIHZhcmFyZ3MpIHtTWVNDQUxMUy52YXJhcmdzID0gdmFyYXJnczsKICB0cnkgewogICAvLyB3cml0ZXYKICAgICAgLy8gaGFjayB0byBzdXBwb3J0IHByaW50ZiBpbiBOT19GSUxFU1lTVEVNCiAgICAgIHZhciBzdHJlYW0gPSBTWVNDQUxMUy5nZXQoKSwgaW92ID0gU1lTQ0FMTFMuZ2V0KCksIGlvdmNudCA9IFNZU0NBTExTLmdldCgpOwogICAgICB2YXIgcmV0ID0gMDsKICAgICAgaWYgKCFfX19zeXNjYWxsMTQ2LmJ1ZmZlcnMpIHsKICAgICAgICBfX19zeXNjYWxsMTQ2LmJ1ZmZlcnMgPSBbbnVsbCwgW10sIFtdXTsgLy8gMSA9PiBzdGRvdXQsIDIgPT4gc3RkZXJyCiAgICAgICAgX19fc3lzY2FsbDE0Ni5wcmludENoYXIgPSBmdW5jdGlvbihzdHJlYW0sIGN1cnIpIHsKICAgICAgICAgIHZhciBidWZmZXIgPSBfX19zeXNjYWxsMTQ2LmJ1ZmZlcnNbc3RyZWFtXTsKICAgICAgICAgIGFzc2VydChidWZmZXIpOwogICAgICAgICAgaWYgKGN1cnIgPT09IDAgfHwgY3VyciA9PT0gMTApIHsKICAgICAgICAgICAgKHN0cmVhbSA9PT0gMSA/IE1vZHVsZVsncHJpbnQnXSA6IE1vZHVsZVsncHJpbnRFcnInXSkoVVRGOEFycmF5VG9TdHJpbmcoYnVmZmVyLCAwKSk7CiAgICAgICAgICAgIGJ1ZmZlci5sZW5ndGggPSAwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnVmZmVyLnB1c2goY3Vycik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlvdmNudDsgaSsrKSB7CiAgICAgICAgdmFyIHB0ciA9IEhFQVAzMlsoKChpb3YpKyhpKjgpKT4+MildOwogICAgICAgIHZhciBsZW4gPSBIRUFQMzJbKCgoaW92KSsoaSo4ICsgNCkpPj4yKV07CiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICAgICAgX19fc3lzY2FsbDE0Ni5wcmludENoYXIoc3RyZWFtLCBIRUFQVThbcHRyK2pdKTsKICAgICAgICB9CiAgICAgICAgcmV0ICs9IGxlbjsKICAgICAgfQogICAgICByZXR1cm4gcmV0OwogICAgfSBjYXRjaCAoZSkgewogICAgaWYgKHR5cGVvZiBGUyA9PT0gJ3VuZGVmaW5lZCcgfHwgIShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpIGFib3J0KGUpOwogICAgcmV0dXJuIC1lLmVycm5vOwogIH0KICB9CgogIGZ1bmN0aW9uIF9fX3N5c2NhbGw1NCh3aGljaCwgdmFyYXJncykge1NZU0NBTExTLnZhcmFyZ3MgPSB2YXJhcmdzOwogIHRyeSB7CiAgIC8vIGlvY3RsCiAgICAgIHJldHVybiAwOwogICAgfSBjYXRjaCAoZSkgewogICAgaWYgKHR5cGVvZiBGUyA9PT0gJ3VuZGVmaW5lZCcgfHwgIShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpIGFib3J0KGUpOwogICAgcmV0dXJuIC1lLmVycm5vOwogIH0KICB9CgogIGZ1bmN0aW9uIF9fX3N5c2NhbGw2KHdoaWNoLCB2YXJhcmdzKSB7U1lTQ0FMTFMudmFyYXJncyA9IHZhcmFyZ3M7CiAgdHJ5IHsKICAgLy8gY2xvc2UKICAgICAgdmFyIHN0cmVhbSA9IFNZU0NBTExTLmdldFN0cmVhbUZyb21GRCgpOwogICAgICBGUy5jbG9zZShzdHJlYW0pOwogICAgICByZXR1cm4gMDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgIGlmICh0eXBlb2YgRlMgPT09ICd1bmRlZmluZWQnIHx8ICEoZSBpbnN0YW5jZW9mIEZTLkVycm5vRXJyb3IpKSBhYm9ydChlKTsKICAgIHJldHVybiAtZS5lcnJubzsKICB9CiAgfQoKICBmdW5jdGlvbiBfX191bmxvY2soKSB7fQoKICAKICBmdW5jdGlvbiBfZW1zY3JpcHRlbl9tZW1jcHlfYmlnKGRlc3QsIHNyYywgbnVtKSB7CiAgICAgIEhFQVBVOC5zZXQoSEVBUFU4LnN1YmFycmF5KHNyYywgc3JjK251bSksIGRlc3QpOwogICAgICByZXR1cm4gZGVzdDsKICAgIH0gCgogICAKCiAgIApNb2R1bGVbInJlcXVlc3RGdWxsU2NyZWVuIl0gPSBmdW5jdGlvbiBNb2R1bGVfcmVxdWVzdEZ1bGxTY3JlZW4obG9ja1BvaW50ZXIsIHJlc2l6ZUNhbnZhcywgdnJEZXZpY2UpIHsgTW9kdWxlLnByaW50RXJyKCJNb2R1bGUucmVxdWVzdEZ1bGxTY3JlZW4gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIGNhbGwgTW9kdWxlLnJlcXVlc3RGdWxsc2NyZWVuIGluc3RlYWQuIik7IE1vZHVsZVsicmVxdWVzdEZ1bGxTY3JlZW4iXSA9IE1vZHVsZVsicmVxdWVzdEZ1bGxzY3JlZW4iXTsgQnJvd3Nlci5yZXF1ZXN0RnVsbFNjcmVlbihsb2NrUG9pbnRlciwgcmVzaXplQ2FudmFzLCB2ckRldmljZSkgfTsKICBNb2R1bGVbInJlcXVlc3RGdWxsc2NyZWVuIl0gPSBmdW5jdGlvbiBNb2R1bGVfcmVxdWVzdEZ1bGxzY3JlZW4obG9ja1BvaW50ZXIsIHJlc2l6ZUNhbnZhcywgdnJEZXZpY2UpIHsgQnJvd3Nlci5yZXF1ZXN0RnVsbHNjcmVlbihsb2NrUG9pbnRlciwgcmVzaXplQ2FudmFzLCB2ckRldmljZSkgfTsKICBNb2R1bGVbInJlcXVlc3RBbmltYXRpb25GcmFtZSJdID0gZnVuY3Rpb24gTW9kdWxlX3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jKSB7IEJyb3dzZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmMpIH07CiAgTW9kdWxlWyJzZXRDYW52YXNTaXplIl0gPSBmdW5jdGlvbiBNb2R1bGVfc2V0Q2FudmFzU2l6ZSh3aWR0aCwgaGVpZ2h0LCBub1VwZGF0ZXMpIHsgQnJvd3Nlci5zZXRDYW52YXNTaXplKHdpZHRoLCBoZWlnaHQsIG5vVXBkYXRlcykgfTsKICBNb2R1bGVbInBhdXNlTWFpbkxvb3AiXSA9IGZ1bmN0aW9uIE1vZHVsZV9wYXVzZU1haW5Mb29wKCkgeyBCcm93c2VyLm1haW5Mb29wLnBhdXNlKCkgfTsKICBNb2R1bGVbInJlc3VtZU1haW5Mb29wIl0gPSBmdW5jdGlvbiBNb2R1bGVfcmVzdW1lTWFpbkxvb3AoKSB7IEJyb3dzZXIubWFpbkxvb3AucmVzdW1lKCkgfTsKICBNb2R1bGVbImdldFVzZXJNZWRpYSJdID0gZnVuY3Rpb24gTW9kdWxlX2dldFVzZXJNZWRpYSgpIHsgQnJvd3Nlci5nZXRVc2VyTWVkaWEoKSB9CiAgTW9kdWxlWyJjcmVhdGVDb250ZXh0Il0gPSBmdW5jdGlvbiBNb2R1bGVfY3JlYXRlQ29udGV4dChjYW52YXMsIHVzZVdlYkdMLCBzZXRJbk1vZHVsZSwgd2ViR0xDb250ZXh0QXR0cmlidXRlcykgeyByZXR1cm4gQnJvd3Nlci5jcmVhdGVDb250ZXh0KGNhbnZhcywgdXNlV2ViR0wsIHNldEluTW9kdWxlLCB3ZWJHTENvbnRleHRBdHRyaWJ1dGVzKSB9OwppZiAoRU5WSVJPTk1FTlRfSVNfTk9ERSkgewogICAgX2Vtc2NyaXB0ZW5fZ2V0X25vdyA9IGZ1bmN0aW9uIF9lbXNjcmlwdGVuX2dldF9ub3dfYWN0dWFsKCkgewogICAgICB2YXIgdCA9IHByb2Nlc3NbJ2hydGltZSddKCk7CiAgICAgIHJldHVybiB0WzBdICogMWUzICsgdFsxXSAvIDFlNjsKICAgIH07CiAgfSBlbHNlIGlmICh0eXBlb2YgZGF0ZU5vdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIF9lbXNjcmlwdGVuX2dldF9ub3cgPSBkYXRlTm93OwogIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGZbJ3BlcmZvcm1hbmNlJ10gJiYgdHlwZW9mIHNlbGZbJ3BlcmZvcm1hbmNlJ11bJ25vdyddID09PSAnZnVuY3Rpb24nKSB7CiAgICBfZW1zY3JpcHRlbl9nZXRfbm93ID0gZnVuY3Rpb24oKSB7IHJldHVybiBzZWxmWydwZXJmb3JtYW5jZSddWydub3cnXSgpOyB9OwogIH0gZWxzZSBpZiAodHlwZW9mIHBlcmZvcm1hbmNlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgcGVyZm9ybWFuY2VbJ25vdyddID09PSAnZnVuY3Rpb24nKSB7CiAgICBfZW1zY3JpcHRlbl9nZXRfbm93ID0gZnVuY3Rpb24oKSB7IHJldHVybiBwZXJmb3JtYW5jZVsnbm93J10oKTsgfTsKICB9IGVsc2UgewogICAgX2Vtc2NyaXB0ZW5fZ2V0X25vdyA9IERhdGUubm93OwogIH07Cl9fX2J1aWxkRW52aXJvbm1lbnQoRU5WKTs7CnZhciBHTGN0eDsgR0wuaW5pdCgpOwpEWU5BTUlDVE9QX1BUUiA9IHN0YXRpY0FsbG9jKDQpOwoKU1RBQ0tfQkFTRSA9IFNUQUNLVE9QID0gYWxpZ25NZW1vcnkoU1RBVElDVE9QKTsKClNUQUNLX01BWCA9IFNUQUNLX0JBU0UgKyBUT1RBTF9TVEFDSzsKCkRZTkFNSUNfQkFTRSA9IGFsaWduTWVtb3J5KFNUQUNLX01BWCk7CgpIRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdID0gRFlOQU1JQ19CQVNFOwoKc3RhdGljU2VhbGVkID0gdHJ1ZTsgLy8gc2VhbCB0aGUgc3RhdGljIHBvcnRpb24gb2YgbWVtb3J5Cgphc3NlcnQoRFlOQU1JQ19CQVNFIDwgVE9UQUxfTUVNT1JZLCAiVE9UQUxfTUVNT1JZIG5vdCBiaWcgZW5vdWdoIGZvciBzdGFjayIpOwoKdmFyIEFTU0VSVElPTlMgPSB0cnVlOwoKLyoqIEB0eXBlIHtmdW5jdGlvbihzdHJpbmcsIGJvb2xlYW49LCBudW1iZXI9KX0gKi8KZnVuY3Rpb24gaW50QXJyYXlGcm9tU3RyaW5nKHN0cmluZ3ksIGRvbnRBZGROdWxsLCBsZW5ndGgpIHsKICB2YXIgbGVuID0gbGVuZ3RoID4gMCA/IGxlbmd0aCA6IGxlbmd0aEJ5dGVzVVRGOChzdHJpbmd5KSsxOwogIHZhciB1OGFycmF5ID0gbmV3IEFycmF5KGxlbik7CiAgdmFyIG51bUJ5dGVzV3JpdHRlbiA9IHN0cmluZ1RvVVRGOEFycmF5KHN0cmluZ3ksIHU4YXJyYXksIDAsIHU4YXJyYXkubGVuZ3RoKTsKICBpZiAoZG9udEFkZE51bGwpIHU4YXJyYXkubGVuZ3RoID0gbnVtQnl0ZXNXcml0dGVuOwogIHJldHVybiB1OGFycmF5Owp9CgpmdW5jdGlvbiBpbnRBcnJheVRvU3RyaW5nKGFycmF5KSB7CiAgdmFyIHJldCA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgIHZhciBjaHIgPSBhcnJheVtpXTsKICAgIGlmIChjaHIgPiAweEZGKSB7CiAgICAgIGlmIChBU1NFUlRJT05TKSB7CiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnQ2hhcmFjdGVyIGNvZGUgJyArIGNociArICcgKCcgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocikgKyAnKSAgYXQgb2Zmc2V0ICcgKyBpICsgJyBub3QgaW4gMHgwMC0weEZGLicpOwogICAgICB9CiAgICAgIGNociAmPSAweEZGOwogICAgfQogICAgcmV0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpKTsKICB9CiAgcmV0dXJuIHJldC5qb2luKCcnKTsKfQoKCi8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zdHJvcGhlL3N0cm9waGVqcy9ibG9iL2UwNmQwMjcvc3JjL3BvbHlmaWxscy5qcyNMMTQ5CgovLyBUaGlzIGNvZGUgd2FzIHdyaXR0ZW4gYnkgVHlsZXIgQWtpbnMgYW5kIGhhcyBiZWVuIHBsYWNlZCBpbiB0aGUKLy8gcHVibGljIGRvbWFpbi4gIEl0IHdvdWxkIGJlIG5pY2UgaWYgeW91IGxlZnQgdGhpcyBoZWFkZXIgaW50YWN0LgovLyBCYXNlNjQgY29kZSBmcm9tIFR5bGVyIEFraW5zIC0tIGh0dHA6Ly9ydW1raW4uY29tCgovKioKICogRGVjb2RlcyBhIGJhc2U2NCBzdHJpbmcuCiAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIHRvIGRlY29kZS4KICovCnZhciBkZWNvZGVCYXNlNjQgPSB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyA/IGF0b2IgOiBmdW5jdGlvbiAoaW5wdXQpIHsKICB2YXIga2V5U3RyID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JzsKCiAgdmFyIG91dHB1dCA9ICcnOwogIHZhciBjaHIxLCBjaHIyLCBjaHIzOwogIHZhciBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0OwogIHZhciBpID0gMDsKICAvLyByZW1vdmUgYWxsIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IEEtWiwgYS16LCAwLTksICssIC8sIG9yID0KICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCAnJyk7CiAgZG8gewogICAgZW5jMSA9IGtleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKICAgIGVuYzIgPSBrZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7CiAgICBlbmMzID0ga2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpOwogICAgZW5jNCA9IGtleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKCiAgICBjaHIxID0gKGVuYzEgPDwgMikgfCAoZW5jMiA+PiA0KTsKICAgIGNocjIgPSAoKGVuYzIgJiAxNSkgPDwgNCkgfCAoZW5jMyA+PiAyKTsKICAgIGNocjMgPSAoKGVuYzMgJiAzKSA8PCA2KSB8IGVuYzQ7CgogICAgb3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIxKTsKCiAgICBpZiAoZW5jMyAhPT0gNjQpIHsKICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIyKTsKICAgIH0KICAgIGlmIChlbmM0ICE9PSA2NCkgewogICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjMpOwogICAgfQogIH0gd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpOwogIHJldHVybiBvdXRwdXQ7Cn07CgovLyBDb252ZXJ0cyBhIHN0cmluZyBvZiBiYXNlNjQgaW50byBhIGJ5dGUgYXJyYXkuCi8vIFRocm93cyBlcnJvciBvbiBpbnZhbGlkIGlucHV0LgpmdW5jdGlvbiBpbnRBcnJheUZyb21CYXNlNjQocykgewogIGlmICh0eXBlb2YgRU5WSVJPTk1FTlRfSVNfTk9ERSA9PT0gJ2Jvb2xlYW4nICYmIEVOVklST05NRU5UX0lTX05PREUpIHsKICAgIHZhciBidWY7CiAgICB0cnkgewogICAgICBidWYgPSBCdWZmZXIuZnJvbShzLCAnYmFzZTY0Jyk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIGJ1ZiA9IG5ldyBCdWZmZXIocywgJ2Jhc2U2NCcpOwogICAgfQogICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1Zi5idWZmZXIsIGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZUxlbmd0aCk7CiAgfQoKICB0cnkgewogICAgdmFyIGRlY29kZWQgPSBkZWNvZGVCYXNlNjQocyk7CiAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShkZWNvZGVkLmxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMCA7IGkgPCBkZWNvZGVkLmxlbmd0aCA7ICsraSkgewogICAgICBieXRlc1tpXSA9IGRlY29kZWQuY2hhckNvZGVBdChpKTsKICAgIH0KICAgIHJldHVybiBieXRlczsKICB9IGNhdGNoIChfKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnZlcnRpbmcgYmFzZTY0IHN0cmluZyB0byBieXRlcyBmYWlsZWQuJyk7CiAgfQp9CgovLyBJZiBmaWxlbmFtZSBpcyBhIGJhc2U2NCBkYXRhIFVSSSwgcGFyc2VzIGFuZCByZXR1cm5zIGRhdGEgKEJ1ZmZlciBvbiBub2RlLAovLyBVaW50OEFycmF5IG90aGVyd2lzZSkuIElmIGZpbGVuYW1lIGlzIG5vdCBhIGJhc2U2NCBkYXRhIFVSSSwgcmV0dXJucyB1bmRlZmluZWQuCmZ1bmN0aW9uIHRyeVBhcnNlQXNEYXRhVVJJKGZpbGVuYW1lKSB7CiAgaWYgKCFpc0RhdGFVUkkoZmlsZW5hbWUpKSB7CiAgICByZXR1cm47CiAgfQoKICByZXR1cm4gaW50QXJyYXlGcm9tQmFzZTY0KGZpbGVuYW1lLnNsaWNlKGRhdGFVUklQcmVmaXgubGVuZ3RoKSk7Cn0KCgoKZnVuY3Rpb24gbnVsbEZ1bmNfaWkoeCkgeyBNb2R1bGVbInByaW50RXJyIl0oIkludmFsaWQgZnVuY3Rpb24gcG9pbnRlciBjYWxsZWQgd2l0aCBzaWduYXR1cmUgJ2lpJy4gUGVyaGFwcyB0aGlzIGlzIGFuIGludmFsaWQgdmFsdWUgKGUuZy4gY2F1c2VkIGJ5IGNhbGxpbmcgYSB2aXJ0dWFsIG1ldGhvZCBvbiBhIE5VTEwgcG9pbnRlcik/IE9yIGNhbGxpbmcgYSBmdW5jdGlvbiB3aXRoIGFuIGluY29ycmVjdCB0eXBlLCB3aGljaCB3aWxsIGZhaWw/IChpdCBpcyB3b3J0aCBidWlsZGluZyB5b3VyIHNvdXJjZSBmaWxlcyB3aXRoIC1XZXJyb3IgKHdhcm5pbmdzIGFyZSBlcnJvcnMpLCBhcyB3YXJuaW5ncyBjYW4gaW5kaWNhdGUgdW5kZWZpbmVkIGJlaGF2aW9yIHdoaWNoIGNhbiBjYXVzZSB0aGlzKSIpOyAgTW9kdWxlWyJwcmludEVyciJdKCJCdWlsZCB3aXRoIEFTU0VSVElPTlM9MiBmb3IgbW9yZSBpbmZvLiIpO2Fib3J0KHgpIH0KCmZ1bmN0aW9uIG51bGxGdW5jX2lpaWkoeCkgeyBNb2R1bGVbInByaW50RXJyIl0oIkludmFsaWQgZnVuY3Rpb24gcG9pbnRlciBjYWxsZWQgd2l0aCBzaWduYXR1cmUgJ2lpaWknLiBQZXJoYXBzIHRoaXMgaXMgYW4gaW52YWxpZCB2YWx1ZSAoZS5nLiBjYXVzZWQgYnkgY2FsbGluZyBhIHZpcnR1YWwgbWV0aG9kIG9uIGEgTlVMTCBwb2ludGVyKT8gT3IgY2FsbGluZyBhIGZ1bmN0aW9uIHdpdGggYW4gaW5jb3JyZWN0IHR5cGUsIHdoaWNoIHdpbGwgZmFpbD8gKGl0IGlzIHdvcnRoIGJ1aWxkaW5nIHlvdXIgc291cmNlIGZpbGVzIHdpdGggLVdlcnJvciAod2FybmluZ3MgYXJlIGVycm9ycyksIGFzIHdhcm5pbmdzIGNhbiBpbmRpY2F0ZSB1bmRlZmluZWQgYmVoYXZpb3Igd2hpY2ggY2FuIGNhdXNlIHRoaXMpIik7ICBNb2R1bGVbInByaW50RXJyIl0oIkJ1aWxkIHdpdGggQVNTRVJUSU9OUz0yIGZvciBtb3JlIGluZm8uIik7YWJvcnQoeCkgfQoKZnVuY3Rpb24gbnVsbEZ1bmNfdih4KSB7IE1vZHVsZVsicHJpbnRFcnIiXSgiSW52YWxpZCBmdW5jdGlvbiBwb2ludGVyIGNhbGxlZCB3aXRoIHNpZ25hdHVyZSAndicuIFBlcmhhcHMgdGhpcyBpcyBhbiBpbnZhbGlkIHZhbHVlIChlLmcuIGNhdXNlZCBieSBjYWxsaW5nIGEgdmlydHVhbCBtZXRob2Qgb24gYSBOVUxMIHBvaW50ZXIpPyBPciBjYWxsaW5nIGEgZnVuY3Rpb24gd2l0aCBhbiBpbmNvcnJlY3QgdHlwZSwgd2hpY2ggd2lsbCBmYWlsPyAoaXQgaXMgd29ydGggYnVpbGRpbmcgeW91ciBzb3VyY2UgZmlsZXMgd2l0aCAtV2Vycm9yICh3YXJuaW5ncyBhcmUgZXJyb3JzKSwgYXMgd2FybmluZ3MgY2FuIGluZGljYXRlIHVuZGVmaW5lZCBiZWhhdmlvciB3aGljaCBjYW4gY2F1c2UgdGhpcykiKTsgIE1vZHVsZVsicHJpbnRFcnIiXSgiQnVpbGQgd2l0aCBBU1NFUlRJT05TPTIgZm9yIG1vcmUgaW5mby4iKTthYm9ydCh4KSB9CgpmdW5jdGlvbiBudWxsRnVuY192aSh4KSB7IE1vZHVsZVsicHJpbnRFcnIiXSgiSW52YWxpZCBmdW5jdGlvbiBwb2ludGVyIGNhbGxlZCB3aXRoIHNpZ25hdHVyZSAndmknLiBQZXJoYXBzIHRoaXMgaXMgYW4gaW52YWxpZCB2YWx1ZSAoZS5nLiBjYXVzZWQgYnkgY2FsbGluZyBhIHZpcnR1YWwgbWV0aG9kIG9uIGEgTlVMTCBwb2ludGVyKT8gT3IgY2FsbGluZyBhIGZ1bmN0aW9uIHdpdGggYW4gaW5jb3JyZWN0IHR5cGUsIHdoaWNoIHdpbGwgZmFpbD8gKGl0IGlzIHdvcnRoIGJ1aWxkaW5nIHlvdXIgc291cmNlIGZpbGVzIHdpdGggLVdlcnJvciAod2FybmluZ3MgYXJlIGVycm9ycyksIGFzIHdhcm5pbmdzIGNhbiBpbmRpY2F0ZSB1bmRlZmluZWQgYmVoYXZpb3Igd2hpY2ggY2FuIGNhdXNlIHRoaXMpIik7ICBNb2R1bGVbInByaW50RXJyIl0oIkJ1aWxkIHdpdGggQVNTRVJUSU9OUz0yIGZvciBtb3JlIGluZm8uIik7YWJvcnQoeCkgfQoKZnVuY3Rpb24gbnVsbEZ1bmNfdmlpaWkoeCkgeyBNb2R1bGVbInByaW50RXJyIl0oIkludmFsaWQgZnVuY3Rpb24gcG9pbnRlciBjYWxsZWQgd2l0aCBzaWduYXR1cmUgJ3ZpaWlpJy4gUGVyaGFwcyB0aGlzIGlzIGFuIGludmFsaWQgdmFsdWUgKGUuZy4gY2F1c2VkIGJ5IGNhbGxpbmcgYSB2aXJ0dWFsIG1ldGhvZCBvbiBhIE5VTEwgcG9pbnRlcik/IE9yIGNhbGxpbmcgYSBmdW5jdGlvbiB3aXRoIGFuIGluY29ycmVjdCB0eXBlLCB3aGljaCB3aWxsIGZhaWw/IChpdCBpcyB3b3J0aCBidWlsZGluZyB5b3VyIHNvdXJjZSBmaWxlcyB3aXRoIC1XZXJyb3IgKHdhcm5pbmdzIGFyZSBlcnJvcnMpLCBhcyB3YXJuaW5ncyBjYW4gaW5kaWNhdGUgdW5kZWZpbmVkIGJlaGF2aW9yIHdoaWNoIGNhbiBjYXVzZSB0aGlzKSIpOyAgTW9kdWxlWyJwcmludEVyciJdKCJCdWlsZCB3aXRoIEFTU0VSVElPTlM9MiBmb3IgbW9yZSBpbmZvLiIpO2Fib3J0KHgpIH0KCmZ1bmN0aW9uIG51bGxGdW5jX3ZpaWlpaSh4KSB7IE1vZHVsZVsicHJpbnRFcnIiXSgiSW52YWxpZCBmdW5jdGlvbiBwb2ludGVyIGNhbGxlZCB3aXRoIHNpZ25hdHVyZSAndmlpaWlpJy4gUGVyaGFwcyB0aGlzIGlzIGFuIGludmFsaWQgdmFsdWUgKGUuZy4gY2F1c2VkIGJ5IGNhbGxpbmcgYSB2aXJ0dWFsIG1ldGhvZCBvbiBhIE5VTEwgcG9pbnRlcik/IE9yIGNhbGxpbmcgYSBmdW5jdGlvbiB3aXRoIGFuIGluY29ycmVjdCB0eXBlLCB3aGljaCB3aWxsIGZhaWw/IChpdCBpcyB3b3J0aCBidWlsZGluZyB5b3VyIHNvdXJjZSBmaWxlcyB3aXRoIC1XZXJyb3IgKHdhcm5pbmdzIGFyZSBlcnJvcnMpLCBhcyB3YXJuaW5ncyBjYW4gaW5kaWNhdGUgdW5kZWZpbmVkIGJlaGF2aW9yIHdoaWNoIGNhbiBjYXVzZSB0aGlzKSIpOyAgTW9kdWxlWyJwcmludEVyciJdKCJCdWlsZCB3aXRoIEFTU0VSVElPTlM9MiBmb3IgbW9yZSBpbmZvLiIpO2Fib3J0KHgpIH0KCmZ1bmN0aW9uIG51bGxGdW5jX3ZpaWlpaWkoeCkgeyBNb2R1bGVbInByaW50RXJyIl0oIkludmFsaWQgZnVuY3Rpb24gcG9pbnRlciBjYWxsZWQgd2l0aCBzaWduYXR1cmUgJ3ZpaWlpaWknLiBQZXJoYXBzIHRoaXMgaXMgYW4gaW52YWxpZCB2YWx1ZSAoZS5nLiBjYXVzZWQgYnkgY2FsbGluZyBhIHZpcnR1YWwgbWV0aG9kIG9uIGEgTlVMTCBwb2ludGVyKT8gT3IgY2FsbGluZyBhIGZ1bmN0aW9uIHdpdGggYW4gaW5jb3JyZWN0IHR5cGUsIHdoaWNoIHdpbGwgZmFpbD8gKGl0IGlzIHdvcnRoIGJ1aWxkaW5nIHlvdXIgc291cmNlIGZpbGVzIHdpdGggLVdlcnJvciAod2FybmluZ3MgYXJlIGVycm9ycyksIGFzIHdhcm5pbmdzIGNhbiBpbmRpY2F0ZSB1bmRlZmluZWQgYmVoYXZpb3Igd2hpY2ggY2FuIGNhdXNlIHRoaXMpIik7ICBNb2R1bGVbInByaW50RXJyIl0oIkJ1aWxkIHdpdGggQVNTRVJUSU9OUz0yIGZvciBtb3JlIGluZm8uIik7YWJvcnQoeCkgfQoKZnVuY3Rpb24gaW52b2tlX2lpKGluZGV4LGExKSB7CiAgdHJ5IHsKICAgIHJldHVybiBNb2R1bGVbImR5bkNhbGxfaWkiXShpbmRleCxhMSk7CiAgfSBjYXRjaChlKSB7CiAgICBpZiAodHlwZW9mIGUgIT09ICdudW1iZXInICYmIGUgIT09ICdsb25nam1wJykgdGhyb3cgZTsKICAgIE1vZHVsZVsic2V0VGhyZXciXSgxLCAwKTsKICB9Cn0KCmZ1bmN0aW9uIGludm9rZV9paWlpKGluZGV4LGExLGEyLGEzKSB7CiAgdHJ5IHsKICAgIHJldHVybiBNb2R1bGVbImR5bkNhbGxfaWlpaSJdKGluZGV4LGExLGEyLGEzKTsKICB9IGNhdGNoKGUpIHsKICAgIGlmICh0eXBlb2YgZSAhPT0gJ251bWJlcicgJiYgZSAhPT0gJ2xvbmdqbXAnKSB0aHJvdyBlOwogICAgTW9kdWxlWyJzZXRUaHJldyJdKDEsIDApOwogIH0KfQoKZnVuY3Rpb24gaW52b2tlX3YoaW5kZXgpIHsKICB0cnkgewogICAgTW9kdWxlWyJkeW5DYWxsX3YiXShpbmRleCk7CiAgfSBjYXRjaChlKSB7CiAgICBpZiAodHlwZW9mIGUgIT09ICdudW1iZXInICYmIGUgIT09ICdsb25nam1wJykgdGhyb3cgZTsKICAgIE1vZHVsZVsic2V0VGhyZXciXSgxLCAwKTsKICB9Cn0KCmZ1bmN0aW9uIGludm9rZV92aShpbmRleCxhMSkgewogIHRyeSB7CiAgICBNb2R1bGVbImR5bkNhbGxfdmkiXShpbmRleCxhMSk7CiAgfSBjYXRjaChlKSB7CiAgICBpZiAodHlwZW9mIGUgIT09ICdudW1iZXInICYmIGUgIT09ICdsb25nam1wJykgdGhyb3cgZTsKICAgIE1vZHVsZVsic2V0VGhyZXciXSgxLCAwKTsKICB9Cn0KCmZ1bmN0aW9uIGludm9rZV92aWlpaShpbmRleCxhMSxhMixhMyxhNCkgewogIHRyeSB7CiAgICBNb2R1bGVbImR5bkNhbGxfdmlpaWkiXShpbmRleCxhMSxhMixhMyxhNCk7CiAgfSBjYXRjaChlKSB7CiAgICBpZiAodHlwZW9mIGUgIT09ICdudW1iZXInICYmIGUgIT09ICdsb25nam1wJykgdGhyb3cgZTsKICAgIE1vZHVsZVsic2V0VGhyZXciXSgxLCAwKTsKICB9Cn0KCmZ1bmN0aW9uIGludm9rZV92aWlpaWkoaW5kZXgsYTEsYTIsYTMsYTQsYTUpIHsKICB0cnkgewogICAgTW9kdWxlWyJkeW5DYWxsX3ZpaWlpaSJdKGluZGV4LGExLGEyLGEzLGE0LGE1KTsKICB9IGNhdGNoKGUpIHsKICAgIGlmICh0eXBlb2YgZSAhPT0gJ251bWJlcicgJiYgZSAhPT0gJ2xvbmdqbXAnKSB0aHJvdyBlOwogICAgTW9kdWxlWyJzZXRUaHJldyJdKDEsIDApOwogIH0KfQoKZnVuY3Rpb24gaW52b2tlX3ZpaWlpaWkoaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYpIHsKICB0cnkgewogICAgTW9kdWxlWyJkeW5DYWxsX3ZpaWlpaWkiXShpbmRleCxhMSxhMixhMyxhNCxhNSxhNik7CiAgfSBjYXRjaChlKSB7CiAgICBpZiAodHlwZW9mIGUgIT09ICdudW1iZXInICYmIGUgIT09ICdsb25nam1wJykgdGhyb3cgZTsKICAgIE1vZHVsZVsic2V0VGhyZXciXSgxLCAwKTsKICB9Cn0KCk1vZHVsZS5hc21HbG9iYWxBcmcgPSB7ICJNYXRoIjogTWF0aCwgIkludDhBcnJheSI6IEludDhBcnJheSwgIkludDE2QXJyYXkiOiBJbnQxNkFycmF5LCAiSW50MzJBcnJheSI6IEludDMyQXJyYXksICJVaW50OEFycmF5IjogVWludDhBcnJheSwgIlVpbnQxNkFycmF5IjogVWludDE2QXJyYXksICJVaW50MzJBcnJheSI6IFVpbnQzMkFycmF5LCAiRmxvYXQzMkFycmF5IjogRmxvYXQzMkFycmF5LCAiRmxvYXQ2NEFycmF5IjogRmxvYXQ2NEFycmF5LCAiTmFOIjogTmFOLCAiSW5maW5pdHkiOiBJbmZpbml0eSB9OwoKTW9kdWxlLmFzbUxpYnJhcnlBcmcgPSB7ICJhYm9ydCI6IGFib3J0LCAiYXNzZXJ0IjogYXNzZXJ0LCAiZW5sYXJnZU1lbW9yeSI6IGVubGFyZ2VNZW1vcnksICJnZXRUb3RhbE1lbW9yeSI6IGdldFRvdGFsTWVtb3J5LCAiYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnkiOiBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeSwgImFib3J0U3RhY2tPdmVyZmxvdyI6IGFib3J0U3RhY2tPdmVyZmxvdywgIm51bGxGdW5jX2lpIjogbnVsbEZ1bmNfaWksICJudWxsRnVuY19paWlpIjogbnVsbEZ1bmNfaWlpaSwgIm51bGxGdW5jX3YiOiBudWxsRnVuY192LCAibnVsbEZ1bmNfdmkiOiBudWxsRnVuY192aSwgIm51bGxGdW5jX3ZpaWlpIjogbnVsbEZ1bmNfdmlpaWksICJudWxsRnVuY192aWlpaWkiOiBudWxsRnVuY192aWlpaWksICJudWxsRnVuY192aWlpaWlpIjogbnVsbEZ1bmNfdmlpaWlpaSwgImludm9rZV9paSI6IGludm9rZV9paSwgImludm9rZV9paWlpIjogaW52b2tlX2lpaWksICJpbnZva2VfdiI6IGludm9rZV92LCAiaW52b2tlX3ZpIjogaW52b2tlX3ZpLCAiaW52b2tlX3ZpaWlpIjogaW52b2tlX3ZpaWlpLCAiaW52b2tlX3ZpaWlpaSI6IGludm9rZV92aWlpaWksICJpbnZva2VfdmlpaWlpaSI6IGludm9rZV92aWlpaWlpLCAiX0lNR19Mb2FkIjogX0lNR19Mb2FkLCAiX0lNR19Mb2FkX1JXIjogX0lNR19Mb2FkX1JXLCAiX01peF9GcmVlQ2h1bmsiOiBfTWl4X0ZyZWVDaHVuaywgIl9NaXhfSGFsdE11c2ljIjogX01peF9IYWx0TXVzaWMsICJfTWl4X0xvYWRXQVZfUlciOiBfTWl4X0xvYWRXQVZfUlcsICJfTWl4X1BsYXlDaGFubmVsIjogX01peF9QbGF5Q2hhbm5lbCwgIl9NaXhfUGxheU11c2ljIjogX01peF9QbGF5TXVzaWMsICJfU0RMX0Nsb3NlQXVkaW8iOiBfU0RMX0Nsb3NlQXVkaW8sICJfU0RMX0ZsaXAiOiBfU0RMX0ZsaXAsICJfU0RMX0ZyZWVSVyI6IF9TRExfRnJlZVJXLCAiX1NETF9HZXRUaWNrcyI6IF9TRExfR2V0VGlja3MsICJfU0RMX0luaXQiOiBfU0RMX0luaXQsICJfU0RMX0xvY2tTdXJmYWNlIjogX1NETF9Mb2NrU3VyZmFjZSwgIl9TRExfUGF1c2VBdWRpbyI6IF9TRExfUGF1c2VBdWRpbywgIl9TRExfUldGcm9tQ29uc3RNZW0iOiBfU0RMX1JXRnJvbUNvbnN0TWVtLCAiX1NETF9SV0Zyb21GaWxlIjogX1NETF9SV0Zyb21GaWxlLCAiX1NETF9TZXRWaWRlb01vZGUiOiBfU0RMX1NldFZpZGVvTW9kZSwgIl9TRExfVW5sb2NrU3VyZmFjZSI6IF9TRExfVW5sb2NrU3VyZmFjZSwgIl9TRExfVXBwZXJCbGl0IjogX1NETF9VcHBlckJsaXQsICJfU0RMX1VwcGVyQmxpdFNjYWxlZCI6IF9TRExfVXBwZXJCbGl0U2NhbGVkLCAiX1RURl9Gb250SGVpZ2h0IjogX1RURl9Gb250SGVpZ2h0LCAiX1RURl9SZW5kZXJUZXh0X1NvbGlkIjogX1RURl9SZW5kZXJUZXh0X1NvbGlkLCAiX1RURl9TaXplVGV4dCI6IF9UVEZfU2l6ZVRleHQsICJfX1pTdDE4dW5jYXVnaHRfZXhjZXB0aW9udiI6IF9fWlN0MTh1bmNhdWdodF9leGNlcHRpb252LCAiX19fYnVpbGRFbnZpcm9ubWVudCI6IF9fX2J1aWxkRW52aXJvbm1lbnQsICJfX19jeGFfYWxsb2NhdGVfZXhjZXB0aW9uIjogX19fY3hhX2FsbG9jYXRlX2V4Y2VwdGlvbiwgIl9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoIjogX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2gsICJfX19jeGFfdGhyb3ciOiBfX19jeGFfdGhyb3csICJfX19neHhfcGVyc29uYWxpdHlfdjAiOiBfX19neHhfcGVyc29uYWxpdHlfdjAsICJfX19sb2NrIjogX19fbG9jaywgIl9fX3Jlc3VtZUV4Y2VwdGlvbiI6IF9fX3Jlc3VtZUV4Y2VwdGlvbiwgIl9fX3NldEVyck5vIjogX19fc2V0RXJyTm8sICJfX19zeXNjYWxsMTQwIjogX19fc3lzY2FsbDE0MCwgIl9fX3N5c2NhbGwxNDYiOiBfX19zeXNjYWxsMTQ2LCAiX19fc3lzY2FsbDU0IjogX19fc3lzY2FsbDU0LCAiX19fc3lzY2FsbDYiOiBfX19zeXNjYWxsNiwgIl9fX3VubG9jayI6IF9fX3VubG9jaywgIl9lbXNjcmlwdGVuX2dldF9ub3ciOiBfZW1zY3JpcHRlbl9nZXRfbm93LCAiX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyI6IF9lbXNjcmlwdGVuX21lbWNweV9iaWcsICJfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wIjogX2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcCwgIl9lbXNjcmlwdGVuX3NldF9tYWluX2xvb3BfdGltaW5nIjogX2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcF90aW1pbmcsICJfZ2V0ZW52IjogX2dldGVudiwgIl9wdXRlbnYiOiBfcHV0ZW52LCAiZmx1c2hfTk9fRklMRVNZU1RFTSI6IGZsdXNoX05PX0ZJTEVTWVNURU0sICJEWU5BTUlDVE9QX1BUUiI6IERZTkFNSUNUT1BfUFRSLCAidGVtcERvdWJsZVB0ciI6IHRlbXBEb3VibGVQdHIsICJBQk9SVCI6IEFCT1JULCAiU1RBQ0tUT1AiOiBTVEFDS1RPUCwgIlNUQUNLX01BWCI6IFNUQUNLX01BWCB9OwovLyBFTVNDUklQVEVOX1NUQVJUX0FTTQp2YXIgYXNtID0gKC8qKiBAc3VwcHJlc3Mge3VzZWxlc3NDb2RlfSAqLyBmdW5jdGlvbihnbG9iYWwsIGVudiwgYnVmZmVyKSB7CidhbG1vc3QgYXNtJzsKCgogIHZhciBIRUFQOCA9IG5ldyBnbG9iYWwuSW50OEFycmF5KGJ1ZmZlcik7CiAgdmFyIEhFQVAxNiA9IG5ldyBnbG9iYWwuSW50MTZBcnJheShidWZmZXIpOwogIHZhciBIRUFQMzIgPSBuZXcgZ2xvYmFsLkludDMyQXJyYXkoYnVmZmVyKTsKICB2YXIgSEVBUFU4ID0gbmV3IGdsb2JhbC5VaW50OEFycmF5KGJ1ZmZlcik7CiAgdmFyIEhFQVBVMTYgPSBuZXcgZ2xvYmFsLlVpbnQxNkFycmF5KGJ1ZmZlcik7CiAgdmFyIEhFQVBVMzIgPSBuZXcgZ2xvYmFsLlVpbnQzMkFycmF5KGJ1ZmZlcik7CiAgdmFyIEhFQVBGMzIgPSBuZXcgZ2xvYmFsLkZsb2F0MzJBcnJheShidWZmZXIpOwogIHZhciBIRUFQRjY0ID0gbmV3IGdsb2JhbC5GbG9hdDY0QXJyYXkoYnVmZmVyKTsKCiAgdmFyIERZTkFNSUNUT1BfUFRSPWVudi5EWU5BTUlDVE9QX1BUUnwwOwogIHZhciB0ZW1wRG91YmxlUHRyPWVudi50ZW1wRG91YmxlUHRyfDA7CiAgdmFyIEFCT1JUPWVudi5BQk9SVHwwOwogIHZhciBTVEFDS1RPUD1lbnYuU1RBQ0tUT1B8MDsKICB2YXIgU1RBQ0tfTUFYPWVudi5TVEFDS19NQVh8MDsKCiAgdmFyIF9fVEhSRVdfXyA9IDA7CiAgdmFyIHRocmV3VmFsdWUgPSAwOwogIHZhciBzZXRqbXBJZCA9IDA7CiAgdmFyIHVuZGVmID0gMDsKICB2YXIgbmFuID0gZ2xvYmFsLk5hTiwgaW5mID0gZ2xvYmFsLkluZmluaXR5OwogIHZhciB0ZW1wSW50ID0gMCwgdGVtcEJpZ0ludCA9IDAsIHRlbXBCaWdJbnRTID0gMCwgdGVtcFZhbHVlID0gMCwgdGVtcERvdWJsZSA9IDAuMDsKICB2YXIgdGVtcFJldDAgPSAwOwoKICB2YXIgTWF0aF9mbG9vcj1nbG9iYWwuTWF0aC5mbG9vcjsKICB2YXIgTWF0aF9hYnM9Z2xvYmFsLk1hdGguYWJzOwogIHZhciBNYXRoX3NxcnQ9Z2xvYmFsLk1hdGguc3FydDsKICB2YXIgTWF0aF9wb3c9Z2xvYmFsLk1hdGgucG93OwogIHZhciBNYXRoX2Nvcz1nbG9iYWwuTWF0aC5jb3M7CiAgdmFyIE1hdGhfc2luPWdsb2JhbC5NYXRoLnNpbjsKICB2YXIgTWF0aF90YW49Z2xvYmFsLk1hdGgudGFuOwogIHZhciBNYXRoX2Fjb3M9Z2xvYmFsLk1hdGguYWNvczsKICB2YXIgTWF0aF9hc2luPWdsb2JhbC5NYXRoLmFzaW47CiAgdmFyIE1hdGhfYXRhbj1nbG9iYWwuTWF0aC5hdGFuOwogIHZhciBNYXRoX2F0YW4yPWdsb2JhbC5NYXRoLmF0YW4yOwogIHZhciBNYXRoX2V4cD1nbG9iYWwuTWF0aC5leHA7CiAgdmFyIE1hdGhfbG9nPWdsb2JhbC5NYXRoLmxvZzsKICB2YXIgTWF0aF9jZWlsPWdsb2JhbC5NYXRoLmNlaWw7CiAgdmFyIE1hdGhfaW11bD1nbG9iYWwuTWF0aC5pbXVsOwogIHZhciBNYXRoX21pbj1nbG9iYWwuTWF0aC5taW47CiAgdmFyIE1hdGhfbWF4PWdsb2JhbC5NYXRoLm1heDsKICB2YXIgTWF0aF9jbHozMj1nbG9iYWwuTWF0aC5jbHozMjsKICB2YXIgYWJvcnQ9ZW52LmFib3J0OwogIHZhciBhc3NlcnQ9ZW52LmFzc2VydDsKICB2YXIgZW5sYXJnZU1lbW9yeT1lbnYuZW5sYXJnZU1lbW9yeTsKICB2YXIgZ2V0VG90YWxNZW1vcnk9ZW52LmdldFRvdGFsTWVtb3J5OwogIHZhciBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeT1lbnYuYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnk7CiAgdmFyIGFib3J0U3RhY2tPdmVyZmxvdz1lbnYuYWJvcnRTdGFja092ZXJmbG93OwogIHZhciBudWxsRnVuY19paT1lbnYubnVsbEZ1bmNfaWk7CiAgdmFyIG51bGxGdW5jX2lpaWk9ZW52Lm51bGxGdW5jX2lpaWk7CiAgdmFyIG51bGxGdW5jX3Y9ZW52Lm51bGxGdW5jX3Y7CiAgdmFyIG51bGxGdW5jX3ZpPWVudi5udWxsRnVuY192aTsKICB2YXIgbnVsbEZ1bmNfdmlpaWk9ZW52Lm51bGxGdW5jX3ZpaWlpOwogIHZhciBudWxsRnVuY192aWlpaWk9ZW52Lm51bGxGdW5jX3ZpaWlpaTsKICB2YXIgbnVsbEZ1bmNfdmlpaWlpaT1lbnYubnVsbEZ1bmNfdmlpaWlpaTsKICB2YXIgaW52b2tlX2lpPWVudi5pbnZva2VfaWk7CiAgdmFyIGludm9rZV9paWlpPWVudi5pbnZva2VfaWlpaTsKICB2YXIgaW52b2tlX3Y9ZW52Lmludm9rZV92OwogIHZhciBpbnZva2Vfdmk9ZW52Lmludm9rZV92aTsKICB2YXIgaW52b2tlX3ZpaWlpPWVudi5pbnZva2VfdmlpaWk7CiAgdmFyIGludm9rZV92aWlpaWk9ZW52Lmludm9rZV92aWlpaWk7CiAgdmFyIGludm9rZV92aWlpaWlpPWVudi5pbnZva2VfdmlpaWlpaTsKICB2YXIgX0lNR19Mb2FkPWVudi5fSU1HX0xvYWQ7CiAgdmFyIF9JTUdfTG9hZF9SVz1lbnYuX0lNR19Mb2FkX1JXOwogIHZhciBfTWl4X0ZyZWVDaHVuaz1lbnYuX01peF9GcmVlQ2h1bms7CiAgdmFyIF9NaXhfSGFsdE11c2ljPWVudi5fTWl4X0hhbHRNdXNpYzsKICB2YXIgX01peF9Mb2FkV0FWX1JXPWVudi5fTWl4X0xvYWRXQVZfUlc7CiAgdmFyIF9NaXhfUGxheUNoYW5uZWw9ZW52Ll9NaXhfUGxheUNoYW5uZWw7CiAgdmFyIF9NaXhfUGxheU11c2ljPWVudi5fTWl4X1BsYXlNdXNpYzsKICB2YXIgX1NETF9DbG9zZUF1ZGlvPWVudi5fU0RMX0Nsb3NlQXVkaW87CiAgdmFyIF9TRExfRmxpcD1lbnYuX1NETF9GbGlwOwogIHZhciBfU0RMX0ZyZWVSVz1lbnYuX1NETF9GcmVlUlc7CiAgdmFyIF9TRExfR2V0VGlja3M9ZW52Ll9TRExfR2V0VGlja3M7CiAgdmFyIF9TRExfSW5pdD1lbnYuX1NETF9Jbml0OwogIHZhciBfU0RMX0xvY2tTdXJmYWNlPWVudi5fU0RMX0xvY2tTdXJmYWNlOwogIHZhciBfU0RMX1BhdXNlQXVkaW89ZW52Ll9TRExfUGF1c2VBdWRpbzsKICB2YXIgX1NETF9SV0Zyb21Db25zdE1lbT1lbnYuX1NETF9SV0Zyb21Db25zdE1lbTsKICB2YXIgX1NETF9SV0Zyb21GaWxlPWVudi5fU0RMX1JXRnJvbUZpbGU7CiAgdmFyIF9TRExfU2V0VmlkZW9Nb2RlPWVudi5fU0RMX1NldFZpZGVvTW9kZTsKICB2YXIgX1NETF9VbmxvY2tTdXJmYWNlPWVudi5fU0RMX1VubG9ja1N1cmZhY2U7CiAgdmFyIF9TRExfVXBwZXJCbGl0PWVudi5fU0RMX1VwcGVyQmxpdDsKICB2YXIgX1NETF9VcHBlckJsaXRTY2FsZWQ9ZW52Ll9TRExfVXBwZXJCbGl0U2NhbGVkOwogIHZhciBfVFRGX0ZvbnRIZWlnaHQ9ZW52Ll9UVEZfRm9udEhlaWdodDsKICB2YXIgX1RURl9SZW5kZXJUZXh0X1NvbGlkPWVudi5fVFRGX1JlbmRlclRleHRfU29saWQ7CiAgdmFyIF9UVEZfU2l6ZVRleHQ9ZW52Ll9UVEZfU2l6ZVRleHQ7CiAgdmFyIF9fWlN0MTh1bmNhdWdodF9leGNlcHRpb252PWVudi5fX1pTdDE4dW5jYXVnaHRfZXhjZXB0aW9udjsKICB2YXIgX19fYnVpbGRFbnZpcm9ubWVudD1lbnYuX19fYnVpbGRFbnZpcm9ubWVudDsKICB2YXIgX19fY3hhX2FsbG9jYXRlX2V4Y2VwdGlvbj1lbnYuX19fY3hhX2FsbG9jYXRlX2V4Y2VwdGlvbjsKICB2YXIgX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2g9ZW52Ll9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoOwogIHZhciBfX19jeGFfdGhyb3c9ZW52Ll9fX2N4YV90aHJvdzsKICB2YXIgX19fZ3h4X3BlcnNvbmFsaXR5X3YwPWVudi5fX19neHhfcGVyc29uYWxpdHlfdjA7CiAgdmFyIF9fX2xvY2s9ZW52Ll9fX2xvY2s7CiAgdmFyIF9fX3Jlc3VtZUV4Y2VwdGlvbj1lbnYuX19fcmVzdW1lRXhjZXB0aW9uOwogIHZhciBfX19zZXRFcnJObz1lbnYuX19fc2V0RXJyTm87CiAgdmFyIF9fX3N5c2NhbGwxNDA9ZW52Ll9fX3N5c2NhbGwxNDA7CiAgdmFyIF9fX3N5c2NhbGwxNDY9ZW52Ll9fX3N5c2NhbGwxNDY7CiAgdmFyIF9fX3N5c2NhbGw1ND1lbnYuX19fc3lzY2FsbDU0OwogIHZhciBfX19zeXNjYWxsNj1lbnYuX19fc3lzY2FsbDY7CiAgdmFyIF9fX3VubG9jaz1lbnYuX19fdW5sb2NrOwogIHZhciBfZW1zY3JpcHRlbl9nZXRfbm93PWVudi5fZW1zY3JpcHRlbl9nZXRfbm93OwogIHZhciBfZW1zY3JpcHRlbl9tZW1jcHlfYmlnPWVudi5fZW1zY3JpcHRlbl9tZW1jcHlfYmlnOwogIHZhciBfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wPWVudi5fZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wOwogIHZhciBfZW1zY3JpcHRlbl9zZXRfbWFpbl9sb29wX3RpbWluZz1lbnYuX2Vtc2NyaXB0ZW5fc2V0X21haW5fbG9vcF90aW1pbmc7CiAgdmFyIF9nZXRlbnY9ZW52Ll9nZXRlbnY7CiAgdmFyIF9wdXRlbnY9ZW52Ll9wdXRlbnY7CiAgdmFyIGZsdXNoX05PX0ZJTEVTWVNURU09ZW52LmZsdXNoX05PX0ZJTEVTWVNURU07CiAgdmFyIHRlbXBGbG9hdCA9IDAuMDsKCi8vIEVNU0NSSVBURU5fU1RBUlRfRlVOQ1MKCmZ1bmN0aW9uIHN0YWNrQWxsb2Moc2l6ZSkgewogIHNpemUgPSBzaXplfDA7CiAgdmFyIHJldCA9IDA7CiAgcmV0ID0gU1RBQ0tUT1A7CiAgU1RBQ0tUT1AgPSAoU1RBQ0tUT1AgKyBzaXplKXwwOwogIFNUQUNLVE9QID0gKFNUQUNLVE9QICsgMTUpJi0xNjsKICBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdyhzaXplfDApOwoKICByZXR1cm4gcmV0fDA7Cn0KZnVuY3Rpb24gc3RhY2tTYXZlKCkgewogIHJldHVybiBTVEFDS1RPUHwwOwp9CmZ1bmN0aW9uIHN0YWNrUmVzdG9yZSh0b3ApIHsKICB0b3AgPSB0b3B8MDsKICBTVEFDS1RPUCA9IHRvcDsKfQpmdW5jdGlvbiBlc3RhYmxpc2hTdGFja1NwYWNlKHN0YWNrQmFzZSwgc3RhY2tNYXgpIHsKICBzdGFja0Jhc2UgPSBzdGFja0Jhc2V8MDsKICBzdGFja01heCA9IHN0YWNrTWF4fDA7CiAgU1RBQ0tUT1AgPSBzdGFja0Jhc2U7CiAgU1RBQ0tfTUFYID0gc3RhY2tNYXg7Cn0KCmZ1bmN0aW9uIHNldFRocmV3KHRocmV3LCB2YWx1ZSkgewogIHRocmV3ID0gdGhyZXd8MDsKICB2YWx1ZSA9IHZhbHVlfDA7CiAgaWYgKChfX1RIUkVXX198MCkgPT0gMCkgewogICAgX19USFJFV19fID0gdGhyZXc7CiAgICB0aHJld1ZhbHVlID0gdmFsdWU7CiAgfQp9CgpmdW5jdGlvbiBzZXRUZW1wUmV0MCh2YWx1ZSkgewogIHZhbHVlID0gdmFsdWV8MDsKICB0ZW1wUmV0MCA9IHZhbHVlOwp9CmZ1bmN0aW9uIGdldFRlbXBSZXQwKCkgewogIHJldHVybiB0ZW1wUmV0MHwwOwp9CgpmdW5jdGlvbiBfX19jeHhfZ2xvYmFsX3Zhcl9pbml0KCkgewogdmFyICQwID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogJDAgPSAoX19abmFqKDEyMDAwMCl8MCk7CiBIRUFQMzJbMTMyXSA9ICQwOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9kMTZDbGVhcigpIHsKIHZhciAkMCA9IDAsICQxID0gMCwgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIgPSAwLCAkMjAgPSAwLCAkMyA9IDAsICQ0ID0gMCwgJDUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwOwogdmFyICQ5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDE2fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDE2fDApOwogJDAgPSAwOwogd2hpbGUoMSkgewogICQxID0gJDA7CiAgJDIgPSBIRUFQMzJbMTI3XXwwOwogICQzID0gKCQxfDApPCgkMnwwKTsKICBpZiAoISgkMykpIHsKICAgYnJlYWs7CiAgfQogICQ0ID0gSEVBUDMyWzEyNl18MDsKICAkNSA9ICQwOwogICQ2ID0gKCgkNSkgKyAxKXwwOwogICQwID0gJDY7CiAgJDcgPSAoKCQ0KSArICgkNSl8MCk7CiAgSEVBUDhbJDc+PjBdID0gMDsKICAkOCA9IEhFQVAzMlsxMjZdfDA7CiAgJDkgPSAkMDsKICAkMTAgPSAoKCQ5KSArIDEpfDA7CiAgJDAgPSAkMTA7CiAgJDExID0gKCgkOCkgKyAoJDkpfDApOwogIEhFQVA4WyQxMT4+MF0gPSAwOwogICQxMiA9IEhFQVAzMlsxMjZdfDA7CiAgJDEzID0gJDA7CiAgJDE0ID0gKCgkMTMpICsgMSl8MDsKICAkMCA9ICQxNDsKICAkMTUgPSAoKCQxMikgKyAoJDEzKXwwKTsKICBIRUFQOFskMTU+PjBdID0gMDsKICAkMTYgPSBIRUFQMzJbMTI2XXwwOwogICQxNyA9ICQwOwogICQxOCA9ICgoJDE2KSArICgkMTcpfDApOwogIEhFQVA4WyQxOD4+MF0gPSAtMTsKICAkMTkgPSAkMDsKICAkMjAgPSAoKCQxOSkgKyAxKXwwOwogICQwID0gJDIwOwogfQogU1RBQ0tUT1AgPSBzcDtyZXR1cm47Cn0KZnVuY3Rpb24gX19aMTFkMTZEcmF3RmFzdGlpaWlpKCQwLCQxLCQyLCQzLCQ0KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMDsKIHZhciAkMzAgPSAwLCAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwLCAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwOwogdmFyICQ1ID0gMCwgJDUwID0gMCwgJDUxID0gMCwgJDUyID0gMCwgJDUzID0gMCwgJDU0ID0gMCwgJDU1ID0gMCwgJDU2ID0gMCwgJDU3ID0gMCwgJDU4ID0gMCwgJDU5ID0gMCwgJDYgPSAwLCAkNjAgPSAwLCAkNjEgPSAwLCAkNjIgPSAwLCAkNjMgPSAwLCAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNyA9IDA7CiB2YXIgJDggPSAwLCAkOSA9IDAsICRvciRjb25kID0gMCwgJG9yJGNvbmQzID0gMCwgZGVzdCA9IDAsIGxhYmVsID0gMCwgc3AgPSAwLCBzcmMgPSAwLCBzdG9wID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMzJ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMzJ8MCk7CiAkNSA9ICQwOwogJDYgPSAkMTsKICQ3ID0gJDI7CiAkOCA9ICQzOwogJDkgPSAkNDsKICQxMyA9ICQ4OwogJDE0ID0gKCgkMTMpICsgMTYpfDA7CiAkOCA9ICQxNDsKICQxNSA9ICQ5OwogJDE2ID0gKCgkMTUpICsgMTYpfDA7CiAkOSA9ICQxNjsKICQxNyA9ICQ1OwogJDE4ID0gKCQxN3wwKT09KDApOwogJDE5ID0gJDg7CiAkMjAgPSAoJDE5fDApPCgwKTsKICRvciRjb25kID0gJDE4IHwgJDIwOwogJDIxID0gJDk7CiAkMjIgPSAoJDIxfDApPCgwKTsKICRvciRjb25kMyA9ICRvciRjb25kIHwgJDIyOwogaWYgKCRvciRjb25kMykgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDIzID0gJDg7CiAkMjQgPSBIRUFQMzJbMTIzXXwwOwogJDI1ID0gKCQyM3wwKT4oJDI0fDApOwogaWYgKCQyNSkgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDI2ID0gJDk7CiAkMjcgPSBIRUFQMzJbMTI0XXwwOwogJDI4ID0gKCQyNnwwKT4oJDI3fDApOwogaWYgKCQyOCkgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDI5ID0gJDg7CiAkMzAgPSAkOTsKICQzMSA9IEhFQVAzMlsxMjhdfDA7CiAkMzIgPSBNYXRoX2ltdWwoJDMwLCAkMzEpfDA7CiAkMzMgPSAoKCQyOSkgKyAoJDMyKSl8MDsKICQxMSA9ICQzMzsKICQzNCA9ICQ2OwogJDM1ID0gJDM0IDw8IDQ7CiAkMzYgPSAkNzsKICQzNyA9ICQzNiA8PCA0OwogJDM4ID0gSEVBUDMyWzEzMl18MDsKICQzOSA9ICQ1OwogJDQwID0gKCgkMzgpICsgKCgkMzkqMjQpfDApfDApOwogJDQxID0gSEVBUDMyWyQ0MD4+Ml18MDsKICQ0MiA9IE1hdGhfaW11bCgkMzcsICQ0MSl8MDsKICQ0MyA9ICgoJDM1KSArICgkNDIpKXwwOwogJDEyID0gJDQzOwogJDEwID0gMDsKIHdoaWxlKDEpIHsKICAkNDQgPSAkMTA7CiAgJDQ1ID0gKCQ0NHwwKTwoMTYpOwogIGlmICghKCQ0NSkpIHsKICAgYnJlYWs7CiAgfQogICQ0NiA9IEhFQVAzMlsxMjZdfDA7CiAgJDQ3ID0gJDExOwogICQ0OCA9ICgoJDQ2KSArICgkNDc8PDIpfDApOwogICQ0OSA9IEhFQVAzMlsxMzJdfDA7CiAgJDUwID0gJDU7CiAgJDUxID0gKCgkNDkpICsgKCgkNTAqMjQpfDApfDApOwogICQ1MiA9ICgoKCQ1MSkpICsgMTZ8MCk7CiAgJDUzID0gSEVBUDMyWyQ1Mj4+Ml18MDsKICAkNTQgPSAkMTI7CiAgJDU1ID0gKCgkNTMpICsgKCQ1NDw8Mil8MCk7CiAgZGVzdD0kNDg7IHNyYz0kNTU7IHN0b3A9ZGVzdCs2NHwwOyBkbyB7IEhFQVAzMltkZXN0Pj4yXT1IRUFQMzJbc3JjPj4yXXwwOyBkZXN0PWRlc3QrNHwwOyBzcmM9c3JjKzR8MDsgfSB3aGlsZSAoKGRlc3R8MCkgPCAoc3RvcHwwKSk7CiAgJDU2ID0gSEVBUDMyWzEyOF18MDsKICAkNTcgPSAkMTE7CiAgJDU4ID0gKCgkNTcpICsgKCQ1NikpfDA7CiAgJDExID0gJDU4OwogICQ1OSA9IEhFQVAzMlsxMzJdfDA7CiAgJDYwID0gJDU7CiAgJDYxID0gKCgkNTkpICsgKCgkNjAqMjQpfDApfDApOwogICQ2MiA9IEhFQVAzMlskNjE+PjJdfDA7CiAgJDYzID0gJDEyOwogICQ2NCA9ICgoJDYzKSArICgkNjIpKXwwOwogICQxMiA9ICQ2NDsKICAkNjUgPSAkMTA7CiAgJDY2ID0gKCgkNjUpICsgMSl8MDsKICAkMTAgPSAkNjY7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfX1oxMmQxNkRyYXdBbHBoYWlpaWlpYigkMCwkMSwkMiwkMywkNCwkNSkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogJDUgPSAkNXwwOwogdmFyICQxMCA9IDAsICQxMDAgPSAwLCAkMTAxID0gMCwgJDEwMiA9IDAsICQxMDMgPSAwLCAkMTA0ID0gMCwgJDEwNSA9IDAsICQxMDYgPSAwLCAkMTA3ID0gMCwgJDEwOCA9IDAsICQxMDkgPSAwLCAkMTEgPSAwLCAkMTEwID0gMCwgJDExMSA9IDAsICQxMTIgPSAwLCAkMTEzID0gMCwgJDExNCA9IDAsICQxMTUgPSAwLCAkMTE2ID0gMCwgJDExNyA9IDA7CiB2YXIgJDExOCA9IDAsICQxMTkgPSAwLCAkMTIgPSAwLCAkMTIwID0gMCwgJDEyMSA9IDAsICQxMjIgPSAwLCAkMTIzID0gMCwgJDEyNCA9IDAsICQxMjUgPSAwLCAkMTI2ID0gMCwgJDEyNyA9IDAsICQxMjggPSAwLCAkMTI5ID0gMCwgJDEzID0gMCwgJDEzMCA9IDAsICQxMzEgPSAwLCAkMTMyID0gMCwgJDEzMyA9IDAsICQxMzQgPSAwLCAkMTM1ID0gMDsKIHZhciAkMTM2ID0gMCwgJDEzNyA9IDAsICQxMzggPSAwLCAkMTM5ID0gMCwgJDE0ID0gMCwgJDE0MCA9IDAsICQxNDEgPSAwLCAkMTQyID0gMCwgJDE0MyA9IDAsICQxNDQgPSAwLCAkMTQ1ID0gMCwgJDE0NiA9IDAsICQxNDcgPSAwLCAkMTQ4ID0gMCwgJDE0OSA9IDAsICQxNSA9IDAsICQxNTAgPSAwLCAkMTUxID0gMCwgJDE1MiA9IDAsICQxNTMgPSAwOwogdmFyICQxNTQgPSAwLCAkMTU1ID0gMCwgJDE1NiA9IDAsICQxNTcgPSAwLCAkMTU4ID0gMCwgJDE1OSA9IDAsICQxNiA9IDAsICQxNjAgPSAwLCAkMTYxID0gMCwgJDE2MiA9IDAsICQxNjMgPSAwLCAkMTY0ID0gMCwgJDE2NSA9IDAsICQxNjYgPSAwLCAkMTY3ID0gMCwgJDE2OCA9IDAsICQxNjkgPSAwLCAkMTcgPSAwLCAkMTcwID0gMCwgJDE3MSA9IDA7CiB2YXIgJDE3MiA9IDAsICQxNzMgPSAwLCAkMTc0ID0gMCwgJDE3NSA9IDAsICQxNzYgPSAwLCAkMTc3ID0gMCwgJDE3OCA9IDAsICQxNzkgPSAwLCAkMTggPSAwLCAkMTgwID0gMCwgJDE4MSA9IDAsICQxODIgPSAwLCAkMTgzID0gMCwgJDE4NCA9IDAsICQxODUgPSAwLCAkMTg2ID0gMCwgJDE4NyA9IDAsICQxODggPSAwLCAkMTg5ID0gMCwgJDE5ID0gMDsKIHZhciAkMTkwID0gMCwgJDE5MSA9IDAsICQxOTIgPSAwLCAkMTkzID0gMCwgJDE5NCA9IDAsICQxOTUgPSAwLCAkMTk2ID0gMCwgJDE5NyA9IDAsICQxOTggPSAwLCAkMTk5ID0gMCwgJDIwID0gMCwgJDIwMCA9IDAsICQyMDEgPSAwLCAkMjAyID0gMCwgJDIwMyA9IDAsICQyMDQgPSAwLCAkMjA1ID0gMCwgJDIwNiA9IDAsICQyMDcgPSAwLCAkMjA4ID0gMDsKIHZhciAkMjA5ID0gMCwgJDIxID0gMCwgJDIxMCA9IDAsICQyMTEgPSAwLCAkMjEyID0gMCwgJDIxMyA9IDAsICQyMTQgPSAwLCAkMjE1ID0gMCwgJDIxNiA9IDAsICQyMTcgPSAwLCAkMjE4ID0gMCwgJDIxOSA9IDAsICQyMiA9IDAsICQyMjAgPSAwLCAkMjIxID0gMCwgJDIyMiA9IDAsICQyMjMgPSAwLCAkMjI0ID0gMCwgJDIyNSA9IDAsICQyMjYgPSAwOwogdmFyICQyMjcgPSAwLCAkMjI4ID0gMCwgJDIyOSA9IDAsICQyMyA9IDAsICQyMzAgPSAwLCAkMjMxID0gMCwgJDIzMiA9IDAsICQyMzMgPSAwLCAkMjM0ID0gMCwgJDIzNSA9IDAsICQyMzYgPSAwLCAkMjM3ID0gMCwgJDIzOCA9IDAsICQyMzkgPSAwLCAkMjQgPSAwLCAkMjQwID0gMCwgJDI0MSA9IDAsICQyNDIgPSAwLCAkMjQzID0gMCwgJDI0NCA9IDA7CiB2YXIgJDI0NSA9IDAsICQyNDYgPSAwLCAkMjQ3ID0gMCwgJDI0OCA9IDAsICQyNDkgPSAwLCAkMjUgPSAwLCAkMjUwID0gMCwgJDI1MSA9IDAsICQyNTIgPSAwLCAkMjUzID0gMCwgJDI1NCA9IDAsICQyNTUgPSAwLCAkMjU2ID0gMCwgJDI1NyA9IDAsICQyNTggPSAwLCAkMjU5ID0gMCwgJDI2ID0gMCwgJDI2MCA9IDAsICQyNjEgPSAwLCAkMjYyID0gMDsKIHZhciAkMjYzID0gMCwgJDI2NCA9IDAsICQyNjUgPSAwLCAkMjY2ID0gMCwgJDI2NyA9IDAsICQyNjggPSAwLCAkMjY5ID0gMCwgJDI3ID0gMCwgJDI3MCA9IDAsICQyNzEgPSAwLCAkMjcyID0gMCwgJDI3MyA9IDAsICQyNzQgPSAwLCAkMjc1ID0gMCwgJDI3NiA9IDAsICQyNzcgPSAwLCAkMjc4ID0gMCwgJDI3OSA9IDAsICQyOCA9IDAsICQyODAgPSAwOwogdmFyICQyODEgPSAwLCAkMjgyID0gMCwgJDI4MyA9IDAsICQyODQgPSAwLCAkMjg1ID0gMCwgJDI4NiA9IDAsICQyODcgPSAwLCAkMjg4ID0gMCwgJDI4OSA9IDAsICQyOSA9IDAsICQyOTAgPSAwLCAkMjkxID0gMCwgJDI5MiA9IDAsICQyOTMgPSAwLCAkMjk0ID0gMCwgJDI5NSA9IDAsICQyOTYgPSAwLCAkMjk3ID0gMCwgJDI5OCA9IDAsICQyOTkgPSAwOwogdmFyICQzMCA9IDAsICQzMDAgPSAwLCAkMzAxID0gMCwgJDMwMiA9IDAsICQzMDMgPSAwLCAkMzA0ID0gMCwgJDMwNSA9IDAsICQzMDYgPSAwLCAkMzA3ID0gMCwgJDMwOCA9IDAsICQzMDkgPSAwLCAkMzEgPSAwLCAkMzEwID0gMCwgJDMxMSA9IDAsICQzMTIgPSAwLCAkMzEzID0gMCwgJDMxNCA9IDAsICQzMTUgPSAwLCAkMzE2ID0gMCwgJDMxNyA9IDA7CiB2YXIgJDMxOCA9IDAsICQzMTkgPSAwLCAkMzIgPSAwLCAkMzIwID0gMCwgJDMyMSA9IDAsICQzMjIgPSAwLCAkMzIzID0gMCwgJDMyNCA9IDAsICQzMjUgPSAwLCAkMzI2ID0gMCwgJDMyNyA9IDAsICQzMjggPSAwLCAkMzI5ID0gMCwgJDMzID0gMCwgJDMzMCA9IDAsICQzMzEgPSAwLCAkMzMyID0gMCwgJDMzMyA9IDAsICQzMzQgPSAwLCAkMzM1ID0gMDsKIHZhciAkMzM2ID0gMCwgJDMzNyA9IDAsICQzMzggPSAwLCAkMzM5ID0gMCwgJDM0ID0gMCwgJDM0MCA9IDAsICQzNDEgPSAwLCAkMzQyID0gMCwgJDM0MyA9IDAsICQzNDQgPSAwLCAkMzQ1ID0gMCwgJDM0NiA9IDAsICQzNDcgPSAwLCAkMzQ4ID0gMCwgJDM0OSA9IDAsICQzNSA9IDAsICQzNTAgPSAwLCAkMzUxID0gMCwgJDM1MiA9IDAsICQzNTMgPSAwOwogdmFyICQzNTQgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNTAgPSAwLCAkNTEgPSAwLCAkNTIgPSAwLCAkNTMgPSAwLCAkNTQgPSAwOwogdmFyICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMCwgJDYzID0gMCwgJDY0ID0gMCwgJDY1ID0gMCwgJDY2ID0gMCwgJDY3ID0gMCwgJDY4ID0gMCwgJDY5ID0gMCwgJDcgPSAwLCAkNzAgPSAwLCAkNzEgPSAwLCAkNzIgPSAwOwogdmFyICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgxID0gMCwgJDgyID0gMCwgJDgzID0gMCwgJDg0ID0gMCwgJDg1ID0gMCwgJDg2ID0gMCwgJDg3ID0gMCwgJDg4ID0gMCwgJDg5ID0gMCwgJDkgPSAwLCAkOTAgPSAwOwogdmFyICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDAsICRvciRjb25kID0gMCwgJG9yJGNvbmQzID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDQ4fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDQ4fDApOwogJDYgPSAkMDsKICQ3ID0gJDE7CiAkOCA9ICQyOwogJDkgPSAkMzsKICQxMCA9ICQ0OwogJDE5ID0gJDUmMTsKICQxMSA9ICQxOTsKICQyMCA9ICQ5OwogJDIxID0gKCgkMjApICsgMTYpfDA7CiAkOSA9ICQyMTsKICQyMiA9ICQxMDsKICQyMyA9ICgoJDIyKSArIDE2KXwwOwogJDEwID0gJDIzOwogJDI0ID0gJDExOwogJDI1ID0gJDI0JjE7CiAkMjYgPSAkMjUgPyA4IDogMTY7CiAkMTIgPSAkMjY7CiAkMjcgPSAkNjsKICQyOCA9ICgkMjd8MCk9PSgwKTsKICQyOSA9ICQ5OwogJDMwID0gKCQyOXwwKTwoMCk7CiAkb3IkY29uZCA9ICQyOCB8ICQzMDsKICQzMSA9ICQxMDsKICQzMiA9ICgkMzF8MCk8KDApOwogJG9yJGNvbmQzID0gJG9yJGNvbmQgfCAkMzI7CiBpZiAoJG9yJGNvbmQzKSB7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9CiAkMzMgPSAkOTsKICQzNCA9IEhFQVAzMlsxMjNdfDA7CiAkMzUgPSAoJDMzfDApPigkMzR8MCk7CiBpZiAoJDM1KSB7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9CiAkMzYgPSAkMTA7CiAkMzcgPSBIRUFQMzJbMTI0XXwwOwogJDM4ID0gKCQzNnwwKT4oJDM3fDApOwogaWYgKCQzOCkgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDM5ID0gSEVBUDMyWzEzMl18MDsKICQ0MCA9ICQ2OwogJDQxID0gKCgkMzkpICsgKCgkNDAqMjQpfDApfDApOwogJDQyID0gKCgoJDQxKSkgKyAxMnwwKTsKICQ0MyA9IEhFQVAzMlskNDI+PjJdfDA7CiAkMTMgPSAkNDM7CiAkNDQgPSBIRUFQMzJbMTI2XXwwOwogJDE2ID0gJDQ0OwogJDQ1ID0gSEVBUDMyWzEzMl18MDsKICQ0NiA9ICQ2OwogJDQ3ID0gKCgkNDUpICsgKCgkNDYqMjQpfDApfDApOwogJDQ4ID0gKCgoJDQ3KSkgKyAxNnwwKTsKICQ0OSA9IEhFQVAzMlskNDg+PjJdfDA7CiAkMTcgPSAkNDk7CiAkNTAgPSAkOTsKICQ1MSA9ICQxMDsKICQ1MiA9IEhFQVAzMlsxMjhdfDA7CiAkNTMgPSBNYXRoX2ltdWwoJDUxLCAkNTIpfDA7CiAkNTQgPSAoKCQ1MCkgKyAoJDUzKSl8MDsKICQ1NSA9ICQ1NDw8MjsKICQ1NiA9ICQxNjsKICQ1NyA9ICgoJDU2KSArICgkNTUpfDApOwogJDE2ID0gJDU3OwogJDU4ID0gJDc7CiAkNTkgPSAkMTI7CiAkNjAgPSBNYXRoX2ltdWwoJDU4LCAkNTkpfDA7CiAkNjEgPSAkODsKICQ2MiA9ICQxMjsKICQ2MyA9IE1hdGhfaW11bCgkNjEsICQ2Mil8MDsKICQ2NCA9IEhFQVAzMlsxMzJdfDA7CiAkNjUgPSAkNjsKICQ2NiA9ICgoJDY0KSArICgoJDY1KjI0KXwwKXwwKTsKICQ2NyA9IEhFQVAzMlskNjY+PjJdfDA7CiAkNjggPSBNYXRoX2ltdWwoJDYzLCAkNjcpfDA7CiAkNjkgPSAoKCQ2MCkgKyAoJDY4KSl8MDsKICQ3MCA9ICQ2OTw8MjsKICQ3MSA9ICQxNzsKICQ3MiA9ICgoJDcxKSArICgkNzApfDApOwogJDE3ID0gJDcyOwogJDE0ID0gMDsKIHdoaWxlKDEpIHsKICAkNzMgPSAkMTQ7CiAgJDc0ID0gJDEyOwogICQ3NSA9ICgkNzN8MCk8KCQ3NHwwKTsKICBpZiAoISgkNzUpKSB7CiAgIGJyZWFrOwogIH0KICAkMTUgPSAwOwogIHdoaWxlKDEpIHsKICAgJDc2ID0gJDE1OwogICAkNzcgPSAkMTI7CiAgICQ3OCA9ICgkNzZ8MCk8KCQ3N3wwKTsKICAgaWYgKCEoJDc4KSkgewogICAgYnJlYWs7CiAgIH0KICAgJDc5ID0gJDE3OwogICAkODAgPSAoKCgkNzkpKSArIDN8MCk7CiAgICQ4MSA9IEhFQVA4WyQ4MD4+MF18MDsKICAgJDgyID0gJDgxJjI1NTsKICAgc3dpdGNoICgkODJ8MCkgewogICBjYXNlIDI1NDogY2FzZSAyNTU6ICB7CiAgICAkODMgPSAkMTc7CiAgICAkODQgPSBIRUFQOFskODM+PjBdfDA7CiAgICAkODUgPSAkMTY7CiAgICBIRUFQOFskODU+PjBdID0gJDg0OwogICAgJDg2ID0gJDE2OwogICAgJDg3ID0gKCgoJDg2KSkgKyAxfDApOwogICAgJDE2ID0gJDg3OwogICAgJDg4ID0gJDE3OwogICAgJDg5ID0gKCgoJDg4KSkgKyAxfDApOwogICAgJDE3ID0gJDg5OwogICAgJDkwID0gJDE3OwogICAgJDkxID0gSEVBUDhbJDkwPj4wXXwwOwogICAgJDkyID0gJDE2OwogICAgSEVBUDhbJDkyPj4wXSA9ICQ5MTsKICAgICQ5MyA9ICQxNjsKICAgICQ5NCA9ICgoKCQ5MykpICsgMXwwKTsKICAgICQxNiA9ICQ5NDsKICAgICQ5NSA9ICQxNzsKICAgICQ5NiA9ICgoKCQ5NSkpICsgMXwwKTsKICAgICQxNyA9ICQ5NjsKICAgICQ5NyA9ICQxNzsKICAgICQ5OCA9IEhFQVA4WyQ5Nz4+MF18MDsKICAgICQ5OSA9ICQxNjsKICAgIEhFQVA4WyQ5OT4+MF0gPSAkOTg7CiAgICAkMTAwID0gJDE2OwogICAgJDEwMSA9ICgoKCQxMDApKSArIDJ8MCk7CiAgICAkMTYgPSAkMTAxOwogICAgJDEwMiA9ICQxNzsKICAgICQxMDMgPSAoKCgkMTAyKSkgKyAyfDApOwogICAgJDE3ID0gJDEwMzsKICAgIGJyZWFrOwogICB9CiAgIGNhc2UgMTogY2FzZSAwOiAgewogICAgJDEwNCA9ICQxNjsKICAgICQxMDUgPSAoKCgkMTA0KSkgKyA0fDApOwogICAgJDE2ID0gJDEwNTsKICAgICQxMDYgPSAkMTc7CiAgICAkMTA3ID0gKCgoJDEwNikpICsgNHwwKTsKICAgICQxNyA9ICQxMDc7CiAgICBicmVhazsKICAgfQogICBjYXNlIDEyODogY2FzZSAxMjc6ICB7CiAgICAkMTA4ID0gJDE3OwogICAgJDEwOSA9IEhFQVA4WyQxMDg+PjBdfDA7CiAgICAkMTEwID0gJDEwOSYyNTU7CiAgICAkMTExID0gJDExMCA+PiAxOwogICAgJDExMiA9ICQxNjsKICAgICQxMTMgPSBIRUFQOFskMTEyPj4wXXwwOwogICAgJDExNCA9ICQxMTMmMjU1OwogICAgJDExNSA9ICQxMTQgPj4gMTsKICAgICQxMTYgPSAoKCQxMTEpICsgKCQxMTUpKXwwOwogICAgJDExNyA9ICQxMTYmMjU1OwogICAgJDExOCA9ICQxNjsKICAgIEhFQVA4WyQxMTg+PjBdID0gJDExNzsKICAgICQxMTkgPSAkMTY7CiAgICAkMTIwID0gKCgoJDExOSkpICsgMXwwKTsKICAgICQxNiA9ICQxMjA7CiAgICAkMTIxID0gJDE3OwogICAgJDEyMiA9ICgoKCQxMjEpKSArIDF8MCk7CiAgICAkMTcgPSAkMTIyOwogICAgJDEyMyA9ICQxNzsKICAgICQxMjQgPSBIRUFQOFskMTIzPj4wXXwwOwogICAgJDEyNSA9ICQxMjQmMjU1OwogICAgJDEyNiA9ICQxMjUgPj4gMTsKICAgICQxMjcgPSAkMTY7CiAgICAkMTI4ID0gSEVBUDhbJDEyNz4+MF18MDsKICAgICQxMjkgPSAkMTI4JjI1NTsKICAgICQxMzAgPSAkMTI5ID4+IDE7CiAgICAkMTMxID0gKCgkMTI2KSArICgkMTMwKSl8MDsKICAgICQxMzIgPSAkMTMxJjI1NTsKICAgICQxMzMgPSAkMTY7CiAgICBIRUFQOFskMTMzPj4wXSA9ICQxMzI7CiAgICAkMTM0ID0gJDE2OwogICAgJDEzNSA9ICgoKCQxMzQpKSArIDF8MCk7CiAgICAkMTYgPSAkMTM1OwogICAgJDEzNiA9ICQxNzsKICAgICQxMzcgPSAoKCgkMTM2KSkgKyAxfDApOwogICAgJDE3ID0gJDEzNzsKICAgICQxMzggPSAkMTc7CiAgICAkMTM5ID0gSEVBUDhbJDEzOD4+MF18MDsKICAgICQxNDAgPSAkMTM5JjI1NTsKICAgICQxNDEgPSAkMTQwID4+IDE7CiAgICAkMTQyID0gJDE2OwogICAgJDE0MyA9IEhFQVA4WyQxNDI+PjBdfDA7CiAgICAkMTQ0ID0gJDE0MyYyNTU7CiAgICAkMTQ1ID0gJDE0NCA+PiAxOwogICAgJDE0NiA9ICgoJDE0MSkgKyAoJDE0NSkpfDA7CiAgICAkMTQ3ID0gJDE0NiYyNTU7CiAgICAkMTQ4ID0gJDE2OwogICAgSEVBUDhbJDE0OD4+MF0gPSAkMTQ3OwogICAgJDE0OSA9ICQxNjsKICAgICQxNTAgPSAoKCgkMTQ5KSkgKyAyfDApOwogICAgJDE2ID0gJDE1MDsKICAgICQxNTEgPSAkMTc7CiAgICAkMTUyID0gKCgoJDE1MSkpICsgMnwwKTsKICAgICQxNyA9ICQxNTI7CiAgICBicmVhazsKICAgfQogICBjYXNlIDY0OiBjYXNlIDYzOiAgewogICAgJDE1MyA9ICQxNzsKICAgICQxNTQgPSBIRUFQOFskMTUzPj4wXXwwOwogICAgJDE1NSA9ICQxNTQmMjU1OwogICAgJDE1NiA9ICQxNTUgPj4gMjsKICAgICQxNTcgPSAkMTY7CiAgICAkMTU4ID0gSEVBUDhbJDE1Nz4+MF18MDsKICAgICQxNTkgPSAkMTU4JjI1NTsKICAgICQxNjAgPSAkMTU5ID4+IDI7CiAgICAkMTYxID0gKCgkMTU2KSArICgkMTYwKSl8MDsKICAgICQxNjIgPSAkMTY7CiAgICAkMTYzID0gSEVBUDhbJDE2Mj4+MF18MDsKICAgICQxNjQgPSAkMTYzJjI1NTsKICAgICQxNjUgPSAkMTY0ID4+IDE7CiAgICAkMTY2ID0gKCgkMTYxKSArICgkMTY1KSl8MDsKICAgICQxNjcgPSAkMTY2JjI1NTsKICAgICQxNjggPSAkMTY7CiAgICBIRUFQOFskMTY4Pj4wXSA9ICQxNjc7CiAgICAkMTY5ID0gJDE2OwogICAgJDE3MCA9ICgoKCQxNjkpKSArIDF8MCk7CiAgICAkMTYgPSAkMTcwOwogICAgJDE3MSA9ICQxNzsKICAgICQxNzIgPSAoKCgkMTcxKSkgKyAxfDApOwogICAgJDE3ID0gJDE3MjsKICAgICQxNzMgPSAkMTc7CiAgICAkMTc0ID0gSEVBUDhbJDE3Mz4+MF18MDsKICAgICQxNzUgPSAkMTc0JjI1NTsKICAgICQxNzYgPSAkMTc1ID4+IDI7CiAgICAkMTc3ID0gJDE2OwogICAgJDE3OCA9IEhFQVA4WyQxNzc+PjBdfDA7CiAgICAkMTc5ID0gJDE3OCYyNTU7CiAgICAkMTgwID0gJDE3OSA+PiAyOwogICAgJDE4MSA9ICgoJDE3NikgKyAoJDE4MCkpfDA7CiAgICAkMTgyID0gJDE2OwogICAgJDE4MyA9IEhFQVA4WyQxODI+PjBdfDA7CiAgICAkMTg0ID0gJDE4MyYyNTU7CiAgICAkMTg1ID0gJDE4NCA+PiAxOwogICAgJDE4NiA9ICgoJDE4MSkgKyAoJDE4NSkpfDA7CiAgICAkMTg3ID0gJDE4NiYyNTU7CiAgICAkMTg4ID0gJDE2OwogICAgSEVBUDhbJDE4OD4+MF0gPSAkMTg3OwogICAgJDE4OSA9ICQxNjsKICAgICQxOTAgPSAoKCgkMTg5KSkgKyAxfDApOwogICAgJDE2ID0gJDE5MDsKICAgICQxOTEgPSAkMTc7CiAgICAkMTkyID0gKCgoJDE5MSkpICsgMXwwKTsKICAgICQxNyA9ICQxOTI7CiAgICAkMTkzID0gJDE3OwogICAgJDE5NCA9IEhFQVA4WyQxOTM+PjBdfDA7CiAgICAkMTk1ID0gJDE5NCYyNTU7CiAgICAkMTk2ID0gJDE5NSA+PiAyOwogICAgJDE5NyA9ICQxNjsKICAgICQxOTggPSBIRUFQOFskMTk3Pj4wXXwwOwogICAgJDE5OSA9ICQxOTgmMjU1OwogICAgJDIwMCA9ICQxOTkgPj4gMjsKICAgICQyMDEgPSAoKCQxOTYpICsgKCQyMDApKXwwOwogICAgJDIwMiA9ICQxNjsKICAgICQyMDMgPSBIRUFQOFskMjAyPj4wXXwwOwogICAgJDIwNCA9ICQyMDMmMjU1OwogICAgJDIwNSA9ICQyMDQgPj4gMTsKICAgICQyMDYgPSAoKCQyMDEpICsgKCQyMDUpKXwwOwogICAgJDIwNyA9ICQyMDYmMjU1OwogICAgJDIwOCA9ICQxNjsKICAgIEhFQVA4WyQyMDg+PjBdID0gJDIwNzsKICAgICQyMDkgPSAkMTY7CiAgICAkMjEwID0gKCgoJDIwOSkpICsgMnwwKTsKICAgICQxNiA9ICQyMTA7CiAgICAkMjExID0gJDE3OwogICAgJDIxMiA9ICgoKCQyMTEpKSArIDJ8MCk7CiAgICAkMTcgPSAkMjEyOwogICAgYnJlYWs7CiAgIH0KICAgY2FzZSAxOTI6IGNhc2UgMTkxOiAgewogICAgJDIxMyA9ICQxNjsKICAgICQyMTQgPSBIRUFQOFskMjEzPj4wXXwwOwogICAgJDIxNSA9ICQyMTQmMjU1OwogICAgJDIxNiA9ICQyMTUgPj4gMjsKICAgICQyMTcgPSAkMTc7CiAgICAkMjE4ID0gSEVBUDhbJDIxNz4+MF18MDsKICAgICQyMTkgPSAkMjE4JjI1NTsKICAgICQyMjAgPSAkMjE5ID4+IDI7CiAgICAkMjIxID0gKCgkMjE2KSArICgkMjIwKSl8MDsKICAgICQyMjIgPSAkMTc7CiAgICAkMjIzID0gSEVBUDhbJDIyMj4+MF18MDsKICAgICQyMjQgPSAkMjIzJjI1NTsKICAgICQyMjUgPSAkMjI0ID4+IDE7CiAgICAkMjI2ID0gKCgkMjIxKSArICgkMjI1KSl8MDsKICAgICQyMjcgPSAkMjI2JjI1NTsKICAgICQyMjggPSAkMTY7CiAgICBIRUFQOFskMjI4Pj4wXSA9ICQyMjc7CiAgICAkMjI5ID0gJDE2OwogICAgJDIzMCA9ICgoKCQyMjkpKSArIDF8MCk7CiAgICAkMTYgPSAkMjMwOwogICAgJDIzMSA9ICQxNzsKICAgICQyMzIgPSAoKCgkMjMxKSkgKyAxfDApOwogICAgJDE3ID0gJDIzMjsKICAgICQyMzMgPSAkMTY7CiAgICAkMjM0ID0gSEVBUDhbJDIzMz4+MF18MDsKICAgICQyMzUgPSAkMjM0JjI1NTsKICAgICQyMzYgPSAkMjM1ID4+IDI7CiAgICAkMjM3ID0gJDE3OwogICAgJDIzOCA9IEhFQVA4WyQyMzc+PjBdfDA7CiAgICAkMjM5ID0gJDIzOCYyNTU7CiAgICAkMjQwID0gJDIzOSA+PiAyOwogICAgJDI0MSA9ICgoJDIzNikgKyAoJDI0MCkpfDA7CiAgICAkMjQyID0gJDE3OwogICAgJDI0MyA9IEhFQVA4WyQyNDI+PjBdfDA7CiAgICAkMjQ0ID0gJDI0MyYyNTU7CiAgICAkMjQ1ID0gJDI0NCA+PiAxOwogICAgJDI0NiA9ICgoJDI0MSkgKyAoJDI0NSkpfDA7CiAgICAkMjQ3ID0gJDI0NiYyNTU7CiAgICAkMjQ4ID0gJDE2OwogICAgSEVBUDhbJDI0OD4+MF0gPSAkMjQ3OwogICAgJDI0OSA9ICQxNjsKICAgICQyNTAgPSAoKCgkMjQ5KSkgKyAxfDApOwogICAgJDE2ID0gJDI1MDsKICAgICQyNTEgPSAkMTc7CiAgICAkMjUyID0gKCgoJDI1MSkpICsgMXwwKTsKICAgICQxNyA9ICQyNTI7CiAgICAkMjUzID0gJDE2OwogICAgJDI1NCA9IEhFQVA4WyQyNTM+PjBdfDA7CiAgICAkMjU1ID0gJDI1NCYyNTU7CiAgICAkMjU2ID0gJDI1NSA+PiAyOwogICAgJDI1NyA9ICQxNzsKICAgICQyNTggPSBIRUFQOFskMjU3Pj4wXXwwOwogICAgJDI1OSA9ICQyNTgmMjU1OwogICAgJDI2MCA9ICQyNTkgPj4gMjsKICAgICQyNjEgPSAoKCQyNTYpICsgKCQyNjApKXwwOwogICAgJDI2MiA9ICQxNzsKICAgICQyNjMgPSBIRUFQOFskMjYyPj4wXXwwOwogICAgJDI2NCA9ICQyNjMmMjU1OwogICAgJDI2NSA9ICQyNjQgPj4gMTsKICAgICQyNjYgPSAoKCQyNjEpICsgKCQyNjUpKXwwOwogICAgJDI2NyA9ICQyNjYmMjU1OwogICAgJDI2OCA9ICQxNjsKICAgIEhFQVA4WyQyNjg+PjBdID0gJDI2NzsKICAgICQyNjkgPSAkMTY7CiAgICAkMjcwID0gKCgoJDI2OSkpICsgMnwwKTsKICAgICQxNiA9ICQyNzA7CiAgICAkMjcxID0gJDE3OwogICAgJDI3MiA9ICgoKCQyNzEpKSArIDJ8MCk7CiAgICAkMTcgPSAkMjcyOwogICAgYnJlYWs7CiAgIH0KICAgZGVmYXVsdDogewogICAgJDI3MyA9ICQxNzsKICAgICQyNzQgPSAoKCgkMjczKSkgKyAzfDApOwogICAgJDI3NSA9IEhFQVA4WyQyNzQ+PjBdfDA7CiAgICAkMTggPSAkMjc1OwogICAgJDI3NiA9ICQxNzsKICAgICQyNzcgPSBIRUFQOFskMjc2Pj4wXXwwOwogICAgJDI3OCA9ICQyNzcmMjU1OwogICAgJDI3OSA9ICQxODsKICAgICQyODAgPSAkMjc5JjI1NTsKICAgICQyODEgPSBNYXRoX2ltdWwoJDI3OCwgJDI4MCl8MDsKICAgICQyODIgPSAkMTY7CiAgICAkMjgzID0gSEVBUDhbJDI4Mj4+MF18MDsKICAgICQyODQgPSAkMjgzJjI1NTsKICAgICQyODUgPSAkMTg7CiAgICAkMjg2ID0gJDI4NSYyNTU7CiAgICAkMjg3ID0gKDI1NSAtICgkMjg2KSl8MDsKICAgICQyODggPSBNYXRoX2ltdWwoJDI4NCwgJDI4Nyl8MDsKICAgICQyODkgPSAoKCQyODEpICsgKCQyODgpKXwwOwogICAgJDI5MCA9ICgoJDI4OXwwKSAvIDI1NSkmLTE7CiAgICAkMjkxID0gJDI5MCYyNTU7CiAgICAkMjkyID0gJDE2OwogICAgSEVBUDhbJDI5Mj4+MF0gPSAkMjkxOwogICAgJDI5MyA9ICQxNjsKICAgICQyOTQgPSAoKCgkMjkzKSkgKyAxfDApOwogICAgJDE2ID0gJDI5NDsKICAgICQyOTUgPSAkMTc7CiAgICAkMjk2ID0gKCgoJDI5NSkpICsgMXwwKTsKICAgICQxNyA9ICQyOTY7CiAgICAkMjk3ID0gJDE3OwogICAgJDI5OCA9IEhFQVA4WyQyOTc+PjBdfDA7CiAgICAkMjk5ID0gJDI5OCYyNTU7CiAgICAkMzAwID0gJDE4OwogICAgJDMwMSA9ICQzMDAmMjU1OwogICAgJDMwMiA9IE1hdGhfaW11bCgkMjk5LCAkMzAxKXwwOwogICAgJDMwMyA9ICQxNjsKICAgICQzMDQgPSBIRUFQOFskMzAzPj4wXXwwOwogICAgJDMwNSA9ICQzMDQmMjU1OwogICAgJDMwNiA9ICQxODsKICAgICQzMDcgPSAkMzA2JjI1NTsKICAgICQzMDggPSAoMjU1IC0gKCQzMDcpKXwwOwogICAgJDMwOSA9IE1hdGhfaW11bCgkMzA1LCAkMzA4KXwwOwogICAgJDMxMCA9ICgoJDMwMikgKyAoJDMwOSkpfDA7CiAgICAkMzExID0gKCgkMzEwfDApIC8gMjU1KSYtMTsKICAgICQzMTIgPSAkMzExJjI1NTsKICAgICQzMTMgPSAkMTY7CiAgICBIRUFQOFskMzEzPj4wXSA9ICQzMTI7CiAgICAkMzE0ID0gJDE2OwogICAgJDMxNSA9ICgoKCQzMTQpKSArIDF8MCk7CiAgICAkMTYgPSAkMzE1OwogICAgJDMxNiA9ICQxNzsKICAgICQzMTcgPSAoKCgkMzE2KSkgKyAxfDApOwogICAgJDE3ID0gJDMxNzsKICAgICQzMTggPSAkMTc7CiAgICAkMzE5ID0gSEVBUDhbJDMxOD4+MF18MDsKICAgICQzMjAgPSAkMzE5JjI1NTsKICAgICQzMjEgPSAkMTg7CiAgICAkMzIyID0gJDMyMSYyNTU7CiAgICAkMzIzID0gTWF0aF9pbXVsKCQzMjAsICQzMjIpfDA7CiAgICAkMzI0ID0gJDE2OwogICAgJDMyNSA9IEhFQVA4WyQzMjQ+PjBdfDA7CiAgICAkMzI2ID0gJDMyNSYyNTU7CiAgICAkMzI3ID0gJDE4OwogICAgJDMyOCA9ICQzMjcmMjU1OwogICAgJDMyOSA9ICgyNTUgLSAoJDMyOCkpfDA7CiAgICAkMzMwID0gTWF0aF9pbXVsKCQzMjYsICQzMjkpfDA7CiAgICAkMzMxID0gKCgkMzIzKSArICgkMzMwKSl8MDsKICAgICQzMzIgPSAoKCQzMzF8MCkgLyAyNTUpJi0xOwogICAgJDMzMyA9ICQzMzImMjU1OwogICAgJDMzNCA9ICQxNjsKICAgIEhFQVA4WyQzMzQ+PjBdID0gJDMzMzsKICAgICQzMzUgPSAkMTY7CiAgICAkMzM2ID0gKCgoJDMzNSkpICsgMnwwKTsKICAgICQxNiA9ICQzMzY7CiAgICAkMzM3ID0gJDE3OwogICAgJDMzOCA9ICgoKCQzMzcpKSArIDJ8MCk7CiAgICAkMTcgPSAkMzM4OwogICB9CiAgIH0KICAgJDMzOSA9ICQxNTsKICAgJDM0MCA9ICgoJDMzOSkgKyAxKXwwOwogICAkMTUgPSAkMzQwOwogIH0KICAkMzQxID0gSEVBUDMyWzEzMV18MDsKICAkMzQyID0gJDE2OwogICQzNDMgPSAoKCQzNDIpICsgKCQzNDEpfDApOwogICQxNiA9ICQzNDM7CiAgJDM0NCA9ICQxMzsKICAkMzQ1ID0gJDE3OwogICQzNDYgPSAoKCQzNDUpICsgKCQzNDQpfDApOwogICQxNyA9ICQzNDY7CiAgJDM0NyA9ICQxMTsKICAkMzQ4ID0gJDM0NyYxOwogIGlmICgkMzQ4KSB7CiAgICQzNDkgPSAkMTY7CiAgICQzNTAgPSAoKCgkMzQ5KSkgKyAzMnwwKTsKICAgJDE2ID0gJDM1MDsKICAgJDM1MSA9ICQxNzsKICAgJDM1MiA9ICgoKCQzNTEpKSArIDMyfDApOwogICAkMTcgPSAkMzUyOwogIH0KICAkMzUzID0gJDE0OwogICQzNTQgPSAoKCQzNTMpICsgMSl8MDsKICAkMTQgPSAkMzU0OwogfQogU1RBQ0tUT1AgPSBzcDtyZXR1cm47Cn0KZnVuY3Rpb24gX2QxNkRyYXdDaGlwKCQwLCQxLCQyLCQzLCQ0KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMDsKIHZhciAkMzAgPSAwLCAkMzEgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDMyfDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDMyfDApOwogJDUgPSAkMDsKICQ2ID0gJDE7CiAkNyA9ICQyOwogJDggPSAkMzsKICQ5ID0gJDQ7CiAkMTAgPSBIRUFQMzJbMTMyXXwwOwogJDExID0gJDU7CiAkMTIgPSAoKCQxMCkgKyAoKCQxMSoyNCl8MCl8MCk7CiAkMTMgPSAoKCgkMTIpKSArIDIwfDApOwogJDE0ID0gSEVBUDMyWyQxMz4+Ml18MDsKICQxNSA9ICQ3OwogJDE2ID0gSEVBUDMyWzEzMl18MDsKICQxNyA9ICQ1OwogJDE4ID0gKCgkMTYpICsgKCgkMTcqMjQpfDApfDApOwogJDE5ID0gSEVBUDMyWyQxOD4+Ml18MDsKICQyMCA9ICQxOSA+Pj4gNDsKICQyMSA9IE1hdGhfaW11bCgkMTUsICQyMCl8MDsKICQyMiA9ICQ2OwogJDIzID0gKCgkMjEpICsgKCQyMikpfDA7CiAkMjQgPSAoKCQxNCkgKyAoJDIzKXwwKTsKICQyNSA9IEhFQVA4WyQyND4+MF18MDsKICQyNiA9ICQyNSYxOwogJDI3ID0gJDU7CiAkMjggPSAkNjsKICQyOSA9ICQ3OwogJDMwID0gJDg7CiAkMzEgPSAkOTsKIGlmICgkMjYpIHsKICBfX1oxMmQxNkRyYXdBbHBoYWlpaWlpYigkMjcsJDI4LCQyOSwkMzAsJDMxLDApOwogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfSBlbHNlIHsKICBfX1oxMWQxNkRyYXdGYXN0aWlpaWkoJDI3LCQyOCwkMjksJDMwLCQzMSk7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9Cn0KZnVuY3Rpb24gX2QxNkRyYXdDaGlwOCgkMCwkMSwkMiwkMywkNCkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogdmFyICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMzJ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMzJ8MCk7CiAkNSA9ICQwOwogJDYgPSAkMTsKICQ3ID0gJDI7CiAkOCA9ICQzOwogJDkgPSAkNDsKICQxMCA9ICQ1OwogJDExID0gJDY7CiAkMTIgPSAkNzsKICQxMyA9ICQ4OwogJDE0ID0gJDk7CiBfX1oxMmQxNkRyYXdBbHBoYWlpaWlpYigkMTAsJDExLCQxMiwkMTMsJDE0LDEpOwogU1RBQ0tUT1AgPSBzcDtyZXR1cm47Cn0KZnVuY3Rpb24gX2QxNkRyYXdBcmVhKCQwLCQxLCQyLCQzLCQ0LCQ1LCQ2LCQ3LCQ4KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiAkNSA9ICQ1fDA7CiAkNiA9ICQ2fDA7CiAkNyA9ICQ3fDA7CiAkOCA9ICQ4fDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMDsKIHZhciAkMzAgPSAwLCAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwLCAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwOwogdmFyICQ1MCA9IDAsICQ1MSA9IDAsICQ1MiA9IDAsICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2MCA9IDAsICQ2MSA9IDAsICQ2MiA9IDAsICQ2MyA9IDAsICQ2NCA9IDAsICQ2NSA9IDAsICQ2NiA9IDAsICQ2NyA9IDAsICQ2OCA9IDAsICQ2OSA9IDA7CiB2YXIgJDkgPSAwLCAkb3IkY29uZCA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyA0OHwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdyg0OHwwKTsKICQ5ID0gJDA7CiAkMTAgPSAkMTsKICQxMSA9ICQyOwogJDEyID0gJDM7CiAkMTMgPSAkNDsKICQxNCA9ICQ1OwogJDE1ID0gJDY7CiAkMTYgPSAkNzsKICQxNyA9ICQ4OwogJDIwID0gJDE2OwogJDIxID0gKCQyMHwwKSE9KDApOwogJDIyID0gJDE3OwogJDIzID0gKCQyMnwwKSE9KDApOwogJG9yJGNvbmQgPSAkMjEgJiAkMjM7CiBpZiAoISgkb3IkY29uZCkpIHsKICAkMjQgPSBIRUFQMzJbMTMyXXwwOwogICQyNSA9ICQ5OwogICQyNiA9ICgoJDI0KSArICgoJDI1KjI0KXwwKXwwKTsKICAkMjcgPSBIRUFQMzJbJDI2Pj4yXXwwOwogICQyOCA9ICQyNyA+Pj4gNDsKICAkMTYgPSAkMjg7CiAgJDI5ID0gSEVBUDMyWzEzMl18MDsKICAkMzAgPSAkOTsKICAkMzEgPSAoKCQyOSkgKyAoKCQzMCoyNCl8MCl8MCk7CiAgJDMyID0gKCgoJDMxKSkgKyA0fDApOwogICQzMyA9IEhFQVAzMlskMzI+PjJdfDA7CiAgJDM0ID0gJDMzID4+PiA0OwogICQxNyA9ICQzNDsKIH0KICQzNSA9ICQxMjsKICQzNiA9ICgkMzV8MCkhPSgwKTsKIGlmICghKCQzNikpIHsKICAkMzcgPSAkMTY7CiAgJDEyID0gJDM3OwogfQogJDM4ID0gJDEzOwogJDM5ID0gKCQzOHwwKSE9KDApOwogaWYgKCEoJDM5KSkgewogICQ0MCA9ICQxNzsKICAkMTMgPSAkNDA7CiB9CiAkMTkgPSAwOwogd2hpbGUoMSkgewogICQ0MSA9ICQxOTsKICAkNDIgPSAkMTM7CiAgJDQzID0gKCQ0MXwwKTwoJDQyfDApOwogIGlmICghKCQ0MykpIHsKICAgYnJlYWs7CiAgfQogICQxOCA9IDA7CiAgd2hpbGUoMSkgewogICAkNDQgPSAkMTg7CiAgICQ0NSA9ICQxMjsKICAgJDQ2ID0gKCQ0NHwwKTwoJDQ1fDApOwogICBpZiAoISgkNDYpKSB7CiAgICBicmVhazsKICAgfQogICAkNDcgPSAkOTsKICAgJDQ4ID0gJDE0OwogICAkNDkgPSAkMTg7CiAgICQ1MCA9ICQxNjsKICAgJDUxID0gKCgkNDl8MCkgJSAoJDUwfDApKSYtMTsKICAgJDUyID0gKCgkNDgpICsgKCQ1MSkpfDA7CiAgICQ1MyA9ICQxNTsKICAgJDU0ID0gJDE5OwogICAkNTUgPSAkMTc7CiAgICQ1NiA9ICgoJDU0fDApICUgKCQ1NXwwKSkmLTE7CiAgICQ1NyA9ICgoJDUzKSArICgkNTYpKXwwOwogICAkNTggPSAkMTA7CiAgICQ1OSA9ICQxODsKICAgJDYwID0gJDU5IDw8IDQ7CiAgICQ2MSA9ICgoJDU4KSArICgkNjApKXwwOwogICAkNjIgPSAkMTE7CiAgICQ2MyA9ICQxOTsKICAgJDY0ID0gJDYzIDw8IDQ7CiAgICQ2NSA9ICgoJDYyKSArICgkNjQpKXwwOwogICBfZDE2RHJhd0NoaXAoJDQ3LCQ1MiwkNTcsJDYxLCQ2NSk7CiAgICQ2NiA9ICQxODsKICAgJDY3ID0gKCgkNjYpICsgMSl8MDsKICAgJDE4ID0gJDY3OwogIH0KICAkNjggPSAkMTk7CiAgJDY5ID0gKCgkNjgpICsgMSl8MDsKICAkMTkgPSAkNjk7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfZDE2RHJhd1RleHQ4KCQwLCQxLCQyLCQzLCQ0LCQ1KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiAkNSA9ICQ1fDA7CiB2YXIgJCRvZmYgPSAwLCAkMTAgPSAwLCAkMTAwID0gMCwgJDEwMSA9IDAsICQxMDIgPSAwLCAkMTAzID0gMCwgJDEwNCA9IDAsICQxMDUgPSAwLCAkMTA2ID0gMCwgJDEwNyA9IDAsICQxMDggPSAwLCAkMTA5ID0gMCwgJDExID0gMCwgJDExMCA9IDAsICQxMTEgPSAwLCAkMTEyID0gMCwgJDExMyA9IDAsICQxMTQgPSAwLCAkMTE1ID0gMCwgJDExNiA9IDA7CiB2YXIgJDExNyA9IDAsICQxMTggPSAwLCAkMTE5ID0gMCwgJDEyID0gMCwgJDEyMCA9IDAsICQxMjEgPSAwLCAkMTIyID0gMCwgJDEyMyA9IDAsICQxMjQgPSAwLCAkMTI1ID0gMCwgJDEyNiA9IDAsICQxMjcgPSAwLCAkMTI4ID0gMCwgJDEyOSA9IDAsICQxMyA9IDAsICQxMzAgPSAwLCAkMTMxID0gMCwgJDEzMiA9IDAsICQxMzMgPSAwLCAkMTM0ID0gMDsKIHZhciAkMTM1ID0gMCwgJDEzNiA9IDAsICQxMzcgPSAwLCAkMTM4ID0gMCwgJDEzOSA9IDAsICQxNCA9IDAsICQxNDAgPSAwLCAkMTQxID0gMCwgJDE0MiA9IDAsICQxNDMgPSAwLCAkMTQ0ID0gMCwgJDE0NSA9IDAsICQxNDYgPSAwLCAkMTQ3ID0gMCwgJDE0OCA9IDAsICQxNDkgPSAwLCAkMTUgPSAwLCAkMTUwID0gMCwgJDE1MSA9IDAsICQxNTIgPSAwOwogdmFyICQxNTMgPSAwLCAkMTU0ID0gMCwgJDE1NSA9IDAsICQxNTYgPSAwLCAkMTU3ID0gMCwgJDE1OCA9IDAsICQxNTkgPSAwLCAkMTYgPSAwLCAkMTYwID0gMCwgJDE2MSA9IDAsICQxNjIgPSAwLCAkMTYzID0gMCwgJDE2NCA9IDAsICQxNjUgPSAwLCAkMTY2ID0gMCwgJDE2NyA9IDAsICQxNjggPSAwLCAkMTY5ID0gMCwgJDE3ID0gMCwgJDE3MCA9IDA7CiB2YXIgJDE3MSA9IDAsICQxNzIgPSAwLCAkMTczID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMDsKIHZhciAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNTAgPSAwLCAkNTEgPSAwLCAkNTIgPSAwLCAkNTMgPSAwLCAkNTQgPSAwOwogdmFyICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMCwgJDYzID0gMCwgJDY0ID0gMCwgJDY1ID0gMCwgJDY2ID0gMCwgJDY3ID0gMCwgJDY4ID0gMCwgJDY5ID0gMCwgJDcgPSAwLCAkNzAgPSAwLCAkNzEgPSAwLCAkNzIgPSAwOwogdmFyICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgxID0gMCwgJDgyID0gMCwgJDgzID0gMCwgJDg0ID0gMCwgJDg1ID0gMCwgJDg2ID0gMCwgJDg3ID0gMCwgJDg4ID0gMCwgJDg5ID0gMCwgJDkgPSAwLCAkOTAgPSAwOwogdmFyICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDAsICRvciRjb25kID0gMCwgJG9yJGNvbmQzID0gMCwgJG9yJGNvbmQ1ID0gMCwgJHN3aXRjaCA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyA4MHwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdyg4MHwwKTsKICQ2ID0gJDA7CiAkNyA9ICQxOwogJDggPSAkMjsKICQ5ID0gJDM7CiAkMTAgPSAkNDsKICQxMSA9ICQ1OwogJDI0ID0gJDc7CiAkMjUgPSAkMjQ8PDE7CiAkNyA9ICQyNTsKICQyNiA9ICQxMDsKICQyNyA9ICgoJDI2KSArIDE2KXwwOwogJDEwID0gJDI3OwogJDI4ID0gJDExOwogJDI5ID0gKCgkMjgpICsgMTYpfDA7CiAkMTEgPSAkMjk7CiAkMTIgPSAwOwogJDMwID0gJDg7CiAkMzEgPSAkMzAgJiAyNTU7CiAkMTMgPSAkMzE7CiAkMzIgPSAkODsKICQzMyA9ICQzMiA+Pj4gODsKICQzNCA9ICQzMyAmIDI1NTsKICQxNCA9ICQzNDsKICQzNSA9ICQ4OwogJDM2ID0gJDM1ID4+PiAxNjsKICQzNyA9ICQzNiAmIDI1NTsKICQxNSA9ICQzNzsKICQzOCA9ICQ2OwogJDM5ID0gKCQzOHwwKT09KDApOwogJDQwID0gJDExOwogJDQxID0gKCQ0MHwwKTwoMCk7CiAkb3IkY29uZCA9ICQzOSB8ICQ0MTsKIGlmICgkb3IkY29uZCkgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDQyID0gJDExOwogJDQzID0gSEVBUDMyWzEyNF18MDsKICQ0NCA9ICgkNDJ8MCk+KCQ0M3wwKTsKIGlmICgkNDQpIHsKICBTVEFDS1RPUCA9IHNwO3JldHVybjsKIH0KICQ0NSA9IEhFQVAzMlsxMzJdfDA7CiAkNDYgPSAkNjsKICQ0NyA9ICgoJDQ1KSArICgoJDQ2KjI0KXwwKXwwKTsKICQ0OCA9ICgoKCQ0NykpICsgMTJ8MCk7CiAkNDkgPSBIRUFQMzJbJDQ4Pj4yXXwwOwogJDE2ID0gJDQ5OwogJDE3ID0gMDsKIHdoaWxlKDEpIHsKICAkNTAgPSAkMTc7CiAgJDUxID0gKCQ1MHwwKTwoMTAwKTsKICBpZiAoISgkNTEpKSB7CiAgIGxhYmVsID0gMjY7CiAgIGJyZWFrOwogIH0KICAkNTIgPSAkOTsKICAkNTMgPSAkMTc7CiAgJDU0ID0gKCgkNTIpICsgKCQ1Myl8MCk7CiAgJDU1ID0gSEVBUDhbJDU0Pj4wXXwwOwogICQ1NiA9ICQ1NSA8PCAyNCA+PiAyNDsKICAkMjAgPSAkNTY7CiAgJDU3ID0gJDIwOwogICQ1OCA9ICgkNTd8MCk9PSgwKTsKICBpZiAoJDU4KSB7CiAgIGxhYmVsID0gMjY7CiAgIGJyZWFrOwogIH0KICAkNTkgPSAkMjA7CiAgJDYwID0gKCQ1OXwwKSE9KDEyNik7CiAgJDYxID0gJDEyOwogICQ2MiA9ICgkNjF8MCkhPSgwKTsKICAkb3IkY29uZDMgPSAkNjAgfCAkNjI7CiAgaWYgKCRvciRjb25kMykgewogICAkNjMgPSAkMjA7CiAgICQ2NCA9ICgkNjN8MCk+PSgzMik7CiAgICQ2NSA9ICQyMDsKICAgJDY2ID0gKCQ2NXwwKTw9KDEyNik7CiAgICRvciRjb25kNSA9ICQ2NCAmICQ2NjsKICAgaWYgKCRvciRjb25kNSkgewogICAgJDY3ID0gJDIwOwogICAgJDY4ID0gKCgkNjcpIC0gMzIpfDA7CiAgICAkMjAgPSAkNjg7CiAgICAkNjkgPSAkMTA7CiAgICAkNzAgPSBIRUFQMzJbMTIzXXwwOwogICAgJDcxID0gKCQ2OXwwKT4oJDcwfDApOwogICAgaWYgKCQ3MSkgewogICAgIGxhYmVsID0gMjY7CiAgICAgYnJlYWs7CiAgICB9CiAgICAkNzIgPSBIRUFQMzJbMTI2XXwwOwogICAgJDczID0gJDEwOwogICAgJDc0ID0gJDExOwogICAgJDc1ID0gSEVBUDMyWzEyOF18MDsKICAgICQ3NiA9IE1hdGhfaW11bCgkNzQsICQ3NSl8MDsKICAgICQ3NyA9ICgoJDczKSArICgkNzYpKXwwOwogICAgJDc4ID0gJDc3PDwyOwogICAgJDc5ID0gKCgkNzIpICsgKCQ3OCl8MCk7CiAgICAkMjIgPSAkNzk7CiAgICAkODAgPSBIRUFQMzJbMTMyXXwwOwogICAgJDgxID0gJDY7CiAgICAkODIgPSAoKCQ4MCkgKyAoKCQ4MSoyNCl8MCl8MCk7CiAgICAkODMgPSAoKCgkODIpKSArIDE2fDApOwogICAgJDg0ID0gSEVBUDMyWyQ4Mz4+Ml18MDsKICAgICQ4NSA9ICQyMDsKICAgICQ4NiA9ICQ4NTw8MzsKICAgICQ4NyA9ICQ3OwogICAgJDg4ID0gJDEyOwogICAgJDg5ID0gKCgkODcpICsgKCQ4OCkpfDA7CiAgICAkOTAgPSAkODk8PDM7CiAgICAkOTEgPSBIRUFQMzJbMTMyXXwwOwogICAgJDkyID0gJDY7CiAgICAkOTMgPSAoKCQ5MSkgKyAoKCQ5MioyNCl8MCl8MCk7CiAgICAkOTQgPSBIRUFQMzJbJDkzPj4yXXwwOwogICAgJDk1ID0gTWF0aF9pbXVsKCQ5MCwgJDk0KXwwOwogICAgJDk2ID0gKCgkODYpICsgKCQ5NSkpfDA7CiAgICAkOTcgPSAkOTY8PDI7CiAgICAkOTggPSAoKCQ4NCkgKyAoJDk3KXwwKTsKICAgICQyMyA9ICQ5ODsKICAgICQyMSA9IDA7CiAgICAkMTggPSAwOwogICAgd2hpbGUoMSkgewogICAgICQ5OSA9ICQxODsKICAgICAkMTAwID0gKCQ5OXwwKTwoOCk7CiAgICAgaWYgKCEoJDEwMCkpIHsKICAgICAgYnJlYWs7CiAgICAgfQogICAgICQxOSA9IDA7CiAgICAgd2hpbGUoMSkgewogICAgICAkMTAxID0gJDE5OwogICAgICAkMTAyID0gKCQxMDF8MCk8KDgpOwogICAgICBpZiAoISgkMTAyKSkgewogICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgJDEwMyA9ICQyMzsKICAgICAgJDEwNCA9ICgoKCQxMDMpKSArIDN8MCk7CiAgICAgICQxMDUgPSBIRUFQOFskMTA0Pj4wXXwwOwogICAgICAkMTA2ID0gJDEwNSYyNTU7CiAgICAgICQkb2ZmID0gKCgkMTA2KSArIC0yNTQpfDA7CiAgICAgICRzd2l0Y2ggPSAoJCRvZmY+Pj4wKTwoMik7CiAgICAgIGRvIHsKICAgICAgIGlmICgkc3dpdGNoKSB7CiAgICAgICAgJDEwNyA9ICQxOTsKICAgICAgICAkMTA4ID0gJDIxOwogICAgICAgICQxMDkgPSAoJDEwN3wwKT4oJDEwOHwwKTsKICAgICAgICBpZiAoJDEwOSkgewogICAgICAgICAkMTEwID0gJDE5OwogICAgICAgICAkMjEgPSAkMTEwOwogICAgICAgIH0KICAgICAgICAkMTExID0gJDEwOwogICAgICAgICQxMTIgPSAoJDExMXwwKT4oMCk7CiAgICAgICAgaWYgKCQxMTIpIHsKICAgICAgICAgJDExMyA9ICQyMzsKICAgICAgICAgJDExNCA9IEhFQVA4WyQxMTM+PjBdfDA7CiAgICAgICAgICQxMTUgPSAkMTE0JjI1NTsKICAgICAgICAgJDExNiA9ICQxMzsKICAgICAgICAgJDExNyA9ICQxMTUgJiAkMTE2OwogICAgICAgICAkMTE4ID0gJDExNyYyNTU7CiAgICAgICAgICQxMTkgPSAkMjI7CiAgICAgICAgIEhFQVA4WyQxMTk+PjBdID0gJDExODsKICAgICAgICAgJDEyMCA9ICQyMjsKICAgICAgICAgJDEyMSA9ICgoKCQxMjApKSArIDF8MCk7CiAgICAgICAgICQyMiA9ICQxMjE7CiAgICAgICAgICQxMjIgPSAkMjM7CiAgICAgICAgICQxMjMgPSAoKCgkMTIyKSkgKyAxfDApOwogICAgICAgICAkMjMgPSAkMTIzOwogICAgICAgICAkMTI0ID0gJDIzOwogICAgICAgICAkMTI1ID0gSEVBUDhbJDEyND4+MF18MDsKICAgICAgICAgJDEyNiA9ICQxMjUmMjU1OwogICAgICAgICAkMTI3ID0gJDE0OwogICAgICAgICAkMTI4ID0gJDEyNiAmICQxMjc7CiAgICAgICAgICQxMjkgPSAkMTI4JjI1NTsKICAgICAgICAgJDEzMCA9ICQyMjsKICAgICAgICAgSEVBUDhbJDEzMD4+MF0gPSAkMTI5OwogICAgICAgICAkMTMxID0gJDIyOwogICAgICAgICAkMTMyID0gKCgoJDEzMSkpICsgMXwwKTsKICAgICAgICAgJDIyID0gJDEzMjsKICAgICAgICAgJDEzMyA9ICQyMzsKICAgICAgICAgJDEzNCA9ICgoKCQxMzMpKSArIDF8MCk7CiAgICAgICAgICQyMyA9ICQxMzQ7CiAgICAgICAgICQxMzUgPSAkMjM7CiAgICAgICAgICQxMzYgPSBIRUFQOFskMTM1Pj4wXXwwOwogICAgICAgICAkMTM3ID0gJDEzNiYyNTU7CiAgICAgICAgICQxMzggPSAkMTU7CiAgICAgICAgICQxMzkgPSAkMTM3ICYgJDEzODsKICAgICAgICAgJDE0MCA9ICQxMzkmMjU1OwogICAgICAgICAkMTQxID0gJDIyOwogICAgICAgICBIRUFQOFskMTQxPj4wXSA9ICQxNDA7CiAgICAgICAgICQxNDIgPSAkMjI7CiAgICAgICAgICQxNDMgPSAoKCgkMTQyKSkgKyAyfDApOwogICAgICAgICAkMjIgPSAkMTQzOwogICAgICAgICAkMTQ0ID0gJDIzOwogICAgICAgICAkMTQ1ID0gKCgoJDE0NCkpICsgMnwwKTsKICAgICAgICAgJDIzID0gJDE0NTsKICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgJDE0NiA9ICQyMjsKICAgICAgICAgJDE0NyA9ICgoKCQxNDYpKSArIDR8MCk7CiAgICAgICAgICQyMiA9ICQxNDc7CiAgICAgICAgICQxNDggPSAkMjM7CiAgICAgICAgICQxNDkgPSAoKCgkMTQ4KSkgKyA0fDApOwogICAgICAgICAkMjMgPSAkMTQ5OwogICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICB9IGVsc2UgewogICAgICAgICQxNTAgPSAkMjI7CiAgICAgICAgJDE1MSA9ICgoKCQxNTApKSArIDR8MCk7CiAgICAgICAgJDIyID0gJDE1MTsKICAgICAgICAkMTUyID0gJDIzOwogICAgICAgICQxNTMgPSAoKCgkMTUyKSkgKyA0fDApOwogICAgICAgICQyMyA9ICQxNTM7CiAgICAgICB9CiAgICAgIH0gd2hpbGUoMCk7CiAgICAgICQxNTQgPSAkMTk7CiAgICAgICQxNTUgPSAoKCQxNTQpICsgMSl8MDsKICAgICAgJDE5ID0gJDE1NTsKICAgICB9CiAgICAgJDE1NiA9IEhFQVAzMlsxMzFdfDA7CiAgICAgJDE1NyA9ICgoJDE1NikgKyAzMil8MDsKICAgICAkMTU4ID0gJDIyOwogICAgICQxNTkgPSAoKCQxNTgpICsgKCQxNTcpfDApOwogICAgICQyMiA9ICQxNTk7CiAgICAgJDE2MCA9ICQxNjsKICAgICAkMTYxID0gKCgkMTYwKSArIDMyKXwwOwogICAgICQxNjIgPSAkMjM7CiAgICAgJDE2MyA9ICgoJDE2MikgKyAoJDE2MSl8MCk7CiAgICAgJDIzID0gJDE2MzsKICAgICAkMTY0ID0gJDE4OwogICAgICQxNjUgPSAoKCQxNjQpICsgMSl8MDsKICAgICAkMTggPSAkMTY1OwogICAgfQogICAgJDE2NiA9ICQyMTsKICAgICQxNjcgPSAoKCQxNjYpICsgMil8MDsKICAgICQxNjggPSAkMTA7CiAgICAkMTY5ID0gKCgkMTY4KSArICgkMTY3KSl8MDsKICAgICQxMCA9ICQxNjk7CiAgICAkMTcwID0gJDEyOwogICAgJDE3MSA9ICgkMTcwfDApIT0oMCk7CiAgICBpZiAoJDE3MSkgewogICAgICQxMiA9IDA7CiAgICB9CiAgIH0KICB9IGVsc2UgewogICAkMTIgPSAxOwogIH0KICAkMTcyID0gJDE3OwogICQxNzMgPSAoKCQxNzIpICsgMSl8MDsKICAkMTcgPSAkMTczOwogfQogaWYgKChsYWJlbHwwKSA9PSAyNikgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQp9CmZ1bmN0aW9uIF9kMTZEcmF3UGl4ZWwoJDAsJDEsJDIpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKIHZhciAkMTAgPSAwLCAkMTEgPSAwLCAkMTIgPSAwLCAkMTMgPSAwLCAkMTQgPSAwLCAkMTUgPSAwLCAkMTYgPSAwLCAkMTcgPSAwLCAkMTggPSAwLCAkMTkgPSAwLCAkMjAgPSAwLCAkMjEgPSAwLCAkMjIgPSAwLCAkMjMgPSAwLCAkMjQgPSAwLCAkMjUgPSAwLCAkMjYgPSAwLCAkMjcgPSAwLCAkMjggPSAwLCAkMjkgPSAwOwogdmFyICQzID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDQgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgJG9yJGNvbmQgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMTZ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMTZ8MCk7CiAkMyA9ICQwOwogJDQgPSAkMTsKICQ1ID0gJDI7CiAkNyA9ICQ0OwogJDggPSAoKCQ3KSArIDE2KXwwOwogJDQgPSAkODsKICQ5ID0gJDU7CiAkMTAgPSAoKCQ5KSArIDE2KXwwOwogJDUgPSAkMTA7CiAkMTEgPSAkNDsKICQxMiA9ICgkMTF8MCk8KDApOwogJDEzID0gJDU7CiAkMTQgPSAoJDEzfDApPCgwKTsKICRvciRjb25kID0gJDEyIHwgJDE0OwogaWYgKCRvciRjb25kKSB7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9CiAkMTUgPSAkNDsKICQxNiA9IEhFQVAzMlsxMjhdfDA7CiAkMTcgPSAoJDE1fDApPigkMTZ8MCk7CiBpZiAoJDE3KSB7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9CiAkMTggPSAkNTsKICQxOSA9IEhFQVAzMlsxMjldfDA7CiAkMjAgPSAoJDE4fDApPigkMTl8MCk7CiBpZiAoJDIwKSB7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9CiAkMjEgPSAkMzsKICQyMiA9ICQyMSB8IC0xNjc3NzIxNjsKICQzID0gJDIyOwogJDIzID0gSEVBUDMyWzEyNl18MDsKICQyNCA9ICQ0OwogJDI1ID0gJDU7CiAkMjYgPSBIRUFQMzJbMTI4XXwwOwogJDI3ID0gTWF0aF9pbXVsKCQyNSwgJDI2KXwwOwogJDI4ID0gKCgkMjQpICsgKCQyNykpfDA7CiAkMjkgPSAoKCQyMykgKyAoJDI4PDwyKXwwKTsKICQ2ID0gJDI5OwogJDMwID0gJDM7CiAkMzEgPSAkNjsKIEhFQVAzMlskMzE+PjJdID0gJDMwOwogU1RBQ0tUT1AgPSBzcDtyZXR1cm47Cn0KZnVuY3Rpb24gX2QxNkRyYXdSZWN0YW5nbGVGaWxsKCQwLCQxLCQyLCQzLCQ0KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMDsKIHZhciAkMzAgPSAwLCAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwLCAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwOwogdmFyICQ1ID0gMCwgJDUwID0gMCwgJDUxID0gMCwgJDUyID0gMCwgJDUzID0gMCwgJDU0ID0gMCwgJDU1ID0gMCwgJDU2ID0gMCwgJDU3ID0gMCwgJDU4ID0gMCwgJDU5ID0gMCwgJDYgPSAwLCAkNjAgPSAwLCAkNjEgPSAwLCAkNjIgPSAwLCAkNjMgPSAwLCAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNjcgPSAwOwogdmFyICQ2OCA9IDAsICQ2OSA9IDAsICQ3ID0gMCwgJDcwID0gMCwgJDcxID0gMCwgJDcyID0gMCwgJDczID0gMCwgJDggPSAwLCAkOSA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyAzMnwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdygzMnwwKTsKICQ1ID0gJDA7CiAkNiA9ICQxOwogJDcgPSAkMjsKICQ4ID0gJDM7CiAkOSA9ICQ0OwogJDEzID0gJDY7CiAkMTQgPSAoKCQxMykgKyAxNil8MDsKICQ2ID0gJDE0OwogJDE1ID0gJDc7CiAkMTYgPSAoKCQxNSkgKyAxNil8MDsKICQ3ID0gJDE2OwogJDE3ID0gJDY7CiAkMTggPSAoJDE3fDApPCgwKTsKIGlmICgkMTgpIHsKICAkMTkgPSAkNjsKICAkMjAgPSAkODsKICAkMjEgPSAoKCQyMCkgKyAoJDE5KSl8MDsKICAkOCA9ICQyMTsKICAkNiA9IDA7CiB9CiAkMjIgPSAkNjsKICQyMyA9ICQ4OwogJDI0ID0gKCgkMjIpICsgKCQyMykpfDA7CiAkMjUgPSBIRUFQMzJbMTI4XXwwOwogJDI2ID0gKCQyNHwwKT4oJDI1fDApOwogaWYgKCQyNikgewogICQyNyA9ICQ2OwogICQyOCA9ICQ4OwogICQyOSA9ICgoJDI3KSArICgkMjgpKXwwOwogICQzMCA9IEhFQVAzMlsxMjhdfDA7CiAgJDMxID0gKCgkMjkpIC0gKCQzMCkpfDA7CiAgJDMyID0gJDg7CiAgJDMzID0gKCgkMzIpIC0gKCQzMSkpfDA7CiAgJDggPSAkMzM7CiB9CiAkMzQgPSAkNzsKICQzNSA9ICgkMzR8MCk8KDApOwogaWYgKCQzNSkgewogICQzNiA9ICQ3OwogICQzNyA9ICQ5OwogICQzOCA9ICgoJDM3KSArICgkMzYpKXwwOwogICQ5ID0gJDM4OwogICQ3ID0gMDsKIH0KICQzOSA9ICQ3OwogJDQwID0gJDk7CiAkNDEgPSAoKCQzOSkgKyAoJDQwKSl8MDsKICQ0MiA9IEhFQVAzMlsxMjldfDA7CiAkNDMgPSAoJDQxfDApPigkNDJ8MCk7CiBpZiAoJDQzKSB7CiAgJDQ0ID0gJDc7CiAgJDQ1ID0gJDk7CiAgJDQ2ID0gKCgkNDQpICsgKCQ0NSkpfDA7CiAgJDQ3ID0gSEVBUDMyWzEyOV18MDsKICAkNDggPSAoKCQ0NikgLSAoJDQ3KSl8MDsKICAkNDkgPSAkOTsKICAkNTAgPSAoKCQ0OSkgLSAoJDQ4KSl8MDsKICAkOSA9ICQ1MDsKIH0KICQxMSA9IDA7CiB3aGlsZSgxKSB7CiAgJDUxID0gJDExOwogICQ1MiA9ICQ5OwogICQ1MyA9ICgkNTF8MCk8KCQ1MnwwKTsKICBpZiAoISgkNTMpKSB7CiAgIGJyZWFrOwogIH0KICAkNTQgPSBIRUFQMzJbMTI2XXwwOwogICQ1NSA9ICQ2OwogICQ1NiA9ICgoJDU0KSArICgkNTU8PDIpfDApOwogICQ1NyA9ICQ3OwogICQ1OCA9ICQxMTsKICAkNTkgPSAoKCQ1NykgKyAoJDU4KSl8MDsKICAkNjAgPSBIRUFQMzJbMTI4XXwwOwogICQ2MSA9IE1hdGhfaW11bCgkNTksICQ2MCl8MDsKICAkNjIgPSAoKCQ1NikgKyAoJDYxPDwyKXwwKTsKICAkMTIgPSAkNjI7CiAgJDEwID0gMDsKICB3aGlsZSgxKSB7CiAgICQ2MyA9ICQxMDsKICAgJDY0ID0gJDg7CiAgICQ2NSA9ICgkNjN8MCk8KCQ2NHwwKTsKICAgaWYgKCEoJDY1KSkgewogICAgYnJlYWs7CiAgIH0KICAgJDY2ID0gJDU7CiAgICQ2NyA9ICQxMjsKICAgSEVBUDMyWyQ2Nz4+Ml0gPSAkNjY7CiAgICQ2OCA9ICQxMjsKICAgJDY5ID0gKCgoJDY4KSkgKyA0fDApOwogICAkMTIgPSAkNjk7CiAgICQ3MCA9ICQxMDsKICAgJDcxID0gKCgkNzApICsgMSl8MDsKICAgJDEwID0gJDcxOwogIH0KICAkNzIgPSAkMTE7CiAgJDczID0gKCgkNzIpICsgMSl8MDsKICAkMTEgPSAkNzM7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfZDE2RHJhd1JlY3RhbmdsZSgkMCwkMSwkMiwkMywkNCkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogdmFyICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDAsICQyOSA9IDA7CiB2YXIgJDMwID0gMCwgJDMxID0gMCwgJDUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwLCAkOSA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyAzMnwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdygzMnwwKTsKICQ1ID0gJDA7CiAkNiA9ICQxOwogJDcgPSAkMjsKICQ4ID0gJDM7CiAkOSA9ICQ0OwogJDEwID0gJDU7CiAkMTEgPSAkNjsKICQxMiA9ICQ3OwogJDEzID0gJDg7CiBfZDE2RHJhd1JlY3RhbmdsZUZpbGwoJDEwLCQxMSwkMTIsJDEzLDEpOwogJDE0ID0gJDU7CiAkMTUgPSAkNjsKICQxNiA9ICQ3OwogJDE3ID0gJDk7CiBfZDE2RHJhd1JlY3RhbmdsZUZpbGwoJDE0LCQxNSwkMTYsMSwkMTcpOwogJDE4ID0gJDU7CiAkMTkgPSAkNjsKICQyMCA9ICQ3OwogJDIxID0gJDk7CiAkMjIgPSAoKCQyMCkgKyAoJDIxKSl8MDsKICQyMyA9ICgoJDIyKSAtIDEpfDA7CiAkMjQgPSAkODsKIF9kMTZEcmF3UmVjdGFuZ2xlRmlsbCgkMTgsJDE5LCQyMywkMjQsMSk7CiAkMjUgPSAkNTsKICQyNiA9ICQ2OwogJDI3ID0gJDg7CiAkMjggPSAoKCQyNikgKyAoJDI3KSl8MDsKICQyOSA9ICgoJDI4KSAtIDEpfDA7CiAkMzAgPSAkNzsKICQzMSA9ICQ5OwogX2QxNkRyYXdSZWN0YW5nbGVGaWxsKCQyNSwkMjksJDMwLDEsJDMxKTsKIFNUQUNLVE9QID0gc3A7cmV0dXJuOwp9CmZ1bmN0aW9uIF9kMTZEcmF3RWxsaXBzZUZpbGwoJDAsJDEsJDIsJDMsJDQpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKICQ0ID0gJDR8MDsKIHZhciAkMTAgPSAwLCAkMTAwID0gMCwgJDEwMSA9IDAsICQxMDIgPSAwLCAkMTAzID0gMCwgJDEwNCA9IDAsICQxMDUgPSAwLCAkMTA2ID0gMCwgJDEwNyA9IDAsICQxMDggPSAwLCAkMTA5ID0gMCwgJDExID0gMCwgJDExMCA9IDAsICQxMTEgPSAwLCAkMTEyID0gMCwgJDExMyA9IDAsICQxMTQgPSAwLCAkMTE1ID0gMCwgJDExNiA9IDAsICQxMTcgPSAwOwogdmFyICQxMTggPSAwLCAkMTE5ID0gMCwgJDEyID0gMCwgJDEyMCA9IDAsICQxMjEgPSAwLCAkMTIyID0gMCwgJDEyMyA9IDAsICQxMjQgPSAwLCAkMTI1ID0gMCwgJDEyNiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDA7CiB2YXIgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMCwgJDM1ID0gMCwgJDM2ID0gMCwgJDM3ID0gMCwgJDM4ID0gMCwgJDM5ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMDsKIHZhciAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNSA9IDAsICQ1MCA9IDAsICQ1MSA9IDAsICQ1MiA9IDAsICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMDsKIHZhciAkNjEgPSAwLCAkNjIgPSAwLCAkNjMgPSAwLCAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNjcgPSAwLCAkNjggPSAwLCAkNjkgPSAwLCAkNyA9IDAsICQ3MCA9IDAsICQ3MSA9IDAsICQ3MiA9IDAsICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDA7CiB2YXIgJDggPSAwLCAkODAgPSAwLCAkODEgPSAwLCAkODIgPSAwLCAkODMgPSAwLCAkODQgPSAwLCAkODUgPSAwLCAkODYgPSAwLCAkODcgPSAwLCAkODggPSAwLCAkODkgPSAwLCAkOSA9IDAsICQ5MCA9IDAsICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDA7CiB2YXIgJDk4ID0gMCwgJDk5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDY0fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDY0fDApOwogJDUgPSAkMDsKICQ2ID0gJDE7CiAkNyA9ICQyOwogJDggPSAkMzsKICQ5ID0gJDQ7CiAkMTggPSAkODsKICQxOSA9ICgoJDE4fDApICUgMikmLTE7CiAkMjAgPSAoMSAtICgkMTkpKXwwOwogJDEwID0gJDIwOwogJDIxID0gJDk7CiAkMjIgPSAoKCQyMXwwKSAlIDIpJi0xOwogJDIzID0gKDEgLSAoJDIyKSl8MDsKICQxMSA9ICQyMzsKICQyNCA9ICQ4OwogJDI1ID0gKCgkMjR8MCkgLyAyKSYtMTsKICQyNiA9ICQ2OwogJDI3ID0gKCgkMjYpICsgKCQyNSkpfDA7CiAkNiA9ICQyNzsKICQyOCA9ICQ5OwogJDI5ID0gKCgkMjh8MCkgLyAyKSYtMTsKICQzMCA9ICQ3OwogJDMxID0gKCgkMzApICsgKCQyOSkpfDA7CiAkNyA9ICQzMTsKICQzMiA9ICQ4OwogJDMzID0gKCgkMzJ8MCkgLyAyKSYtMTsKICQ4ID0gJDMzOwogJDM0ID0gJDk7CiAkMzUgPSAoKCQzNHwwKSAvIDIpJi0xOwogJDkgPSAkMzU7CiAkMTIgPSAwOwogJDM2ID0gJDk7CiAkMTMgPSAkMzY7CiAkMzcgPSAkODsKICQzOCA9ICQ4OwogJDM5ID0gTWF0aF9pbXVsKCQzNywgJDM4KXwwOwogJDE0ID0gJDM5OwogJDQwID0gJDk7CiAkNDEgPSAkOTsKICQ0MiA9IE1hdGhfaW11bCgkNDAsICQ0MSl8MDsKICQxNSA9ICQ0MjsKICQ0MyA9ICQxNTsKICQ0NCA9ICQ5OwogJDQ1ID0gJDQ0PDwxOwogJDQ2ID0gKCgkNDUpIC0gMSl8MDsKICQ0NyA9ICQxNDsKICQ0OCA9IE1hdGhfaW11bCgkNDYsICQ0Nyl8MDsKICQ0OSA9ICgoJDQzKSAtICgkNDgpKXwwOwogJDE2ID0gJDQ5Owogd2hpbGUoMSkgewogICQ1MCA9ICQ1OwogICQ1MSA9ICQ2OwogICQ1MiA9ICQxMjsKICAkNTMgPSAoKCQ1MSkgLSAoJDUyKSl8MDsKICAkNTQgPSAkNzsKICAkNTUgPSAkMTM7CiAgJDU2ID0gKCgkNTQpICsgKCQ1NSkpfDA7CiAgJDU3ID0gJDExOwogICQ1OCA9ICgoJDU2KSAtICgkNTcpKXwwOwogICQ1OSA9ICQxMjsKICAkNjAgPSAkNTk8PDE7CiAgJDYxID0gKDEgKyAoJDYwKSl8MDsKICAkNjIgPSAkMTA7CiAgJDYzID0gKCgkNjEpIC0gKCQ2MikpfDA7CiAgX2QxNkRyYXdSZWN0YW5nbGVGaWxsKCQ1MCwkNTMsJDU4LCQ2MywxKTsKICAkNjQgPSAkNTsKICAkNjUgPSAkNjsKICAkNjYgPSAkMTI7CiAgJDY3ID0gKCgkNjUpIC0gKCQ2NikpfDA7CiAgJDY4ID0gJDc7CiAgJDY5ID0gJDEzOwogICQ3MCA9ICgoJDY4KSAtICgkNjkpKXwwOwogICQ3MSA9ICQxMjsKICAkNzIgPSAkNzE8PDE7CiAgJDczID0gKDEgKyAoJDcyKSl8MDsKICAkNzQgPSAkMTA7CiAgJDc1ID0gKCgkNzMpIC0gKCQ3NCkpfDA7CiAgX2QxNkRyYXdSZWN0YW5nbGVGaWxsKCQ2NCwkNjcsJDcwLCQ3NSwxKTsKICAkNzYgPSAkMTY7CiAgJDc3ID0gJDc2PDwxOwogICQxNyA9ICQ3NzsKICAkNzggPSAkMTc7CiAgJDc5ID0gJDEyOwogICQ4MCA9ICQ3OTw8MTsKICAkODEgPSAoKCQ4MCkgKyAxKXwwOwogICQ4MiA9ICQxNTsKICAkODMgPSBNYXRoX2ltdWwoJDgxLCAkODIpfDA7CiAgJDg0ID0gKCQ3OHwwKTwoJDgzfDApOwogIGlmICgkODQpIHsKICAgJDg1ID0gJDEyOwogICAkODYgPSAoKCQ4NSkgKyAxKXwwOwogICAkMTIgPSAkODY7CiAgICQ4NyA9ICQxMjsKICAgJDg4ID0gJDg3PDwxOwogICAkODkgPSAoKCQ4OCkgKyAxKXwwOwogICAkOTAgPSAkMTU7CiAgICQ5MSA9IE1hdGhfaW11bCgkODksICQ5MCl8MDsKICAgJDkyID0gJDE2OwogICAkOTMgPSAoKCQ5MikgKyAoJDkxKSl8MDsKICAgJDE2ID0gJDkzOwogIH0KICAkOTQgPSAkMTc7CiAgJDk1ID0gJDEzOwogICQ5NiA9ICQ5NTw8MTsKICAkOTcgPSAoKCQ5NikgLSAxKXwwOwogICQ5OCA9ICgwIC0gKCQ5NykpfDA7CiAgJDk5ID0gJDE0OwogICQxMDAgPSBNYXRoX2ltdWwoJDk4LCAkOTkpfDA7CiAgJDEwMSA9ICgkOTR8MCk+KCQxMDB8MCk7CiAgaWYgKCQxMDEpIHsKICAgJDEwMiA9ICQxMzsKICAgJDEwMyA9ICgoJDEwMikgKyAtMSl8MDsKICAgJDEzID0gJDEwMzsKICAgJDEwNCA9ICQxMzsKICAgJDEwNSA9ICQxMDQ8PDE7CiAgICQxMDYgPSAoKCQxMDUpIC0gMSl8MDsKICAgJDEwNyA9ICQxNDsKICAgJDEwOCA9IE1hdGhfaW11bCgkMTA2LCAkMTA3KXwwOwogICAkMTA5ID0gJDE2OwogICAkMTEwID0gKCgkMTA5KSAtICgkMTA4KSl8MDsKICAgJDE2ID0gJDExMDsKICB9CiAgJDExMSA9ICQxMzsKICAkMTEyID0gKCQxMTF8MCk+PSgwKTsKICBpZiAoISgkMTEyKSkgewogICBicmVhazsKICB9CiB9CiB3aGlsZSgxKSB7CiAgJDExMyA9ICQxMjsKICAkMTE0ID0gKCgkMTEzKSArIDEpfDA7CiAgJDEyID0gJDExNDsKICAkMTE1ID0gJDg7CiAgJDExNiA9ICgkMTEzfDApPCgkMTE1fDApOwogIGlmICghKCQxMTYpKSB7CiAgIGJyZWFrOwogIH0KICAkMTE3ID0gJDU7CiAgJDExOCA9ICQ2OwogICQxMTkgPSAkMTI7CiAgJDEyMCA9ICgoJDExOCkgLSAoJDExOSkpfDA7CiAgJDEyMSA9ICQ3OwogICQxMjIgPSAkMTI7CiAgJDEyMyA9ICQxMjI8PDE7CiAgJDEyNCA9ICgxICsgKCQxMjMpKXwwOwogICQxMjUgPSAkMTA7CiAgJDEyNiA9ICgoJDEyNCkgLSAoJDEyNSkpfDA7CiAgX2QxNkRyYXdSZWN0YW5nbGVGaWxsKCQxMTcsJDEyMCwkMTIxLCQxMjYsMSk7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfZDE2RHJhd0VsbGlwc2UoJDAsJDEsJDIsJDMsJDQpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKICQ0ID0gJDR8MDsKIHZhciAkMTAgPSAwLCAkMTAwID0gMCwgJDEwMSA9IDAsICQxMDIgPSAwLCAkMTAzID0gMCwgJDEwNCA9IDAsICQxMDUgPSAwLCAkMTA2ID0gMCwgJDEwNyA9IDAsICQxMDggPSAwLCAkMTA5ID0gMCwgJDExID0gMCwgJDExMCA9IDAsICQxMTEgPSAwLCAkMTEyID0gMCwgJDExMyA9IDAsICQxMTQgPSAwLCAkMTE1ID0gMCwgJDExNiA9IDAsICQxMTcgPSAwOwogdmFyICQxMTggPSAwLCAkMTE5ID0gMCwgJDEyID0gMCwgJDEyMCA9IDAsICQxMjEgPSAwLCAkMTIyID0gMCwgJDEyMyA9IDAsICQxMjQgPSAwLCAkMTI1ID0gMCwgJDEyNiA9IDAsICQxMjcgPSAwLCAkMTI4ID0gMCwgJDEyOSA9IDAsICQxMyA9IDAsICQxMzAgPSAwLCAkMTMxID0gMCwgJDEzMiA9IDAsICQxMzMgPSAwLCAkMTM0ID0gMCwgJDEzNSA9IDA7CiB2YXIgJDEzNiA9IDAsICQxMzcgPSAwLCAkMTM4ID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMDsKIHZhciAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwLCAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNSA9IDA7CiB2YXIgJDUwID0gMCwgJDUxID0gMCwgJDUyID0gMCwgJDUzID0gMCwgJDU0ID0gMCwgJDU1ID0gMCwgJDU2ID0gMCwgJDU3ID0gMCwgJDU4ID0gMCwgJDU5ID0gMCwgJDYgPSAwLCAkNjAgPSAwLCAkNjEgPSAwLCAkNjIgPSAwLCAkNjMgPSAwLCAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNjcgPSAwLCAkNjggPSAwOwogdmFyICQ2OSA9IDAsICQ3ID0gMCwgJDcwID0gMCwgJDcxID0gMCwgJDcyID0gMCwgJDczID0gMCwgJDc0ID0gMCwgJDc1ID0gMCwgJDc2ID0gMCwgJDc3ID0gMCwgJDc4ID0gMCwgJDc5ID0gMCwgJDggPSAwLCAkODAgPSAwLCAkODEgPSAwLCAkODIgPSAwLCAkODMgPSAwLCAkODQgPSAwLCAkODUgPSAwLCAkODYgPSAwOwogdmFyICQ4NyA9IDAsICQ4OCA9IDAsICQ4OSA9IDAsICQ5ID0gMCwgJDkwID0gMCwgJDkxID0gMCwgJDkyID0gMCwgJDkzID0gMCwgJDk0ID0gMCwgJDk1ID0gMCwgJDk2ID0gMCwgJDk3ID0gMCwgJDk4ID0gMCwgJDk5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDY0fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDY0fDApOwogJDUgPSAkMDsKICQ2ID0gJDE7CiAkNyA9ICQyOwogJDggPSAkMzsKICQ5ID0gJDQ7CiAkMTggPSAkODsKICQxOSA9ICgoJDE4fDApICUgMikmLTE7CiAkMjAgPSAoMSAtICgkMTkpKXwwOwogJDEwID0gJDIwOwogJDIxID0gJDk7CiAkMjIgPSAoKCQyMXwwKSAlIDIpJi0xOwogJDIzID0gKDEgLSAoJDIyKSl8MDsKICQxMSA9ICQyMzsKICQyNCA9ICQ4OwogJDI1ID0gKCgkMjR8MCkgLyAyKSYtMTsKICQyNiA9ICQ2OwogJDI3ID0gKCgkMjYpICsgKCQyNSkpfDA7CiAkNiA9ICQyNzsKICQyOCA9ICQ5OwogJDI5ID0gKCgkMjh8MCkgLyAyKSYtMTsKICQzMCA9ICQ3OwogJDMxID0gKCgkMzApICsgKCQyOSkpfDA7CiAkNyA9ICQzMTsKICQzMiA9ICQ4OwogJDMzID0gKCgkMzJ8MCkgLyAyKSYtMTsKICQ4ID0gJDMzOwogJDM0ID0gJDk7CiAkMzUgPSAoKCQzNHwwKSAvIDIpJi0xOwogJDkgPSAkMzU7CiAkMTIgPSAwOwogJDM2ID0gJDk7CiAkMTMgPSAkMzY7CiAkMzcgPSAkODsKICQzOCA9ICQ4OwogJDM5ID0gTWF0aF9pbXVsKCQzNywgJDM4KXwwOwogJDE0ID0gJDM5OwogJDQwID0gJDk7CiAkNDEgPSAkOTsKICQ0MiA9IE1hdGhfaW11bCgkNDAsICQ0MSl8MDsKICQxNSA9ICQ0MjsKICQ0MyA9ICQxNTsKICQ0NCA9ICQ5OwogJDQ1ID0gJDQ0PDwxOwogJDQ2ID0gKCgkNDUpIC0gMSl8MDsKICQ0NyA9ICQxNDsKICQ0OCA9IE1hdGhfaW11bCgkNDYsICQ0Nyl8MDsKICQ0OSA9ICgoJDQzKSAtICgkNDgpKXwwOwogJDE2ID0gJDQ5Owogd2hpbGUoMSkgewogICQ1MCA9ICQ1OwogICQ1MSA9ICQ2OwogICQ1MiA9ICQxMjsKICAkNTMgPSAoKCQ1MSkgKyAoJDUyKSl8MDsKICAkNTQgPSAkMTA7CiAgJDU1ID0gKCgkNTMpIC0gKCQ1NCkpfDA7CiAgJDU2ID0gJDc7CiAgJDU3ID0gJDEzOwogICQ1OCA9ICgoJDU2KSArICgkNTcpKXwwOwogICQ1OSA9ICQxMTsKICAkNjAgPSAoKCQ1OCkgLSAoJDU5KSl8MDsKICBfZDE2RHJhd1BpeGVsKCQ1MCwkNTUsJDYwKTsKICAkNjEgPSAkNTsKICAkNjIgPSAkNjsKICAkNjMgPSAkMTI7CiAgJDY0ID0gKCgkNjIpIC0gKCQ2MykpfDA7CiAgJDY1ID0gJDc7CiAgJDY2ID0gJDEzOwogICQ2NyA9ICgoJDY1KSArICgkNjYpKXwwOwogICQ2OCA9ICQxMTsKICAkNjkgPSAoKCQ2NykgLSAoJDY4KSl8MDsKICBfZDE2RHJhd1BpeGVsKCQ2MSwkNjQsJDY5KTsKICAkNzAgPSAkNTsKICAkNzEgPSAkNjsKICAkNzIgPSAkMTI7CiAgJDczID0gKCgkNzEpIC0gKCQ3MikpfDA7CiAgJDc0ID0gJDc7CiAgJDc1ID0gJDEzOwogICQ3NiA9ICgoJDc0KSAtICgkNzUpKXwwOwogIF9kMTZEcmF3UGl4ZWwoJDcwLCQ3MywkNzYpOwogICQ3NyA9ICQ1OwogICQ3OCA9ICQ2OwogICQ3OSA9ICQxMjsKICAkODAgPSAoKCQ3OCkgKyAoJDc5KSl8MDsKICAkODEgPSAkMTA7CiAgJDgyID0gKCgkODApIC0gKCQ4MSkpfDA7CiAgJDgzID0gJDc7CiAgJDg0ID0gJDEzOwogICQ4NSA9ICgoJDgzKSAtICgkODQpKXwwOwogIF9kMTZEcmF3UGl4ZWwoJDc3LCQ4MiwkODUpOwogICQ4NiA9ICQxNjsKICAkODcgPSAkODY8PDE7CiAgJDE3ID0gJDg3OwogICQ4OCA9ICQxNzsKICAkODkgPSAkMTI7CiAgJDkwID0gJDg5PDwxOwogICQ5MSA9ICgoJDkwKSArIDEpfDA7CiAgJDkyID0gJDE1OwogICQ5MyA9IE1hdGhfaW11bCgkOTEsICQ5Mil8MDsKICAkOTQgPSAoJDg4fDApPCgkOTN8MCk7CiAgaWYgKCQ5NCkgewogICAkOTUgPSAkMTI7CiAgICQ5NiA9ICgoJDk1KSArIDEpfDA7CiAgICQxMiA9ICQ5NjsKICAgJDk3ID0gJDEyOwogICAkOTggPSAkOTc8PDE7CiAgICQ5OSA9ICgoJDk4KSArIDEpfDA7CiAgICQxMDAgPSAkMTU7CiAgICQxMDEgPSBNYXRoX2ltdWwoJDk5LCAkMTAwKXwwOwogICAkMTAyID0gJDE2OwogICAkMTAzID0gKCgkMTAyKSArICgkMTAxKSl8MDsKICAgJDE2ID0gJDEwMzsKICB9CiAgJDEwNCA9ICQxNzsKICAkMTA1ID0gJDEzOwogICQxMDYgPSAkMTA1PDwxOwogICQxMDcgPSAoKCQxMDYpIC0gMSl8MDsKICAkMTA4ID0gKDAgLSAoJDEwNykpfDA7CiAgJDEwOSA9ICQxNDsKICAkMTEwID0gTWF0aF9pbXVsKCQxMDgsICQxMDkpfDA7CiAgJDExMSA9ICgkMTA0fDApPigkMTEwfDApOwogIGlmICgkMTExKSB7CiAgICQxMTIgPSAkMTM7CiAgICQxMTMgPSAoKCQxMTIpICsgLTEpfDA7CiAgICQxMyA9ICQxMTM7CiAgICQxMTQgPSAkMTM7CiAgICQxMTUgPSAkMTE0PDwxOwogICAkMTE2ID0gKCgkMTE1KSAtIDEpfDA7CiAgICQxMTcgPSAkMTQ7CiAgICQxMTggPSBNYXRoX2ltdWwoJDExNiwgJDExNyl8MDsKICAgJDExOSA9ICQxNjsKICAgJDEyMCA9ICgoJDExOSkgLSAoJDExOCkpfDA7CiAgICQxNiA9ICQxMjA7CiAgfQogICQxMjEgPSAkMTM7CiAgJDEyMiA9ICgkMTIxfDApPj0oMCk7CiAgaWYgKCEoJDEyMikpIHsKICAgYnJlYWs7CiAgfQogfQogd2hpbGUoMSkgewogICQxMjMgPSAkMTI7CiAgJDEyNCA9ICgoJDEyMykgKyAxKXwwOwogICQxMiA9ICQxMjQ7CiAgJDEyNSA9ICQ4OwogICQxMjYgPSAoJDEyM3wwKTwoJDEyNXwwKTsKICBpZiAoISgkMTI2KSkgewogICBicmVhazsKICB9CiAgJDEyNyA9ICQ1OwogICQxMjggPSAkNjsKICAkMTI5ID0gJDEyOwogICQxMzAgPSAoKCQxMjgpICsgKCQxMjkpKXwwOwogICQxMzEgPSAkMTA7CiAgJDEzMiA9ICgoJDEzMCkgLSAoJDEzMSkpfDA7CiAgJDEzMyA9ICQ3OwogIF9kMTZEcmF3UGl4ZWwoJDEyNywkMTMyLCQxMzMpOwogICQxMzQgPSAkNTsKICAkMTM1ID0gJDY7CiAgJDEzNiA9ICQxMjsKICAkMTM3ID0gKCgkMTM1KSAtICgkMTM2KSl8MDsKICAkMTM4ID0gJDc7CiAgX2QxNkRyYXdQaXhlbCgkMTM0LCQxMzcsJDEzOCk7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfZDE2RHJhd0xpbmUoJDAsJDEsJDIsJDMsJDQpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKICQ0ID0gJDR8MDsKIHZhciAkMTAgPSAwLCAkMTAwID0gMCwgJDEwMSA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDA7CiB2YXIgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMCwgJDM1ID0gMCwgJDM2ID0gMCwgJDM3ID0gMCwgJDM4ID0gMCwgJDM5ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMCwgJDQzID0gMCwgJDQ0ID0gMCwgJDQ1ID0gMCwgJDQ2ID0gMCwgJDQ3ID0gMDsKIHZhciAkNDggPSAwLCAkNDkgPSAwLCAkNSA9IDAsICQ1MCA9IDAsICQ1MSA9IDAsICQ1MiA9IDAsICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMCwgJDYzID0gMCwgJDY0ID0gMCwgJDY1ID0gMDsKIHZhciAkNjYgPSAwLCAkNjcgPSAwLCAkNjggPSAwLCAkNjkgPSAwLCAkNyA9IDAsICQ3MCA9IDAsICQ3MSA9IDAsICQ3MiA9IDAsICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgxID0gMCwgJDgyID0gMCwgJDgzID0gMDsKIHZhciAkODQgPSAwLCAkODUgPSAwLCAkODYgPSAwLCAkODcgPSAwLCAkODggPSAwLCAkODkgPSAwLCAkOSA9IDAsICQ5MCA9IDAsICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDAsICRvciRjb25kID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDQ4fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDQ4fDApOwogJDUgPSAkMDsKICQ2ID0gJDE7CiAkNyA9ICQyOwogJDggPSAkMzsKICQ5ID0gJDQ7CiAkMTcgPSAkNjsKICQxOCA9ICgoJDE3KSArIDE2KXwwOwogJDYgPSAkMTg7CiAkMTkgPSAkNzsKICQyMCA9ICgoJDE5KSArIDE2KXwwOwogJDcgPSAkMjA7CiAkMjEgPSAkODsKICQyMiA9ICgoJDIxKSArIDE2KXwwOwogJDggPSAkMjI7CiAkMjMgPSAkOTsKICQyNCA9ICgoJDIzKSArIDE2KXwwOwogJDkgPSAkMjQ7CiAkMjUgPSAkODsKICQyNiA9ICQ2OwogJDI3ID0gKCgkMjUpIC0gKCQyNikpfDA7CiAkMjggPSAoJDI3fDApPCgwKTsKICQyOSA9ICQ4OwogJDMwID0gJDY7CiAkMzEgPSAoKCQyOSkgLSAoJDMwKSl8MDsKICQzMiA9ICgwIC0gKCQzMSkpfDA7CiAkMzMgPSAkMjggPyAkMzIgOiAkMzE7CiAkMTAgPSAkMzM7CiAkMzQgPSAkNjsKICQzNSA9ICQ4OwogJDM2ID0gKCQzNHwwKTwoJDM1fDApOwogJDM3ID0gJDM2ID8gMSA6IC0xOwogJDExID0gJDM3OwogJDM4ID0gJDk7CiAkMzkgPSAkNzsKICQ0MCA9ICgoJDM4KSAtICgkMzkpKXwwOwogJDQxID0gKCQ0MHwwKTwoMCk7CiAkNDIgPSAkOTsKICQ0MyA9ICQ3OwogJDQ0ID0gKCgkNDIpIC0gKCQ0MykpfDA7CiAkNDUgPSAoMCAtICgkNDQpKXwwOwogJDQ2ID0gJDQxID8gJDQ1IDogJDQ0OwogJDQ3ID0gKDAgLSAoJDQ2KSl8MDsKICQxMiA9ICQ0NzsKICQ0OCA9ICQ3OwogJDQ5ID0gJDk7CiAkNTAgPSAoJDQ4fDApPCgkNDl8MCk7CiAkNTEgPSAkNTAgPyAxIDogLTE7CiAkMTMgPSAkNTE7CiAkNTIgPSAkMTA7CiAkNTMgPSAkMTI7CiAkNTQgPSAoKCQ1MikgKyAoJDUzKSl8MDsKICQxNCA9ICQ1NDsKICQ1NSA9ICQ1OwogJDU2ID0gJDU1IHwgLTE2Nzc3MjE2OwogJDUgPSAkNTY7CiB3aGlsZSgxKSB7CiAgJDU3ID0gJDY7CiAgJDU4ID0gKCQ1N3wwKT49KDApOwogICQ1OSA9ICQ3OwogICQ2MCA9ICgkNTl8MCk+PSgwKTsKICAkb3IkY29uZCA9ICQ1OCAmICQ2MDsKICBpZiAoJG9yJGNvbmQpIHsKICAgJDYxID0gJDY7CiAgICQ2MiA9IEhFQVAzMlsxMjhdfDA7CiAgICQ2MyA9ICgkNjF8MCk8KCQ2MnwwKTsKICAgaWYgKCQ2MykgewogICAgJDY0ID0gJDc7CiAgICAkNjUgPSBIRUFQMzJbMTI5XXwwOwogICAgJDY2ID0gKCQ2NHwwKTwoJDY1fDApOwogICAgaWYgKCQ2NikgewogICAgICQ2NyA9IEhFQVAzMlsxMjZdfDA7CiAgICAgJDY4ID0gJDY7CiAgICAgJDY5ID0gKCgkNjcpICsgKCQ2ODw8Mil8MCk7CiAgICAgJDcwID0gJDc7CiAgICAgJDcxID0gSEVBUDMyWzEyOF18MDsKICAgICAkNzIgPSBNYXRoX2ltdWwoJDcwLCAkNzEpfDA7CiAgICAgJDczID0gKCgkNjkpICsgKCQ3Mjw8Mil8MCk7CiAgICAgJDE2ID0gJDczOwogICAgICQ3NCA9ICQ1OwogICAgICQ3NSA9ICQxNjsKICAgICBIRUFQMzJbJDc1Pj4yXSA9ICQ3NDsKICAgIH0KICAgfQogIH0KICAkNzYgPSAkNjsKICAkNzcgPSAkODsKICAkNzggPSAoJDc2fDApPT0oJDc3fDApOwogIGlmICgkNzgpIHsKICAgJDc5ID0gJDc7CiAgICQ4MCA9ICQ5OwogICAkODEgPSAoJDc5fDApPT0oJDgwfDApOwogICBpZiAoJDgxKSB7CiAgICBicmVhazsKICAgfQogIH0KICAkODIgPSAkMTQ7CiAgJDgzID0gJDgyPDwxOwogICQxNSA9ICQ4MzsKICAkODQgPSAkMTU7CiAgJDg1ID0gJDEyOwogICQ4NiA9ICgkODR8MCk+KCQ4NXwwKTsKICBpZiAoJDg2KSB7CiAgICQ4NyA9ICQxMjsKICAgJDg4ID0gJDE0OwogICAkODkgPSAoKCQ4OCkgKyAoJDg3KSl8MDsKICAgJDE0ID0gJDg5OwogICAkOTAgPSAkMTE7CiAgICQ5MSA9ICQ2OwogICAkOTIgPSAoKCQ5MSkgKyAoJDkwKSl8MDsKICAgJDYgPSAkOTI7CiAgfQogICQ5MyA9ICQxNTsKICAkOTQgPSAkMTA7CiAgJDk1ID0gKCQ5M3wwKTwoJDk0fDApOwogIGlmICghKCQ5NSkpIHsKICAgY29udGludWU7CiAgfQogICQ5NiA9ICQxMDsKICAkOTcgPSAkMTQ7CiAgJDk4ID0gKCgkOTcpICsgKCQ5NikpfDA7CiAgJDE0ID0gJDk4OwogICQ5OSA9ICQxMzsKICAkMTAwID0gJDc7CiAgJDEwMSA9ICgoJDEwMCkgKyAoJDk5KSl8MDsKICAkNyA9ICQxMDE7CiB9CiBTVEFDS1RPUCA9IHNwO3JldHVybjsKfQpmdW5jdGlvbiBfZDE2RHJhd1NoaWZ0TGluZUgoJDAsJDEpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKIHZhciAkMTAgPSAwLCAkMTEgPSAwLCAkMTIgPSAwLCAkMTMgPSAwLCAkMTQgPSAwLCAkMTUgPSAwLCAkMTYgPSAwLCAkMTcgPSAwLCAkMTggPSAwLCAkMTkgPSAwLCAkMiA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDA7CiB2YXIgJDI5ID0gMCwgJDMgPSAwLCAkMzAgPSAwLCAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwLCAkMzUgPSAwLCAkMzYgPSAwLCAkMzcgPSAwLCAkMzggPSAwLCAkMzkgPSAwLCAkNCA9IDAsICQ0MCA9IDAsICQ0MSA9IDAsICQ0MiA9IDAsICQ0MyA9IDAsICQ0NCA9IDAsICQ0NSA9IDAsICQ0NiA9IDA7CiB2YXIgJDQ3ID0gMCwgJDQ4ID0gMCwgJDQ5ID0gMCwgJDUgPSAwLCAkNTAgPSAwLCAkNTEgPSAwLCAkNTIgPSAwLCAkNTMgPSAwLCAkNTQgPSAwLCAkNTUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwLCAkOSA9IDAsICRvciRjb25kID0gMCwgJG9yJGNvbmQzID0gMCwgJG9yJGNvbmQ1ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDE2fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDE2fDApOwogJDIgPSAkMDsKICQzID0gJDE7CiAkNiA9ICQyOwogJDcgPSAoKCQ2KSArIDE2KXwwOwogJDIgPSAkNzsKICQ4ID0gJDM7CiAkOSA9ICgkOHwwKTwoLTE2KTsKICQxMCA9ICQzOwogJDExID0gKCQxMHwwKT4oMTYpOwogJG9yJGNvbmQgPSAkOSB8ICQxMTsKICQxMiA9ICQzOwogJDEzID0gKCQxMnwwKT09KDApOwogJG9yJGNvbmQzID0gJG9yJGNvbmQgfCAkMTM7CiAkMTQgPSAkMjsKICQxNSA9ICgkMTR8MCk8KDApOwogJG9yJGNvbmQ1ID0gJG9yJGNvbmQzIHwgJDE1OwogaWYgKCRvciRjb25kNSkgewogIFNUQUNLVE9QID0gc3A7cmV0dXJuOwogfQogJDE2ID0gJDI7CiAkMTcgPSBIRUFQMzJbMTI5XXwwOwogJDE4ID0gKCQxNnwwKT49KCQxN3wwKTsKIGlmICgkMTgpIHsKICBTVEFDS1RPUCA9IHNwO3JldHVybjsKIH0KICQxOSA9IEhFQVAzMlsxMjZdfDA7CiAkMjAgPSAkMjsKICQyMSA9IEhFQVAzMlsxMjhdfDA7CiAkMjIgPSBNYXRoX2ltdWwoJDIwLCAkMjEpfDA7CiAkMjMgPSAoKCQxOSkgKyAoJDIyPDwyKXwwKTsKICQyNCA9ICgoKCQyMykpICsgNjR8MCk7CiAkNSA9ICQyNDsKICQyNSA9ICQzOwogJDI2ID0gKCQyNXwwKT4oMCk7CiBpZiAoJDI2KSB7CiAgJDQgPSAwOwogIHdoaWxlKDEpIHsKICAgJDI3ID0gJDQ7CiAgICQyOCA9IEhFQVAzMlsxMjFdfDA7CiAgICQyOSA9ICgkMjd8MCk8KCQyOHwwKTsKICAgaWYgKCEoJDI5KSkgewogICAgYnJlYWs7CiAgIH0KICAgJDMwID0gJDU7CiAgICQzMSA9ICQ0OwogICAkMzIgPSAkMzsKICAgJDMzID0gKCgkMzEpICsgKCQzMikpfDA7CiAgICQzNCA9ICgoJDMwKSArICgkMzM8PDIpfDApOwogICAkMzUgPSBIRUFQMzJbJDM0Pj4yXXwwOwogICAkMzYgPSAkNTsKICAgJDM3ID0gJDQ7CiAgICQzOCA9ICgoJDM2KSArICgkMzc8PDIpfDApOwogICBIRUFQMzJbJDM4Pj4yXSA9ICQzNTsKICAgJDM5ID0gJDQ7CiAgICQ0MCA9ICgoJDM5KSArIDEpfDA7CiAgICQ0ID0gJDQwOwogIH0KICBTVEFDS1RPUCA9IHNwO3JldHVybjsKIH0gZWxzZSB7CiAgJDQxID0gSEVBUDMyWzEyMV18MDsKICAkNDIgPSAoKCQ0MSkgLSAxKXwwOwogICQ0ID0gJDQyOwogIHdoaWxlKDEpIHsKICAgJDQzID0gJDQ7CiAgICQ0NCA9ICgkNDN8MCk+PSgwKTsKICAgaWYgKCEoJDQ0KSkgewogICAgYnJlYWs7CiAgIH0KICAgJDQ1ID0gJDU7CiAgICQ0NiA9ICQ0OwogICAkNDcgPSAkMzsKICAgJDQ4ID0gKCgkNDYpICsgKCQ0NykpfDA7CiAgICQ0OSA9ICgoJDQ1KSArICgkNDg8PDIpfDApOwogICAkNTAgPSBIRUFQMzJbJDQ5Pj4yXXwwOwogICAkNTEgPSAkNTsKICAgJDUyID0gJDQ7CiAgICQ1MyA9ICgoJDUxKSArICgkNTI8PDIpfDApOwogICBIRUFQMzJbJDUzPj4yXSA9ICQ1MDsKICAgJDU0ID0gJDQ7CiAgICQ1NSA9ICgoJDU0KSArIC0xKXwwOwogICAkNCA9ICQ1NTsKICB9CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm47CiB9Cn0KZnVuY3Rpb24gX2QxNkZsdXNoKCkgewogdmFyICQwID0gMCwgJDEgPSAwLCAkMTAgPSAwLCAkMTEgPSAwLCAkMTIgPSAwLCAkMTMgPSAwLCAkMTQgPSAwLCAkMTUgPSAwLCAkMTYgPSAwLCAkMTcgPSAwLCAkMTggPSAwLCAkMTkgPSAwLCAkMiA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDA7CiB2YXIgJDI3ID0gMCwgJDI4ID0gMCwgJDMgPSAwLCAkNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMTZ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMTZ8MCk7CiAkMyA9IEhFQVAzMlsxMjZdfDA7CiAkMCA9ICQzOwogJDQgPSBIRUFQMzJbMTIwXXwwOwogJDUgPSAoKCgkNCkpICsgMjB8MCk7CiAkNiA9IEhFQVAzMlskNT4+Ml18MDsKICQxID0gJDY7CiAkNyA9IEhFQVAzMlsxMjhdfDA7CiAkOCA9ICQ3PDw0OwogJDkgPSAoKCQ4KSArIDE2KXwwOwogJDEwID0gJDA7CiAkMTEgPSAoKCQxMCkgKyAoJDk8PDIpfDApOwogJDAgPSAkMTE7CiAkMiA9IDA7CiB3aGlsZSgxKSB7CiAgJDEyID0gJDI7CiAgJDEzID0gSEVBUDMyWzEyMl18MDsKICAkMTQgPSAoJDEyfDApPCgkMTN8MCk7CiAgaWYgKCEoJDE0KSkgewogICBicmVhazsKICB9CiAgJDE1ID0gJDE7CiAgJDE2ID0gJDA7CiAgJDE3ID0gSEVBUDMyWzEyNV18MDsKICBfbWVtY3B5KCgkMTV8MCksKCQxNnwwKSwoJDE3fDApKXwwOwogICQxOCA9IEhFQVAzMlsxMjFdfDA7CiAgJDE5ID0gJDE7CiAgJDIwID0gKCgkMTkpICsgKCQxODw8Mil8MCk7CiAgJDEgPSAkMjA7CiAgJDIxID0gSEVBUDMyWzEyOF18MDsKICAkMjIgPSAkMDsKICAkMjMgPSAoKCQyMikgKyAoJDIxPDwyKXwwKTsKICAkMCA9ICQyMzsKICAkMjQgPSAkMjsKICAkMjUgPSAoKCQyNCkgKyAxKXwwOwogICQyID0gJDI1OwogfQogJDI2ID0gSEVBUDMyWzEyMF18MDsKIF9TRExfVW5sb2NrU3VyZmFjZSgoJDI2fDApKTsKICQyNyA9IEhFQVAzMlsxMjBdfDA7CiAoX1NETF9GbGlwKCgkMjd8MCkpfDApOwogJDI4ID0gSEVBUDMyWzEyMF18MDsKIChfU0RMX0xvY2tTdXJmYWNlKCgkMjh8MCkpfDApOwogU1RBQ0tUT1AgPSBzcDtyZXR1cm47Cn0KZnVuY3Rpb24gX2QxNkluaXQoJDAsJDEpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKIHZhciAkJHNpbmsgPSAwLCAkJHNpbmsxID0gMCwgJDEwID0gMCwgJDEwMCA9IDAsICQxMDEgPSAwLCAkMTAyID0gMCwgJDEwMyA9IDAsICQxMDQgPSAwLCAkMTA1ID0gMCwgJDEwNiA9IDAsICQxMDcgPSAwLCAkMTA4ID0gMCwgJDEwOSA9IDAsICQxMSA9IDAsICQxMTAgPSAwLCAkMTIgPSAwLCAkMTMgPSAwLCAkMTQgPSAwLCAkMTUgPSAwLCAkMTYgPSAwOwogdmFyICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMCwgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMCwgJDMgPSAwLCAkMzAgPSAwLCAkMzEgPSAwLCAkMzIgPSAwLCAkMzMgPSAwLCAkMzQgPSAwOwogdmFyICQzNSA9IDAsICQzNiA9IDAsICQzNyA9IDAsICQzOCA9IDAsICQzOSA9IDAsICQ0ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMCwgJDQzID0gMCwgJDQ0ID0gMCwgJDQ1ID0gMCwgJDQ2ID0gMCwgJDQ3ID0gMCwgJDQ4ID0gMCwgJDQ5ID0gMCwgJDUgPSAwLCAkNTAgPSAwLCAkNTEgPSAwLCAkNTIgPSAwOwogdmFyICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMCwgJDYzID0gMCwgJDY0ID0gMCwgJDY1ID0gMCwgJDY2ID0gMCwgJDY3ID0gMCwgJDY4ID0gMCwgJDY5ID0gMCwgJDcgPSAwLCAkNzAgPSAwOwogdmFyICQ3MSA9IDAsICQ3MiA9IDAsICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgxID0gMCwgJDgyID0gMCwgJDgzID0gMCwgJDg0ID0gMCwgJDg1ID0gMCwgJDg2ID0gMCwgJDg3ID0gMCwgJDg4ID0gMCwgJDg5ID0gMDsKIHZhciAkOSA9IDAsICQ5MCA9IDAsICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyAzMnwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdygzMnwwKTsKICQyID0gJDA7CiAkMyA9ICQxOwogJDcgPSAwOwogJDQgPSAwOwogd2hpbGUoMSkgewogICQ4ID0gJDQ7CiAgJDkgPSAoJDh8MCk8KDUwMDApOwogIGlmICghKCQ5KSkgewogICBicmVhazsKICB9CiAgJDEwID0gSEVBUDMyWzEzMl18MDsKICAkMTEgPSAkNDsKICAkMTIgPSAoKCQxMCkgKyAoKCQxMSoyNCl8MCl8MCk7CiAgSEVBUDMyWyQxMj4+Ml0gPSAwOwogICQxMyA9IEhFQVAzMlsxMzJdfDA7CiAgJDE0ID0gJDQ7CiAgJDE1ID0gKCgkMTMpICsgKCgkMTQqMjQpfDApfDApOwogICQxNiA9ICgoKCQxNSkpICsgNHwwKTsKICBIRUFQMzJbJDE2Pj4yXSA9IDA7CiAgJDE3ID0gJDQ7CiAgJDE4ID0gKCgkMTcpICsgMSl8MDsKICAkNCA9ICQxODsKIH0KICQxOSA9ICQyOwogSEVBUDMyWzEyMV0gPSAkMTk7CiAkMjAgPSAkMzsKIEhFQVAzMlsxMjJdID0gJDIwOwogJDIxID0gJDI7CiAkMjIgPSAoKCQyMSkgKyAxNil8MDsKIEhFQVAzMlsxMjNdID0gJDIyOwogJDIzID0gJDM7CiAkMjQgPSAoKCQyMykgKyAxNil8MDsKIEhFQVAzMlsxMjRdID0gJDI0OwogJDI1ID0gJDI7CiAkMjYgPSAkMjU8PDI7CiBIRUFQMzJbMTI1XSA9ICQyNjsKIChfU0RMX0luaXQoMzIpfDApOwogJDI3ID0gJDI7CiAkMjggPSAkMzsKICQyOSA9IChfU0RMX1NldFZpZGVvTW9kZSgoJDI3fDApLCgkMjh8MCksMzIsMCl8MCk7CiBIRUFQMzJbMTIwXSA9ICQyOTsKICQzMCA9ICQyOwogJDMxID0gKCgkMzApICsgMzIpfDA7CiBIRUFQMzJbMTI4XSA9ICQzMTsKICQzMiA9ICQzOwogJDMzID0gKCgkMzIpICsgMzIpfDA7CiBIRUFQMzJbMTI5XSA9ICQzMzsKICQzNCA9IEhFQVAzMlsxMjhdfDA7CiAkMzUgPSAkMzQ8PDI7CiBIRUFQMzJbMTMwXSA9ICQzNTsKICQzNiA9IEhFQVAzMlsxMjhdfDA7CiAkMzcgPSAoKCQzNikgLSAxNil8MDsKICQzOCA9ICQzNzw8MjsKIEhFQVAzMlsxMzFdID0gJDM4OwogJDM5ID0gSEVBUDMyWzEzMF18MDsKICQ0MCA9IEhFQVAzMlsxMjldfDA7CiAkNDEgPSBNYXRoX2ltdWwoJDM5LCAkNDApfDA7CiBIRUFQMzJbMTI3XSA9ICQ0MTsKICQ0MiA9IEhFQVAzMlsxMjhdfDA7CiAkNDMgPSBIRUFQMzJbMTI5XXwwOwogJDQ0ID0gTWF0aF9pbXVsKCQ0MiwgJDQzKXwwOwogJDQ1ID0gJDQ0PDwyOwogJDQ2ID0gKCQ0NXwwKTwoMCk7CiAkNDcgPSAkNDYgPyAtMSA6ICQ0NTsKICQ0OCA9IChfX1puYWooJDQ3KXwwKTsKIEhFQVAzMlsxMjZdID0gJDQ4OwogJDQ5ID0gSEVBUDMyWzEyMF18MDsKIChfU0RMX0xvY2tTdXJmYWNlKCgkNDl8MCkpfDApOwogJDYgPSAwOwogd2hpbGUoMSkgewogICQ1MCA9ICQ2OwogICQ1MSA9IEhFQVAzMlsxMjJdfDA7CiAgJDUyID0gKCQ1MHwwKTwoJDUxfDApOwogIGlmICghKCQ1MikpIHsKICAgYnJlYWs7CiAgfQogICQ1ID0gMDsKICB3aGlsZSgxKSB7CiAgICQ1MyA9ICQ1OwogICAkNTQgPSBIRUFQMzJbMTIxXXwwOwogICAkNTUgPSAoJDUzfDApPCgkNTR8MCk7CiAgIGlmICghKCQ1NSkpIHsKICAgIGJyZWFrOwogICB9CiAgICQ1NiA9ICQ1OwogICAkNTcgPSAoKCQ1NnwwKSAlIDE2KSYtMTsKICAgJDU4ID0gKCQ1N3wwKT09KDApOwogICBpZiAoJDU4KSB7CiAgICBsYWJlbCA9IDEwOwogICB9IGVsc2UgewogICAgJDU5ID0gJDY7CiAgICAkNjAgPSAoKCQ1OXwwKSAlIDE2KSYtMTsKICAgICQ2MSA9ICgkNjB8MCk9PSgwKTsKICAgIGlmICgkNjEpIHsKICAgICBsYWJlbCA9IDEwOwogICAgfSBlbHNlIHsKICAgICAkODAgPSBIRUFQMzJbMTIwXXwwOwogICAgICQ4MSA9ICgoKCQ4MCkpICsgMjB8MCk7CiAgICAgJDgyID0gSEVBUDMyWyQ4MT4+Ml18MDsKICAgICAkODMgPSAkNzsKICAgICAkODQgPSAoKCQ4MykgKyAxKXwwOwogICAgICQ3ID0gJDg0OwogICAgICQ4NSA9ICgoJDgyKSArICgkODMpfDApOwogICAgIEhFQVA4WyQ4NT4+MF0gPSAwOwogICAgICQ4NiA9IEhFQVAzMlsxMjBdfDA7CiAgICAgJDg3ID0gKCgoJDg2KSkgKyAyMHwwKTsKICAgICAkODggPSBIRUFQMzJbJDg3Pj4yXXwwOwogICAgICQ4OSA9ICQ3OwogICAgICQ5MCA9ICgoJDg5KSArIDEpfDA7CiAgICAgJDcgPSAkOTA7CiAgICAgJDkxID0gKCgkODgpICsgKCQ4OSl8MCk7CiAgICAgSEVBUDhbJDkxPj4wXSA9IDA7CiAgICAgJDkyID0gSEVBUDMyWzEyMF18MDsKICAgICAkOTMgPSAoKCgkOTIpKSArIDIwfDApOwogICAgICQ5NCA9IEhFQVAzMlskOTM+PjJdfDA7CiAgICAgJDk1ID0gJDc7CiAgICAgJDk2ID0gKCgkOTUpICsgMSl8MDsKICAgICAkNyA9ICQ5NjsKICAgICAkOTcgPSAoKCQ5NCkgKyAoJDk1KXwwKTsKICAgICAkJHNpbmsgPSAwOyQkc2luazEgPSAkOTc7CiAgICB9CiAgIH0KICAgaWYgKChsYWJlbHwwKSA9PSAxMCkgewogICAgbGFiZWwgPSAwOwogICAgJDYyID0gSEVBUDMyWzEyMF18MDsKICAgICQ2MyA9ICgoKCQ2MikpICsgMjB8MCk7CiAgICAkNjQgPSBIRUFQMzJbJDYzPj4yXXwwOwogICAgJDY1ID0gJDc7CiAgICAkNjYgPSAoKCQ2NSkgKyAxKXwwOwogICAgJDcgPSAkNjY7CiAgICAkNjcgPSAoKCQ2NCkgKyAoJDY1KXwwKTsKICAgIEhFQVA4WyQ2Nz4+MF0gPSA2ODsKICAgICQ2OCA9IEhFQVAzMlsxMjBdfDA7CiAgICAkNjkgPSAoKCgkNjgpKSArIDIwfDApOwogICAgJDcwID0gSEVBUDMyWyQ2OT4+Ml18MDsKICAgICQ3MSA9ICQ3OwogICAgJDcyID0gKCgkNzEpICsgMSl8MDsKICAgICQ3ID0gJDcyOwogICAgJDczID0gKCgkNzApICsgKCQ3MSl8MCk7CiAgICBIRUFQOFskNzM+PjBdID0gNjg7CiAgICAkNzQgPSBIRUFQMzJbMTIwXXwwOwogICAgJDc1ID0gKCgoJDc0KSkgKyAyMHwwKTsKICAgICQ3NiA9IEhFQVAzMlskNzU+PjJdfDA7CiAgICAkNzcgPSAkNzsKICAgICQ3OCA9ICgoJDc3KSArIDEpfDA7CiAgICAkNyA9ICQ3ODsKICAgICQ3OSA9ICgoJDc2KSArICgkNzcpfDApOwogICAgJCRzaW5rID0gNjg7JCRzaW5rMSA9ICQ3OTsKICAgfQogICBIRUFQOFskJHNpbmsxPj4wXSA9ICQkc2luazsKICAgJDk4ID0gSEVBUDMyWzEyMF18MDsKICAgJDk5ID0gKCgoJDk4KSkgKyAyMHwwKTsKICAgJDEwMCA9IEhFQVAzMlskOTk+PjJdfDA7CiAgICQxMDEgPSAkNzsKICAgJDEwMiA9ICgoJDEwMSkgKyAxKXwwOwogICAkNyA9ICQxMDI7CiAgICQxMDMgPSAoKCQxMDApICsgKCQxMDEpfDApOwogICBIRUFQOFskMTAzPj4wXSA9IC0xOwogICAkMTA0ID0gJDU7CiAgICQxMDUgPSAoKCQxMDQpICsgMSl8MDsKICAgJDUgPSAkMTA1OwogIH0KICAkMTA2ID0gJDY7CiAgJDEwNyA9ICgoJDEwNikgKyAxKXwwOwogICQ2ID0gJDEwNzsKIH0KICQxMDggPSBIRUFQMzJbMTIwXXwwOwogX1NETF9VbmxvY2tTdXJmYWNlKCgkMTA4fDApKTsKICQxMDkgPSBIRUFQMzJbMTIwXXwwOwogKF9TRExfRmxpcCgoJDEwOXwwKSl8MCk7CiAkMTEwID0gSEVBUDMyWzEyMF18MDsKIChfU0RMX0xvY2tTdXJmYWNlKCgkMTEwfDApKXwwKTsKIFNUQUNLVE9QID0gc3A7cmV0dXJuOwp9CmZ1bmN0aW9uIF9kMTZUZXh0dXJlTG9hZCgkMCwkMSwkMikgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogdmFyICQxMCA9IDAsICQxMDAgPSAwLCAkMTAxID0gMCwgJDEwMiA9IDAsICQxMDMgPSAwLCAkMTA0ID0gMCwgJDEwNSA9IDAsICQxMDYgPSAwLCAkMTA3ID0gMCwgJDEwOCA9IDAsICQxMDkgPSAwLCAkMTEgPSAwLCAkMTEwID0gMCwgJDExMSA9IDAsICQxMTIgPSAwLCAkMTEzID0gMCwgJDExNCA9IDAsICQxMTUgPSAwLCAkMTE2ID0gMCwgJDExNyA9IDA7CiB2YXIgJDExOCA9IDAsICQxMTkgPSAwLCAkMTIgPSAwLCAkMTIwID0gMCwgJDEyMSA9IDAsICQxMjIgPSAwLCAkMTIzID0gMCwgJDEyNCA9IDAsICQxMjUgPSAwLCAkMTI2ID0gMCwgJDEyNyA9IDAsICQxMjggPSAwLCAkMTI5ID0gMCwgJDEzID0gMCwgJDEzMCA9IDAsICQxMzEgPSAwLCAkMTMyID0gMCwgJDEzMyA9IDAsICQxMzQgPSAwLCAkMTM1ID0gMDsKIHZhciAkMTM2ID0gMCwgJDEzNyA9IDAsICQxMzggPSAwLCAkMTM5ID0gMCwgJDE0ID0gMCwgJDE0MCA9IDAsICQxNDEgPSAwLCAkMTQyID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIwID0gMCwgJDIxID0gMCwgJDIyID0gMCwgJDIzID0gMCwgJDI0ID0gMCwgJDI1ID0gMCwgJDI2ID0gMDsKIHZhciAkMjcgPSAwLCAkMjggPSAwLCAkMjkgPSAwLCAkMyA9IDAsICQzMCA9IDAsICQzMSA9IDAsICQzMiA9IDAsICQzMyA9IDAsICQzNCA9IDAsICQzNSA9IDAsICQzNiA9IDAsICQzNyA9IDAsICQzOCA9IDAsICQzOSA9IDAsICQ0ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMCwgJDQzID0gMCwgJDQ0ID0gMDsKIHZhciAkNDUgPSAwLCAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNSA9IDAsICQ1MCA9IDAsICQ1MSA9IDAsICQ1MiA9IDAsICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMDsKIHZhciAkNjMgPSAwLCAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNjcgPSAwLCAkNjggPSAwLCAkNjkgPSAwLCAkNyA9IDAsICQ3MCA9IDAsICQ3MSA9IDAsICQ3MiA9IDAsICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMDsKIHZhciAkODEgPSAwLCAkODIgPSAwLCAkODMgPSAwLCAkODQgPSAwLCAkODUgPSAwLCAkODYgPSAwLCAkODcgPSAwLCAkODggPSAwLCAkODkgPSAwLCAkOSA9IDAsICQ5MCA9IDAsICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDA7CiB2YXIgJG9yJGNvbmQgPSAwLCAkb3IkY29uZDMgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgNDh8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coNDh8MCk7CiAkNCA9ICQwOwogJDUgPSAkMTsKICQ2ID0gJDI7CiAkMTUgPSAkNDsKICQxNiA9ICgoJDE1fDApICUgMTYpJi0xOwogJDE3ID0gKCQxNnwwKSE9KDApOwogaWYgKCEoJDE3KSkgewogICQxOCA9ICQ1OwogICQxOSA9ICgoJDE4fDApICUgMTYpJi0xOwogICQyMCA9ICgkMTl8MCkhPSgwKTsKICAkMjEgPSAkNDsKICAkMjIgPSAoJDIxfDApPD0oMCk7CiAgJG9yJGNvbmQgPSAkMjAgfCAkMjI7CiAgJDIzID0gJDU7CiAgJDI0ID0gKCQyM3wwKTw9KDApOwogICRvciRjb25kMyA9ICRvciRjb25kIHwgJDI0OwogIGlmICghKCRvciRjb25kMykpIHsKICAgJDI1ID0gJDQ7CiAgICQyNiA9ICQ1OwogICAkMjcgPSBNYXRoX2ltdWwoJDI1LCAkMjYpfDA7CiAgICQyOCA9ICQyNzw8MjsKICAgJDEyID0gJDI4OwogICAkMjkgPSBIRUFQMzJbMjJdfDA7CiAgICQzMCA9ICgoJDI5KSArIDEpfDA7CiAgIEhFQVAzMlsyMl0gPSAkMzA7CiAgICQxMyA9ICQyOTsKICAgJDMxID0gJDQ7CiAgICQzMiA9IEhFQVAzMlsxMzJdfDA7CiAgICQzMyA9ICQxMzsKICAgJDM0ID0gKCgkMzIpICsgKCgkMzMqMjQpfDApfDApOwogICBIRUFQMzJbJDM0Pj4yXSA9ICQzMTsKICAgJDM1ID0gJDQ7CiAgICQzNiA9ICQzNTw8MjsKICAgJDM3ID0gSEVBUDMyWzEzMl18MDsKICAgJDM4ID0gJDEzOwogICAkMzkgPSAoKCQzNykgKyAoKCQzOCoyNCl8MCl8MCk7CiAgICQ0MCA9ICgoKCQzOSkpICsgOHwwKTsKICAgSEVBUDMyWyQ0MD4+Ml0gPSAkMzY7CiAgICQ0MSA9ICQ0OwogICAkNDIgPSAoKCQ0MSkgLSAxNil8MDsKICAgJDQzID0gJDQyPDwyOwogICAkNDQgPSBIRUFQMzJbMTMyXXwwOwogICAkNDUgPSAkMTM7CiAgICQ0NiA9ICgoJDQ0KSArICgoJDQ1KjI0KXwwKXwwKTsKICAgJDQ3ID0gKCgoJDQ2KSkgKyAxMnwwKTsKICAgSEVBUDMyWyQ0Nz4+Ml0gPSAkNDM7CiAgICQ0OCA9ICQ1OwogICAkNDkgPSBIRUFQMzJbMTMyXXwwOwogICAkNTAgPSAkMTM7CiAgICQ1MSA9ICgoJDQ5KSArICgoJDUwKjI0KXwwKXwwKTsKICAgJDUyID0gKCgoJDUxKSkgKyA0fDApOwogICBIRUFQMzJbJDUyPj4yXSA9ICQ0ODsKICAgJDUzID0gJDEyOwogICAkNTQgPSAoJDUzfDApPCgwKTsKICAgJDU1ID0gJDU0ID8gLTEgOiAkNTM7CiAgICQ1NiA9IChfX1puYWooJDU1KXwwKTsKICAgJDU3ID0gSEVBUDMyWzEzMl18MDsKICAgJDU4ID0gJDEzOwogICAkNTkgPSAoKCQ1NykgKyAoKCQ1OCoyNCl8MCl8MCk7CiAgICQ2MCA9ICgoKCQ1OSkpICsgMTZ8MCk7CiAgIEhFQVAzMlskNjA+PjJdID0gJDU2OwogICAkNjEgPSAkNDsKICAgJDYyID0gJDU7CiAgICQ2MyA9IE1hdGhfaW11bCgkNjEsICQ2Mil8MDsKICAgJDY0ID0gKCQ2M3wwKTwoMCk7CiAgICQ2NSA9ICQ2NCA/IC0xIDogJDYzOwogICAkNjYgPSAoX19abmFqKCQ2NSl8MCk7CiAgICQ2NyA9IEhFQVAzMlsxMzJdfDA7CiAgICQ2OCA9ICQxMzsKICAgJDY5ID0gKCgkNjcpICsgKCgkNjgqMjQpfDApfDApOwogICAkNzAgPSAoKCgkNjkpKSArIDIwfDApOwogICBIRUFQMzJbJDcwPj4yXSA9ICQ2NjsKICAgJDcgPSAwOwogICB3aGlsZSgxKSB7CiAgICAkNzEgPSAkNzsKICAgICQ3MiA9ICQxMjsKICAgICQ3MyA9ICgkNzF8MCk8KCQ3MnwwKTsKICAgIGlmICghKCQ3MykpIHsKICAgICBicmVhazsKICAgIH0KICAgICQ3NCA9ICQ2OwogICAgJDc1ID0gJDc7CiAgICAkNzYgPSAoKCQ3NCkgKyAoJDc1KXwwKTsKICAgICQ3NyA9IEhFQVA4WyQ3Nj4+MF18MDsKICAgICQ3OCA9IEhFQVAzMlsxMzJdfDA7CiAgICAkNzkgPSAkMTM7CiAgICAkODAgPSAoKCQ3OCkgKyAoKCQ3OSoyNCl8MCl8MCk7CiAgICAkODEgPSAoKCgkODApKSArIDE2fDApOwogICAgJDgyID0gSEVBUDMyWyQ4MT4+Ml18MDsKICAgICQ4MyA9ICQ3OwogICAgJDg0ID0gKCgkODIpICsgKCQ4Myl8MCk7CiAgICBIRUFQOFskODQ+PjBdID0gJDc3OwogICAgJDg1ID0gJDc7CiAgICAkODYgPSAoKCQ4NSkgKyAxKXwwOwogICAgJDcgPSAkODY7CiAgIH0KICAgJDcgPSAwOwogICAkOSA9IDA7CiAgIHdoaWxlKDEpIHsKICAgICQ4NyA9ICQ5OwogICAgJDg4ID0gJDU7CiAgICAkODkgPSAoKCQ4OHwwKSAvIDE2KSYtMTsKICAgICQ5MCA9ICgkODd8MCk8KCQ4OXwwKTsKICAgIGlmICghKCQ5MCkpIHsKICAgICBicmVhazsKICAgIH0KICAgICQ4ID0gMDsKICAgIHdoaWxlKDEpIHsKICAgICAkOTEgPSAkODsKICAgICAkOTIgPSAkNDsKICAgICAkOTMgPSAoKCQ5MnwwKSAvIDE2KSYtMTsKICAgICAkOTQgPSAoJDkxfDApPCgkOTN8MCk7CiAgICAgaWYgKCEoJDk0KSkgewogICAgICBicmVhazsKICAgICB9CiAgICAgJDE0ID0gMDsKICAgICAkMTEgPSAwOwogICAgIHdoaWxlKDEpIHsKICAgICAgJDk1ID0gJDExOwogICAgICAkOTYgPSAoJDk1fDApPCgxNik7CiAgICAgIGlmICghKCQ5NikpIHsKICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgICQxMCA9IDA7CiAgICAgIHdoaWxlKDEpIHsKICAgICAgICQ5NyA9ICQxMDsKICAgICAgICQ5OCA9ICgkOTd8MCk8KDE2KTsKICAgICAgIGlmICghKCQ5OCkpIHsKICAgICAgICBicmVhazsKICAgICAgIH0KICAgICAgICQ5OSA9IEhFQVAzMlsxMzJdfDA7CiAgICAgICAkMTAwID0gJDEzOwogICAgICAgJDEwMSA9ICgoJDk5KSArICgoJDEwMCoyNCl8MCl8MCk7CiAgICAgICAkMTAyID0gKCgoJDEwMSkpICsgMTZ8MCk7CiAgICAgICAkMTAzID0gSEVBUDMyWyQxMDI+PjJdfDA7CiAgICAgICAkMTA0ID0gJDk7CiAgICAgICAkMTA1ID0gJDEwNDw8NDsKICAgICAgICQxMDYgPSAkMTE7CiAgICAgICAkMTA3ID0gKCgkMTA1KSArICgkMTA2KSl8MDsKICAgICAgICQxMDggPSAkNDsKICAgICAgICQxMDkgPSBNYXRoX2ltdWwoJDEwNywgJDEwOCl8MDsKICAgICAgICQxMTAgPSAkMTA5PDwyOwogICAgICAgJDExMSA9ICQ4OwogICAgICAgJDExMiA9ICQxMTE8PDQ7CiAgICAgICAkMTEzID0gJDEwOwogICAgICAgJDExNCA9ICgoJDExMikgKyAoJDExMykpfDA7CiAgICAgICAkMTE1ID0gJDExNDw8MjsKICAgICAgICQxMTYgPSAoKCQxMTApICsgKCQxMTUpKXwwOwogICAgICAgJDExNyA9ICgoJDExNikgKyAzKXwwOwogICAgICAgJDExOCA9ICgoJDEwMykgKyAoJDExNyl8MCk7CiAgICAgICAkMTE5ID0gSEVBUDhbJDExOD4+MF18MDsKICAgICAgICQxMjAgPSAkMTE5JjI1NTsKICAgICAgICQxMjEgPSAoJDEyMHwwKSE9KDI1NSk7CiAgICAgICBpZiAoJDEyMSkgewogICAgICAgICQxNCA9IDE7CiAgICAgICB9CiAgICAgICAkMTIyID0gJDEwOwogICAgICAgJDEyMyA9ICgoJDEyMikgKyAxKXwwOwogICAgICAgJDEwID0gJDEyMzsKICAgICAgfQogICAgICAkMTI0ID0gJDExOwogICAgICAkMTI1ID0gKCgkMTI0KSArIDEpfDA7CiAgICAgICQxMSA9ICQxMjU7CiAgICAgfQogICAgICQxMjYgPSAkMTQ7CiAgICAgJDEyNyA9ICQxMjYmMTsKICAgICAkMTI4ID0gSEVBUDMyWzEzMl18MDsKICAgICAkMTI5ID0gJDEzOwogICAgICQxMzAgPSAoKCQxMjgpICsgKCgkMTI5KjI0KXwwKXwwKTsKICAgICAkMTMxID0gKCgoJDEzMCkpICsgMjB8MCk7CiAgICAgJDEzMiA9IEhFQVAzMlskMTMxPj4yXXwwOwogICAgICQxMzMgPSAkNzsKICAgICAkMTM0ID0gKCgkMTMzKSArIDEpfDA7CiAgICAgJDcgPSAkMTM0OwogICAgICQxMzUgPSAoKCQxMzIpICsgKCQxMzMpfDApOwogICAgICQxMzYgPSAkMTI3JjE7CiAgICAgSEVBUDhbJDEzNT4+MF0gPSAkMTM2OwogICAgICQxMzcgPSAkODsKICAgICAkMTM4ID0gKCgkMTM3KSArIDEpfDA7CiAgICAgJDggPSAkMTM4OwogICAgfQogICAgJDEzOSA9ICQ5OwogICAgJDE0MCA9ICgoJDEzOSkgKyAxKXwwOwogICAgJDkgPSAkMTQwOwogICB9CiAgICQxNDEgPSAkMTM7CiAgICQzID0gJDE0MTsKICAgJDE0MiA9ICQzOwogICBTVEFDS1RPUCA9IHNwO3JldHVybiAoJDE0MnwwKTsKICB9CiB9CiAkMyA9IC0xOwogJDE0MiA9ICQzOwogU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQxNDJ8MCk7Cn0KZnVuY3Rpb24gX19HTE9CQUxfX3N1Yl9JX0RyYXcxNkNvcmVfY3BwKCkgewogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIF9fX2N4eF9nbG9iYWxfdmFyX2luaXQoKTsKIHJldHVybjsKfQpmdW5jdGlvbiBfbWFsbG9jKCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgJCQkMDE3MiRpID0gMCwgJCQkMDE3MyRpID0gMCwgJCQkNDIzNiRpID0gMCwgJCQkNDMyOSRpID0gMCwgJCQkaSA9IDAsICQkMCA9IDAsICQkMCRpID0gMCwgJCQwJGkkaSA9IDAsICQkMCRpJGkkaSA9IDAsICQkMCRpMjAkaSA9IDAsICQkMDE3MiRsY3NzYSRpID0gMCwgJCQwMTcyNCRpID0gMCwgJCQwMTczJGxjc3NhJGkgPSAwLCAkJDAxNzMzJGkgPSAwLCAkJDAxOTIgPSAwLCAkJDAxOTQgPSAwLCAkJDAyMDEkaSRpID0gMCwgJCQwMjAyJGkkaSA9IDAsICQkMDIwNiRpJGkgPSAwLCAkJDAyMDckaSRpID0gMDsKIHZhciAkJDAyNDM2NyRpID0gMCwgJCQwMjYwJGkkaSA9IDAsICQkMDI2MSRpJGkgPSAwLCAkJDAyNjIkaSRpID0gMCwgJCQwMjY4JGkkaSA9IDAsICQkMDI2OSRpJGkgPSAwLCAkJDAzMjAkaSA9IDAsICQkMDMyMiRpID0gMCwgJCQwMzIzJGkgPSAwLCAkJDAzMjUkaSA9IDAsICQkMDMzMSRpID0gMCwgJCQwMzM2JGkgPSAwLCAkJDAzMzckJGkgPSAwLCAkJDAzMzckaSA9IDAsICQkMDMzOSRpID0gMCwgJCQwMzQwJGkgPSAwLCAkJDAzNDUkaSA9IDAsICQkMTE3NiRpID0gMCwgJCQxMTc4JGkgPSAwLCAkJDEyNDQ2NiRpID0gMDsKIHZhciAkJDEyNjQkaSRpID0gMCwgJCQxMjY2JGkkaSA9IDAsICQkMTMyMSRpID0gMCwgJCQxMzI2JGkgPSAwLCAkJDEzNDEkaSA9IDAsICQkMTM0NyRpID0gMCwgJCQxMzUxJGkgPSAwLCAkJDIyMzQyNDMxMzYkaSA9IDAsICQkMjI0NyRwaCRpID0gMCwgJCQyMjUzJHBoJGkgPSAwLCAkJDIzMzMkaSA9IDAsICQkMyRpID0gMCwgJCQzJGkkaSA9IDAsICQkMyRpMTk5ID0gMCwgJCQzMzI4JGkgPSAwLCAkJDMzNDkkaSA9IDAsICQkNCRsY3NzYSRpID0gMCwgJCQ0JHBoJGkgPSAwLCAkJDQyMzYkaSA9IDAsICQkNDMyOSRsY3NzYSRpID0gMDsKIHZhciAkJDQzMjk4JGkgPSAwLCAkJDQzMzUkJDQkaSA9IDAsICQkNDMzNSRwaCRpID0gMCwgJCQ0MzM1NyRpID0gMCwgJCQ0OSRpID0gMCwgJCQ3MjM5NDckaSA9IDAsICQkNzQ4JGkgPSAwLCAkJHByZSA9IDAsICQkcHJlJGkgPSAwLCAkJHByZSRpJGkgPSAwLCAkJHByZSRpMTckaSA9IDAsICQkcHJlJGkxOTUgPSAwLCAkJHByZSRpMjA3ID0gMCwgJCRwcmUkcGhpJGkkaVoyRCA9IDAsICQkcHJlJHBoaSRpMTgkaVoyRCA9IDAsICQkcHJlJHBoaSRpMjA4WjJEID0gMCwgJCRwcmUkcGhpJGlaMkQgPSAwLCAkJHByZSRwaGlaMkQgPSAwLCAkJHNpbmsxJGkgPSAwLCAkJHNpbmsxJGkkaSA9IDA7CiB2YXIgJCRzaW5rMTIkaSA9IDAsICQkc2luazIkaSA9IDAsICQkc2luazIkaTIwMiA9IDAsICQkc2luazMkaSA9IDAsICQxID0gMCwgJDEwID0gMCwgJDEwMCA9IDAsICQxMDEgPSAwLCAkMTAyID0gMCwgJDEwMyA9IDAsICQxMDQgPSAwLCAkMTA1ID0gMCwgJDEwNiA9IDAsICQxMDcgPSAwLCAkMTA4ID0gMCwgJDEwOSA9IDAsICQxMSA9IDAsICQxMTAgPSAwLCAkMTExID0gMCwgJDExMiA9IDA7CiB2YXIgJDExMyA9IDAsICQxMTQgPSAwLCAkMTE1ID0gMCwgJDExNiA9IDAsICQxMTcgPSAwLCAkMTE4ID0gMCwgJDExOSA9IDAsICQxMiA9IDAsICQxMjAgPSAwLCAkMTIxID0gMCwgJDEyMiA9IDAsICQxMjMgPSAwLCAkMTI0ID0gMCwgJDEyNSA9IDAsICQxMjYgPSAwLCAkMTI3ID0gMCwgJDEyOCA9IDAsICQxMjkgPSAwLCAkMTMgPSAwLCAkMTMwID0gMDsKIHZhciAkMTMxID0gMCwgJDEzMiA9IDAsICQxMzMgPSAwLCAkMTM0ID0gMCwgJDEzNSA9IDAsICQxMzYgPSAwLCAkMTM3ID0gMCwgJDEzOCA9IDAsICQxMzkgPSAwLCAkMTQgPSAwLCAkMTQwID0gMCwgJDE0MSA9IDAsICQxNDIgPSAwLCAkMTQzID0gMCwgJDE0NCA9IDAsICQxNDUgPSAwLCAkMTQ2ID0gMCwgJDE0NyA9IDAsICQxNDggPSAwLCAkMTQ5ID0gMDsKIHZhciAkMTUgPSAwLCAkMTUwID0gMCwgJDE1MSA9IDAsICQxNTIgPSAwLCAkMTUzID0gMCwgJDE1NCA9IDAsICQxNTUgPSAwLCAkMTU2ID0gMCwgJDE1NyA9IDAsICQxNTggPSAwLCAkMTU5ID0gMCwgJDE2ID0gMCwgJDE2MCA9IDAsICQxNjEgPSAwLCAkMTYyID0gMCwgJDE2MyA9IDAsICQxNjQgPSAwLCAkMTY1ID0gMCwgJDE2NiA9IDAsICQxNjcgPSAwOwogdmFyICQxNjggPSAwLCAkMTY5ID0gMCwgJDE3ID0gMCwgJDE3MCA9IDAsICQxNzEgPSAwLCAkMTcyID0gMCwgJDE3MyA9IDAsICQxNzQgPSAwLCAkMTc1ID0gMCwgJDE3NiA9IDAsICQxNzcgPSAwLCAkMTc4ID0gMCwgJDE3OSA9IDAsICQxOCA9IDAsICQxODAgPSAwLCAkMTgxID0gMCwgJDE4MiA9IDAsICQxODMgPSAwLCAkMTg0ID0gMCwgJDE4NSA9IDA7CiB2YXIgJDE4NiA9IDAsICQxODcgPSAwLCAkMTg4ID0gMCwgJDE4OSA9IDAsICQxOSA9IDAsICQxOTAgPSAwLCAkMTkxID0gMCwgJDE5MiA9IDAsICQxOTMgPSAwLCAkMTk0ID0gMCwgJDE5NSA9IDAsICQxOTYgPSAwLCAkMTk3ID0gMCwgJDE5OCA9IDAsICQxOTkgPSAwLCAkMiA9IDAsICQyMCA9IDAsICQyMDAgPSAwLCAkMjAxID0gMCwgJDIwMiA9IDA7CiB2YXIgJDIwMyA9IDAsICQyMDQgPSAwLCAkMjA1ID0gMCwgJDIwNiA9IDAsICQyMDcgPSAwLCAkMjA4ID0gMCwgJDIwOSA9IDAsICQyMSA9IDAsICQyMTAgPSAwLCAkMjExID0gMCwgJDIxMiA9IDAsICQyMTMgPSAwLCAkMjE0ID0gMCwgJDIxNSA9IDAsICQyMTYgPSAwLCAkMjE3ID0gMCwgJDIxOCA9IDAsICQyMTkgPSAwLCAkMjIgPSAwLCAkMjIwID0gMDsKIHZhciAkMjIxID0gMCwgJDIyMiA9IDAsICQyMjMgPSAwLCAkMjI0ID0gMCwgJDIyNSA9IDAsICQyMjYgPSAwLCAkMjI3ID0gMCwgJDIyOCA9IDAsICQyMjkgPSAwLCAkMjMgPSAwLCAkMjMwID0gMCwgJDIzMSA9IDAsICQyMzIgPSAwLCAkMjMzID0gMCwgJDIzNCA9IDAsICQyMzUgPSAwLCAkMjM2ID0gMCwgJDIzNyA9IDAsICQyMzggPSAwLCAkMjM5ID0gMDsKIHZhciAkMjQgPSAwLCAkMjQwID0gMCwgJDI0MSA9IDAsICQyNDIgPSAwLCAkMjQzID0gMCwgJDI0NCA9IDAsICQyNDUgPSAwLCAkMjQ2ID0gMCwgJDI0NyA9IDAsICQyNDggPSAwLCAkMjQ5ID0gMCwgJDI1ID0gMCwgJDI1MCA9IDAsICQyNTEgPSAwLCAkMjUyID0gMCwgJDI1MyA9IDAsICQyNTQgPSAwLCAkMjU1ID0gMCwgJDI1NiA9IDAsICQyNTcgPSAwOwogdmFyICQyNTggPSAwLCAkMjU5ID0gMCwgJDI2ID0gMCwgJDI2MCA9IDAsICQyNjEgPSAwLCAkMjYyID0gMCwgJDI2MyA9IDAsICQyNjQgPSAwLCAkMjY1ID0gMCwgJDI2NiA9IDAsICQyNjcgPSAwLCAkMjY4ID0gMCwgJDI2OSA9IDAsICQyNyA9IDAsICQyNzAgPSAwLCAkMjcxID0gMCwgJDI3MiA9IDAsICQyNzMgPSAwLCAkMjc0ID0gMCwgJDI3NSA9IDA7CiB2YXIgJDI3NiA9IDAsICQyNzcgPSAwLCAkMjc4ID0gMCwgJDI3OSA9IDAsICQyOCA9IDAsICQyODAgPSAwLCAkMjgxID0gMCwgJDI4MiA9IDAsICQyODMgPSAwLCAkMjg0ID0gMCwgJDI4NSA9IDAsICQyODYgPSAwLCAkMjg3ID0gMCwgJDI4OCA9IDAsICQyODkgPSAwLCAkMjkgPSAwLCAkMjkwID0gMCwgJDI5MSA9IDAsICQyOTIgPSAwLCAkMjkzID0gMDsKIHZhciAkMjk0ID0gMCwgJDI5NSA9IDAsICQyOTYgPSAwLCAkMjk3ID0gMCwgJDI5OCA9IDAsICQyOTkgPSAwLCAkMyA9IDAsICQzMCA9IDAsICQzMDAgPSAwLCAkMzAxID0gMCwgJDMwMiA9IDAsICQzMDMgPSAwLCAkMzA0ID0gMCwgJDMwNSA9IDAsICQzMDYgPSAwLCAkMzA3ID0gMCwgJDMwOCA9IDAsICQzMDkgPSAwLCAkMzEgPSAwLCAkMzEwID0gMDsKIHZhciAkMzExID0gMCwgJDMxMiA9IDAsICQzMTMgPSAwLCAkMzE0ID0gMCwgJDMxNSA9IDAsICQzMTYgPSAwLCAkMzE3ID0gMCwgJDMxOCA9IDAsICQzMTkgPSAwLCAkMzIgPSAwLCAkMzIwID0gMCwgJDMyMSA9IDAsICQzMjIgPSAwLCAkMzIzID0gMCwgJDMyNCA9IDAsICQzMjUgPSAwLCAkMzI2ID0gMCwgJDMyNyA9IDAsICQzMjggPSAwLCAkMzI5ID0gMDsKIHZhciAkMzMgPSAwLCAkMzMwID0gMCwgJDMzMSA9IDAsICQzMzIgPSAwLCAkMzMzID0gMCwgJDMzNCA9IDAsICQzMzUgPSAwLCAkMzM2ID0gMCwgJDMzNyA9IDAsICQzMzggPSAwLCAkMzM5ID0gMCwgJDM0ID0gMCwgJDM0MCA9IDAsICQzNDEgPSAwLCAkMzQyID0gMCwgJDM0MyA9IDAsICQzNDQgPSAwLCAkMzQ1ID0gMCwgJDM0NiA9IDAsICQzNDcgPSAwOwogdmFyICQzNDggPSAwLCAkMzQ5ID0gMCwgJDM1ID0gMCwgJDM1MCA9IDAsICQzNTEgPSAwLCAkMzUyID0gMCwgJDM1MyA9IDAsICQzNTQgPSAwLCAkMzU1ID0gMCwgJDM1NiA9IDAsICQzNTcgPSAwLCAkMzU4ID0gMCwgJDM1OSA9IDAsICQzNiA9IDAsICQzNjAgPSAwLCAkMzYxID0gMCwgJDM2MiA9IDAsICQzNjMgPSAwLCAkMzY0ID0gMCwgJDM2NSA9IDA7CiB2YXIgJDM2NiA9IDAsICQzNjcgPSAwLCAkMzY4ID0gMCwgJDM2OSA9IDAsICQzNyA9IDAsICQzNzAgPSAwLCAkMzcxID0gMCwgJDM3MiA9IDAsICQzNzMgPSAwLCAkMzc0ID0gMCwgJDM3NSA9IDAsICQzNzYgPSAwLCAkMzc3ID0gMCwgJDM3OCA9IDAsICQzNzkgPSAwLCAkMzggPSAwLCAkMzgwID0gMCwgJDM4MSA9IDAsICQzODIgPSAwLCAkMzgzID0gMDsKIHZhciAkMzg0ID0gMCwgJDM4NSA9IDAsICQzODYgPSAwLCAkMzg3ID0gMCwgJDM4OCA9IDAsICQzODkgPSAwLCAkMzkgPSAwLCAkMzkwID0gMCwgJDM5MSA9IDAsICQzOTIgPSAwLCAkMzkzID0gMCwgJDM5NCA9IDAsICQzOTUgPSAwLCAkMzk2ID0gMCwgJDM5NyA9IDAsICQzOTggPSAwLCAkMzk5ID0gMCwgJDQgPSAwLCAkNDAgPSAwLCAkNDAwID0gMDsKIHZhciAkNDAxID0gMCwgJDQwMiA9IDAsICQ0MDMgPSAwLCAkNDA0ID0gMCwgJDQwNSA9IDAsICQ0MDYgPSAwLCAkNDA3ID0gMCwgJDQwOCA9IDAsICQ0MDkgPSAwLCAkNDEgPSAwLCAkNDEwID0gMCwgJDQxMSA9IDAsICQ0MTIgPSAwLCAkNDEzID0gMCwgJDQxNCA9IDAsICQ0MTUgPSAwLCAkNDE2ID0gMCwgJDQxNyA9IDAsICQ0MTggPSAwLCAkNDE5ID0gMDsKIHZhciAkNDIgPSAwLCAkNDIwID0gMCwgJDQyMSA9IDAsICQ0MjIgPSAwLCAkNDIzID0gMCwgJDQyNCA9IDAsICQ0MjUgPSAwLCAkNDI2ID0gMCwgJDQyNyA9IDAsICQ0MjggPSAwLCAkNDI5ID0gMCwgJDQzID0gMCwgJDQzMCA9IDAsICQ0MzEgPSAwLCAkNDMyID0gMCwgJDQzMyA9IDAsICQ0MzQgPSAwLCAkNDM1ID0gMCwgJDQzNiA9IDAsICQ0MzcgPSAwOwogdmFyICQ0MzggPSAwLCAkNDM5ID0gMCwgJDQ0ID0gMCwgJDQ0MCA9IDAsICQ0NDEgPSAwLCAkNDQyID0gMCwgJDQ0MyA9IDAsICQ0NDQgPSAwLCAkNDQ1ID0gMCwgJDQ0NiA9IDAsICQ0NDcgPSAwLCAkNDQ4ID0gMCwgJDQ0OSA9IDAsICQ0NSA9IDAsICQ0NTAgPSAwLCAkNDUxID0gMCwgJDQ1MiA9IDAsICQ0NTMgPSAwLCAkNDU0ID0gMCwgJDQ1NSA9IDA7CiB2YXIgJDQ1NiA9IDAsICQ0NTcgPSAwLCAkNDU4ID0gMCwgJDQ1OSA9IDAsICQ0NiA9IDAsICQ0NjAgPSAwLCAkNDYxID0gMCwgJDQ2MiA9IDAsICQ0NjMgPSAwLCAkNDY0ID0gMCwgJDQ2NSA9IDAsICQ0NjYgPSAwLCAkNDY3ID0gMCwgJDQ2OCA9IDAsICQ0NjkgPSAwLCAkNDcgPSAwLCAkNDcwID0gMCwgJDQ3MSA9IDAsICQ0NzIgPSAwLCAkNDczID0gMDsKIHZhciAkNDc0ID0gMCwgJDQ3NSA9IDAsICQ0NzYgPSAwLCAkNDc3ID0gMCwgJDQ3OCA9IDAsICQ0NzkgPSAwLCAkNDggPSAwLCAkNDgwID0gMCwgJDQ4MSA9IDAsICQ0ODIgPSAwLCAkNDgzID0gMCwgJDQ4NCA9IDAsICQ0ODUgPSAwLCAkNDg2ID0gMCwgJDQ4NyA9IDAsICQ0ODggPSAwLCAkNDg5ID0gMCwgJDQ5ID0gMCwgJDQ5MCA9IDAsICQ0OTEgPSAwOwogdmFyICQ0OTIgPSAwLCAkNDkzID0gMCwgJDQ5NCA9IDAsICQ0OTUgPSAwLCAkNDk2ID0gMCwgJDQ5NyA9IDAsICQ0OTggPSAwLCAkNDk5ID0gMCwgJDUgPSAwLCAkNTAgPSAwLCAkNTAwID0gMCwgJDUwMSA9IDAsICQ1MDIgPSAwLCAkNTAzID0gMCwgJDUwNCA9IDAsICQ1MDUgPSAwLCAkNTA2ID0gMCwgJDUwNyA9IDAsICQ1MDggPSAwLCAkNTA5ID0gMDsKIHZhciAkNTEgPSAwLCAkNTEwID0gMCwgJDUxMSA9IDAsICQ1MTIgPSAwLCAkNTEzID0gMCwgJDUxNCA9IDAsICQ1MTUgPSAwLCAkNTE2ID0gMCwgJDUxNyA9IDAsICQ1MTggPSAwLCAkNTE5ID0gMCwgJDUyID0gMCwgJDUyMCA9IDAsICQ1MjEgPSAwLCAkNTIyID0gMCwgJDUyMyA9IDAsICQ1MjQgPSAwLCAkNTI1ID0gMCwgJDUyNiA9IDAsICQ1MjcgPSAwOwogdmFyICQ1MjggPSAwLCAkNTI5ID0gMCwgJDUzID0gMCwgJDUzMCA9IDAsICQ1MzEgPSAwLCAkNTMyID0gMCwgJDUzMyA9IDAsICQ1MzQgPSAwLCAkNTM1ID0gMCwgJDUzNiA9IDAsICQ1MzcgPSAwLCAkNTM4ID0gMCwgJDUzOSA9IDAsICQ1NCA9IDAsICQ1NDAgPSAwLCAkNTQxID0gMCwgJDU0MiA9IDAsICQ1NDMgPSAwLCAkNTQ0ID0gMCwgJDU0NSA9IDA7CiB2YXIgJDU0NiA9IDAsICQ1NDcgPSAwLCAkNTQ4ID0gMCwgJDU0OSA9IDAsICQ1NSA9IDAsICQ1NTAgPSAwLCAkNTUxID0gMCwgJDU1MiA9IDAsICQ1NTMgPSAwLCAkNTU0ID0gMCwgJDU1NSA9IDAsICQ1NTYgPSAwLCAkNTU3ID0gMCwgJDU1OCA9IDAsICQ1NTkgPSAwLCAkNTYgPSAwLCAkNTYwID0gMCwgJDU2MSA9IDAsICQ1NjIgPSAwLCAkNTYzID0gMDsKIHZhciAkNTY0ID0gMCwgJDU2NSA9IDAsICQ1NjYgPSAwLCAkNTY3ID0gMCwgJDU2OCA9IDAsICQ1NjkgPSAwLCAkNTcgPSAwLCAkNTcwID0gMCwgJDU3MSA9IDAsICQ1NzIgPSAwLCAkNTczID0gMCwgJDU3NCA9IDAsICQ1NzUgPSAwLCAkNTc2ID0gMCwgJDU3NyA9IDAsICQ1NzggPSAwLCAkNTc5ID0gMCwgJDU4ID0gMCwgJDU4MCA9IDAsICQ1ODEgPSAwOwogdmFyICQ1ODIgPSAwLCAkNTgzID0gMCwgJDU4NCA9IDAsICQ1ODUgPSAwLCAkNTg2ID0gMCwgJDU4NyA9IDAsICQ1ODggPSAwLCAkNTg5ID0gMCwgJDU5ID0gMCwgJDU5MCA9IDAsICQ1OTEgPSAwLCAkNTkyID0gMCwgJDU5MyA9IDAsICQ1OTQgPSAwLCAkNTk1ID0gMCwgJDU5NiA9IDAsICQ1OTcgPSAwLCAkNTk4ID0gMCwgJDU5OSA9IDAsICQ2ID0gMDsKIHZhciAkNjAgPSAwLCAkNjAwID0gMCwgJDYwMSA9IDAsICQ2MDIgPSAwLCAkNjAzID0gMCwgJDYwNCA9IDAsICQ2MDUgPSAwLCAkNjA2ID0gMCwgJDYwNyA9IDAsICQ2MDggPSAwLCAkNjA5ID0gMCwgJDYxID0gMCwgJDYxMCA9IDAsICQ2MTEgPSAwLCAkNjEyID0gMCwgJDYxMyA9IDAsICQ2MTQgPSAwLCAkNjE1ID0gMCwgJDYxNiA9IDAsICQ2MTcgPSAwOwogdmFyICQ2MTggPSAwLCAkNjE5ID0gMCwgJDYyID0gMCwgJDYyMCA9IDAsICQ2MjEgPSAwLCAkNjIyID0gMCwgJDYyMyA9IDAsICQ2MjQgPSAwLCAkNjI1ID0gMCwgJDYyNiA9IDAsICQ2MjcgPSAwLCAkNjI4ID0gMCwgJDYyOSA9IDAsICQ2MyA9IDAsICQ2MzAgPSAwLCAkNjMxID0gMCwgJDYzMiA9IDAsICQ2MzMgPSAwLCAkNjM0ID0gMCwgJDYzNSA9IDA7CiB2YXIgJDYzNiA9IDAsICQ2MzcgPSAwLCAkNjM4ID0gMCwgJDYzOSA9IDAsICQ2NCA9IDAsICQ2NDAgPSAwLCAkNjQxID0gMCwgJDY0MiA9IDAsICQ2NDMgPSAwLCAkNjQ0ID0gMCwgJDY0NSA9IDAsICQ2NDYgPSAwLCAkNjQ3ID0gMCwgJDY0OCA9IDAsICQ2NDkgPSAwLCAkNjUgPSAwLCAkNjUwID0gMCwgJDY1MSA9IDAsICQ2NTIgPSAwLCAkNjUzID0gMDsKIHZhciAkNjU0ID0gMCwgJDY1NSA9IDAsICQ2NTYgPSAwLCAkNjU3ID0gMCwgJDY1OCA9IDAsICQ2NTkgPSAwLCAkNjYgPSAwLCAkNjYwID0gMCwgJDY2MSA9IDAsICQ2NjIgPSAwLCAkNjYzID0gMCwgJDY2NCA9IDAsICQ2NjUgPSAwLCAkNjY2ID0gMCwgJDY2NyA9IDAsICQ2NjggPSAwLCAkNjY5ID0gMCwgJDY3ID0gMCwgJDY3MCA9IDAsICQ2NzEgPSAwOwogdmFyICQ2NzIgPSAwLCAkNjczID0gMCwgJDY3NCA9IDAsICQ2NzUgPSAwLCAkNjc2ID0gMCwgJDY3NyA9IDAsICQ2NzggPSAwLCAkNjc5ID0gMCwgJDY4ID0gMCwgJDY4MCA9IDAsICQ2ODEgPSAwLCAkNjgyID0gMCwgJDY4MyA9IDAsICQ2ODQgPSAwLCAkNjg1ID0gMCwgJDY4NiA9IDAsICQ2ODcgPSAwLCAkNjg4ID0gMCwgJDY4OSA9IDAsICQ2OSA9IDA7CiB2YXIgJDY5MCA9IDAsICQ2OTEgPSAwLCAkNjkyID0gMCwgJDY5MyA9IDAsICQ2OTQgPSAwLCAkNjk1ID0gMCwgJDY5NiA9IDAsICQ2OTcgPSAwLCAkNjk4ID0gMCwgJDY5OSA9IDAsICQ3ID0gMCwgJDcwID0gMCwgJDcwMCA9IDAsICQ3MDEgPSAwLCAkNzAyID0gMCwgJDcwMyA9IDAsICQ3MDQgPSAwLCAkNzA1ID0gMCwgJDcwNiA9IDAsICQ3MDcgPSAwOwogdmFyICQ3MDggPSAwLCAkNzA5ID0gMCwgJDcxID0gMCwgJDcxMCA9IDAsICQ3MTEgPSAwLCAkNzEyID0gMCwgJDcxMyA9IDAsICQ3MTQgPSAwLCAkNzE1ID0gMCwgJDcxNiA9IDAsICQ3MTcgPSAwLCAkNzE4ID0gMCwgJDcxOSA9IDAsICQ3MiA9IDAsICQ3MjAgPSAwLCAkNzIxID0gMCwgJDcyMiA9IDAsICQ3MjMgPSAwLCAkNzI0ID0gMCwgJDcyNSA9IDA7CiB2YXIgJDcyNiA9IDAsICQ3MjcgPSAwLCAkNzI4ID0gMCwgJDcyOSA9IDAsICQ3MyA9IDAsICQ3MzAgPSAwLCAkNzMxID0gMCwgJDczMiA9IDAsICQ3MzMgPSAwLCAkNzM0ID0gMCwgJDczNSA9IDAsICQ3MzYgPSAwLCAkNzM3ID0gMCwgJDczOCA9IDAsICQ3MzkgPSAwLCAkNzQgPSAwLCAkNzQwID0gMCwgJDc0MSA9IDAsICQ3NDIgPSAwLCAkNzQzID0gMDsKIHZhciAkNzQ0ID0gMCwgJDc0NSA9IDAsICQ3NDYgPSAwLCAkNzQ3ID0gMCwgJDc0OCA9IDAsICQ3NDkgPSAwLCAkNzUgPSAwLCAkNzUwID0gMCwgJDc1MSA9IDAsICQ3NTIgPSAwLCAkNzUzID0gMCwgJDc1NCA9IDAsICQ3NTUgPSAwLCAkNzU2ID0gMCwgJDc1NyA9IDAsICQ3NTggPSAwLCAkNzU5ID0gMCwgJDc2ID0gMCwgJDc2MCA9IDAsICQ3NjEgPSAwOwogdmFyICQ3NjIgPSAwLCAkNzYzID0gMCwgJDc2NCA9IDAsICQ3NjUgPSAwLCAkNzY2ID0gMCwgJDc2NyA9IDAsICQ3NjggPSAwLCAkNzY5ID0gMCwgJDc3ID0gMCwgJDc3MCA9IDAsICQ3NzEgPSAwLCAkNzcyID0gMCwgJDc3MyA9IDAsICQ3NzQgPSAwLCAkNzc1ID0gMCwgJDc3NiA9IDAsICQ3NzcgPSAwLCAkNzc4ID0gMCwgJDc3OSA9IDAsICQ3OCA9IDA7CiB2YXIgJDc4MCA9IDAsICQ3ODEgPSAwLCAkNzgyID0gMCwgJDc4MyA9IDAsICQ3ODQgPSAwLCAkNzg1ID0gMCwgJDc4NiA9IDAsICQ3ODcgPSAwLCAkNzg4ID0gMCwgJDc4OSA9IDAsICQ3OSA9IDAsICQ3OTAgPSAwLCAkNzkxID0gMCwgJDc5MiA9IDAsICQ3OTMgPSAwLCAkNzk0ID0gMCwgJDc5NSA9IDAsICQ3OTYgPSAwLCAkNzk3ID0gMCwgJDc5OCA9IDA7CiB2YXIgJDc5OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgwMCA9IDAsICQ4MDEgPSAwLCAkODAyID0gMCwgJDgwMyA9IDAsICQ4MDQgPSAwLCAkODA1ID0gMCwgJDgwNiA9IDAsICQ4MDcgPSAwLCAkODA4ID0gMCwgJDgwOSA9IDAsICQ4MSA9IDAsICQ4MTAgPSAwLCAkODExID0gMCwgJDgxMiA9IDAsICQ4MTMgPSAwLCAkODE0ID0gMCwgJDgxNSA9IDA7CiB2YXIgJDgxNiA9IDAsICQ4MTcgPSAwLCAkODE4ID0gMCwgJDgxOSA9IDAsICQ4MiA9IDAsICQ4MjAgPSAwLCAkODIxID0gMCwgJDgyMiA9IDAsICQ4MjMgPSAwLCAkODI0ID0gMCwgJDgyNSA9IDAsICQ4MjYgPSAwLCAkODI3ID0gMCwgJDgyOCA9IDAsICQ4MjkgPSAwLCAkODMgPSAwLCAkODMwID0gMCwgJDgzMSA9IDAsICQ4MzIgPSAwLCAkODMzID0gMDsKIHZhciAkODM0ID0gMCwgJDgzNSA9IDAsICQ4MzYgPSAwLCAkODM3ID0gMCwgJDgzOCA9IDAsICQ4MzkgPSAwLCAkODQgPSAwLCAkODQwID0gMCwgJDg0MSA9IDAsICQ4NDIgPSAwLCAkODQzID0gMCwgJDg0NCA9IDAsICQ4NDUgPSAwLCAkODQ2ID0gMCwgJDg0NyA9IDAsICQ4NDggPSAwLCAkODQ5ID0gMCwgJDg1ID0gMCwgJDg1MCA9IDAsICQ4NTEgPSAwOwogdmFyICQ4NTIgPSAwLCAkODUzID0gMCwgJDg1NCA9IDAsICQ4NTUgPSAwLCAkODU2ID0gMCwgJDg1NyA9IDAsICQ4NTggPSAwLCAkODU5ID0gMCwgJDg2ID0gMCwgJDg2MCA9IDAsICQ4NjEgPSAwLCAkODYyID0gMCwgJDg2MyA9IDAsICQ4NjQgPSAwLCAkODY1ID0gMCwgJDg2NiA9IDAsICQ4NjcgPSAwLCAkODY4ID0gMCwgJDg2OSA9IDAsICQ4NyA9IDA7CiB2YXIgJDg3MCA9IDAsICQ4NzEgPSAwLCAkODcyID0gMCwgJDg3MyA9IDAsICQ4NzQgPSAwLCAkODc1ID0gMCwgJDg3NiA9IDAsICQ4NzcgPSAwLCAkODc4ID0gMCwgJDg3OSA9IDAsICQ4OCA9IDAsICQ4ODAgPSAwLCAkODgxID0gMCwgJDg4MiA9IDAsICQ4ODMgPSAwLCAkODg0ID0gMCwgJDg4NSA9IDAsICQ4ODYgPSAwLCAkODg3ID0gMCwgJDg4OCA9IDA7CiB2YXIgJDg4OSA9IDAsICQ4OSA9IDAsICQ4OTAgPSAwLCAkODkxID0gMCwgJDg5MiA9IDAsICQ4OTMgPSAwLCAkODk0ID0gMCwgJDg5NSA9IDAsICQ4OTYgPSAwLCAkODk3ID0gMCwgJDg5OCA9IDAsICQ4OTkgPSAwLCAkOSA9IDAsICQ5MCA9IDAsICQ5MDAgPSAwLCAkOTAxID0gMCwgJDkwMiA9IDAsICQ5MDMgPSAwLCAkOTA0ID0gMCwgJDkwNSA9IDA7CiB2YXIgJDkwNiA9IDAsICQ5MDcgPSAwLCAkOTA4ID0gMCwgJDkwOSA9IDAsICQ5MSA9IDAsICQ5MTAgPSAwLCAkOTExID0gMCwgJDkxMiA9IDAsICQ5MTMgPSAwLCAkOTE0ID0gMCwgJDkxNSA9IDAsICQ5MTYgPSAwLCAkOTE3ID0gMCwgJDkxOCA9IDAsICQ5MTkgPSAwLCAkOTIgPSAwLCAkOTIwID0gMCwgJDkyMSA9IDAsICQ5MjIgPSAwLCAkOTIzID0gMDsKIHZhciAkOTI0ID0gMCwgJDkyNSA9IDAsICQ5MjYgPSAwLCAkOTI3ID0gMCwgJDkyOCA9IDAsICQ5MjkgPSAwLCAkOTMgPSAwLCAkOTMwID0gMCwgJDkzMSA9IDAsICQ5MzIgPSAwLCAkOTMzID0gMCwgJDkzNCA9IDAsICQ5MzUgPSAwLCAkOTM2ID0gMCwgJDkzNyA9IDAsICQ5MzggPSAwLCAkOTM5ID0gMCwgJDk0ID0gMCwgJDk0MCA9IDAsICQ5NDEgPSAwOwogdmFyICQ5NDIgPSAwLCAkOTQzID0gMCwgJDk0NCA9IDAsICQ5NDUgPSAwLCAkOTQ2ID0gMCwgJDk0NyA9IDAsICQ5NDggPSAwLCAkOTQ5ID0gMCwgJDk1ID0gMCwgJDk1MCA9IDAsICQ5NTEgPSAwLCAkOTUyID0gMCwgJDk1MyA9IDAsICQ5NTQgPSAwLCAkOTU1ID0gMCwgJDk1NiA9IDAsICQ5NTcgPSAwLCAkOTU4ID0gMCwgJDk1OSA9IDAsICQ5NiA9IDA7CiB2YXIgJDk2MCA9IDAsICQ5NjEgPSAwLCAkOTYyID0gMCwgJDk2MyA9IDAsICQ5NjQgPSAwLCAkOTY1ID0gMCwgJDk2NiA9IDAsICQ5NjcgPSAwLCAkOTY4ID0gMCwgJDk2OSA9IDAsICQ5NyA9IDAsICQ5NzAgPSAwLCAkOTcxID0gMCwgJDk4ID0gMCwgJDk5ID0gMCwgJGNvbmQkaSA9IDAsICRjb25kJGkkaSA9IDAsICRjb25kJGkyMDYgPSAwLCAkbm90JCRpID0gMCwgJG5vdCQzJGkgPSAwOwogdmFyICRvciRjb25kJGkgPSAwLCAkb3IkY29uZCRpMjAwID0gMCwgJG9yJGNvbmQxJGkgPSAwLCAkb3IkY29uZDEkaTE5OCA9IDAsICRvciRjb25kMTAkaSA9IDAsICRvciRjb25kMTEkaSA9IDAsICRvciRjb25kMTEkbm90JGkgPSAwLCAkb3IkY29uZDEyJGkgPSAwLCAkb3IkY29uZDIkaSA9IDAsICRvciRjb25kNDkkaSA9IDAsICRvciRjb25kNSRpID0gMCwgJG9yJGNvbmQ1MCRpID0gMCwgJG9yJGNvbmQ3JGkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMTZ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMTZ8MCk7CiAkMSA9IHNwOwogJDIgPSAoJDA+Pj4wKTwoMjQ1KTsKIGRvIHsKICBpZiAoJDIpIHsKICAgJDMgPSAoJDA+Pj4wKTwoMTEpOwogICAkNCA9ICgoJDApICsgMTEpfDA7CiAgICQ1ID0gJDQgJiAtODsKICAgJDYgPSAkMyA/IDE2IDogJDU7CiAgICQ3ID0gJDYgPj4+IDM7CiAgICQ4ID0gSEVBUDMyWzEzM118MDsKICAgJDkgPSAkOCA+Pj4gJDc7CiAgICQxMCA9ICQ5ICYgMzsKICAgJDExID0gKCQxMHwwKT09KDApOwogICBpZiAoISgkMTEpKSB7CiAgICAkMTIgPSAkOSAmIDE7CiAgICAkMTMgPSAkMTIgXiAxOwogICAgJDE0ID0gKCgkMTMpICsgKCQ3KSl8MDsKICAgICQxNSA9ICQxNCA8PCAxOwogICAgJDE2ID0gKDU3MiArICgkMTU8PDIpfDApOwogICAgJDE3ID0gKCgoJDE2KSkgKyA4fDApOwogICAgJDE4ID0gSEVBUDMyWyQxNz4+Ml18MDsKICAgICQxOSA9ICgoKCQxOCkpICsgOHwwKTsKICAgICQyMCA9IEhFQVAzMlskMTk+PjJdfDA7CiAgICAkMjEgPSAoJDIwfDApPT0oJDE2fDApOwogICAgaWYgKCQyMSkgewogICAgICQyMiA9IDEgPDwgJDE0OwogICAgICQyMyA9ICQyMiBeIC0xOwogICAgICQyNCA9ICQ4ICYgJDIzOwogICAgIEhFQVAzMlsxMzNdID0gJDI0OwogICAgfSBlbHNlIHsKICAgICAkMjUgPSAoKCgkMjApKSArIDEyfDApOwogICAgIEhFQVAzMlskMjU+PjJdID0gJDE2OwogICAgIEhFQVAzMlskMTc+PjJdID0gJDIwOwogICAgfQogICAgJDI2ID0gJDE0IDw8IDM7CiAgICAkMjcgPSAkMjYgfCAzOwogICAgJDI4ID0gKCgoJDE4KSkgKyA0fDApOwogICAgSEVBUDMyWyQyOD4+Ml0gPSAkMjc7CiAgICAkMjkgPSAoKCQxOCkgKyAoJDI2KXwwKTsKICAgICQzMCA9ICgoKCQyOSkpICsgNHwwKTsKICAgICQzMSA9IEhFQVAzMlskMzA+PjJdfDA7CiAgICAkMzIgPSAkMzEgfCAxOwogICAgSEVBUDMyWyQzMD4+Ml0gPSAkMzI7CiAgICAkJDAgPSAkMTk7CiAgICBTVEFDS1RPUCA9IHNwO3JldHVybiAoJCQwfDApOwogICB9CiAgICQzMyA9IEhFQVAzMlsoNTQwKT4+Ml18MDsKICAgJDM0ID0gKCQ2Pj4+MCk+KCQzMz4+PjApOwogICBpZiAoJDM0KSB7CiAgICAkMzUgPSAoJDl8MCk9PSgwKTsKICAgIGlmICghKCQzNSkpIHsKICAgICAkMzYgPSAkOSA8PCAkNzsKICAgICAkMzcgPSAyIDw8ICQ3OwogICAgICQzOCA9ICgwIC0gKCQzNykpfDA7CiAgICAgJDM5ID0gJDM3IHwgJDM4OwogICAgICQ0MCA9ICQzNiAmICQzOTsKICAgICAkNDEgPSAoMCAtICgkNDApKXwwOwogICAgICQ0MiA9ICQ0MCAmICQ0MTsKICAgICAkNDMgPSAoKCQ0MikgKyAtMSl8MDsKICAgICAkNDQgPSAkNDMgPj4+IDEyOwogICAgICQ0NSA9ICQ0NCAmIDE2OwogICAgICQ0NiA9ICQ0MyA+Pj4gJDQ1OwogICAgICQ0NyA9ICQ0NiA+Pj4gNTsKICAgICAkNDggPSAkNDcgJiA4OwogICAgICQ0OSA9ICQ0OCB8ICQ0NTsKICAgICAkNTAgPSAkNDYgPj4+ICQ0ODsKICAgICAkNTEgPSAkNTAgPj4+IDI7CiAgICAgJDUyID0gJDUxICYgNDsKICAgICAkNTMgPSAkNDkgfCAkNTI7CiAgICAgJDU0ID0gJDUwID4+PiAkNTI7CiAgICAgJDU1ID0gJDU0ID4+PiAxOwogICAgICQ1NiA9ICQ1NSAmIDI7CiAgICAgJDU3ID0gJDUzIHwgJDU2OwogICAgICQ1OCA9ICQ1NCA+Pj4gJDU2OwogICAgICQ1OSA9ICQ1OCA+Pj4gMTsKICAgICAkNjAgPSAkNTkgJiAxOwogICAgICQ2MSA9ICQ1NyB8ICQ2MDsKICAgICAkNjIgPSAkNTggPj4+ICQ2MDsKICAgICAkNjMgPSAoKCQ2MSkgKyAoJDYyKSl8MDsKICAgICAkNjQgPSAkNjMgPDwgMTsKICAgICAkNjUgPSAoNTcyICsgKCQ2NDw8Mil8MCk7CiAgICAgJDY2ID0gKCgoJDY1KSkgKyA4fDApOwogICAgICQ2NyA9IEhFQVAzMlskNjY+PjJdfDA7CiAgICAgJDY4ID0gKCgoJDY3KSkgKyA4fDApOwogICAgICQ2OSA9IEhFQVAzMlskNjg+PjJdfDA7CiAgICAgJDcwID0gKCQ2OXwwKT09KCQ2NXwwKTsKICAgICBpZiAoJDcwKSB7CiAgICAgICQ3MSA9IDEgPDwgJDYzOwogICAgICAkNzIgPSAkNzEgXiAtMTsKICAgICAgJDczID0gJDggJiAkNzI7CiAgICAgIEhFQVAzMlsxMzNdID0gJDczOwogICAgICAkOTAgPSAkNzM7CiAgICAgfSBlbHNlIHsKICAgICAgJDc0ID0gKCgoJDY5KSkgKyAxMnwwKTsKICAgICAgSEVBUDMyWyQ3ND4+Ml0gPSAkNjU7CiAgICAgIEhFQVAzMlskNjY+PjJdID0gJDY5OwogICAgICAkOTAgPSAkODsKICAgICB9CiAgICAgJDc1ID0gJDYzIDw8IDM7CiAgICAgJDc2ID0gKCgkNzUpIC0gKCQ2KSl8MDsKICAgICAkNzcgPSAkNiB8IDM7CiAgICAgJDc4ID0gKCgoJDY3KSkgKyA0fDApOwogICAgIEhFQVAzMlskNzg+PjJdID0gJDc3OwogICAgICQ3OSA9ICgoJDY3KSArICgkNil8MCk7CiAgICAgJDgwID0gJDc2IHwgMTsKICAgICAkODEgPSAoKCgkNzkpKSArIDR8MCk7CiAgICAgSEVBUDMyWyQ4MT4+Ml0gPSAkODA7CiAgICAgJDgyID0gKCgkNjcpICsgKCQ3NSl8MCk7CiAgICAgSEVBUDMyWyQ4Mj4+Ml0gPSAkNzY7CiAgICAgJDgzID0gKCQzM3wwKT09KDApOwogICAgIGlmICghKCQ4MykpIHsKICAgICAgJDg0ID0gSEVBUDMyWyg1NTIpPj4yXXwwOwogICAgICAkODUgPSAkMzMgPj4+IDM7CiAgICAgICQ4NiA9ICQ4NSA8PCAxOwogICAgICAkODcgPSAoNTcyICsgKCQ4Njw8Mil8MCk7CiAgICAgICQ4OCA9IDEgPDwgJDg1OwogICAgICAkODkgPSAkOTAgJiAkODg7CiAgICAgICQ5MSA9ICgkODl8MCk9PSgwKTsKICAgICAgaWYgKCQ5MSkgewogICAgICAgJDkyID0gJDkwIHwgJDg4OwogICAgICAgSEVBUDMyWzEzM10gPSAkOTI7CiAgICAgICAkJHByZSA9ICgoKCQ4NykpICsgOHwwKTsKICAgICAgICQkMDE5NCA9ICQ4NzskJHByZSRwaGlaMkQgPSAkJHByZTsKICAgICAgfSBlbHNlIHsKICAgICAgICQ5MyA9ICgoKCQ4NykpICsgOHwwKTsKICAgICAgICQ5NCA9IEhFQVAzMlskOTM+PjJdfDA7CiAgICAgICAkJDAxOTQgPSAkOTQ7JCRwcmUkcGhpWjJEID0gJDkzOwogICAgICB9CiAgICAgIEhFQVAzMlskJHByZSRwaGlaMkQ+PjJdID0gJDg0OwogICAgICAkOTUgPSAoKCgkJDAxOTQpKSArIDEyfDApOwogICAgICBIRUFQMzJbJDk1Pj4yXSA9ICQ4NDsKICAgICAgJDk2ID0gKCgoJDg0KSkgKyA4fDApOwogICAgICBIRUFQMzJbJDk2Pj4yXSA9ICQkMDE5NDsKICAgICAgJDk3ID0gKCgoJDg0KSkgKyAxMnwwKTsKICAgICAgSEVBUDMyWyQ5Nz4+Ml0gPSAkODc7CiAgICAgfQogICAgIEhFQVAzMlsoNTQwKT4+Ml0gPSAkNzY7CiAgICAgSEVBUDMyWyg1NTIpPj4yXSA9ICQ3OTsKICAgICAkJDAgPSAkNjg7CiAgICAgU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKICAgIH0KICAgICQ5OCA9IEhFQVAzMlsoNTM2KT4+Ml18MDsKICAgICQ5OSA9ICgkOTh8MCk9PSgwKTsKICAgIGlmICgkOTkpIHsKICAgICAkJDAxOTIgPSAkNjsKICAgIH0gZWxzZSB7CiAgICAgJDEwMCA9ICgwIC0gKCQ5OCkpfDA7CiAgICAgJDEwMSA9ICQ5OCAmICQxMDA7CiAgICAgJDEwMiA9ICgoJDEwMSkgKyAtMSl8MDsKICAgICAkMTAzID0gJDEwMiA+Pj4gMTI7CiAgICAgJDEwNCA9ICQxMDMgJiAxNjsKICAgICAkMTA1ID0gJDEwMiA+Pj4gJDEwNDsKICAgICAkMTA2ID0gJDEwNSA+Pj4gNTsKICAgICAkMTA3ID0gJDEwNiAmIDg7CiAgICAgJDEwOCA9ICQxMDcgfCAkMTA0OwogICAgICQxMDkgPSAkMTA1ID4+PiAkMTA3OwogICAgICQxMTAgPSAkMTA5ID4+PiAyOwogICAgICQxMTEgPSAkMTEwICYgNDsKICAgICAkMTEyID0gJDEwOCB8ICQxMTE7CiAgICAgJDExMyA9ICQxMDkgPj4+ICQxMTE7CiAgICAgJDExNCA9ICQxMTMgPj4+IDE7CiAgICAgJDExNSA9ICQxMTQgJiAyOwogICAgICQxMTYgPSAkMTEyIHwgJDExNTsKICAgICAkMTE3ID0gJDExMyA+Pj4gJDExNTsKICAgICAkMTE4ID0gJDExNyA+Pj4gMTsKICAgICAkMTE5ID0gJDExOCAmIDE7CiAgICAgJDEyMCA9ICQxMTYgfCAkMTE5OwogICAgICQxMjEgPSAkMTE3ID4+PiAkMTE5OwogICAgICQxMjIgPSAoKCQxMjApICsgKCQxMjEpKXwwOwogICAgICQxMjMgPSAoODM2ICsgKCQxMjI8PDIpfDApOwogICAgICQxMjQgPSBIRUFQMzJbJDEyMz4+Ml18MDsKICAgICAkMTI1ID0gKCgoJDEyNCkpICsgNHwwKTsKICAgICAkMTI2ID0gSEVBUDMyWyQxMjU+PjJdfDA7CiAgICAgJDEyNyA9ICQxMjYgJiAtODsKICAgICAkMTI4ID0gKCgkMTI3KSAtICgkNikpfDA7CiAgICAgJDEyOSA9ICgoKCQxMjQpKSArIDE2fDApOwogICAgICQxMzAgPSBIRUFQMzJbJDEyOT4+Ml18MDsKICAgICAkMTMxID0gKCQxMzB8MCk9PSgwfDApOwogICAgICQkc2luazEyJGkgPSAkMTMxJjE7CiAgICAgJDEzMiA9ICgoKCgkMTI0KSkgKyAxNnwwKSArICgkJHNpbmsxMiRpPDwyKXwwKTsKICAgICAkMTMzID0gSEVBUDMyWyQxMzI+PjJdfDA7CiAgICAgJDEzNCA9ICgkMTMzfDApPT0oMHwwKTsKICAgICBpZiAoJDEzNCkgewogICAgICAkJDAxNzIkbGNzc2EkaSA9ICQxMjQ7JCQwMTczJGxjc3NhJGkgPSAkMTI4OwogICAgIH0gZWxzZSB7CiAgICAgICQkMDE3MjQkaSA9ICQxMjQ7JCQwMTczMyRpID0gJDEyODskMTM2ID0gJDEzMzsKICAgICAgd2hpbGUoMSkgewogICAgICAgJDEzNSA9ICgoKCQxMzYpKSArIDR8MCk7CiAgICAgICAkMTM3ID0gSEVBUDMyWyQxMzU+PjJdfDA7CiAgICAgICAkMTM4ID0gJDEzNyAmIC04OwogICAgICAgJDEzOSA9ICgoJDEzOCkgLSAoJDYpKXwwOwogICAgICAgJDE0MCA9ICgkMTM5Pj4+MCk8KCQkMDE3MzMkaT4+PjApOwogICAgICAgJCQkMDE3MyRpID0gJDE0MCA/ICQxMzkgOiAkJDAxNzMzJGk7CiAgICAgICAkJCQwMTcyJGkgPSAkMTQwID8gJDEzNiA6ICQkMDE3MjQkaTsKICAgICAgICQxNDEgPSAoKCgkMTM2KSkgKyAxNnwwKTsKICAgICAgICQxNDIgPSBIRUFQMzJbJDE0MT4+Ml18MDsKICAgICAgICQxNDMgPSAoJDE0MnwwKT09KDB8MCk7CiAgICAgICAkJHNpbmsxJGkgPSAkMTQzJjE7CiAgICAgICAkMTQ0ID0gKCgoKCQxMzYpKSArIDE2fDApICsgKCQkc2luazEkaTw8Mil8MCk7CiAgICAgICAkMTQ1ID0gSEVBUDMyWyQxNDQ+PjJdfDA7CiAgICAgICAkMTQ2ID0gKCQxNDV8MCk9PSgwfDApOwogICAgICAgaWYgKCQxNDYpIHsKICAgICAgICAkJDAxNzIkbGNzc2EkaSA9ICQkJDAxNzIkaTskJDAxNzMkbGNzc2EkaSA9ICQkJDAxNzMkaTsKICAgICAgICBicmVhazsKICAgICAgIH0gZWxzZSB7CiAgICAgICAgJCQwMTcyNCRpID0gJCQkMDE3MiRpOyQkMDE3MzMkaSA9ICQkJDAxNzMkaTskMTM2ID0gJDE0NTsKICAgICAgIH0KICAgICAgfQogICAgIH0KICAgICAkMTQ3ID0gKCgkJDAxNzIkbGNzc2EkaSkgKyAoJDYpfDApOwogICAgICQxNDggPSAoJDE0Nz4+PjApPigkJDAxNzIkbGNzc2EkaT4+PjApOwogICAgIGlmICgkMTQ4KSB7CiAgICAgICQxNDkgPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgMjR8MCk7CiAgICAgICQxNTAgPSBIRUFQMzJbJDE0OT4+Ml18MDsKICAgICAgJDE1MSA9ICgoKCQkMDE3MiRsY3NzYSRpKSkgKyAxMnwwKTsKICAgICAgJDE1MiA9IEhFQVAzMlskMTUxPj4yXXwwOwogICAgICAkMTUzID0gKCQxNTJ8MCk9PSgkJDAxNzIkbGNzc2EkaXwwKTsKICAgICAgZG8gewogICAgICAgaWYgKCQxNTMpIHsKICAgICAgICAkMTU4ID0gKCgoJCQwMTcyJGxjc3NhJGkpKSArIDIwfDApOwogICAgICAgICQxNTkgPSBIRUFQMzJbJDE1OD4+Ml18MDsKICAgICAgICAkMTYwID0gKCQxNTl8MCk9PSgwfDApOwogICAgICAgIGlmICgkMTYwKSB7CiAgICAgICAgICQxNjEgPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgMTZ8MCk7CiAgICAgICAgICQxNjIgPSBIRUFQMzJbJDE2MT4+Ml18MDsKICAgICAgICAgJDE2MyA9ICgkMTYyfDApPT0oMHwwKTsKICAgICAgICAgaWYgKCQxNjMpIHsKICAgICAgICAgICQkMyRpID0gMDsKICAgICAgICAgIGJyZWFrOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCQxMTc2JGkgPSAkMTYyOyQkMTE3OCRpID0gJDE2MTsKICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICQkMTE3NiRpID0gJDE1OTskJDExNzgkaSA9ICQxNTg7CiAgICAgICAgfQogICAgICAgIHdoaWxlKDEpIHsKICAgICAgICAgJDE2NCA9ICgoKCQkMTE3NiRpKSkgKyAyMHwwKTsKICAgICAgICAgJDE2NSA9IEhFQVAzMlskMTY0Pj4yXXwwOwogICAgICAgICAkMTY2ID0gKCQxNjV8MCk9PSgwfDApOwogICAgICAgICBpZiAoISgkMTY2KSkgewogICAgICAgICAgJCQxMTc2JGkgPSAkMTY1OyQkMTE3OCRpID0gJDE2NDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICB9CiAgICAgICAgICQxNjcgPSAoKCgkJDExNzYkaSkpICsgMTZ8MCk7CiAgICAgICAgICQxNjggPSBIRUFQMzJbJDE2Nz4+Ml18MDsKICAgICAgICAgJDE2OSA9ICgkMTY4fDApPT0oMHwwKTsKICAgICAgICAgaWYgKCQxNjkpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCQxMTc2JGkgPSAkMTY4OyQkMTE3OCRpID0gJDE2NzsKICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBIRUFQMzJbJCQxMTc4JGk+PjJdID0gMDsKICAgICAgICAkJDMkaSA9ICQkMTE3NiRpOwogICAgICAgfSBlbHNlIHsKICAgICAgICAkMTU0ID0gKCgoJCQwMTcyJGxjc3NhJGkpKSArIDh8MCk7CiAgICAgICAgJDE1NSA9IEhFQVAzMlskMTU0Pj4yXXwwOwogICAgICAgICQxNTYgPSAoKCgkMTU1KSkgKyAxMnwwKTsKICAgICAgICBIRUFQMzJbJDE1Nj4+Ml0gPSAkMTUyOwogICAgICAgICQxNTcgPSAoKCgkMTUyKSkgKyA4fDApOwogICAgICAgIEhFQVAzMlskMTU3Pj4yXSA9ICQxNTU7CiAgICAgICAgJCQzJGkgPSAkMTUyOwogICAgICAgfQogICAgICB9IHdoaWxlKDApOwogICAgICAkMTcwID0gKCQxNTB8MCk9PSgwfDApOwogICAgICBkbyB7CiAgICAgICBpZiAoISgkMTcwKSkgewogICAgICAgICQxNzEgPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgMjh8MCk7CiAgICAgICAgJDE3MiA9IEhFQVAzMlskMTcxPj4yXXwwOwogICAgICAgICQxNzMgPSAoODM2ICsgKCQxNzI8PDIpfDApOwogICAgICAgICQxNzQgPSBIRUFQMzJbJDE3Mz4+Ml18MDsKICAgICAgICAkMTc1ID0gKCQkMDE3MiRsY3NzYSRpfDApPT0oJDE3NHwwKTsKICAgICAgICBpZiAoJDE3NSkgewogICAgICAgICBIRUFQMzJbJDE3Mz4+Ml0gPSAkJDMkaTsKICAgICAgICAgJGNvbmQkaSA9ICgkJDMkaXwwKT09KDB8MCk7CiAgICAgICAgIGlmICgkY29uZCRpKSB7CiAgICAgICAgICAkMTc2ID0gMSA8PCAkMTcyOwogICAgICAgICAgJDE3NyA9ICQxNzYgXiAtMTsKICAgICAgICAgICQxNzggPSAkOTggJiAkMTc3OwogICAgICAgICAgSEVBUDMyWyg1MzYpPj4yXSA9ICQxNzg7CiAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICQxNzkgPSAoKCgkMTUwKSkgKyAxNnwwKTsKICAgICAgICAgJDE4MCA9IEhFQVAzMlskMTc5Pj4yXXwwOwogICAgICAgICAkMTgxID0gKCQxODB8MCkhPSgkJDAxNzIkbGNzc2EkaXwwKTsKICAgICAgICAgJCRzaW5rMiRpID0gJDE4MSYxOwogICAgICAgICAkMTgyID0gKCgoKCQxNTApKSArIDE2fDApICsgKCQkc2luazIkaTw8Mil8MCk7CiAgICAgICAgIEhFQVAzMlskMTgyPj4yXSA9ICQkMyRpOwogICAgICAgICAkMTgzID0gKCQkMyRpfDApPT0oMHwwKTsKICAgICAgICAgaWYgKCQxODMpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgICB9CiAgICAgICAgfQogICAgICAgICQxODQgPSAoKCgkJDMkaSkpICsgMjR8MCk7CiAgICAgICAgSEVBUDMyWyQxODQ+PjJdID0gJDE1MDsKICAgICAgICAkMTg1ID0gKCgoJCQwMTcyJGxjc3NhJGkpKSArIDE2fDApOwogICAgICAgICQxODYgPSBIRUFQMzJbJDE4NT4+Ml18MDsKICAgICAgICAkMTg3ID0gKCQxODZ8MCk9PSgwfDApOwogICAgICAgIGlmICghKCQxODcpKSB7CiAgICAgICAgICQxODggPSAoKCgkJDMkaSkpICsgMTZ8MCk7CiAgICAgICAgIEhFQVAzMlskMTg4Pj4yXSA9ICQxODY7CiAgICAgICAgICQxODkgPSAoKCgkMTg2KSkgKyAyNHwwKTsKICAgICAgICAgSEVBUDMyWyQxODk+PjJdID0gJCQzJGk7CiAgICAgICAgfQogICAgICAgICQxOTAgPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgMjB8MCk7CiAgICAgICAgJDE5MSA9IEhFQVAzMlskMTkwPj4yXXwwOwogICAgICAgICQxOTIgPSAoJDE5MXwwKT09KDB8MCk7CiAgICAgICAgaWYgKCEoJDE5MikpIHsKICAgICAgICAgJDE5MyA9ICgoKCQkMyRpKSkgKyAyMHwwKTsKICAgICAgICAgSEVBUDMyWyQxOTM+PjJdID0gJDE5MTsKICAgICAgICAgJDE5NCA9ICgoKCQxOTEpKSArIDI0fDApOwogICAgICAgICBIRUFQMzJbJDE5ND4+Ml0gPSAkJDMkaTsKICAgICAgICB9CiAgICAgICB9CiAgICAgIH0gd2hpbGUoMCk7CiAgICAgICQxOTUgPSAoJCQwMTczJGxjc3NhJGk+Pj4wKTwoMTYpOwogICAgICBpZiAoJDE5NSkgewogICAgICAgJDE5NiA9ICgoJCQwMTczJGxjc3NhJGkpICsgKCQ2KSl8MDsKICAgICAgICQxOTcgPSAkMTk2IHwgMzsKICAgICAgICQxOTggPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgNHwwKTsKICAgICAgIEhFQVAzMlskMTk4Pj4yXSA9ICQxOTc7CiAgICAgICAkMTk5ID0gKCgkJDAxNzIkbGNzc2EkaSkgKyAoJDE5Nil8MCk7CiAgICAgICAkMjAwID0gKCgoJDE5OSkpICsgNHwwKTsKICAgICAgICQyMDEgPSBIRUFQMzJbJDIwMD4+Ml18MDsKICAgICAgICQyMDIgPSAkMjAxIHwgMTsKICAgICAgIEhFQVAzMlskMjAwPj4yXSA9ICQyMDI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAkMjAzID0gJDYgfCAzOwogICAgICAgJDIwNCA9ICgoKCQkMDE3MiRsY3NzYSRpKSkgKyA0fDApOwogICAgICAgSEVBUDMyWyQyMDQ+PjJdID0gJDIwMzsKICAgICAgICQyMDUgPSAkJDAxNzMkbGNzc2EkaSB8IDE7CiAgICAgICAkMjA2ID0gKCgoJDE0NykpICsgNHwwKTsKICAgICAgIEhFQVAzMlskMjA2Pj4yXSA9ICQyMDU7CiAgICAgICAkMjA3ID0gKCgkMTQ3KSArICgkJDAxNzMkbGNzc2EkaSl8MCk7CiAgICAgICBIRUFQMzJbJDIwNz4+Ml0gPSAkJDAxNzMkbGNzc2EkaTsKICAgICAgICQyMDggPSAoJDMzfDApPT0oMCk7CiAgICAgICBpZiAoISgkMjA4KSkgewogICAgICAgICQyMDkgPSBIRUFQMzJbKDU1Mik+PjJdfDA7CiAgICAgICAgJDIxMCA9ICQzMyA+Pj4gMzsKICAgICAgICAkMjExID0gJDIxMCA8PCAxOwogICAgICAgICQyMTIgPSAoNTcyICsgKCQyMTE8PDIpfDApOwogICAgICAgICQyMTMgPSAxIDw8ICQyMTA7CiAgICAgICAgJDIxNCA9ICQ4ICYgJDIxMzsKICAgICAgICAkMjE1ID0gKCQyMTR8MCk9PSgwKTsKICAgICAgICBpZiAoJDIxNSkgewogICAgICAgICAkMjE2ID0gJDggfCAkMjEzOwogICAgICAgICBIRUFQMzJbMTMzXSA9ICQyMTY7CiAgICAgICAgICQkcHJlJGkgPSAoKCgkMjEyKSkgKyA4fDApOwogICAgICAgICAkJDAkaSA9ICQyMTI7JCRwcmUkcGhpJGlaMkQgPSAkJHByZSRpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICQyMTcgPSAoKCgkMjEyKSkgKyA4fDApOwogICAgICAgICAkMjE4ID0gSEVBUDMyWyQyMTc+PjJdfDA7CiAgICAgICAgICQkMCRpID0gJDIxODskJHByZSRwaGkkaVoyRCA9ICQyMTc7CiAgICAgICAgfQogICAgICAgIEhFQVAzMlskJHByZSRwaGkkaVoyRD4+Ml0gPSAkMjA5OwogICAgICAgICQyMTkgPSAoKCgkJDAkaSkpICsgMTJ8MCk7CiAgICAgICAgSEVBUDMyWyQyMTk+PjJdID0gJDIwOTsKICAgICAgICAkMjIwID0gKCgoJDIwOSkpICsgOHwwKTsKICAgICAgICBIRUFQMzJbJDIyMD4+Ml0gPSAkJDAkaTsKICAgICAgICAkMjIxID0gKCgoJDIwOSkpICsgMTJ8MCk7CiAgICAgICAgSEVBUDMyWyQyMjE+PjJdID0gJDIxMjsKICAgICAgIH0KICAgICAgIEhFQVAzMlsoNTQwKT4+Ml0gPSAkJDAxNzMkbGNzc2EkaTsKICAgICAgIEhFQVAzMlsoNTUyKT4+Ml0gPSAkMTQ3OwogICAgICB9CiAgICAgICQyMjIgPSAoKCgkJDAxNzIkbGNzc2EkaSkpICsgOHwwKTsKICAgICAgJCQwID0gJDIyMjsKICAgICAgU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKICAgICB9IGVsc2UgewogICAgICAkJDAxOTIgPSAkNjsKICAgICB9CiAgICB9CiAgIH0gZWxzZSB7CiAgICAkJDAxOTIgPSAkNjsKICAgfQogIH0gZWxzZSB7CiAgICQyMjMgPSAoJDA+Pj4wKT4oNDI5NDk2NzIzMSk7CiAgIGlmICgkMjIzKSB7CiAgICAkJDAxOTIgPSAtMTsKICAgfSBlbHNlIHsKICAgICQyMjQgPSAoKCQwKSArIDExKXwwOwogICAgJDIyNSA9ICQyMjQgJiAtODsKICAgICQyMjYgPSBIRUFQMzJbKDUzNik+PjJdfDA7CiAgICAkMjI3ID0gKCQyMjZ8MCk9PSgwKTsKICAgIGlmICgkMjI3KSB7CiAgICAgJCQwMTkyID0gJDIyNTsKICAgIH0gZWxzZSB7CiAgICAgJDIyOCA9ICgwIC0gKCQyMjUpKXwwOwogICAgICQyMjkgPSAkMjI0ID4+PiA4OwogICAgICQyMzAgPSAoJDIyOXwwKT09KDApOwogICAgIGlmICgkMjMwKSB7CiAgICAgICQkMDMzNiRpID0gMDsKICAgICB9IGVsc2UgewogICAgICAkMjMxID0gKCQyMjU+Pj4wKT4oMTY3NzcyMTUpOwogICAgICBpZiAoJDIzMSkgewogICAgICAgJCQwMzM2JGkgPSAzMTsKICAgICAgfSBlbHNlIHsKICAgICAgICQyMzIgPSAoKCQyMjkpICsgMTA0ODMyMCl8MDsKICAgICAgICQyMzMgPSAkMjMyID4+PiAxNjsKICAgICAgICQyMzQgPSAkMjMzICYgODsKICAgICAgICQyMzUgPSAkMjI5IDw8ICQyMzQ7CiAgICAgICAkMjM2ID0gKCgkMjM1KSArIDUyMDE5Mil8MDsKICAgICAgICQyMzcgPSAkMjM2ID4+PiAxNjsKICAgICAgICQyMzggPSAkMjM3ICYgNDsKICAgICAgICQyMzkgPSAkMjM4IHwgJDIzNDsKICAgICAgICQyNDAgPSAkMjM1IDw8ICQyMzg7CiAgICAgICAkMjQxID0gKCgkMjQwKSArIDI0NTc2MCl8MDsKICAgICAgICQyNDIgPSAkMjQxID4+PiAxNjsKICAgICAgICQyNDMgPSAkMjQyICYgMjsKICAgICAgICQyNDQgPSAkMjM5IHwgJDI0MzsKICAgICAgICQyNDUgPSAoMTQgLSAoJDI0NCkpfDA7CiAgICAgICAkMjQ2ID0gJDI0MCA8PCAkMjQzOwogICAgICAgJDI0NyA9ICQyNDYgPj4+IDE1OwogICAgICAgJDI0OCA9ICgoJDI0NSkgKyAoJDI0NykpfDA7CiAgICAgICAkMjQ5ID0gJDI0OCA8PCAxOwogICAgICAgJDI1MCA9ICgoJDI0OCkgKyA3KXwwOwogICAgICAgJDI1MSA9ICQyMjUgPj4+ICQyNTA7CiAgICAgICAkMjUyID0gJDI1MSAmIDE7CiAgICAgICAkMjUzID0gJDI1MiB8ICQyNDk7CiAgICAgICAkJDAzMzYkaSA9ICQyNTM7CiAgICAgIH0KICAgICB9CiAgICAgJDI1NCA9ICg4MzYgKyAoJCQwMzM2JGk8PDIpfDApOwogICAgICQyNTUgPSBIRUFQMzJbJDI1ND4+Ml18MDsKICAgICAkMjU2ID0gKCQyNTV8MCk9PSgwfDApOwogICAgIEw3NDogZG8gewogICAgICBpZiAoJDI1NikgewogICAgICAgJCQyMzMzJGkgPSAwOyQkMyRpMTk5ID0gMDskJDMzMjgkaSA9ICQyMjg7CiAgICAgICBsYWJlbCA9IDU3OwogICAgICB9IGVsc2UgewogICAgICAgJDI1NyA9ICgkJDAzMzYkaXwwKT09KDMxKTsKICAgICAgICQyNTggPSAkJDAzMzYkaSA+Pj4gMTsKICAgICAgICQyNTkgPSAoMjUgLSAoJDI1OCkpfDA7CiAgICAgICAkMjYwID0gJDI1NyA/IDAgOiAkMjU5OwogICAgICAgJDI2MSA9ICQyMjUgPDwgJDI2MDsKICAgICAgICQkMDMyMCRpID0gMDskJDAzMjUkaSA9ICQyMjg7JCQwMzMxJGkgPSAkMjU1OyQkMDMzNyRpID0gJDI2MTskJDAzNDAkaSA9IDA7CiAgICAgICB3aGlsZSgxKSB7CiAgICAgICAgJDI2MiA9ICgoKCQkMDMzMSRpKSkgKyA0fDApOwogICAgICAgICQyNjMgPSBIRUFQMzJbJDI2Mj4+Ml18MDsKICAgICAgICAkMjY0ID0gJDI2MyAmIC04OwogICAgICAgICQyNjUgPSAoKCQyNjQpIC0gKCQyMjUpKXwwOwogICAgICAgICQyNjYgPSAoJDI2NT4+PjApPCgkJDAzMjUkaT4+PjApOwogICAgICAgIGlmICgkMjY2KSB7CiAgICAgICAgICQyNjcgPSAoJDI2NXwwKT09KDApOwogICAgICAgICBpZiAoJDI2NykgewogICAgICAgICAgJCQ0MzI5OCRpID0gMDskJDQzMzU3JGkgPSAkJDAzMzEkaTskJDQ5JGkgPSAkJDAzMzEkaTsKICAgICAgICAgIGxhYmVsID0gNjE7CiAgICAgICAgICBicmVhayBMNzQ7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAkJDEzMjEkaSA9ICQkMDMzMSRpOyQkMTMyNiRpID0gJDI2NTsKICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICQkMTMyMSRpID0gJCQwMzIwJGk7JCQxMzI2JGkgPSAkJDAzMjUkaTsKICAgICAgICB9CiAgICAgICAgJDI2OCA9ICgoKCQkMDMzMSRpKSkgKyAyMHwwKTsKICAgICAgICAkMjY5ID0gSEVBUDMyWyQyNjg+PjJdfDA7CiAgICAgICAgJDI3MCA9ICQkMDMzNyRpID4+PiAzMTsKICAgICAgICAkMjcxID0gKCgoKCQkMDMzMSRpKSkgKyAxNnwwKSArICgkMjcwPDwyKXwwKTsKICAgICAgICAkMjcyID0gSEVBUDMyWyQyNzE+PjJdfDA7CiAgICAgICAgJDI3MyA9ICgkMjY5fDApPT0oMHwwKTsKICAgICAgICAkMjc0ID0gKCQyNjl8MCk9PSgkMjcyfDApOwogICAgICAgICRvciRjb25kMSRpMTk4ID0gJDI3MyB8ICQyNzQ7CiAgICAgICAgJCQxMzQxJGkgPSAkb3IkY29uZDEkaTE5OCA/ICQkMDM0MCRpIDogJDI2OTsKICAgICAgICAkMjc1ID0gKCQyNzJ8MCk9PSgwfDApOwogICAgICAgICRub3QkMyRpID0gJDI3NSBeIDE7CiAgICAgICAgJDI3NiA9ICRub3QkMyRpJjE7CiAgICAgICAgJCQwMzM3JCRpID0gJCQwMzM3JGkgPDwgJDI3NjsKICAgICAgICBpZiAoJDI3NSkgewogICAgICAgICAkJDIzMzMkaSA9ICQkMTM0MSRpOyQkMyRpMTk5ID0gJCQxMzIxJGk7JCQzMzI4JGkgPSAkJDEzMjYkaTsKICAgICAgICAgbGFiZWwgPSA1NzsKICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgJCQwMzIwJGkgPSAkJDEzMjEkaTskJDAzMjUkaSA9ICQkMTMyNiRpOyQkMDMzMSRpID0gJDI3MjskJDAzMzckaSA9ICQkMDMzNyQkaTskJDAzNDAkaSA9ICQkMTM0MSRpOwogICAgICAgIH0KICAgICAgIH0KICAgICAgfQogICAgIH0gd2hpbGUoMCk7CiAgICAgaWYgKChsYWJlbHwwKSA9PSA1NykgewogICAgICAkMjc3ID0gKCQkMjMzMyRpfDApPT0oMHwwKTsKICAgICAgJDI3OCA9ICgkJDMkaTE5OXwwKT09KDB8MCk7CiAgICAgICRvciRjb25kJGkyMDAgPSAkMjc3ICYgJDI3ODsKICAgICAgaWYgKCRvciRjb25kJGkyMDApIHsKICAgICAgICQyNzkgPSAyIDw8ICQkMDMzNiRpOwogICAgICAgJDI4MCA9ICgwIC0gKCQyNzkpKXwwOwogICAgICAgJDI4MSA9ICQyNzkgfCAkMjgwOwogICAgICAgJDI4MiA9ICQyMjYgJiAkMjgxOwogICAgICAgJDI4MyA9ICgkMjgyfDApPT0oMCk7CiAgICAgICBpZiAoJDI4MykgewogICAgICAgICQkMDE5MiA9ICQyMjU7CiAgICAgICAgYnJlYWs7CiAgICAgICB9CiAgICAgICAkMjg0ID0gKDAgLSAoJDI4MikpfDA7CiAgICAgICAkMjg1ID0gJDI4MiAmICQyODQ7CiAgICAgICAkMjg2ID0gKCgkMjg1KSArIC0xKXwwOwogICAgICAgJDI4NyA9ICQyODYgPj4+IDEyOwogICAgICAgJDI4OCA9ICQyODcgJiAxNjsKICAgICAgICQyODkgPSAkMjg2ID4+PiAkMjg4OwogICAgICAgJDI5MCA9ICQyODkgPj4+IDU7CiAgICAgICAkMjkxID0gJDI5MCAmIDg7CiAgICAgICAkMjkyID0gJDI5MSB8ICQyODg7CiAgICAgICAkMjkzID0gJDI4OSA+Pj4gJDI5MTsKICAgICAgICQyOTQgPSAkMjkzID4+PiAyOwogICAgICAgJDI5NSA9ICQyOTQgJiA0OwogICAgICAgJDI5NiA9ICQyOTIgfCAkMjk1OwogICAgICAgJDI5NyA9ICQyOTMgPj4+ICQyOTU7CiAgICAgICAkMjk4ID0gJDI5NyA+Pj4gMTsKICAgICAgICQyOTkgPSAkMjk4ICYgMjsKICAgICAgICQzMDAgPSAkMjk2IHwgJDI5OTsKICAgICAgICQzMDEgPSAkMjk3ID4+PiAkMjk5OwogICAgICAgJDMwMiA9ICQzMDEgPj4+IDE7CiAgICAgICAkMzAzID0gJDMwMiAmIDE7CiAgICAgICAkMzA0ID0gJDMwMCB8ICQzMDM7CiAgICAgICAkMzA1ID0gJDMwMSA+Pj4gJDMwMzsKICAgICAgICQzMDYgPSAoKCQzMDQpICsgKCQzMDUpKXwwOwogICAgICAgJDMwNyA9ICg4MzYgKyAoJDMwNjw8Mil8MCk7CiAgICAgICAkMzA4ID0gSEVBUDMyWyQzMDc+PjJdfDA7CiAgICAgICAkJDQkcGgkaSA9IDA7JCQ0MzM1JHBoJGkgPSAkMzA4OwogICAgICB9IGVsc2UgewogICAgICAgJCQ0JHBoJGkgPSAkJDMkaTE5OTskJDQzMzUkcGgkaSA9ICQkMjMzMyRpOwogICAgICB9CiAgICAgICQzMDkgPSAoJCQ0MzM1JHBoJGl8MCk9PSgwfDApOwogICAgICBpZiAoJDMwOSkgewogICAgICAgJCQ0JGxjc3NhJGkgPSAkJDQkcGgkaTskJDQzMjkkbGNzc2EkaSA9ICQkMzMyOCRpOwogICAgICB9IGVsc2UgewogICAgICAgJCQ0MzI5OCRpID0gJCQzMzI4JGk7JCQ0MzM1NyRpID0gJCQ0MzM1JHBoJGk7JCQ0OSRpID0gJCQ0JHBoJGk7CiAgICAgICBsYWJlbCA9IDYxOwogICAgICB9CiAgICAgfQogICAgIGlmICgobGFiZWx8MCkgPT0gNjEpIHsKICAgICAgd2hpbGUoMSkgewogICAgICAgbGFiZWwgPSAwOwogICAgICAgJDMxMCA9ICgoKCQkNDMzNTckaSkpICsgNHwwKTsKICAgICAgICQzMTEgPSBIRUFQMzJbJDMxMD4+Ml18MDsKICAgICAgICQzMTIgPSAkMzExICYgLTg7CiAgICAgICAkMzEzID0gKCgkMzEyKSAtICgkMjI1KSl8MDsKICAgICAgICQzMTQgPSAoJDMxMz4+PjApPCgkJDQzMjk4JGk+Pj4wKTsKICAgICAgICQkJDQzMjkkaSA9ICQzMTQgPyAkMzEzIDogJCQ0MzI5OCRpOwogICAgICAgJCQ0MzM1JCQ0JGkgPSAkMzE0ID8gJCQ0MzM1NyRpIDogJCQ0OSRpOwogICAgICAgJDMxNSA9ICgoKCQkNDMzNTckaSkpICsgMTZ8MCk7CiAgICAgICAkMzE2ID0gSEVBUDMyWyQzMTU+PjJdfDA7CiAgICAgICAkMzE3ID0gKCQzMTZ8MCk9PSgwfDApOwogICAgICAgJCRzaW5rMiRpMjAyID0gJDMxNyYxOwogICAgICAgJDMxOCA9ICgoKCgkJDQzMzU3JGkpKSArIDE2fDApICsgKCQkc2luazIkaTIwMjw8Mil8MCk7CiAgICAgICAkMzE5ID0gSEVBUDMyWyQzMTg+PjJdfDA7CiAgICAgICAkMzIwID0gKCQzMTl8MCk9PSgwfDApOwogICAgICAgaWYgKCQzMjApIHsKICAgICAgICAkJDQkbGNzc2EkaSA9ICQkNDMzNSQkNCRpOyQkNDMyOSRsY3NzYSRpID0gJCQkNDMyOSRpOwogICAgICAgIGJyZWFrOwogICAgICAgfSBlbHNlIHsKICAgICAgICAkJDQzMjk4JGkgPSAkJCQ0MzI5JGk7JCQ0MzM1NyRpID0gJDMxOTskJDQ5JGkgPSAkJDQzMzUkJDQkaTsKICAgICAgICBsYWJlbCA9IDYxOwogICAgICAgfQogICAgICB9CiAgICAgfQogICAgICQzMjEgPSAoJCQ0JGxjc3NhJGl8MCk9PSgwfDApOwogICAgIGlmICgkMzIxKSB7CiAgICAgICQkMDE5MiA9ICQyMjU7CiAgICAgfSBlbHNlIHsKICAgICAgJDMyMiA9IEhFQVAzMlsoNTQwKT4+Ml18MDsKICAgICAgJDMyMyA9ICgoJDMyMikgLSAoJDIyNSkpfDA7CiAgICAgICQzMjQgPSAoJCQ0MzI5JGxjc3NhJGk+Pj4wKTwoJDMyMz4+PjApOwogICAgICBpZiAoJDMyNCkgewogICAgICAgJDMyNSA9ICgoJCQ0JGxjc3NhJGkpICsgKCQyMjUpfDApOwogICAgICAgJDMyNiA9ICgkMzI1Pj4+MCk+KCQkNCRsY3NzYSRpPj4+MCk7CiAgICAgICBpZiAoISgkMzI2KSkgewogICAgICAgICQkMCA9IDA7CiAgICAgICAgU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKICAgICAgIH0KICAgICAgICQzMjcgPSAoKCgkJDQkbGNzc2EkaSkpICsgMjR8MCk7CiAgICAgICAkMzI4ID0gSEVBUDMyWyQzMjc+PjJdfDA7CiAgICAgICAkMzI5ID0gKCgoJCQ0JGxjc3NhJGkpKSArIDEyfDApOwogICAgICAgJDMzMCA9IEhFQVAzMlskMzI5Pj4yXXwwOwogICAgICAgJDMzMSA9ICgkMzMwfDApPT0oJCQ0JGxjc3NhJGl8MCk7CiAgICAgICBkbyB7CiAgICAgICAgaWYgKCQzMzEpIHsKICAgICAgICAgJDMzNiA9ICgoKCQkNCRsY3NzYSRpKSkgKyAyMHwwKTsKICAgICAgICAgJDMzNyA9IEhFQVAzMlskMzM2Pj4yXXwwOwogICAgICAgICAkMzM4ID0gKCQzMzd8MCk9PSgwfDApOwogICAgICAgICBpZiAoJDMzOCkgewogICAgICAgICAgJDMzOSA9ICgoKCQkNCRsY3NzYSRpKSkgKyAxNnwwKTsKICAgICAgICAgICQzNDAgPSBIRUFQMzJbJDMzOT4+Ml18MDsKICAgICAgICAgICQzNDEgPSAoJDM0MHwwKT09KDB8MCk7CiAgICAgICAgICBpZiAoJDM0MSkgewogICAgICAgICAgICQkMzM0OSRpID0gMDsKICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgJCQxMzQ3JGkgPSAkMzQwOyQkMTM1MSRpID0gJDMzOTsKICAgICAgICAgIH0KICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQkMTM0NyRpID0gJDMzNzskJDEzNTEkaSA9ICQzMzY7CiAgICAgICAgIH0KICAgICAgICAgd2hpbGUoMSkgewogICAgICAgICAgJDM0MiA9ICgoKCQkMTM0NyRpKSkgKyAyMHwwKTsKICAgICAgICAgICQzNDMgPSBIRUFQMzJbJDM0Mj4+Ml18MDsKICAgICAgICAgICQzNDQgPSAoJDM0M3wwKT09KDB8MCk7CiAgICAgICAgICBpZiAoISgkMzQ0KSkgewogICAgICAgICAgICQkMTM0NyRpID0gJDM0MzskJDEzNTEkaSA9ICQzNDI7CiAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICAkMzQ1ID0gKCgoJCQxMzQ3JGkpKSArIDE2fDApOwogICAgICAgICAgJDM0NiA9IEhFQVAzMlskMzQ1Pj4yXXwwOwogICAgICAgICAgJDM0NyA9ICgkMzQ2fDApPT0oMHwwKTsKICAgICAgICAgIGlmICgkMzQ3KSB7CiAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICQkMTM0NyRpID0gJDM0NjskJDEzNTEkaSA9ICQzNDU7CiAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgICAgSEVBUDMyWyQkMTM1MSRpPj4yXSA9IDA7CiAgICAgICAgICQkMzM0OSRpID0gJCQxMzQ3JGk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgJDMzMiA9ICgoKCQkNCRsY3NzYSRpKSkgKyA4fDApOwogICAgICAgICAkMzMzID0gSEVBUDMyWyQzMzI+PjJdfDA7CiAgICAgICAgICQzMzQgPSAoKCgkMzMzKSkgKyAxMnwwKTsKICAgICAgICAgSEVBUDMyWyQzMzQ+PjJdID0gJDMzMDsKICAgICAgICAgJDMzNSA9ICgoKCQzMzApKSArIDh8MCk7CiAgICAgICAgIEhFQVAzMlskMzM1Pj4yXSA9ICQzMzM7CiAgICAgICAgICQkMzM0OSRpID0gJDMzMDsKICAgICAgICB9CiAgICAgICB9IHdoaWxlKDApOwogICAgICAgJDM0OCA9ICgkMzI4fDApPT0oMHwwKTsKICAgICAgIGRvIHsKICAgICAgICBpZiAoJDM0OCkgewogICAgICAgICAkNDMxID0gJDIyNjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAkMzQ5ID0gKCgoJCQ0JGxjc3NhJGkpKSArIDI4fDApOwogICAgICAgICAkMzUwID0gSEVBUDMyWyQzNDk+PjJdfDA7CiAgICAgICAgICQzNTEgPSAoODM2ICsgKCQzNTA8PDIpfDApOwogICAgICAgICAkMzUyID0gSEVBUDMyWyQzNTE+PjJdfDA7CiAgICAgICAgICQzNTMgPSAoJCQ0JGxjc3NhJGl8MCk9PSgkMzUyfDApOwogICAgICAgICBpZiAoJDM1MykgewogICAgICAgICAgSEVBUDMyWyQzNTE+PjJdID0gJCQzMzQ5JGk7CiAgICAgICAgICAkY29uZCRpMjA2ID0gKCQkMzM0OSRpfDApPT0oMHwwKTsKICAgICAgICAgIGlmICgkY29uZCRpMjA2KSB7CiAgICAgICAgICAgJDM1NCA9IDEgPDwgJDM1MDsKICAgICAgICAgICAkMzU1ID0gJDM1NCBeIC0xOwogICAgICAgICAgICQzNTYgPSAkMjI2ICYgJDM1NTsKICAgICAgICAgICBIRUFQMzJbKDUzNik+PjJdID0gJDM1NjsKICAgICAgICAgICAkNDMxID0gJDM1NjsKICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQzNTcgPSAoKCgkMzI4KSkgKyAxNnwwKTsKICAgICAgICAgICQzNTggPSBIRUFQMzJbJDM1Nz4+Ml18MDsKICAgICAgICAgICQzNTkgPSAoJDM1OHwwKSE9KCQkNCRsY3NzYSRpfDApOwogICAgICAgICAgJCRzaW5rMyRpID0gJDM1OSYxOwogICAgICAgICAgJDM2MCA9ICgoKCgkMzI4KSkgKyAxNnwwKSArICgkJHNpbmszJGk8PDIpfDApOwogICAgICAgICAgSEVBUDMyWyQzNjA+PjJdID0gJCQzMzQ5JGk7CiAgICAgICAgICAkMzYxID0gKCQkMzM0OSRpfDApPT0oMHwwKTsKICAgICAgICAgIGlmICgkMzYxKSB7CiAgICAgICAgICAgJDQzMSA9ICQyMjY7CiAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgICAgJDM2MiA9ICgoKCQkMzM0OSRpKSkgKyAyNHwwKTsKICAgICAgICAgSEVBUDMyWyQzNjI+PjJdID0gJDMyODsKICAgICAgICAgJDM2MyA9ICgoKCQkNCRsY3NzYSRpKSkgKyAxNnwwKTsKICAgICAgICAgJDM2NCA9IEhFQVAzMlskMzYzPj4yXXwwOwogICAgICAgICAkMzY1ID0gKCQzNjR8MCk9PSgwfDApOwogICAgICAgICBpZiAoISgkMzY1KSkgewogICAgICAgICAgJDM2NiA9ICgoKCQkMzM0OSRpKSkgKyAxNnwwKTsKICAgICAgICAgIEhFQVAzMlskMzY2Pj4yXSA9ICQzNjQ7CiAgICAgICAgICAkMzY3ID0gKCgoJDM2NCkpICsgMjR8MCk7CiAgICAgICAgICBIRUFQMzJbJDM2Nz4+Ml0gPSAkJDMzNDkkaTsKICAgICAgICAgfQogICAgICAgICAkMzY4ID0gKCgoJCQ0JGxjc3NhJGkpKSArIDIwfDApOwogICAgICAgICAkMzY5ID0gSEVBUDMyWyQzNjg+PjJdfDA7CiAgICAgICAgICQzNzAgPSAoJDM2OXwwKT09KDB8MCk7CiAgICAgICAgIGlmICgkMzcwKSB7CiAgICAgICAgICAkNDMxID0gJDIyNjsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQzNzEgPSAoKCgkJDMzNDkkaSkpICsgMjB8MCk7CiAgICAgICAgICBIRUFQMzJbJDM3MT4+Ml0gPSAkMzY5OwogICAgICAgICAgJDM3MiA9ICgoKCQzNjkpKSArIDI0fDApOwogICAgICAgICAgSEVBUDMyWyQzNzI+PjJdID0gJCQzMzQ5JGk7CiAgICAgICAgICAkNDMxID0gJDIyNjsKICAgICAgICAgfQogICAgICAgIH0KICAgICAgIH0gd2hpbGUoMCk7CiAgICAgICAkMzczID0gKCQkNDMyOSRsY3NzYSRpPj4+MCk8KDE2KTsKICAgICAgIGRvIHsKICAgICAgICBpZiAoJDM3MykgewogICAgICAgICAkMzc0ID0gKCgkJDQzMjkkbGNzc2EkaSkgKyAoJDIyNSkpfDA7CiAgICAgICAgICQzNzUgPSAkMzc0IHwgMzsKICAgICAgICAgJDM3NiA9ICgoKCQkNCRsY3NzYSRpKSkgKyA0fDApOwogICAgICAgICBIRUFQMzJbJDM3Nj4+Ml0gPSAkMzc1OwogICAgICAgICAkMzc3ID0gKCgkJDQkbGNzc2EkaSkgKyAoJDM3NCl8MCk7CiAgICAgICAgICQzNzggPSAoKCgkMzc3KSkgKyA0fDApOwogICAgICAgICAkMzc5ID0gSEVBUDMyWyQzNzg+PjJdfDA7CiAgICAgICAgICQzODAgPSAkMzc5IHwgMTsKICAgICAgICAgSEVBUDMyWyQzNzg+PjJdID0gJDM4MDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAkMzgxID0gJDIyNSB8IDM7CiAgICAgICAgICQzODIgPSAoKCgkJDQkbGNzc2EkaSkpICsgNHwwKTsKICAgICAgICAgSEVBUDMyWyQzODI+PjJdID0gJDM4MTsKICAgICAgICAgJDM4MyA9ICQkNDMyOSRsY3NzYSRpIHwgMTsKICAgICAgICAgJDM4NCA9ICgoKCQzMjUpKSArIDR8MCk7CiAgICAgICAgIEhFQVAzMlskMzg0Pj4yXSA9ICQzODM7CiAgICAgICAgICQzODUgPSAoKCQzMjUpICsgKCQkNDMyOSRsY3NzYSRpKXwwKTsKICAgICAgICAgSEVBUDMyWyQzODU+PjJdID0gJCQ0MzI5JGxjc3NhJGk7CiAgICAgICAgICQzODYgPSAkJDQzMjkkbGNzc2EkaSA+Pj4gMzsKICAgICAgICAgJDM4NyA9ICgkJDQzMjkkbGNzc2EkaT4+PjApPCgyNTYpOwogICAgICAgICBpZiAoJDM4NykgewogICAgICAgICAgJDM4OCA9ICQzODYgPDwgMTsKICAgICAgICAgICQzODkgPSAoNTcyICsgKCQzODg8PDIpfDApOwogICAgICAgICAgJDM5MCA9IEhFQVAzMlsxMzNdfDA7CiAgICAgICAgICAkMzkxID0gMSA8PCAkMzg2OwogICAgICAgICAgJDM5MiA9ICQzOTAgJiAkMzkxOwogICAgICAgICAgJDM5MyA9ICgkMzkyfDApPT0oMCk7CiAgICAgICAgICBpZiAoJDM5MykgewogICAgICAgICAgICQzOTQgPSAkMzkwIHwgJDM5MTsKICAgICAgICAgICBIRUFQMzJbMTMzXSA9ICQzOTQ7CiAgICAgICAgICAgJCRwcmUkaTIwNyA9ICgoKCQzODkpKSArIDh8MCk7CiAgICAgICAgICAgJCQwMzQ1JGkgPSAkMzg5OyQkcHJlJHBoaSRpMjA4WjJEID0gJCRwcmUkaTIwNzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgJDM5NSA9ICgoKCQzODkpKSArIDh8MCk7CiAgICAgICAgICAgJDM5NiA9IEhFQVAzMlskMzk1Pj4yXXwwOwogICAgICAgICAgICQkMDM0NSRpID0gJDM5NjskJHByZSRwaGkkaTIwOFoyRCA9ICQzOTU7CiAgICAgICAgICB9CiAgICAgICAgICBIRUFQMzJbJCRwcmUkcGhpJGkyMDhaMkQ+PjJdID0gJDMyNTsKICAgICAgICAgICQzOTcgPSAoKCgkJDAzNDUkaSkpICsgMTJ8MCk7CiAgICAgICAgICBIRUFQMzJbJDM5Nz4+Ml0gPSAkMzI1OwogICAgICAgICAgJDM5OCA9ICgoKCQzMjUpKSArIDh8MCk7CiAgICAgICAgICBIRUFQMzJbJDM5OD4+Ml0gPSAkJDAzNDUkaTsKICAgICAgICAgICQzOTkgPSAoKCgkMzI1KSkgKyAxMnwwKTsKICAgICAgICAgIEhFQVAzMlskMzk5Pj4yXSA9ICQzODk7CiAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgICAgICAkNDAwID0gJCQ0MzI5JGxjc3NhJGkgPj4+IDg7CiAgICAgICAgICQ0MDEgPSAoJDQwMHwwKT09KDApOwogICAgICAgICBpZiAoJDQwMSkgewogICAgICAgICAgJCQwMzM5JGkgPSAwOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgJDQwMiA9ICgkJDQzMjkkbGNzc2EkaT4+PjApPigxNjc3NzIxNSk7CiAgICAgICAgICBpZiAoJDQwMikgewogICAgICAgICAgICQkMDMzOSRpID0gMzE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICQ0MDMgPSAoKCQ0MDApICsgMTA0ODMyMCl8MDsKICAgICAgICAgICAkNDA0ID0gJDQwMyA+Pj4gMTY7CiAgICAgICAgICAgJDQwNSA9ICQ0MDQgJiA4OwogICAgICAgICAgICQ0MDYgPSAkNDAwIDw8ICQ0MDU7CiAgICAgICAgICAgJDQwNyA9ICgoJDQwNikgKyA1MjAxOTIpfDA7CiAgICAgICAgICAgJDQwOCA9ICQ0MDcgPj4+IDE2OwogICAgICAgICAgICQ0MDkgPSAkNDA4ICYgNDsKICAgICAgICAgICAkNDEwID0gJDQwOSB8ICQ0MDU7CiAgICAgICAgICAgJDQxMSA9ICQ0MDYgPDwgJDQwOTsKICAgICAgICAgICAkNDEyID0gKCgkNDExKSArIDI0NTc2MCl8MDsKICAgICAgICAgICAkNDEzID0gJDQxMiA+Pj4gMTY7CiAgICAgICAgICAgJDQxNCA9ICQ0MTMgJiAyOwogICAgICAgICAgICQ0MTUgPSAkNDEwIHwgJDQxNDsKICAgICAgICAgICAkNDE2ID0gKDE0IC0gKCQ0MTUpKXwwOwogICAgICAgICAgICQ0MTcgPSAkNDExIDw8ICQ0MTQ7CiAgICAgICAgICAgJDQxOCA9ICQ0MTcgPj4+IDE1OwogICAgICAgICAgICQ0MTkgPSAoKCQ0MTYpICsgKCQ0MTgpKXwwOwogICAgICAgICAgICQ0MjAgPSAkNDE5IDw8IDE7CiAgICAgICAgICAgJDQyMSA9ICgoJDQxOSkgKyA3KXwwOwogICAgICAgICAgICQ0MjIgPSAkJDQzMjkkbGNzc2EkaSA+Pj4gJDQyMTsKICAgICAgICAgICAkNDIzID0gJDQyMiAmIDE7CiAgICAgICAgICAgJDQyNCA9ICQ0MjMgfCAkNDIwOwogICAgICAgICAgICQkMDMzOSRpID0gJDQyNDsKICAgICAgICAgIH0KICAgICAgICAgfQogICAgICAgICAkNDI1ID0gKDgzNiArICgkJDAzMzkkaTw8Mil8MCk7CiAgICAgICAgICQ0MjYgPSAoKCgkMzI1KSkgKyAyOHwwKTsKICAgICAgICAgSEVBUDMyWyQ0MjY+PjJdID0gJCQwMzM5JGk7CiAgICAgICAgICQ0MjcgPSAoKCgkMzI1KSkgKyAxNnwwKTsKICAgICAgICAgJDQyOCA9ICgoKCQ0MjcpKSArIDR8MCk7CiAgICAgICAgIEhFQVAzMlskNDI4Pj4yXSA9IDA7CiAgICAgICAgIEhFQVAzMlskNDI3Pj4yXSA9IDA7CiAgICAgICAgICQ0MjkgPSAxIDw8ICQkMDMzOSRpOwogICAgICAgICAkNDMwID0gJDQzMSAmICQ0Mjk7CiAgICAgICAgICQ0MzIgPSAoJDQzMHwwKT09KDApOwogICAgICAgICBpZiAoJDQzMikgewogICAgICAgICAgJDQzMyA9ICQ0MzEgfCAkNDI5OwogICAgICAgICAgSEVBUDMyWyg1MzYpPj4yXSA9ICQ0MzM7CiAgICAgICAgICBIRUFQMzJbJDQyNT4+Ml0gPSAkMzI1OwogICAgICAgICAgJDQzNCA9ICgoKCQzMjUpKSArIDI0fDApOwogICAgICAgICAgSEVBUDMyWyQ0MzQ+PjJdID0gJDQyNTsKICAgICAgICAgICQ0MzUgPSAoKCgkMzI1KSkgKyAxMnwwKTsKICAgICAgICAgIEhFQVAzMlskNDM1Pj4yXSA9ICQzMjU7CiAgICAgICAgICAkNDM2ID0gKCgoJDMyNSkpICsgOHwwKTsKICAgICAgICAgIEhFQVAzMlskNDM2Pj4yXSA9ICQzMjU7CiAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgICAgICAkNDM3ID0gSEVBUDMyWyQ0MjU+PjJdfDA7CiAgICAgICAgICQ0MzggPSAoJCQwMzM5JGl8MCk9PSgzMSk7CiAgICAgICAgICQ0MzkgPSAkJDAzMzkkaSA+Pj4gMTsKICAgICAgICAgJDQ0MCA9ICgyNSAtICgkNDM5KSl8MDsKICAgICAgICAgJDQ0MSA9ICQ0MzggPyAwIDogJDQ0MDsKICAgICAgICAgJDQ0MiA9ICQkNDMyOSRsY3NzYSRpIDw8ICQ0NDE7CiAgICAgICAgICQkMDMyMiRpID0gJDQ0MjskJDAzMjMkaSA9ICQ0Mzc7CiAgICAgICAgIHdoaWxlKDEpIHsKICAgICAgICAgICQ0NDMgPSAoKCgkJDAzMjMkaSkpICsgNHwwKTsKICAgICAgICAgICQ0NDQgPSBIRUFQMzJbJDQ0Mz4+Ml18MDsKICAgICAgICAgICQ0NDUgPSAkNDQ0ICYgLTg7CiAgICAgICAgICAkNDQ2ID0gKCQ0NDV8MCk9PSgkJDQzMjkkbGNzc2EkaXwwKTsKICAgICAgICAgIGlmICgkNDQ2KSB7CiAgICAgICAgICAgbGFiZWwgPSA5NzsKICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgICQ0NDcgPSAkJDAzMjIkaSA+Pj4gMzE7CiAgICAgICAgICAkNDQ4ID0gKCgoKCQkMDMyMyRpKSkgKyAxNnwwKSArICgkNDQ3PDwyKXwwKTsKICAgICAgICAgICQ0NDkgPSAkJDAzMjIkaSA8PCAxOwogICAgICAgICAgJDQ1MCA9IEhFQVAzMlskNDQ4Pj4yXXwwOwogICAgICAgICAgJDQ1MSA9ICgkNDUwfDApPT0oMHwwKTsKICAgICAgICAgIGlmICgkNDUxKSB7CiAgICAgICAgICAgbGFiZWwgPSA5NjsKICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgJCQwMzIyJGkgPSAkNDQ5OyQkMDMyMyRpID0gJDQ1MDsKICAgICAgICAgIH0KICAgICAgICAgfQogICAgICAgICBpZiAoKGxhYmVsfDApID09IDk2KSB7CiAgICAgICAgICBIRUFQMzJbJDQ0OD4+Ml0gPSAkMzI1OwogICAgICAgICAgJDQ1MiA9ICgoKCQzMjUpKSArIDI0fDApOwogICAgICAgICAgSEVBUDMyWyQ0NTI+PjJdID0gJCQwMzIzJGk7CiAgICAgICAgICAkNDUzID0gKCgoJDMyNSkpICsgMTJ8MCk7CiAgICAgICAgICBIRUFQMzJbJDQ1Mz4+Ml0gPSAkMzI1OwogICAgICAgICAgJDQ1NCA9ICgoKCQzMjUpKSArIDh8MCk7CiAgICAgICAgICBIRUFQMzJbJDQ1ND4+Ml0gPSAkMzI1OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgIH0KICAgICAgICAgZWxzZSBpZiAoKGxhYmVsfDApID09IDk3KSB7CiAgICAgICAgICAkNDU1ID0gKCgoJCQwMzIzJGkpKSArIDh8MCk7CiAgICAgICAgICAkNDU2ID0gSEVBUDMyWyQ0NTU+PjJdfDA7CiAgICAgICAgICAkNDU3ID0gKCgoJDQ1NikpICsgMTJ8MCk7CiAgICAgICAgICBIRUFQMzJbJDQ1Nz4+Ml0gPSAkMzI1OwogICAgICAgICAgSEVBUDMyWyQ0NTU+PjJdID0gJDMyNTsKICAgICAgICAgICQ0NTggPSAoKCgkMzI1KSkgKyA4fDApOwogICAgICAgICAgSEVBUDMyWyQ0NTg+PjJdID0gJDQ1NjsKICAgICAgICAgICQ0NTkgPSAoKCgkMzI1KSkgKyAxMnwwKTsKICAgICAgICAgIEhFQVAzMlskNDU5Pj4yXSA9ICQkMDMyMyRpOwogICAgICAgICAgJDQ2MCA9ICgoKCQzMjUpKSArIDI0fDApOwogICAgICAgICAgSEVBUDMyWyQ0NjA+PjJdID0gMDsKICAgICAgICAgIGJyZWFrOwogICAgICAgICB9CiAgICAgICAgfQogICAgICAgfSB3aGlsZSgwKTsKICAgICAgICQ0NjEgPSAoKCgkJDQkbGNzc2EkaSkpICsgOHwwKTsKICAgICAgICQkMCA9ICQ0NjE7CiAgICAgICBTVEFDS1RPUCA9IHNwO3JldHVybiAoJCQwfDApOwogICAgICB9IGVsc2UgewogICAgICAgJCQwMTkyID0gJDIyNTsKICAgICAgfQogICAgIH0KICAgIH0KICAgfQogIH0KIH0gd2hpbGUoMCk7CiAkNDYyID0gSEVBUDMyWyg1NDApPj4yXXwwOwogJDQ2MyA9ICgkNDYyPj4+MCk8KCQkMDE5Mj4+PjApOwogaWYgKCEoJDQ2MykpIHsKICAkNDY0ID0gKCgkNDYyKSAtICgkJDAxOTIpKXwwOwogICQ0NjUgPSBIRUFQMzJbKDU1Mik+PjJdfDA7CiAgJDQ2NiA9ICgkNDY0Pj4+MCk+KDE1KTsKICBpZiAoJDQ2NikgewogICAkNDY3ID0gKCgkNDY1KSArICgkJDAxOTIpfDApOwogICBIRUFQMzJbKDU1Mik+PjJdID0gJDQ2NzsKICAgSEVBUDMyWyg1NDApPj4yXSA9ICQ0NjQ7CiAgICQ0NjggPSAkNDY0IHwgMTsKICAgJDQ2OSA9ICgoKCQ0NjcpKSArIDR8MCk7CiAgIEhFQVAzMlskNDY5Pj4yXSA9ICQ0Njg7CiAgICQ0NzAgPSAoKCQ0NjUpICsgKCQ0NjIpfDApOwogICBIRUFQMzJbJDQ3MD4+Ml0gPSAkNDY0OwogICAkNDcxID0gJCQwMTkyIHwgMzsKICAgJDQ3MiA9ICgoKCQ0NjUpKSArIDR8MCk7CiAgIEhFQVAzMlskNDcyPj4yXSA9ICQ0NzE7CiAgfSBlbHNlIHsKICAgSEVBUDMyWyg1NDApPj4yXSA9IDA7CiAgIEhFQVAzMlsoNTUyKT4+Ml0gPSAwOwogICAkNDczID0gJDQ2MiB8IDM7CiAgICQ0NzQgPSAoKCgkNDY1KSkgKyA0fDApOwogICBIRUFQMzJbJDQ3ND4+Ml0gPSAkNDczOwogICAkNDc1ID0gKCgkNDY1KSArICgkNDYyKXwwKTsKICAgJDQ3NiA9ICgoKCQ0NzUpKSArIDR8MCk7CiAgICQ0NzcgPSBIRUFQMzJbJDQ3Nj4+Ml18MDsKICAgJDQ3OCA9ICQ0NzcgfCAxOwogICBIRUFQMzJbJDQ3Nj4+Ml0gPSAkNDc4OwogIH0KICAkNDc5ID0gKCgoJDQ2NSkpICsgOHwwKTsKICAkJDAgPSAkNDc5OwogIFNUQUNLVE9QID0gc3A7cmV0dXJuICgkJDB8MCk7CiB9CiAkNDgwID0gSEVBUDMyWyg1NDQpPj4yXXwwOwogJDQ4MSA9ICgkNDgwPj4+MCk+KCQkMDE5Mj4+PjApOwogaWYgKCQ0ODEpIHsKICAkNDgyID0gKCgkNDgwKSAtICgkJDAxOTIpKXwwOwogIEhFQVAzMlsoNTQ0KT4+Ml0gPSAkNDgyOwogICQ0ODMgPSBIRUFQMzJbKDU1Nik+PjJdfDA7CiAgJDQ4NCA9ICgoJDQ4MykgKyAoJCQwMTkyKXwwKTsKICBIRUFQMzJbKDU1Nik+PjJdID0gJDQ4NDsKICAkNDg1ID0gJDQ4MiB8IDE7CiAgJDQ4NiA9ICgoKCQ0ODQpKSArIDR8MCk7CiAgSEVBUDMyWyQ0ODY+PjJdID0gJDQ4NTsKICAkNDg3ID0gJCQwMTkyIHwgMzsKICAkNDg4ID0gKCgoJDQ4MykpICsgNHwwKTsKICBIRUFQMzJbJDQ4OD4+Ml0gPSAkNDg3OwogICQ0ODkgPSAoKCgkNDgzKSkgKyA4fDApOwogICQkMCA9ICQ0ODk7CiAgU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKIH0KICQ0OTAgPSBIRUFQMzJbMjUxXXwwOwogJDQ5MSA9ICgkNDkwfDApPT0oMCk7CiBpZiAoJDQ5MSkgewogIEhFQVAzMlsoMTAxMik+PjJdID0gNDA5NjsKICBIRUFQMzJbKDEwMDgpPj4yXSA9IDQwOTY7CiAgSEVBUDMyWygxMDE2KT4+Ml0gPSAtMTsKICBIRUFQMzJbKDEwMjApPj4yXSA9IC0xOwogIEhFQVAzMlsoMTAyNCk+PjJdID0gMDsKICBIRUFQMzJbKDk3Nik+PjJdID0gMDsKICAkNDkyID0gJDE7CiAgJDQ5MyA9ICQ0OTIgJiAtMTY7CiAgJDQ5NCA9ICQ0OTMgXiAxNDMxNjU1NzY4OwogIEhFQVAzMlsyNTFdID0gJDQ5NDsKICAkNDk4ID0gNDA5NjsKIH0gZWxzZSB7CiAgJCRwcmUkaTE5NSA9IEhFQVAzMlsoMTAxMik+PjJdfDA7CiAgJDQ5OCA9ICQkcHJlJGkxOTU7CiB9CiAkNDk1ID0gKCgkJDAxOTIpICsgNDgpfDA7CiAkNDk2ID0gKCgkJDAxOTIpICsgNDcpfDA7CiAkNDk3ID0gKCgkNDk4KSArICgkNDk2KSl8MDsKICQ0OTkgPSAoMCAtICgkNDk4KSl8MDsKICQ1MDAgPSAkNDk3ICYgJDQ5OTsKICQ1MDEgPSAoJDUwMD4+PjApPigkJDAxOTI+Pj4wKTsKIGlmICghKCQ1MDEpKSB7CiAgJCQwID0gMDsKICBTVEFDS1RPUCA9IHNwO3JldHVybiAoJCQwfDApOwogfQogJDUwMiA9IEhFQVAzMlsoOTcyKT4+Ml18MDsKICQ1MDMgPSAoJDUwMnwwKT09KDApOwogaWYgKCEoJDUwMykpIHsKICAkNTA0ID0gSEVBUDMyWyg5NjQpPj4yXXwwOwogICQ1MDUgPSAoKCQ1MDQpICsgKCQ1MDApKXwwOwogICQ1MDYgPSAoJDUwNT4+PjApPD0oJDUwND4+PjApOwogICQ1MDcgPSAoJDUwNT4+PjApPigkNTAyPj4+MCk7CiAgJG9yJGNvbmQxJGkgPSAkNTA2IHwgJDUwNzsKICBpZiAoJG9yJGNvbmQxJGkpIHsKICAgJCQwID0gMDsKICAgU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKICB9CiB9CiAkNTA4ID0gSEVBUDMyWyg5NzYpPj4yXXwwOwogJDUwOSA9ICQ1MDggJiA0OwogJDUxMCA9ICgkNTA5fDApPT0oMCk7CiBMMTY3OiBkbyB7CiAgaWYgKCQ1MTApIHsKICAgJDUxMSA9IEhFQVAzMlsoNTU2KT4+Ml18MDsKICAgJDUxMiA9ICgkNTExfDApPT0oMHwwKTsKICAgTDE2OTogZG8gewogICAgaWYgKCQ1MTIpIHsKICAgICBsYWJlbCA9IDExODsKICAgIH0gZWxzZSB7CiAgICAgJCQwJGkyMCRpID0gKDk4MCk7CiAgICAgd2hpbGUoMSkgewogICAgICAkNTEzID0gSEVBUDMyWyQkMCRpMjAkaT4+Ml18MDsKICAgICAgJDUxNCA9ICgkNTEzPj4+MCk+KCQ1MTE+Pj4wKTsKICAgICAgaWYgKCEoJDUxNCkpIHsKICAgICAgICQ1MTUgPSAoKCgkJDAkaTIwJGkpKSArIDR8MCk7CiAgICAgICAkNTE2ID0gSEVBUDMyWyQ1MTU+PjJdfDA7CiAgICAgICAkNTE3ID0gKCgkNTEzKSArICgkNTE2KXwwKTsKICAgICAgICQ1MTggPSAoJDUxNz4+PjApPigkNTExPj4+MCk7CiAgICAgICBpZiAoJDUxOCkgewogICAgICAgIGJyZWFrOwogICAgICAgfQogICAgICB9CiAgICAgICQ1MTkgPSAoKCgkJDAkaTIwJGkpKSArIDh8MCk7CiAgICAgICQ1MjAgPSBIRUFQMzJbJDUxOT4+Ml18MDsKICAgICAgJDUyMSA9ICgkNTIwfDApPT0oMHwwKTsKICAgICAgaWYgKCQ1MjEpIHsKICAgICAgIGxhYmVsID0gMTE4OwogICAgICAgYnJlYWsgTDE2OTsKICAgICAgfSBlbHNlIHsKICAgICAgICQkMCRpMjAkaSA9ICQ1MjA7CiAgICAgIH0KICAgICB9CiAgICAgJDU0NCA9ICgoJDQ5NykgLSAoJDQ4MCkpfDA7CiAgICAgJDU0NSA9ICQ1NDQgJiAkNDk5OwogICAgICQ1NDYgPSAoJDU0NT4+PjApPCgyMTQ3NDgzNjQ3KTsKICAgICBpZiAoJDU0NikgewogICAgICAkNTQ3ID0gKF9zYnJrKCgkNTQ1fDApKXwwKTsKICAgICAgJDU0OCA9IEhFQVAzMlskJDAkaTIwJGk+PjJdfDA7CiAgICAgICQ1NDkgPSBIRUFQMzJbJDUxNT4+Ml18MDsKICAgICAgJDU1MCA9ICgoJDU0OCkgKyAoJDU0OSl8MCk7CiAgICAgICQ1NTEgPSAoJDU0N3wwKT09KCQ1NTB8MCk7CiAgICAgIGlmICgkNTUxKSB7CiAgICAgICAkNTUyID0gKCQ1NDd8MCk9PSgoLTEpfDApOwogICAgICAgaWYgKCQ1NTIpIHsKICAgICAgICAkJDIyMzQyNDMxMzYkaSA9ICQ1NDU7CiAgICAgICB9IGVsc2UgewogICAgICAgICQkNzIzOTQ3JGkgPSAkNTQ1OyQkNzQ4JGkgPSAkNTQ3OwogICAgICAgIGxhYmVsID0gMTM1OwogICAgICAgIGJyZWFrIEwxNjc7CiAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAkJDIyNDckcGgkaSA9ICQ1NDc7JCQyMjUzJHBoJGkgPSAkNTQ1OwogICAgICAgbGFiZWwgPSAxMjY7CiAgICAgIH0KICAgICB9IGVsc2UgewogICAgICAkJDIyMzQyNDMxMzYkaSA9IDA7CiAgICAgfQogICAgfQogICB9IHdoaWxlKDApOwogICBkbyB7CiAgICBpZiAoKGxhYmVsfDApID09IDExOCkgewogICAgICQ1MjIgPSAoX3NicmsoMCl8MCk7CiAgICAgJDUyMyA9ICgkNTIyfDApPT0oKC0xKXwwKTsKICAgICBpZiAoJDUyMykgewogICAgICAkJDIyMzQyNDMxMzYkaSA9IDA7CiAgICAgfSBlbHNlIHsKICAgICAgJDUyNCA9ICQ1MjI7CiAgICAgICQ1MjUgPSBIRUFQMzJbKDEwMDgpPj4yXXwwOwogICAgICAkNTI2ID0gKCgkNTI1KSArIC0xKXwwOwogICAgICAkNTI3ID0gJDUyNiAmICQ1MjQ7CiAgICAgICQ1MjggPSAoJDUyN3wwKT09KDApOwogICAgICAkNTI5ID0gKCgkNTI2KSArICgkNTI0KSl8MDsKICAgICAgJDUzMCA9ICgwIC0gKCQ1MjUpKXwwOwogICAgICAkNTMxID0gJDUyOSAmICQ1MzA7CiAgICAgICQ1MzIgPSAoKCQ1MzEpIC0gKCQ1MjQpKXwwOwogICAgICAkNTMzID0gJDUyOCA/IDAgOiAkNTMyOwogICAgICAkJCRpID0gKCgkNTMzKSArICgkNTAwKSl8MDsKICAgICAgJDUzNCA9IEhFQVAzMlsoOTY0KT4+Ml18MDsKICAgICAgJDUzNSA9ICgoJCQkaSkgKyAoJDUzNCkpfDA7CiAgICAgICQ1MzYgPSAoJCQkaT4+PjApPigkJDAxOTI+Pj4wKTsKICAgICAgJDUzNyA9ICgkJCRpPj4+MCk8KDIxNDc0ODM2NDcpOwogICAgICAkb3IkY29uZCRpID0gJDUzNiAmICQ1Mzc7CiAgICAgIGlmICgkb3IkY29uZCRpKSB7CiAgICAgICAkNTM4ID0gSEVBUDMyWyg5NzIpPj4yXXwwOwogICAgICAgJDUzOSA9ICgkNTM4fDApPT0oMCk7CiAgICAgICBpZiAoISgkNTM5KSkgewogICAgICAgICQ1NDAgPSAoJDUzNT4+PjApPD0oJDUzND4+PjApOwogICAgICAgICQ1NDEgPSAoJDUzNT4+PjApPigkNTM4Pj4+MCk7CiAgICAgICAgJG9yJGNvbmQyJGkgPSAkNTQwIHwgJDU0MTsKICAgICAgICBpZiAoJG9yJGNvbmQyJGkpIHsKICAgICAgICAgJCQyMjM0MjQzMTM2JGkgPSAwOwogICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICB9CiAgICAgICAkNTQyID0gKF9zYnJrKCgkJCRpfDApKXwwKTsKICAgICAgICQ1NDMgPSAoJDU0MnwwKT09KCQ1MjJ8MCk7CiAgICAgICBpZiAoJDU0MykgewogICAgICAgICQkNzIzOTQ3JGkgPSAkJCRpOyQkNzQ4JGkgPSAkNTIyOwogICAgICAgIGxhYmVsID0gMTM1OwogICAgICAgIGJyZWFrIEwxNjc7CiAgICAgICB9IGVsc2UgewogICAgICAgICQkMjI0NyRwaCRpID0gJDU0MjskJDIyNTMkcGgkaSA9ICQkJGk7CiAgICAgICAgbGFiZWwgPSAxMjY7CiAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAkJDIyMzQyNDMxMzYkaSA9IDA7CiAgICAgIH0KICAgICB9CiAgICB9CiAgIH0gd2hpbGUoMCk7CiAgIGRvIHsKICAgIGlmICgobGFiZWx8MCkgPT0gMTI2KSB7CiAgICAgJDU1MyA9ICgwIC0gKCQkMjI1MyRwaCRpKSl8MDsKICAgICAkNTU0ID0gKCQkMjI0NyRwaCRpfDApIT0oKC0xKXwwKTsKICAgICAkNTU1ID0gKCQkMjI1MyRwaCRpPj4+MCk8KDIxNDc0ODM2NDcpOwogICAgICRvciRjb25kNyRpID0gJDU1NSAmICQ1NTQ7CiAgICAgJDU1NiA9ICgkNDk1Pj4+MCk+KCQkMjI1MyRwaCRpPj4+MCk7CiAgICAgJG9yJGNvbmQxMCRpID0gJDU1NiAmICRvciRjb25kNyRpOwogICAgIGlmICghKCRvciRjb25kMTAkaSkpIHsKICAgICAgJDU2NiA9ICgkJDIyNDckcGgkaXwwKT09KCgtMSl8MCk7CiAgICAgIGlmICgkNTY2KSB7CiAgICAgICAkJDIyMzQyNDMxMzYkaSA9IDA7CiAgICAgICBicmVhazsKICAgICAgfSBlbHNlIHsKICAgICAgICQkNzIzOTQ3JGkgPSAkJDIyNTMkcGgkaTskJDc0OCRpID0gJCQyMjQ3JHBoJGk7CiAgICAgICBsYWJlbCA9IDEzNTsKICAgICAgIGJyZWFrIEwxNjc7CiAgICAgIH0KICAgICB9CiAgICAgJDU1NyA9IEhFQVAzMlsoMTAxMik+PjJdfDA7CiAgICAgJDU1OCA9ICgoJDQ5NikgLSAoJCQyMjUzJHBoJGkpKXwwOwogICAgICQ1NTkgPSAoKCQ1NTgpICsgKCQ1NTcpKXwwOwogICAgICQ1NjAgPSAoMCAtICgkNTU3KSl8MDsKICAgICAkNTYxID0gJDU1OSAmICQ1NjA7CiAgICAgJDU2MiA9ICgkNTYxPj4+MCk8KDIxNDc0ODM2NDcpOwogICAgIGlmICghKCQ1NjIpKSB7CiAgICAgICQkNzIzOTQ3JGkgPSAkJDIyNTMkcGgkaTskJDc0OCRpID0gJCQyMjQ3JHBoJGk7CiAgICAgIGxhYmVsID0gMTM1OwogICAgICBicmVhayBMMTY3OwogICAgIH0KICAgICAkNTYzID0gKF9zYnJrKCgkNTYxfDApKXwwKTsKICAgICAkNTY0ID0gKCQ1NjN8MCk9PSgoLTEpfDApOwogICAgIGlmICgkNTY0KSB7CiAgICAgIChfc2JyaygoJDU1M3wwKSl8MCk7CiAgICAgICQkMjIzNDI0MzEzNiRpID0gMDsKICAgICAgYnJlYWs7CiAgICAgfSBlbHNlIHsKICAgICAgJDU2NSA9ICgoJDU2MSkgKyAoJCQyMjUzJHBoJGkpKXwwOwogICAgICAkJDcyMzk0NyRpID0gJDU2NTskJDc0OCRpID0gJCQyMjQ3JHBoJGk7CiAgICAgIGxhYmVsID0gMTM1OwogICAgICBicmVhayBMMTY3OwogICAgIH0KICAgIH0KICAgfSB3aGlsZSgwKTsKICAgJDU2NyA9IEhFQVAzMlsoOTc2KT4+Ml18MDsKICAgJDU2OCA9ICQ1NjcgfCA0OwogICBIRUFQMzJbKDk3Nik+PjJdID0gJDU2ODsKICAgJCQ0MjM2JGkgPSAkJDIyMzQyNDMxMzYkaTsKICAgbGFiZWwgPSAxMzM7CiAgfSBlbHNlIHsKICAgJCQ0MjM2JGkgPSAwOwogICBsYWJlbCA9IDEzMzsKICB9CiB9IHdoaWxlKDApOwogaWYgKChsYWJlbHwwKSA9PSAxMzMpIHsKICAkNTY5ID0gKCQ1MDA+Pj4wKTwoMjE0NzQ4MzY0Nyk7CiAgaWYgKCQ1NjkpIHsKICAgJDU3MCA9IChfc2JyaygoJDUwMHwwKSl8MCk7CiAgICQ1NzEgPSAoX3NicmsoMCl8MCk7CiAgICQ1NzIgPSAoJDU3MHwwKSE9KCgtMSl8MCk7CiAgICQ1NzMgPSAoJDU3MXwwKSE9KCgtMSl8MCk7CiAgICRvciRjb25kNSRpID0gJDU3MiAmICQ1NzM7CiAgICQ1NzQgPSAoJDU3MD4+PjApPCgkNTcxPj4+MCk7CiAgICRvciRjb25kMTEkaSA9ICQ1NzQgJiAkb3IkY29uZDUkaTsKICAgJDU3NSA9ICQ1NzE7CiAgICQ1NzYgPSAkNTcwOwogICAkNTc3ID0gKCgkNTc1KSAtICgkNTc2KSl8MDsKICAgJDU3OCA9ICgoJCQwMTkyKSArIDQwKXwwOwogICAkNTc5ID0gKCQ1Nzc+Pj4wKT4oJDU3OD4+PjApOwogICAkJCQ0MjM2JGkgPSAkNTc5ID8gJDU3NyA6ICQkNDIzNiRpOwogICAkb3IkY29uZDExJG5vdCRpID0gJG9yJGNvbmQxMSRpIF4gMTsKICAgJDU4MCA9ICgkNTcwfDApPT0oKC0xKXwwKTsKICAgJG5vdCQkaSA9ICQ1NzkgXiAxOwogICAkNTgxID0gJDU4MCB8ICRub3QkJGk7CiAgICRvciRjb25kNDkkaSA9ICQ1ODEgfCAkb3IkY29uZDExJG5vdCRpOwogICBpZiAoISgkb3IkY29uZDQ5JGkpKSB7CiAgICAkJDcyMzk0NyRpID0gJCQkNDIzNiRpOyQkNzQ4JGkgPSAkNTcwOwogICAgbGFiZWwgPSAxMzU7CiAgIH0KICB9CiB9CiBpZiAoKGxhYmVsfDApID09IDEzNSkgewogICQ1ODIgPSBIRUFQMzJbKDk2NCk+PjJdfDA7CiAgJDU4MyA9ICgoJDU4MikgKyAoJCQ3MjM5NDckaSkpfDA7CiAgSEVBUDMyWyg5NjQpPj4yXSA9ICQ1ODM7CiAgJDU4NCA9IEhFQVAzMlsoOTY4KT4+Ml18MDsKICAkNTg1ID0gKCQ1ODM+Pj4wKT4oJDU4ND4+PjApOwogIGlmICgkNTg1KSB7CiAgIEhFQVAzMlsoOTY4KT4+Ml0gPSAkNTgzOwogIH0KICAkNTg2ID0gSEVBUDMyWyg1NTYpPj4yXXwwOwogICQ1ODcgPSAoJDU4NnwwKT09KDB8MCk7CiAgZG8gewogICBpZiAoJDU4NykgewogICAgJDU4OCA9IEhFQVAzMlsoNTQ4KT4+Ml18MDsKICAgICQ1ODkgPSAoJDU4OHwwKT09KDB8MCk7CiAgICAkNTkwID0gKCQkNzQ4JGk+Pj4wKTwoJDU4OD4+PjApOwogICAgJG9yJGNvbmQxMiRpID0gJDU4OSB8ICQ1OTA7CiAgICBpZiAoJG9yJGNvbmQxMiRpKSB7CiAgICAgSEVBUDMyWyg1NDgpPj4yXSA9ICQkNzQ4JGk7CiAgICB9CiAgICBIRUFQMzJbKDk4MCk+PjJdID0gJCQ3NDgkaTsKICAgIEhFQVAzMlsoOTg0KT4+Ml0gPSAkJDcyMzk0NyRpOwogICAgSEVBUDMyWyg5OTIpPj4yXSA9IDA7CiAgICAkNTkxID0gSEVBUDMyWzI1MV18MDsKICAgIEhFQVAzMlsoNTY4KT4+Ml0gPSAkNTkxOwogICAgSEVBUDMyWyg1NjQpPj4yXSA9IC0xOwogICAgSEVBUDMyWyg1ODQpPj4yXSA9ICg1NzIpOwogICAgSEVBUDMyWyg1ODApPj4yXSA9ICg1NzIpOwogICAgSEVBUDMyWyg1OTIpPj4yXSA9ICg1ODApOwogICAgSEVBUDMyWyg1ODgpPj4yXSA9ICg1ODApOwogICAgSEVBUDMyWyg2MDApPj4yXSA9ICg1ODgpOwogICAgSEVBUDMyWyg1OTYpPj4yXSA9ICg1ODgpOwogICAgSEVBUDMyWyg2MDgpPj4yXSA9ICg1OTYpOwogICAgSEVBUDMyWyg2MDQpPj4yXSA9ICg1OTYpOwogICAgSEVBUDMyWyg2MTYpPj4yXSA9ICg2MDQpOwogICAgSEVBUDMyWyg2MTIpPj4yXSA9ICg2MDQpOwogICAgSEVBUDMyWyg2MjQpPj4yXSA9ICg2MTIpOwogICAgSEVBUDMyWyg2MjApPj4yXSA9ICg2MTIpOwogICAgSEVBUDMyWyg2MzIpPj4yXSA9ICg2MjApOwogICAgSEVBUDMyWyg2MjgpPj4yXSA9ICg2MjApOwogICAgSEVBUDMyWyg2NDApPj4yXSA9ICg2MjgpOwogICAgSEVBUDMyWyg2MzYpPj4yXSA9ICg2MjgpOwogICAgSEVBUDMyWyg2NDgpPj4yXSA9ICg2MzYpOwogICAgSEVBUDMyWyg2NDQpPj4yXSA9ICg2MzYpOwogICAgSEVBUDMyWyg2NTYpPj4yXSA9ICg2NDQpOwogICAgSEVBUDMyWyg2NTIpPj4yXSA9ICg2NDQpOwogICAgSEVBUDMyWyg2NjQpPj4yXSA9ICg2NTIpOwogICAgSEVBUDMyWyg2NjApPj4yXSA9ICg2NTIpOwogICAgSEVBUDMyWyg2NzIpPj4yXSA9ICg2NjApOwogICAgSEVBUDMyWyg2NjgpPj4yXSA9ICg2NjApOwogICAgSEVBUDMyWyg2ODApPj4yXSA9ICg2NjgpOwogICAgSEVBUDMyWyg2NzYpPj4yXSA9ICg2NjgpOwogICAgSEVBUDMyWyg2ODgpPj4yXSA9ICg2NzYpOwogICAgSEVBUDMyWyg2ODQpPj4yXSA9ICg2NzYpOwogICAgSEVBUDMyWyg2OTYpPj4yXSA9ICg2ODQpOwogICAgSEVBUDMyWyg2OTIpPj4yXSA9ICg2ODQpOwogICAgSEVBUDMyWyg3MDQpPj4yXSA9ICg2OTIpOwogICAgSEVBUDMyWyg3MDApPj4yXSA9ICg2OTIpOwogICAgSEVBUDMyWyg3MTIpPj4yXSA9ICg3MDApOwogICAgSEVBUDMyWyg3MDgpPj4yXSA9ICg3MDApOwogICAgSEVBUDMyWyg3MjApPj4yXSA9ICg3MDgpOwogICAgSEVBUDMyWyg3MTYpPj4yXSA9ICg3MDgpOwogICAgSEVBUDMyWyg3MjgpPj4yXSA9ICg3MTYpOwogICAgSEVBUDMyWyg3MjQpPj4yXSA9ICg3MTYpOwogICAgSEVBUDMyWyg3MzYpPj4yXSA9ICg3MjQpOwogICAgSEVBUDMyWyg3MzIpPj4yXSA9ICg3MjQpOwogICAgSEVBUDMyWyg3NDQpPj4yXSA9ICg3MzIpOwogICAgSEVBUDMyWyg3NDApPj4yXSA9ICg3MzIpOwogICAgSEVBUDMyWyg3NTIpPj4yXSA9ICg3NDApOwogICAgSEVBUDMyWyg3NDgpPj4yXSA9ICg3NDApOwogICAgSEVBUDMyWyg3NjApPj4yXSA9ICg3NDgpOwogICAgSEVBUDMyWyg3NTYpPj4yXSA9ICg3NDgpOwogICAgSEVBUDMyWyg3NjgpPj4yXSA9ICg3NTYpOwogICAgSEVBUDMyWyg3NjQpPj4yXSA9ICg3NTYpOwogICAgSEVBUDMyWyg3NzYpPj4yXSA9ICg3NjQpOwogICAgSEVBUDMyWyg3NzIpPj4yXSA9ICg3NjQpOwogICAgSEVBUDMyWyg3ODQpPj4yXSA9ICg3NzIpOwogICAgSEVBUDMyWyg3ODApPj4yXSA9ICg3NzIpOwogICAgSEVBUDMyWyg3OTIpPj4yXSA9ICg3ODApOwogICAgSEVBUDMyWyg3ODgpPj4yXSA9ICg3ODApOwogICAgSEVBUDMyWyg4MDApPj4yXSA9ICg3ODgpOwogICAgSEVBUDMyWyg3OTYpPj4yXSA9ICg3ODgpOwogICAgSEVBUDMyWyg4MDgpPj4yXSA9ICg3OTYpOwogICAgSEVBUDMyWyg4MDQpPj4yXSA9ICg3OTYpOwogICAgSEVBUDMyWyg4MTYpPj4yXSA9ICg4MDQpOwogICAgSEVBUDMyWyg4MTIpPj4yXSA9ICg4MDQpOwogICAgSEVBUDMyWyg4MjQpPj4yXSA9ICg4MTIpOwogICAgSEVBUDMyWyg4MjApPj4yXSA9ICg4MTIpOwogICAgSEVBUDMyWyg4MzIpPj4yXSA9ICg4MjApOwogICAgSEVBUDMyWyg4MjgpPj4yXSA9ICg4MjApOwogICAgJDU5MiA9ICgoJCQ3MjM5NDckaSkgKyAtNDApfDA7CiAgICAkNTkzID0gKCgoJCQ3NDgkaSkpICsgOHwwKTsKICAgICQ1OTQgPSAkNTkzOwogICAgJDU5NSA9ICQ1OTQgJiA3OwogICAgJDU5NiA9ICgkNTk1fDApPT0oMCk7CiAgICAkNTk3ID0gKDAgLSAoJDU5NCkpfDA7CiAgICAkNTk4ID0gJDU5NyAmIDc7CiAgICAkNTk5ID0gJDU5NiA/IDAgOiAkNTk4OwogICAgJDYwMCA9ICgoJCQ3NDgkaSkgKyAoJDU5OSl8MCk7CiAgICAkNjAxID0gKCgkNTkyKSAtICgkNTk5KSl8MDsKICAgIEhFQVAzMlsoNTU2KT4+Ml0gPSAkNjAwOwogICAgSEVBUDMyWyg1NDQpPj4yXSA9ICQ2MDE7CiAgICAkNjAyID0gJDYwMSB8IDE7CiAgICAkNjAzID0gKCgoJDYwMCkpICsgNHwwKTsKICAgIEhFQVAzMlskNjAzPj4yXSA9ICQ2MDI7CiAgICAkNjA0ID0gKCgkJDc0OCRpKSArICgkNTkyKXwwKTsKICAgICQ2MDUgPSAoKCgkNjA0KSkgKyA0fDApOwogICAgSEVBUDMyWyQ2MDU+PjJdID0gNDA7CiAgICAkNjA2ID0gSEVBUDMyWygxMDIwKT4+Ml18MDsKICAgIEhFQVAzMlsoNTYwKT4+Ml0gPSAkNjA2OwogICB9IGVsc2UgewogICAgJCQwMjQzNjckaSA9ICg5ODApOwogICAgd2hpbGUoMSkgewogICAgICQ2MDcgPSBIRUFQMzJbJCQwMjQzNjckaT4+Ml18MDsKICAgICAkNjA4ID0gKCgoJCQwMjQzNjckaSkpICsgNHwwKTsKICAgICAkNjA5ID0gSEVBUDMyWyQ2MDg+PjJdfDA7CiAgICAgJDYxMCA9ICgoJDYwNykgKyAoJDYwOSl8MCk7CiAgICAgJDYxMSA9ICgkJDc0OCRpfDApPT0oJDYxMHwwKTsKICAgICBpZiAoJDYxMSkgewogICAgICBsYWJlbCA9IDE0MzsKICAgICAgYnJlYWs7CiAgICAgfQogICAgICQ2MTIgPSAoKCgkJDAyNDM2NyRpKSkgKyA4fDApOwogICAgICQ2MTMgPSBIRUFQMzJbJDYxMj4+Ml18MDsKICAgICAkNjE0ID0gKCQ2MTN8MCk9PSgwfDApOwogICAgIGlmICgkNjE0KSB7CiAgICAgIGJyZWFrOwogICAgIH0gZWxzZSB7CiAgICAgICQkMDI0MzY3JGkgPSAkNjEzOwogICAgIH0KICAgIH0KICAgIGlmICgobGFiZWx8MCkgPT0gMTQzKSB7CiAgICAgJDYxNSA9ICgoKCQkMDI0MzY3JGkpKSArIDEyfDApOwogICAgICQ2MTYgPSBIRUFQMzJbJDYxNT4+Ml18MDsKICAgICAkNjE3ID0gJDYxNiAmIDg7CiAgICAgJDYxOCA9ICgkNjE3fDApPT0oMCk7CiAgICAgaWYgKCQ2MTgpIHsKICAgICAgJDYxOSA9ICgkNjA3Pj4+MCk8PSgkNTg2Pj4+MCk7CiAgICAgICQ2MjAgPSAoJCQ3NDgkaT4+PjApPigkNTg2Pj4+MCk7CiAgICAgICRvciRjb25kNTAkaSA9ICQ2MjAgJiAkNjE5OwogICAgICBpZiAoJG9yJGNvbmQ1MCRpKSB7CiAgICAgICAkNjIxID0gKCgkNjA5KSArICgkJDcyMzk0NyRpKSl8MDsKICAgICAgIEhFQVAzMlskNjA4Pj4yXSA9ICQ2MjE7CiAgICAgICAkNjIyID0gSEVBUDMyWyg1NDQpPj4yXXwwOwogICAgICAgJDYyMyA9ICgoJDYyMikgKyAoJCQ3MjM5NDckaSkpfDA7CiAgICAgICAkNjI0ID0gKCgoJDU4NikpICsgOHwwKTsKICAgICAgICQ2MjUgPSAkNjI0OwogICAgICAgJDYyNiA9ICQ2MjUgJiA3OwogICAgICAgJDYyNyA9ICgkNjI2fDApPT0oMCk7CiAgICAgICAkNjI4ID0gKDAgLSAoJDYyNSkpfDA7CiAgICAgICAkNjI5ID0gJDYyOCAmIDc7CiAgICAgICAkNjMwID0gJDYyNyA/IDAgOiAkNjI5OwogICAgICAgJDYzMSA9ICgoJDU4NikgKyAoJDYzMCl8MCk7CiAgICAgICAkNjMyID0gKCgkNjIzKSAtICgkNjMwKSl8MDsKICAgICAgIEhFQVAzMlsoNTU2KT4+Ml0gPSAkNjMxOwogICAgICAgSEVBUDMyWyg1NDQpPj4yXSA9ICQ2MzI7CiAgICAgICAkNjMzID0gJDYzMiB8IDE7CiAgICAgICAkNjM0ID0gKCgoJDYzMSkpICsgNHwwKTsKICAgICAgIEhFQVAzMlskNjM0Pj4yXSA9ICQ2MzM7CiAgICAgICAkNjM1ID0gKCgkNTg2KSArICgkNjIzKXwwKTsKICAgICAgICQ2MzYgPSAoKCgkNjM1KSkgKyA0fDApOwogICAgICAgSEVBUDMyWyQ2MzY+PjJdID0gNDA7CiAgICAgICAkNjM3ID0gSEVBUDMyWygxMDIwKT4+Ml18MDsKICAgICAgIEhFQVAzMlsoNTYwKT4+Ml0gPSAkNjM3OwogICAgICAgYnJlYWs7CiAgICAgIH0KICAgICB9CiAgICB9CiAgICAkNjM4ID0gSEVBUDMyWyg1NDgpPj4yXXwwOwogICAgJDYzOSA9ICgkJDc0OCRpPj4+MCk8KCQ2Mzg+Pj4wKTsKICAgIGlmICgkNjM5KSB7CiAgICAgSEVBUDMyWyg1NDgpPj4yXSA9ICQkNzQ4JGk7CiAgICB9CiAgICAkNjQwID0gKCgkJDc0OCRpKSArICgkJDcyMzk0NyRpKXwwKTsKICAgICQkMTI0NDY2JGkgPSAoOTgwKTsKICAgIHdoaWxlKDEpIHsKICAgICAkNjQxID0gSEVBUDMyWyQkMTI0NDY2JGk+PjJdfDA7CiAgICAgJDY0MiA9ICgkNjQxfDApPT0oJDY0MHwwKTsKICAgICBpZiAoJDY0MikgewogICAgICBsYWJlbCA9IDE1MTsKICAgICAgYnJlYWs7CiAgICAgfQogICAgICQ2NDMgPSAoKCgkJDEyNDQ2NiRpKSkgKyA4fDApOwogICAgICQ2NDQgPSBIRUFQMzJbJDY0Mz4+Ml18MDsKICAgICAkNjQ1ID0gKCQ2NDR8MCk9PSgwfDApOwogICAgIGlmICgkNjQ1KSB7CiAgICAgICQkMCRpJGkkaSA9ICg5ODApOwogICAgICBicmVhazsKICAgICB9IGVsc2UgewogICAgICAkJDEyNDQ2NiRpID0gJDY0NDsKICAgICB9CiAgICB9CiAgICBpZiAoKGxhYmVsfDApID09IDE1MSkgewogICAgICQ2NDYgPSAoKCgkJDEyNDQ2NiRpKSkgKyAxMnwwKTsKICAgICAkNjQ3ID0gSEVBUDMyWyQ2NDY+PjJdfDA7CiAgICAgJDY0OCA9ICQ2NDcgJiA4OwogICAgICQ2NDkgPSAoJDY0OHwwKT09KDApOwogICAgIGlmICgkNjQ5KSB7CiAgICAgIEhFQVAzMlskJDEyNDQ2NiRpPj4yXSA9ICQkNzQ4JGk7CiAgICAgICQ2NTAgPSAoKCgkJDEyNDQ2NiRpKSkgKyA0fDApOwogICAgICAkNjUxID0gSEVBUDMyWyQ2NTA+PjJdfDA7CiAgICAgICQ2NTIgPSAoKCQ2NTEpICsgKCQkNzIzOTQ3JGkpKXwwOwogICAgICBIRUFQMzJbJDY1MD4+Ml0gPSAkNjUyOwogICAgICAkNjUzID0gKCgoJCQ3NDgkaSkpICsgOHwwKTsKICAgICAgJDY1NCA9ICQ2NTM7CiAgICAgICQ2NTUgPSAkNjU0ICYgNzsKICAgICAgJDY1NiA9ICgkNjU1fDApPT0oMCk7CiAgICAgICQ2NTcgPSAoMCAtICgkNjU0KSl8MDsKICAgICAgJDY1OCA9ICQ2NTcgJiA3OwogICAgICAkNjU5ID0gJDY1NiA/IDAgOiAkNjU4OwogICAgICAkNjYwID0gKCgkJDc0OCRpKSArICgkNjU5KXwwKTsKICAgICAgJDY2MSA9ICgoKCQ2NDApKSArIDh8MCk7CiAgICAgICQ2NjIgPSAkNjYxOwogICAgICAkNjYzID0gJDY2MiAmIDc7CiAgICAgICQ2NjQgPSAoJDY2M3wwKT09KDApOwogICAgICAkNjY1ID0gKDAgLSAoJDY2MikpfDA7CiAgICAgICQ2NjYgPSAkNjY1ICYgNzsKICAgICAgJDY2NyA9ICQ2NjQgPyAwIDogJDY2NjsKICAgICAgJDY2OCA9ICgoJDY0MCkgKyAoJDY2Nyl8MCk7CiAgICAgICQ2NjkgPSAkNjY4OwogICAgICAkNjcwID0gJDY2MDsKICAgICAgJDY3MSA9ICgoJDY2OSkgLSAoJDY3MCkpfDA7CiAgICAgICQ2NzIgPSAoKCQ2NjApICsgKCQkMDE5Mil8MCk7CiAgICAgICQ2NzMgPSAoKCQ2NzEpIC0gKCQkMDE5MikpfDA7CiAgICAgICQ2NzQgPSAkJDAxOTIgfCAzOwogICAgICAkNjc1ID0gKCgoJDY2MCkpICsgNHwwKTsKICAgICAgSEVBUDMyWyQ2NzU+PjJdID0gJDY3NDsKICAgICAgJDY3NiA9ICgkNTg2fDApPT0oJDY2OHwwKTsKICAgICAgZG8gewogICAgICAgaWYgKCQ2NzYpIHsKICAgICAgICAkNjc3ID0gSEVBUDMyWyg1NDQpPj4yXXwwOwogICAgICAgICQ2NzggPSAoKCQ2NzcpICsgKCQ2NzMpKXwwOwogICAgICAgIEhFQVAzMlsoNTQ0KT4+Ml0gPSAkNjc4OwogICAgICAgIEhFQVAzMlsoNTU2KT4+Ml0gPSAkNjcyOwogICAgICAgICQ2NzkgPSAkNjc4IHwgMTsKICAgICAgICAkNjgwID0gKCgoJDY3MikpICsgNHwwKTsKICAgICAgICBIRUFQMzJbJDY4MD4+Ml0gPSAkNjc5OwogICAgICAgfSBlbHNlIHsKICAgICAgICAkNjgxID0gSEVBUDMyWyg1NTIpPj4yXXwwOwogICAgICAgICQ2ODIgPSAoJDY4MXwwKT09KCQ2Njh8MCk7CiAgICAgICAgaWYgKCQ2ODIpIHsKICAgICAgICAgJDY4MyA9IEhFQVAzMlsoNTQwKT4+Ml18MDsKICAgICAgICAgJDY4NCA9ICgoJDY4MykgKyAoJDY3MykpfDA7CiAgICAgICAgIEhFQVAzMlsoNTQwKT4+Ml0gPSAkNjg0OwogICAgICAgICBIRUFQMzJbKDU1Mik+PjJdID0gJDY3MjsKICAgICAgICAgJDY4NSA9ICQ2ODQgfCAxOwogICAgICAgICAkNjg2ID0gKCgoJDY3MikpICsgNHwwKTsKICAgICAgICAgSEVBUDMyWyQ2ODY+PjJdID0gJDY4NTsKICAgICAgICAgJDY4NyA9ICgoJDY3MikgKyAoJDY4NCl8MCk7CiAgICAgICAgIEhFQVAzMlskNjg3Pj4yXSA9ICQ2ODQ7CiAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAkNjg4ID0gKCgoJDY2OCkpICsgNHwwKTsKICAgICAgICAkNjg5ID0gSEVBUDMyWyQ2ODg+PjJdfDA7CiAgICAgICAgJDY5MCA9ICQ2ODkgJiAzOwogICAgICAgICQ2OTEgPSAoJDY5MHwwKT09KDEpOwogICAgICAgIGlmICgkNjkxKSB7CiAgICAgICAgICQ2OTIgPSAkNjg5ICYgLTg7CiAgICAgICAgICQ2OTMgPSAkNjg5ID4+PiAzOwogICAgICAgICAkNjk0ID0gKCQ2ODk+Pj4wKTwoMjU2KTsKICAgICAgICAgTDIzNDogZG8gewogICAgICAgICAgaWYgKCQ2OTQpIHsKICAgICAgICAgICAkNjk1ID0gKCgoJDY2OCkpICsgOHwwKTsKICAgICAgICAgICAkNjk2ID0gSEVBUDMyWyQ2OTU+PjJdfDA7CiAgICAgICAgICAgJDY5NyA9ICgoKCQ2NjgpKSArIDEyfDApOwogICAgICAgICAgICQ2OTggPSBIRUFQMzJbJDY5Nz4+Ml18MDsKICAgICAgICAgICAkNjk5ID0gKCQ2OTh8MCk9PSgkNjk2fDApOwogICAgICAgICAgIGlmICgkNjk5KSB7CiAgICAgICAgICAgICQ3MDAgPSAxIDw8ICQ2OTM7CiAgICAgICAgICAgICQ3MDEgPSAkNzAwIF4gLTE7CiAgICAgICAgICAgICQ3MDIgPSBIRUFQMzJbMTMzXXwwOwogICAgICAgICAgICAkNzAzID0gJDcwMiAmICQ3MDE7CiAgICAgICAgICAgIEhFQVAzMlsxMzNdID0gJDcwMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJDcwNCA9ICgoKCQ2OTYpKSArIDEyfDApOwogICAgICAgICAgICBIRUFQMzJbJDcwND4+Ml0gPSAkNjk4OwogICAgICAgICAgICAkNzA1ID0gKCgoJDY5OCkpICsgOHwwKTsKICAgICAgICAgICAgSEVBUDMyWyQ3MDU+PjJdID0gJDY5NjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAkNzA2ID0gKCgoJDY2OCkpICsgMjR8MCk7CiAgICAgICAgICAgJDcwNyA9IEhFQVAzMlskNzA2Pj4yXXwwOwogICAgICAgICAgICQ3MDggPSAoKCgkNjY4KSkgKyAxMnwwKTsKICAgICAgICAgICAkNzA5ID0gSEVBUDMyWyQ3MDg+PjJdfDA7CiAgICAgICAgICAgJDcxMCA9ICgkNzA5fDApPT0oJDY2OHwwKTsKICAgICAgICAgICBkbyB7CiAgICAgICAgICAgIGlmICgkNzEwKSB7CiAgICAgICAgICAgICAkNzE1ID0gKCgoJDY2OCkpICsgMTZ8MCk7CiAgICAgICAgICAgICAkNzE2ID0gKCgoJDcxNSkpICsgNHwwKTsKICAgICAgICAgICAgICQ3MTcgPSBIRUFQMzJbJDcxNj4+Ml18MDsKICAgICAgICAgICAgICQ3MTggPSAoJDcxN3wwKT09KDB8MCk7CiAgICAgICAgICAgICBpZiAoJDcxOCkgewogICAgICAgICAgICAgICQ3MTkgPSBIRUFQMzJbJDcxNT4+Ml18MDsKICAgICAgICAgICAgICAkNzIwID0gKCQ3MTl8MCk9PSgwfDApOwogICAgICAgICAgICAgIGlmICgkNzIwKSB7CiAgICAgICAgICAgICAgICQkMyRpJGkgPSAwOwogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAkJDEyNjQkaSRpID0gJDcxOTskJDEyNjYkaSRpID0gJDcxNTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQkMTI2NCRpJGkgPSAkNzE3OyQkMTI2NiRpJGkgPSAkNzE2OwogICAgICAgICAgICAgfQogICAgICAgICAgICAgd2hpbGUoMSkgewogICAgICAgICAgICAgICQ3MjEgPSAoKCgkJDEyNjQkaSRpKSkgKyAyMHwwKTsKICAgICAgICAgICAgICAkNzIyID0gSEVBUDMyWyQ3MjE+PjJdfDA7CiAgICAgICAgICAgICAgJDcyMyA9ICgkNzIyfDApPT0oMHwwKTsKICAgICAgICAgICAgICBpZiAoISgkNzIzKSkgewogICAgICAgICAgICAgICAkJDEyNjQkaSRpID0gJDcyMjskJDEyNjYkaSRpID0gJDcyMTsKICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICQ3MjQgPSAoKCgkJDEyNjQkaSRpKSkgKyAxNnwwKTsKICAgICAgICAgICAgICAkNzI1ID0gSEVBUDMyWyQ3MjQ+PjJdfDA7CiAgICAgICAgICAgICAgJDcyNiA9ICgkNzI1fDApPT0oMHwwKTsKICAgICAgICAgICAgICBpZiAoJDcyNikgewogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAkJDEyNjQkaSRpID0gJDcyNTskJDEyNjYkaSRpID0gJDcyNDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBIRUFQMzJbJCQxMjY2JGkkaT4+Ml0gPSAwOwogICAgICAgICAgICAgJCQzJGkkaSA9ICQkMTI2NCRpJGk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAkNzExID0gKCgoJDY2OCkpICsgOHwwKTsKICAgICAgICAgICAgICQ3MTIgPSBIRUFQMzJbJDcxMT4+Ml18MDsKICAgICAgICAgICAgICQ3MTMgPSAoKCgkNzEyKSkgKyAxMnwwKTsKICAgICAgICAgICAgIEhFQVAzMlskNzEzPj4yXSA9ICQ3MDk7CiAgICAgICAgICAgICAkNzE0ID0gKCgoJDcwOSkpICsgOHwwKTsKICAgICAgICAgICAgIEhFQVAzMlskNzE0Pj4yXSA9ICQ3MTI7CiAgICAgICAgICAgICAkJDMkaSRpID0gJDcwOTsKICAgICAgICAgICAgfQogICAgICAgICAgIH0gd2hpbGUoMCk7CiAgICAgICAgICAgJDcyNyA9ICgkNzA3fDApPT0oMHwwKTsKICAgICAgICAgICBpZiAoJDcyNykgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgICAgJDcyOCA9ICgoKCQ2NjgpKSArIDI4fDApOwogICAgICAgICAgICQ3MjkgPSBIRUFQMzJbJDcyOD4+Ml18MDsKICAgICAgICAgICAkNzMwID0gKDgzNiArICgkNzI5PDwyKXwwKTsKICAgICAgICAgICAkNzMxID0gSEVBUDMyWyQ3MzA+PjJdfDA7CiAgICAgICAgICAgJDczMiA9ICgkNzMxfDApPT0oJDY2OHwwKTsKICAgICAgICAgICBkbyB7CiAgICAgICAgICAgIGlmICgkNzMyKSB7CiAgICAgICAgICAgICBIRUFQMzJbJDczMD4+Ml0gPSAkJDMkaSRpOwogICAgICAgICAgICAgJGNvbmQkaSRpID0gKCQkMyRpJGl8MCk9PSgwfDApOwogICAgICAgICAgICAgaWYgKCEoJGNvbmQkaSRpKSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgJDczMyA9IDEgPDwgJDcyOTsKICAgICAgICAgICAgICQ3MzQgPSAkNzMzIF4gLTE7CiAgICAgICAgICAgICAkNzM1ID0gSEVBUDMyWyg1MzYpPj4yXXwwOwogICAgICAgICAgICAgJDczNiA9ICQ3MzUgJiAkNzM0OwogICAgICAgICAgICAgSEVBUDMyWyg1MzYpPj4yXSA9ICQ3MzY7CiAgICAgICAgICAgICBicmVhayBMMjM0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgJDczNyA9ICgoKCQ3MDcpKSArIDE2fDApOwogICAgICAgICAgICAgJDczOCA9IEhFQVAzMlskNzM3Pj4yXXwwOwogICAgICAgICAgICAgJDczOSA9ICgkNzM4fDApIT0oJDY2OHwwKTsKICAgICAgICAgICAgICQkc2luazEkaSRpID0gJDczOSYxOwogICAgICAgICAgICAgJDc0MCA9ICgoKCgkNzA3KSkgKyAxNnwwKSArICgkJHNpbmsxJGkkaTw8Mil8MCk7CiAgICAgICAgICAgICBIRUFQMzJbJDc0MD4+Ml0gPSAkJDMkaSRpOwogICAgICAgICAgICAgJDc0MSA9ICgkJDMkaSRpfDApPT0oMHwwKTsKICAgICAgICAgICAgIGlmICgkNzQxKSB7CiAgICAgICAgICAgICAgYnJlYWsgTDIzNDsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgIH0gd2hpbGUoMCk7CiAgICAgICAgICAgJDc0MiA9ICgoKCQkMyRpJGkpKSArIDI0fDApOwogICAgICAgICAgIEhFQVAzMlskNzQyPj4yXSA9ICQ3MDc7CiAgICAgICAgICAgJDc0MyA9ICgoKCQ2NjgpKSArIDE2fDApOwogICAgICAgICAgICQ3NDQgPSBIRUFQMzJbJDc0Mz4+Ml18MDsKICAgICAgICAgICAkNzQ1ID0gKCQ3NDR8MCk9PSgwfDApOwogICAgICAgICAgIGlmICghKCQ3NDUpKSB7CiAgICAgICAgICAgICQ3NDYgPSAoKCgkJDMkaSRpKSkgKyAxNnwwKTsKICAgICAgICAgICAgSEVBUDMyWyQ3NDY+PjJdID0gJDc0NDsKICAgICAgICAgICAgJDc0NyA9ICgoKCQ3NDQpKSArIDI0fDApOwogICAgICAgICAgICBIRUFQMzJbJDc0Nz4+Ml0gPSAkJDMkaSRpOwogICAgICAgICAgIH0KICAgICAgICAgICAkNzQ4ID0gKCgoJDc0MykpICsgNHwwKTsKICAgICAgICAgICAkNzQ5ID0gSEVBUDMyWyQ3NDg+PjJdfDA7CiAgICAgICAgICAgJDc1MCA9ICgkNzQ5fDApPT0oMHwwKTsKICAgICAgICAgICBpZiAoJDc1MCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgICAgJDc1MSA9ICgoKCQkMyRpJGkpKSArIDIwfDApOwogICAgICAgICAgIEhFQVAzMlskNzUxPj4yXSA9ICQ3NDk7CiAgICAgICAgICAgJDc1MiA9ICgoKCQ3NDkpKSArIDI0fDApOwogICAgICAgICAgIEhFQVAzMlskNzUyPj4yXSA9ICQkMyRpJGk7CiAgICAgICAgICB9CiAgICAgICAgIH0gd2hpbGUoMCk7CiAgICAgICAgICQ3NTMgPSAoKCQ2NjgpICsgKCQ2OTIpfDApOwogICAgICAgICAkNzU0ID0gKCgkNjkyKSArICgkNjczKSl8MDsKICAgICAgICAgJCQwJGkkaSA9ICQ3NTM7JCQwMjYwJGkkaSA9ICQ3NTQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgJCQwJGkkaSA9ICQ2Njg7JCQwMjYwJGkkaSA9ICQ2NzM7CiAgICAgICAgfQogICAgICAgICQ3NTUgPSAoKCgkJDAkaSRpKSkgKyA0fDApOwogICAgICAgICQ3NTYgPSBIRUFQMzJbJDc1NT4+Ml18MDsKICAgICAgICAkNzU3ID0gJDc1NiAmIC0yOwogICAgICAgIEhFQVAzMlskNzU1Pj4yXSA9ICQ3NTc7CiAgICAgICAgJDc1OCA9ICQkMDI2MCRpJGkgfCAxOwogICAgICAgICQ3NTkgPSAoKCgkNjcyKSkgKyA0fDApOwogICAgICAgIEhFQVAzMlskNzU5Pj4yXSA9ICQ3NTg7CiAgICAgICAgJDc2MCA9ICgoJDY3MikgKyAoJCQwMjYwJGkkaSl8MCk7CiAgICAgICAgSEVBUDMyWyQ3NjA+PjJdID0gJCQwMjYwJGkkaTsKICAgICAgICAkNzYxID0gJCQwMjYwJGkkaSA+Pj4gMzsKICAgICAgICAkNzYyID0gKCQkMDI2MCRpJGk+Pj4wKTwoMjU2KTsKICAgICAgICBpZiAoJDc2MikgewogICAgICAgICAkNzYzID0gJDc2MSA8PCAxOwogICAgICAgICAkNzY0ID0gKDU3MiArICgkNzYzPDwyKXwwKTsKICAgICAgICAgJDc2NSA9IEhFQVAzMlsxMzNdfDA7CiAgICAgICAgICQ3NjYgPSAxIDw8ICQ3NjE7CiAgICAgICAgICQ3NjcgPSAkNzY1ICYgJDc2NjsKICAgICAgICAgJDc2OCA9ICgkNzY3fDApPT0oMCk7CiAgICAgICAgIGlmICgkNzY4KSB7CiAgICAgICAgICAkNzY5ID0gJDc2NSB8ICQ3NjY7CiAgICAgICAgICBIRUFQMzJbMTMzXSA9ICQ3Njk7CiAgICAgICAgICAkJHByZSRpMTckaSA9ICgoKCQ3NjQpKSArIDh8MCk7CiAgICAgICAgICAkJDAyNjgkaSRpID0gJDc2NDskJHByZSRwaGkkaTE4JGlaMkQgPSAkJHByZSRpMTckaTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQ3NzAgPSAoKCgkNzY0KSkgKyA4fDApOwogICAgICAgICAgJDc3MSA9IEhFQVAzMlskNzcwPj4yXXwwOwogICAgICAgICAgJCQwMjY4JGkkaSA9ICQ3NzE7JCRwcmUkcGhpJGkxOCRpWjJEID0gJDc3MDsKICAgICAgICAgfQogICAgICAgICBIRUFQMzJbJCRwcmUkcGhpJGkxOCRpWjJEPj4yXSA9ICQ2NzI7CiAgICAgICAgICQ3NzIgPSAoKCgkJDAyNjgkaSRpKSkgKyAxMnwwKTsKICAgICAgICAgSEVBUDMyWyQ3NzI+PjJdID0gJDY3MjsKICAgICAgICAgJDc3MyA9ICgoKCQ2NzIpKSArIDh8MCk7CiAgICAgICAgIEhFQVAzMlskNzczPj4yXSA9ICQkMDI2OCRpJGk7CiAgICAgICAgICQ3NzQgPSAoKCgkNjcyKSkgKyAxMnwwKTsKICAgICAgICAgSEVBUDMyWyQ3NzQ+PjJdID0gJDc2NDsKICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgICQ3NzUgPSAkJDAyNjAkaSRpID4+PiA4OwogICAgICAgICQ3NzYgPSAoJDc3NXwwKT09KDApOwogICAgICAgIGRvIHsKICAgICAgICAgaWYgKCQ3NzYpIHsKICAgICAgICAgICQkMDI2OSRpJGkgPSAwOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgJDc3NyA9ICgkJDAyNjAkaSRpPj4+MCk+KDE2Nzc3MjE1KTsKICAgICAgICAgIGlmICgkNzc3KSB7CiAgICAgICAgICAgJCQwMjY5JGkkaSA9IDMxOwogICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgJDc3OCA9ICgoJDc3NSkgKyAxMDQ4MzIwKXwwOwogICAgICAgICAgJDc3OSA9ICQ3NzggPj4+IDE2OwogICAgICAgICAgJDc4MCA9ICQ3NzkgJiA4OwogICAgICAgICAgJDc4MSA9ICQ3NzUgPDwgJDc4MDsKICAgICAgICAgICQ3ODIgPSAoKCQ3ODEpICsgNTIwMTkyKXwwOwogICAgICAgICAgJDc4MyA9ICQ3ODIgPj4+IDE2OwogICAgICAgICAgJDc4NCA9ICQ3ODMgJiA0OwogICAgICAgICAgJDc4NSA9ICQ3ODQgfCAkNzgwOwogICAgICAgICAgJDc4NiA9ICQ3ODEgPDwgJDc4NDsKICAgICAgICAgICQ3ODcgPSAoKCQ3ODYpICsgMjQ1NzYwKXwwOwogICAgICAgICAgJDc4OCA9ICQ3ODcgPj4+IDE2OwogICAgICAgICAgJDc4OSA9ICQ3ODggJiAyOwogICAgICAgICAgJDc5MCA9ICQ3ODUgfCAkNzg5OwogICAgICAgICAgJDc5MSA9ICgxNCAtICgkNzkwKSl8MDsKICAgICAgICAgICQ3OTIgPSAkNzg2IDw8ICQ3ODk7CiAgICAgICAgICAkNzkzID0gJDc5MiA+Pj4gMTU7CiAgICAgICAgICAkNzk0ID0gKCgkNzkxKSArICgkNzkzKSl8MDsKICAgICAgICAgICQ3OTUgPSAkNzk0IDw8IDE7CiAgICAgICAgICAkNzk2ID0gKCgkNzk0KSArIDcpfDA7CiAgICAgICAgICAkNzk3ID0gJCQwMjYwJGkkaSA+Pj4gJDc5NjsKICAgICAgICAgICQ3OTggPSAkNzk3ICYgMTsKICAgICAgICAgICQ3OTkgPSAkNzk4IHwgJDc5NTsKICAgICAgICAgICQkMDI2OSRpJGkgPSAkNzk5OwogICAgICAgICB9CiAgICAgICAgfSB3aGlsZSgwKTsKICAgICAgICAkODAwID0gKDgzNiArICgkJDAyNjkkaSRpPDwyKXwwKTsKICAgICAgICAkODAxID0gKCgoJDY3MikpICsgMjh8MCk7CiAgICAgICAgSEVBUDMyWyQ4MDE+PjJdID0gJCQwMjY5JGkkaTsKICAgICAgICAkODAyID0gKCgoJDY3MikpICsgMTZ8MCk7CiAgICAgICAgJDgwMyA9ICgoKCQ4MDIpKSArIDR8MCk7CiAgICAgICAgSEVBUDMyWyQ4MDM+PjJdID0gMDsKICAgICAgICBIRUFQMzJbJDgwMj4+Ml0gPSAwOwogICAgICAgICQ4MDQgPSBIRUFQMzJbKDUzNik+PjJdfDA7CiAgICAgICAgJDgwNSA9IDEgPDwgJCQwMjY5JGkkaTsKICAgICAgICAkODA2ID0gJDgwNCAmICQ4MDU7CiAgICAgICAgJDgwNyA9ICgkODA2fDApPT0oMCk7CiAgICAgICAgaWYgKCQ4MDcpIHsKICAgICAgICAgJDgwOCA9ICQ4MDQgfCAkODA1OwogICAgICAgICBIRUFQMzJbKDUzNik+PjJdID0gJDgwODsKICAgICAgICAgSEVBUDMyWyQ4MDA+PjJdID0gJDY3MjsKICAgICAgICAgJDgwOSA9ICgoKCQ2NzIpKSArIDI0fDApOwogICAgICAgICBIRUFQMzJbJDgwOT4+Ml0gPSAkODAwOwogICAgICAgICAkODEwID0gKCgoJDY3MikpICsgMTJ8MCk7CiAgICAgICAgIEhFQVAzMlskODEwPj4yXSA9ICQ2NzI7CiAgICAgICAgICQ4MTEgPSAoKCgkNjcyKSkgKyA4fDApOwogICAgICAgICBIRUFQMzJbJDgxMT4+Ml0gPSAkNjcyOwogICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgJDgxMiA9IEhFQVAzMlskODAwPj4yXXwwOwogICAgICAgICQ4MTMgPSAoJCQwMjY5JGkkaXwwKT09KDMxKTsKICAgICAgICAkODE0ID0gJCQwMjY5JGkkaSA+Pj4gMTsKICAgICAgICAkODE1ID0gKDI1IC0gKCQ4MTQpKXwwOwogICAgICAgICQ4MTYgPSAkODEzID8gMCA6ICQ4MTU7CiAgICAgICAgJDgxNyA9ICQkMDI2MCRpJGkgPDwgJDgxNjsKICAgICAgICAkJDAyNjEkaSRpID0gJDgxNzskJDAyNjIkaSRpID0gJDgxMjsKICAgICAgICB3aGlsZSgxKSB7CiAgICAgICAgICQ4MTggPSAoKCgkJDAyNjIkaSRpKSkgKyA0fDApOwogICAgICAgICAkODE5ID0gSEVBUDMyWyQ4MTg+PjJdfDA7CiAgICAgICAgICQ4MjAgPSAkODE5ICYgLTg7CiAgICAgICAgICQ4MjEgPSAoJDgyMHwwKT09KCQkMDI2MCRpJGl8MCk7CiAgICAgICAgIGlmICgkODIxKSB7CiAgICAgICAgICBsYWJlbCA9IDE5MjsKICAgICAgICAgIGJyZWFrOwogICAgICAgICB9CiAgICAgICAgICQ4MjIgPSAkJDAyNjEkaSRpID4+PiAzMTsKICAgICAgICAgJDgyMyA9ICgoKCgkJDAyNjIkaSRpKSkgKyAxNnwwKSArICgkODIyPDwyKXwwKTsKICAgICAgICAgJDgyNCA9ICQkMDI2MSRpJGkgPDwgMTsKICAgICAgICAgJDgyNSA9IEhFQVAzMlskODIzPj4yXXwwOwogICAgICAgICAkODI2ID0gKCQ4MjV8MCk9PSgwfDApOwogICAgICAgICBpZiAoJDgyNikgewogICAgICAgICAgbGFiZWwgPSAxOTE7CiAgICAgICAgICBicmVhazsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQkMDI2MSRpJGkgPSAkODI0OyQkMDI2MiRpJGkgPSAkODI1OwogICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgobGFiZWx8MCkgPT0gMTkxKSB7CiAgICAgICAgIEhFQVAzMlskODIzPj4yXSA9ICQ2NzI7CiAgICAgICAgICQ4MjcgPSAoKCgkNjcyKSkgKyAyNHwwKTsKICAgICAgICAgSEVBUDMyWyQ4Mjc+PjJdID0gJCQwMjYyJGkkaTsKICAgICAgICAgJDgyOCA9ICgoKCQ2NzIpKSArIDEyfDApOwogICAgICAgICBIRUFQMzJbJDgyOD4+Ml0gPSAkNjcyOwogICAgICAgICAkODI5ID0gKCgoJDY3MikpICsgOHwwKTsKICAgICAgICAgSEVBUDMyWyQ4Mjk+PjJdID0gJDY3MjsKICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKChsYWJlbHwwKSA9PSAxOTIpIHsKICAgICAgICAgJDgzMCA9ICgoKCQkMDI2MiRpJGkpKSArIDh8MCk7CiAgICAgICAgICQ4MzEgPSBIRUFQMzJbJDgzMD4+Ml18MDsKICAgICAgICAgJDgzMiA9ICgoKCQ4MzEpKSArIDEyfDApOwogICAgICAgICBIRUFQMzJbJDgzMj4+Ml0gPSAkNjcyOwogICAgICAgICBIRUFQMzJbJDgzMD4+Ml0gPSAkNjcyOwogICAgICAgICAkODMzID0gKCgoJDY3MikpICsgOHwwKTsKICAgICAgICAgSEVBUDMyWyQ4MzM+PjJdID0gJDgzMTsKICAgICAgICAgJDgzNCA9ICgoKCQ2NzIpKSArIDEyfDApOwogICAgICAgICBIRUFQMzJbJDgzND4+Ml0gPSAkJDAyNjIkaSRpOwogICAgICAgICAkODM1ID0gKCgoJDY3MikpICsgMjR8MCk7CiAgICAgICAgIEhFQVAzMlskODM1Pj4yXSA9IDA7CiAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgIH0KICAgICAgfSB3aGlsZSgwKTsKICAgICAgJDk2MCA9ICgoKCQ2NjApKSArIDh8MCk7CiAgICAgICQkMCA9ICQ5NjA7CiAgICAgIFNUQUNLVE9QID0gc3A7cmV0dXJuICgkJDB8MCk7CiAgICAgfSBlbHNlIHsKICAgICAgJCQwJGkkaSRpID0gKDk4MCk7CiAgICAgfQogICAgfQogICAgd2hpbGUoMSkgewogICAgICQ4MzYgPSBIRUFQMzJbJCQwJGkkaSRpPj4yXXwwOwogICAgICQ4MzcgPSAoJDgzNj4+PjApPigkNTg2Pj4+MCk7CiAgICAgaWYgKCEoJDgzNykpIHsKICAgICAgJDgzOCA9ICgoKCQkMCRpJGkkaSkpICsgNHwwKTsKICAgICAgJDgzOSA9IEhFQVAzMlskODM4Pj4yXXwwOwogICAgICAkODQwID0gKCgkODM2KSArICgkODM5KXwwKTsKICAgICAgJDg0MSA9ICgkODQwPj4+MCk+KCQ1ODY+Pj4wKTsKICAgICAgaWYgKCQ4NDEpIHsKICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgfQogICAgICQ4NDIgPSAoKCgkJDAkaSRpJGkpKSArIDh8MCk7CiAgICAgJDg0MyA9IEhFQVAzMlskODQyPj4yXXwwOwogICAgICQkMCRpJGkkaSA9ICQ4NDM7CiAgICB9CiAgICAkODQ0ID0gKCgoJDg0MCkpICsgLTQ3fDApOwogICAgJDg0NSA9ICgoKCQ4NDQpKSArIDh8MCk7CiAgICAkODQ2ID0gJDg0NTsKICAgICQ4NDcgPSAkODQ2ICYgNzsKICAgICQ4NDggPSAoJDg0N3wwKT09KDApOwogICAgJDg0OSA9ICgwIC0gKCQ4NDYpKXwwOwogICAgJDg1MCA9ICQ4NDkgJiA3OwogICAgJDg1MSA9ICQ4NDggPyAwIDogJDg1MDsKICAgICQ4NTIgPSAoKCQ4NDQpICsgKCQ4NTEpfDApOwogICAgJDg1MyA9ICgoKCQ1ODYpKSArIDE2fDApOwogICAgJDg1NCA9ICgkODUyPj4+MCk8KCQ4NTM+Pj4wKTsKICAgICQ4NTUgPSAkODU0ID8gJDU4NiA6ICQ4NTI7CiAgICAkODU2ID0gKCgoJDg1NSkpICsgOHwwKTsKICAgICQ4NTcgPSAoKCgkODU1KSkgKyAyNHwwKTsKICAgICQ4NTggPSAoKCQkNzIzOTQ3JGkpICsgLTQwKXwwOwogICAgJDg1OSA9ICgoKCQkNzQ4JGkpKSArIDh8MCk7CiAgICAkODYwID0gJDg1OTsKICAgICQ4NjEgPSAkODYwICYgNzsKICAgICQ4NjIgPSAoJDg2MXwwKT09KDApOwogICAgJDg2MyA9ICgwIC0gKCQ4NjApKXwwOwogICAgJDg2NCA9ICQ4NjMgJiA3OwogICAgJDg2NSA9ICQ4NjIgPyAwIDogJDg2NDsKICAgICQ4NjYgPSAoKCQkNzQ4JGkpICsgKCQ4NjUpfDApOwogICAgJDg2NyA9ICgoJDg1OCkgLSAoJDg2NSkpfDA7CiAgICBIRUFQMzJbKDU1Nik+PjJdID0gJDg2NjsKICAgIEhFQVAzMlsoNTQ0KT4+Ml0gPSAkODY3OwogICAgJDg2OCA9ICQ4NjcgfCAxOwogICAgJDg2OSA9ICgoKCQ4NjYpKSArIDR8MCk7CiAgICBIRUFQMzJbJDg2OT4+Ml0gPSAkODY4OwogICAgJDg3MCA9ICgoJCQ3NDgkaSkgKyAoJDg1OCl8MCk7CiAgICAkODcxID0gKCgoJDg3MCkpICsgNHwwKTsKICAgIEhFQVAzMlskODcxPj4yXSA9IDQwOwogICAgJDg3MiA9IEhFQVAzMlsoMTAyMCk+PjJdfDA7CiAgICBIRUFQMzJbKDU2MCk+PjJdID0gJDg3MjsKICAgICQ4NzMgPSAoKCgkODU1KSkgKyA0fDApOwogICAgSEVBUDMyWyQ4NzM+PjJdID0gMjc7CiAgICA7SEVBUDMyWyQ4NTY+PjJdPUhFQVAzMlsoOTgwKT4+Ml18MDtIRUFQMzJbJDg1Nis0Pj4yXT1IRUFQMzJbKDk4MCkrND4+Ml18MDtIRUFQMzJbJDg1Nis4Pj4yXT1IRUFQMzJbKDk4MCkrOD4+Ml18MDtIRUFQMzJbJDg1NisxMj4+Ml09SEVBUDMyWyg5ODApKzEyPj4yXXwwOwogICAgSEVBUDMyWyg5ODApPj4yXSA9ICQkNzQ4JGk7CiAgICBIRUFQMzJbKDk4NCk+PjJdID0gJCQ3MjM5NDckaTsKICAgIEhFQVAzMlsoOTkyKT4+Ml0gPSAwOwogICAgSEVBUDMyWyg5ODgpPj4yXSA9ICQ4NTY7CiAgICAkODc1ID0gJDg1NzsKICAgIHdoaWxlKDEpIHsKICAgICAkODc0ID0gKCgoJDg3NSkpICsgNHwwKTsKICAgICBIRUFQMzJbJDg3ND4+Ml0gPSA3OwogICAgICQ4NzYgPSAoKCgkODc1KSkgKyA4fDApOwogICAgICQ4NzcgPSAoJDg3Nj4+PjApPCgkODQwPj4+MCk7CiAgICAgaWYgKCQ4NzcpIHsKICAgICAgJDg3NSA9ICQ4NzQ7CiAgICAgfSBlbHNlIHsKICAgICAgYnJlYWs7CiAgICAgfQogICAgfQogICAgJDg3OCA9ICgkODU1fDApPT0oJDU4NnwwKTsKICAgIGlmICghKCQ4NzgpKSB7CiAgICAgJDg3OSA9ICQ4NTU7CiAgICAgJDg4MCA9ICQ1ODY7CiAgICAgJDg4MSA9ICgoJDg3OSkgLSAoJDg4MCkpfDA7CiAgICAgJDg4MiA9IEhFQVAzMlskODczPj4yXXwwOwogICAgICQ4ODMgPSAkODgyICYgLTI7CiAgICAgSEVBUDMyWyQ4NzM+PjJdID0gJDg4MzsKICAgICAkODg0ID0gJDg4MSB8IDE7CiAgICAgJDg4NSA9ICgoKCQ1ODYpKSArIDR8MCk7CiAgICAgSEVBUDMyWyQ4ODU+PjJdID0gJDg4NDsKICAgICBIRUFQMzJbJDg1NT4+Ml0gPSAkODgxOwogICAgICQ4ODYgPSAkODgxID4+PiAzOwogICAgICQ4ODcgPSAoJDg4MT4+PjApPCgyNTYpOwogICAgIGlmICgkODg3KSB7CiAgICAgICQ4ODggPSAkODg2IDw8IDE7CiAgICAgICQ4ODkgPSAoNTcyICsgKCQ4ODg8PDIpfDApOwogICAgICAkODkwID0gSEVBUDMyWzEzM118MDsKICAgICAgJDg5MSA9IDEgPDwgJDg4NjsKICAgICAgJDg5MiA9ICQ4OTAgJiAkODkxOwogICAgICAkODkzID0gKCQ4OTJ8MCk9PSgwKTsKICAgICAgaWYgKCQ4OTMpIHsKICAgICAgICQ4OTQgPSAkODkwIHwgJDg5MTsKICAgICAgIEhFQVAzMlsxMzNdID0gJDg5NDsKICAgICAgICQkcHJlJGkkaSA9ICgoKCQ4ODkpKSArIDh8MCk7CiAgICAgICAkJDAyMDYkaSRpID0gJDg4OTskJHByZSRwaGkkaSRpWjJEID0gJCRwcmUkaSRpOwogICAgICB9IGVsc2UgewogICAgICAgJDg5NSA9ICgoKCQ4ODkpKSArIDh8MCk7CiAgICAgICAkODk2ID0gSEVBUDMyWyQ4OTU+PjJdfDA7CiAgICAgICAkJDAyMDYkaSRpID0gJDg5NjskJHByZSRwaGkkaSRpWjJEID0gJDg5NTsKICAgICAgfQogICAgICBIRUFQMzJbJCRwcmUkcGhpJGkkaVoyRD4+Ml0gPSAkNTg2OwogICAgICAkODk3ID0gKCgoJCQwMjA2JGkkaSkpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskODk3Pj4yXSA9ICQ1ODY7CiAgICAgICQ4OTggPSAoKCgkNTg2KSkgKyA4fDApOwogICAgICBIRUFQMzJbJDg5OD4+Ml0gPSAkJDAyMDYkaSRpOwogICAgICAkODk5ID0gKCgoJDU4NikpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskODk5Pj4yXSA9ICQ4ODk7CiAgICAgIGJyZWFrOwogICAgIH0KICAgICAkOTAwID0gJDg4MSA+Pj4gODsKICAgICAkOTAxID0gKCQ5MDB8MCk9PSgwKTsKICAgICBpZiAoJDkwMSkgewogICAgICAkJDAyMDckaSRpID0gMDsKICAgICB9IGVsc2UgewogICAgICAkOTAyID0gKCQ4ODE+Pj4wKT4oMTY3NzcyMTUpOwogICAgICBpZiAoJDkwMikgewogICAgICAgJCQwMjA3JGkkaSA9IDMxOwogICAgICB9IGVsc2UgewogICAgICAgJDkwMyA9ICgoJDkwMCkgKyAxMDQ4MzIwKXwwOwogICAgICAgJDkwNCA9ICQ5MDMgPj4+IDE2OwogICAgICAgJDkwNSA9ICQ5MDQgJiA4OwogICAgICAgJDkwNiA9ICQ5MDAgPDwgJDkwNTsKICAgICAgICQ5MDcgPSAoKCQ5MDYpICsgNTIwMTkyKXwwOwogICAgICAgJDkwOCA9ICQ5MDcgPj4+IDE2OwogICAgICAgJDkwOSA9ICQ5MDggJiA0OwogICAgICAgJDkxMCA9ICQ5MDkgfCAkOTA1OwogICAgICAgJDkxMSA9ICQ5MDYgPDwgJDkwOTsKICAgICAgICQ5MTIgPSAoKCQ5MTEpICsgMjQ1NzYwKXwwOwogICAgICAgJDkxMyA9ICQ5MTIgPj4+IDE2OwogICAgICAgJDkxNCA9ICQ5MTMgJiAyOwogICAgICAgJDkxNSA9ICQ5MTAgfCAkOTE0OwogICAgICAgJDkxNiA9ICgxNCAtICgkOTE1KSl8MDsKICAgICAgICQ5MTcgPSAkOTExIDw8ICQ5MTQ7CiAgICAgICAkOTE4ID0gJDkxNyA+Pj4gMTU7CiAgICAgICAkOTE5ID0gKCgkOTE2KSArICgkOTE4KSl8MDsKICAgICAgICQ5MjAgPSAkOTE5IDw8IDE7CiAgICAgICAkOTIxID0gKCgkOTE5KSArIDcpfDA7CiAgICAgICAkOTIyID0gJDg4MSA+Pj4gJDkyMTsKICAgICAgICQ5MjMgPSAkOTIyICYgMTsKICAgICAgICQ5MjQgPSAkOTIzIHwgJDkyMDsKICAgICAgICQkMDIwNyRpJGkgPSAkOTI0OwogICAgICB9CiAgICAgfQogICAgICQ5MjUgPSAoODM2ICsgKCQkMDIwNyRpJGk8PDIpfDApOwogICAgICQ5MjYgPSAoKCgkNTg2KSkgKyAyOHwwKTsKICAgICBIRUFQMzJbJDkyNj4+Ml0gPSAkJDAyMDckaSRpOwogICAgICQ5MjcgPSAoKCgkNTg2KSkgKyAyMHwwKTsKICAgICBIRUFQMzJbJDkyNz4+Ml0gPSAwOwogICAgIEhFQVAzMlskODUzPj4yXSA9IDA7CiAgICAgJDkyOCA9IEhFQVAzMlsoNTM2KT4+Ml18MDsKICAgICAkOTI5ID0gMSA8PCAkJDAyMDckaSRpOwogICAgICQ5MzAgPSAkOTI4ICYgJDkyOTsKICAgICAkOTMxID0gKCQ5MzB8MCk9PSgwKTsKICAgICBpZiAoJDkzMSkgewogICAgICAkOTMyID0gJDkyOCB8ICQ5Mjk7CiAgICAgIEhFQVAzMlsoNTM2KT4+Ml0gPSAkOTMyOwogICAgICBIRUFQMzJbJDkyNT4+Ml0gPSAkNTg2OwogICAgICAkOTMzID0gKCgoJDU4NikpICsgMjR8MCk7CiAgICAgIEhFQVAzMlskOTMzPj4yXSA9ICQ5MjU7CiAgICAgICQ5MzQgPSAoKCgkNTg2KSkgKyAxMnwwKTsKICAgICAgSEVBUDMyWyQ5MzQ+PjJdID0gJDU4NjsKICAgICAgJDkzNSA9ICgoKCQ1ODYpKSArIDh8MCk7CiAgICAgIEhFQVAzMlskOTM1Pj4yXSA9ICQ1ODY7CiAgICAgIGJyZWFrOwogICAgIH0KICAgICAkOTM2ID0gSEVBUDMyWyQ5MjU+PjJdfDA7CiAgICAgJDkzNyA9ICgkJDAyMDckaSRpfDApPT0oMzEpOwogICAgICQ5MzggPSAkJDAyMDckaSRpID4+PiAxOwogICAgICQ5MzkgPSAoMjUgLSAoJDkzOCkpfDA7CiAgICAgJDk0MCA9ICQ5MzcgPyAwIDogJDkzOTsKICAgICAkOTQxID0gJDg4MSA8PCAkOTQwOwogICAgICQkMDIwMSRpJGkgPSAkOTQxOyQkMDIwMiRpJGkgPSAkOTM2OwogICAgIHdoaWxlKDEpIHsKICAgICAgJDk0MiA9ICgoKCQkMDIwMiRpJGkpKSArIDR8MCk7CiAgICAgICQ5NDMgPSBIRUFQMzJbJDk0Mj4+Ml18MDsKICAgICAgJDk0NCA9ICQ5NDMgJiAtODsKICAgICAgJDk0NSA9ICgkOTQ0fDApPT0oJDg4MXwwKTsKICAgICAgaWYgKCQ5NDUpIHsKICAgICAgIGxhYmVsID0gMjEzOwogICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgJDk0NiA9ICQkMDIwMSRpJGkgPj4+IDMxOwogICAgICAkOTQ3ID0gKCgoKCQkMDIwMiRpJGkpKSArIDE2fDApICsgKCQ5NDY8PDIpfDApOwogICAgICAkOTQ4ID0gJCQwMjAxJGkkaSA8PCAxOwogICAgICAkOTQ5ID0gSEVBUDMyWyQ5NDc+PjJdfDA7CiAgICAgICQ5NTAgPSAoJDk0OXwwKT09KDB8MCk7CiAgICAgIGlmICgkOTUwKSB7CiAgICAgICBsYWJlbCA9IDIxMjsKICAgICAgIGJyZWFrOwogICAgICB9IGVsc2UgewogICAgICAgJCQwMjAxJGkkaSA9ICQ5NDg7JCQwMjAyJGkkaSA9ICQ5NDk7CiAgICAgIH0KICAgICB9CiAgICAgaWYgKChsYWJlbHwwKSA9PSAyMTIpIHsKICAgICAgSEVBUDMyWyQ5NDc+PjJdID0gJDU4NjsKICAgICAgJDk1MSA9ICgoKCQ1ODYpKSArIDI0fDApOwogICAgICBIRUFQMzJbJDk1MT4+Ml0gPSAkJDAyMDIkaSRpOwogICAgICAkOTUyID0gKCgoJDU4NikpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskOTUyPj4yXSA9ICQ1ODY7CiAgICAgICQ5NTMgPSAoKCgkNTg2KSkgKyA4fDApOwogICAgICBIRUFQMzJbJDk1Mz4+Ml0gPSAkNTg2OwogICAgICBicmVhazsKICAgICB9CiAgICAgZWxzZSBpZiAoKGxhYmVsfDApID09IDIxMykgewogICAgICAkOTU0ID0gKCgoJCQwMjAyJGkkaSkpICsgOHwwKTsKICAgICAgJDk1NSA9IEhFQVAzMlskOTU0Pj4yXXwwOwogICAgICAkOTU2ID0gKCgoJDk1NSkpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskOTU2Pj4yXSA9ICQ1ODY7CiAgICAgIEhFQVAzMlskOTU0Pj4yXSA9ICQ1ODY7CiAgICAgICQ5NTcgPSAoKCgkNTg2KSkgKyA4fDApOwogICAgICBIRUFQMzJbJDk1Nz4+Ml0gPSAkOTU1OwogICAgICAkOTU4ID0gKCgoJDU4NikpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskOTU4Pj4yXSA9ICQkMDIwMiRpJGk7CiAgICAgICQ5NTkgPSAoKCgkNTg2KSkgKyAyNHwwKTsKICAgICAgSEVBUDMyWyQ5NTk+PjJdID0gMDsKICAgICAgYnJlYWs7CiAgICAgfQogICAgfQogICB9CiAgfSB3aGlsZSgwKTsKICAkOTYxID0gSEVBUDMyWyg1NDQpPj4yXXwwOwogICQ5NjIgPSAoJDk2MT4+PjApPigkJDAxOTI+Pj4wKTsKICBpZiAoJDk2MikgewogICAkOTYzID0gKCgkOTYxKSAtICgkJDAxOTIpKXwwOwogICBIRUFQMzJbKDU0NCk+PjJdID0gJDk2MzsKICAgJDk2NCA9IEhFQVAzMlsoNTU2KT4+Ml18MDsKICAgJDk2NSA9ICgoJDk2NCkgKyAoJCQwMTkyKXwwKTsKICAgSEVBUDMyWyg1NTYpPj4yXSA9ICQ5NjU7CiAgICQ5NjYgPSAkOTYzIHwgMTsKICAgJDk2NyA9ICgoKCQ5NjUpKSArIDR8MCk7CiAgIEhFQVAzMlskOTY3Pj4yXSA9ICQ5NjY7CiAgICQ5NjggPSAkJDAxOTIgfCAzOwogICAkOTY5ID0gKCgoJDk2NCkpICsgNHwwKTsKICAgSEVBUDMyWyQ5Njk+PjJdID0gJDk2ODsKICAgJDk3MCA9ICgoKCQ5NjQpKSArIDh8MCk7CiAgICQkMCA9ICQ5NzA7CiAgIFNUQUNLVE9QID0gc3A7cmV0dXJuICgkJDB8MCk7CiAgfQogfQogJDk3MSA9IChfX19lcnJub19sb2NhdGlvbigpfDApOwogSEVBUDMyWyQ5NzE+PjJdID0gMTI7CiAkJDAgPSAwOwogU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMHwwKTsKfQpmdW5jdGlvbiBfZnJlZSgkMCkgewogJDAgPSAkMHwwOwogdmFyICQkMDE5NSRpID0gMCwgJCQwMTk1JGluJGkgPSAwLCAkJDAzNDggPSAwLCAkJDAzNDkgPSAwLCAkJDAzNjEgPSAwLCAkJDAzNjggPSAwLCAkJDEgPSAwLCAkJDEzNDcgPSAwLCAkJDEzNTIgPSAwLCAkJDEzNTUgPSAwLCAkJDEzNjMgPSAwLCAkJDEzNjcgPSAwLCAkJDIgPSAwLCAkJDMgPSAwLCAkJDMzNjUgPSAwLCAkJHByZSA9IDAsICQkcHJlJHBoaVoyRCA9IDAsICQkc2luazMgPSAwLCAkJHNpbms1ID0gMCwgJDEgPSAwOwogdmFyICQxMCA9IDAsICQxMDAgPSAwLCAkMTAxID0gMCwgJDEwMiA9IDAsICQxMDMgPSAwLCAkMTA0ID0gMCwgJDEwNSA9IDAsICQxMDYgPSAwLCAkMTA3ID0gMCwgJDEwOCA9IDAsICQxMDkgPSAwLCAkMTEgPSAwLCAkMTEwID0gMCwgJDExMSA9IDAsICQxMTIgPSAwLCAkMTEzID0gMCwgJDExNCA9IDAsICQxMTUgPSAwLCAkMTE2ID0gMCwgJDExNyA9IDA7CiB2YXIgJDExOCA9IDAsICQxMTkgPSAwLCAkMTIgPSAwLCAkMTIwID0gMCwgJDEyMSA9IDAsICQxMjIgPSAwLCAkMTIzID0gMCwgJDEyNCA9IDAsICQxMjUgPSAwLCAkMTI2ID0gMCwgJDEyNyA9IDAsICQxMjggPSAwLCAkMTI5ID0gMCwgJDEzID0gMCwgJDEzMCA9IDAsICQxMzEgPSAwLCAkMTMyID0gMCwgJDEzMyA9IDAsICQxMzQgPSAwLCAkMTM1ID0gMDsKIHZhciAkMTM2ID0gMCwgJDEzNyA9IDAsICQxMzggPSAwLCAkMTM5ID0gMCwgJDE0ID0gMCwgJDE0MCA9IDAsICQxNDEgPSAwLCAkMTQyID0gMCwgJDE0MyA9IDAsICQxNDQgPSAwLCAkMTQ1ID0gMCwgJDE0NiA9IDAsICQxNDcgPSAwLCAkMTQ4ID0gMCwgJDE0OSA9IDAsICQxNSA9IDAsICQxNTAgPSAwLCAkMTUxID0gMCwgJDE1MiA9IDAsICQxNTMgPSAwOwogdmFyICQxNTQgPSAwLCAkMTU1ID0gMCwgJDE1NiA9IDAsICQxNTcgPSAwLCAkMTU4ID0gMCwgJDE1OSA9IDAsICQxNiA9IDAsICQxNjAgPSAwLCAkMTYxID0gMCwgJDE2MiA9IDAsICQxNjMgPSAwLCAkMTY0ID0gMCwgJDE2NSA9IDAsICQxNjYgPSAwLCAkMTY3ID0gMCwgJDE2OCA9IDAsICQxNjkgPSAwLCAkMTcgPSAwLCAkMTcwID0gMCwgJDE3MSA9IDA7CiB2YXIgJDE3MiA9IDAsICQxNzMgPSAwLCAkMTc0ID0gMCwgJDE3NSA9IDAsICQxNzYgPSAwLCAkMTc3ID0gMCwgJDE3OCA9IDAsICQxNzkgPSAwLCAkMTggPSAwLCAkMTgwID0gMCwgJDE4MSA9IDAsICQxODIgPSAwLCAkMTgzID0gMCwgJDE4NCA9IDAsICQxODUgPSAwLCAkMTg2ID0gMCwgJDE4NyA9IDAsICQxODggPSAwLCAkMTg5ID0gMCwgJDE5ID0gMDsKIHZhciAkMTkwID0gMCwgJDE5MSA9IDAsICQxOTIgPSAwLCAkMTkzID0gMCwgJDE5NCA9IDAsICQxOTUgPSAwLCAkMTk2ID0gMCwgJDE5NyA9IDAsICQxOTggPSAwLCAkMTk5ID0gMCwgJDIgPSAwLCAkMjAgPSAwLCAkMjAwID0gMCwgJDIwMSA9IDAsICQyMDIgPSAwLCAkMjAzID0gMCwgJDIwNCA9IDAsICQyMDUgPSAwLCAkMjA2ID0gMCwgJDIwNyA9IDA7CiB2YXIgJDIwOCA9IDAsICQyMDkgPSAwLCAkMjEgPSAwLCAkMjEwID0gMCwgJDIxMSA9IDAsICQyMTIgPSAwLCAkMjEzID0gMCwgJDIxNCA9IDAsICQyMTUgPSAwLCAkMjE2ID0gMCwgJDIxNyA9IDAsICQyMTggPSAwLCAkMjE5ID0gMCwgJDIyID0gMCwgJDIyMCA9IDAsICQyMjEgPSAwLCAkMjIyID0gMCwgJDIyMyA9IDAsICQyMjQgPSAwLCAkMjI1ID0gMDsKIHZhciAkMjI2ID0gMCwgJDIyNyA9IDAsICQyMjggPSAwLCAkMjI5ID0gMCwgJDIzID0gMCwgJDIzMCA9IDAsICQyMzEgPSAwLCAkMjMyID0gMCwgJDIzMyA9IDAsICQyMzQgPSAwLCAkMjM1ID0gMCwgJDIzNiA9IDAsICQyMzcgPSAwLCAkMjM4ID0gMCwgJDIzOSA9IDAsICQyNCA9IDAsICQyNDAgPSAwLCAkMjQxID0gMCwgJDI0MiA9IDAsICQyNDMgPSAwOwogdmFyICQyNDQgPSAwLCAkMjQ1ID0gMCwgJDI0NiA9IDAsICQyNDcgPSAwLCAkMjQ4ID0gMCwgJDI0OSA9IDAsICQyNSA9IDAsICQyNTAgPSAwLCAkMjUxID0gMCwgJDI1MiA9IDAsICQyNTMgPSAwLCAkMjU0ID0gMCwgJDI1NSA9IDAsICQyNTYgPSAwLCAkMjU3ID0gMCwgJDI1OCA9IDAsICQyNTkgPSAwLCAkMjYgPSAwLCAkMjYwID0gMCwgJDI3ID0gMDsKIHZhciAkMjggPSAwLCAkMjkgPSAwLCAkMyA9IDAsICQzMCA9IDAsICQzMSA9IDAsICQzMiA9IDAsICQzMyA9IDAsICQzNCA9IDAsICQzNSA9IDAsICQzNiA9IDAsICQzNyA9IDAsICQzOCA9IDAsICQzOSA9IDAsICQ0ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMCwgJDQzID0gMCwgJDQ0ID0gMCwgJDQ1ID0gMDsKIHZhciAkNDYgPSAwLCAkNDcgPSAwLCAkNDggPSAwLCAkNDkgPSAwLCAkNSA9IDAsICQ1MCA9IDAsICQ1MSA9IDAsICQ1MiA9IDAsICQ1MyA9IDAsICQ1NCA9IDAsICQ1NSA9IDAsICQ1NiA9IDAsICQ1NyA9IDAsICQ1OCA9IDAsICQ1OSA9IDAsICQ2ID0gMCwgJDYwID0gMCwgJDYxID0gMCwgJDYyID0gMCwgJDYzID0gMDsKIHZhciAkNjQgPSAwLCAkNjUgPSAwLCAkNjYgPSAwLCAkNjcgPSAwLCAkNjggPSAwLCAkNjkgPSAwLCAkNyA9IDAsICQ3MCA9IDAsICQ3MSA9IDAsICQ3MiA9IDAsICQ3MyA9IDAsICQ3NCA9IDAsICQ3NSA9IDAsICQ3NiA9IDAsICQ3NyA9IDAsICQ3OCA9IDAsICQ3OSA9IDAsICQ4ID0gMCwgJDgwID0gMCwgJDgxID0gMDsKIHZhciAkODIgPSAwLCAkODMgPSAwLCAkODQgPSAwLCAkODUgPSAwLCAkODYgPSAwLCAkODcgPSAwLCAkODggPSAwLCAkODkgPSAwLCAkOSA9IDAsICQ5MCA9IDAsICQ5MSA9IDAsICQ5MiA9IDAsICQ5MyA9IDAsICQ5NCA9IDAsICQ5NSA9IDAsICQ5NiA9IDAsICQ5NyA9IDAsICQ5OCA9IDAsICQ5OSA9IDAsICRjb25kMzczID0gMDsKIHZhciAkY29uZDM3NCA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQxID0gKCQwfDApPT0oMHwwKTsKIGlmICgkMSkgewogIHJldHVybjsKIH0KICQyID0gKCgoJDApKSArIC04fDApOwogJDMgPSBIRUFQMzJbKDU0OCk+PjJdfDA7CiAkNCA9ICgoKCQwKSkgKyAtNHwwKTsKICQ1ID0gSEVBUDMyWyQ0Pj4yXXwwOwogJDYgPSAkNSAmIC04OwogJDcgPSAoKCQyKSArICgkNil8MCk7CiAkOCA9ICQ1ICYgMTsKICQ5ID0gKCQ4fDApPT0oMCk7CiBkbyB7CiAgaWYgKCQ5KSB7CiAgICQxMCA9IEhFQVAzMlskMj4+Ml18MDsKICAgJDExID0gJDUgJiAzOwogICAkMTIgPSAoJDExfDApPT0oMCk7CiAgIGlmICgkMTIpIHsKICAgIHJldHVybjsKICAgfQogICAkMTMgPSAoMCAtICgkMTApKXwwOwogICAkMTQgPSAoKCQyKSArICgkMTMpfDApOwogICAkMTUgPSAoKCQxMCkgKyAoJDYpKXwwOwogICAkMTYgPSAoJDE0Pj4+MCk8KCQzPj4+MCk7CiAgIGlmICgkMTYpIHsKICAgIHJldHVybjsKICAgfQogICAkMTcgPSBIRUFQMzJbKDU1Mik+PjJdfDA7CiAgICQxOCA9ICgkMTd8MCk9PSgkMTR8MCk7CiAgIGlmICgkMTgpIHsKICAgICQ3OSA9ICgoKCQ3KSkgKyA0fDApOwogICAgJDgwID0gSEVBUDMyWyQ3OT4+Ml18MDsKICAgICQ4MSA9ICQ4MCAmIDM7CiAgICAkODIgPSAoJDgxfDApPT0oMyk7CiAgICBpZiAoISgkODIpKSB7CiAgICAgJCQxID0gJDE0OyQkMTM0NyA9ICQxNTskODcgPSAkMTQ7CiAgICAgYnJlYWs7CiAgICB9CiAgICBIRUFQMzJbKDU0MCk+PjJdID0gJDE1OwogICAgJDgzID0gJDgwICYgLTI7CiAgICBIRUFQMzJbJDc5Pj4yXSA9ICQ4MzsKICAgICQ4NCA9ICQxNSB8IDE7CiAgICAkODUgPSAoKCgkMTQpKSArIDR8MCk7CiAgICBIRUFQMzJbJDg1Pj4yXSA9ICQ4NDsKICAgICQ4NiA9ICgoJDE0KSArICgkMTUpfDApOwogICAgSEVBUDMyWyQ4Nj4+Ml0gPSAkMTU7CiAgICByZXR1cm47CiAgIH0KICAgJDE5ID0gJDEwID4+PiAzOwogICAkMjAgPSAoJDEwPj4+MCk8KDI1Nik7CiAgIGlmICgkMjApIHsKICAgICQyMSA9ICgoKCQxNCkpICsgOHwwKTsKICAgICQyMiA9IEhFQVAzMlskMjE+PjJdfDA7CiAgICAkMjMgPSAoKCgkMTQpKSArIDEyfDApOwogICAgJDI0ID0gSEVBUDMyWyQyMz4+Ml18MDsKICAgICQyNSA9ICgkMjR8MCk9PSgkMjJ8MCk7CiAgICBpZiAoJDI1KSB7CiAgICAgJDI2ID0gMSA8PCAkMTk7CiAgICAgJDI3ID0gJDI2IF4gLTE7CiAgICAgJDI4ID0gSEVBUDMyWzEzM118MDsKICAgICAkMjkgPSAkMjggJiAkMjc7CiAgICAgSEVBUDMyWzEzM10gPSAkMjk7CiAgICAgJCQxID0gJDE0OyQkMTM0NyA9ICQxNTskODcgPSAkMTQ7CiAgICAgYnJlYWs7CiAgICB9IGVsc2UgewogICAgICQzMCA9ICgoKCQyMikpICsgMTJ8MCk7CiAgICAgSEVBUDMyWyQzMD4+Ml0gPSAkMjQ7CiAgICAgJDMxID0gKCgoJDI0KSkgKyA4fDApOwogICAgIEhFQVAzMlskMzE+PjJdID0gJDIyOwogICAgICQkMSA9ICQxNDskJDEzNDcgPSAkMTU7JDg3ID0gJDE0OwogICAgIGJyZWFrOwogICAgfQogICB9CiAgICQzMiA9ICgoKCQxNCkpICsgMjR8MCk7CiAgICQzMyA9IEhFQVAzMlskMzI+PjJdfDA7CiAgICQzNCA9ICgoKCQxNCkpICsgMTJ8MCk7CiAgICQzNSA9IEhFQVAzMlskMzQ+PjJdfDA7CiAgICQzNiA9ICgkMzV8MCk9PSgkMTR8MCk7CiAgIGRvIHsKICAgIGlmICgkMzYpIHsKICAgICAkNDEgPSAoKCgkMTQpKSArIDE2fDApOwogICAgICQ0MiA9ICgoKCQ0MSkpICsgNHwwKTsKICAgICAkNDMgPSBIRUFQMzJbJDQyPj4yXXwwOwogICAgICQ0NCA9ICgkNDN8MCk9PSgwfDApOwogICAgIGlmICgkNDQpIHsKICAgICAgJDQ1ID0gSEVBUDMyWyQ0MT4+Ml18MDsKICAgICAgJDQ2ID0gKCQ0NXwwKT09KDB8MCk7CiAgICAgIGlmICgkNDYpIHsKICAgICAgICQkMyA9IDA7CiAgICAgICBicmVhazsKICAgICAgfSBlbHNlIHsKICAgICAgICQkMTM1MiA9ICQ0NTskJDEzNTUgPSAkNDE7CiAgICAgIH0KICAgICB9IGVsc2UgewogICAgICAkJDEzNTIgPSAkNDM7JCQxMzU1ID0gJDQyOwogICAgIH0KICAgICB3aGlsZSgxKSB7CiAgICAgICQ0NyA9ICgoKCQkMTM1MikpICsgMjB8MCk7CiAgICAgICQ0OCA9IEhFQVAzMlskNDc+PjJdfDA7CiAgICAgICQ0OSA9ICgkNDh8MCk9PSgwfDApOwogICAgICBpZiAoISgkNDkpKSB7CiAgICAgICAkJDEzNTIgPSAkNDg7JCQxMzU1ID0gJDQ3OwogICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgJDUwID0gKCgoJCQxMzUyKSkgKyAxNnwwKTsKICAgICAgJDUxID0gSEVBUDMyWyQ1MD4+Ml18MDsKICAgICAgJDUyID0gKCQ1MXwwKT09KDB8MCk7CiAgICAgIGlmICgkNTIpIHsKICAgICAgIGJyZWFrOwogICAgICB9IGVsc2UgewogICAgICAgJCQxMzUyID0gJDUxOyQkMTM1NSA9ICQ1MDsKICAgICAgfQogICAgIH0KICAgICBIRUFQMzJbJCQxMzU1Pj4yXSA9IDA7CiAgICAgJCQzID0gJCQxMzUyOwogICAgfSBlbHNlIHsKICAgICAkMzcgPSAoKCgkMTQpKSArIDh8MCk7CiAgICAgJDM4ID0gSEVBUDMyWyQzNz4+Ml18MDsKICAgICAkMzkgPSAoKCgkMzgpKSArIDEyfDApOwogICAgIEhFQVAzMlskMzk+PjJdID0gJDM1OwogICAgICQ0MCA9ICgoKCQzNSkpICsgOHwwKTsKICAgICBIRUFQMzJbJDQwPj4yXSA9ICQzODsKICAgICAkJDMgPSAkMzU7CiAgICB9CiAgIH0gd2hpbGUoMCk7CiAgICQ1MyA9ICgkMzN8MCk9PSgwfDApOwogICBpZiAoJDUzKSB7CiAgICAkJDEgPSAkMTQ7JCQxMzQ3ID0gJDE1OyQ4NyA9ICQxNDsKICAgfSBlbHNlIHsKICAgICQ1NCA9ICgoKCQxNCkpICsgMjh8MCk7CiAgICAkNTUgPSBIRUFQMzJbJDU0Pj4yXXwwOwogICAgJDU2ID0gKDgzNiArICgkNTU8PDIpfDApOwogICAgJDU3ID0gSEVBUDMyWyQ1Nj4+Ml18MDsKICAgICQ1OCA9ICgkNTd8MCk9PSgkMTR8MCk7CiAgICBpZiAoJDU4KSB7CiAgICAgSEVBUDMyWyQ1Nj4+Ml0gPSAkJDM7CiAgICAgJGNvbmQzNzMgPSAoJCQzfDApPT0oMHwwKTsKICAgICBpZiAoJGNvbmQzNzMpIHsKICAgICAgJDU5ID0gMSA8PCAkNTU7CiAgICAgICQ2MCA9ICQ1OSBeIC0xOwogICAgICAkNjEgPSBIRUFQMzJbKDUzNik+PjJdfDA7CiAgICAgICQ2MiA9ICQ2MSAmICQ2MDsKICAgICAgSEVBUDMyWyg1MzYpPj4yXSA9ICQ2MjsKICAgICAgJCQxID0gJDE0OyQkMTM0NyA9ICQxNTskODcgPSAkMTQ7CiAgICAgIGJyZWFrOwogICAgIH0KICAgIH0gZWxzZSB7CiAgICAgJDYzID0gKCgoJDMzKSkgKyAxNnwwKTsKICAgICAkNjQgPSBIRUFQMzJbJDYzPj4yXXwwOwogICAgICQ2NSA9ICgkNjR8MCkhPSgkMTR8MCk7CiAgICAgJCRzaW5rMyA9ICQ2NSYxOwogICAgICQ2NiA9ICgoKCgkMzMpKSArIDE2fDApICsgKCQkc2luazM8PDIpfDApOwogICAgIEhFQVAzMlskNjY+PjJdID0gJCQzOwogICAgICQ2NyA9ICgkJDN8MCk9PSgwfDApOwogICAgIGlmICgkNjcpIHsKICAgICAgJCQxID0gJDE0OyQkMTM0NyA9ICQxNTskODcgPSAkMTQ7CiAgICAgIGJyZWFrOwogICAgIH0KICAgIH0KICAgICQ2OCA9ICgoKCQkMykpICsgMjR8MCk7CiAgICBIRUFQMzJbJDY4Pj4yXSA9ICQzMzsKICAgICQ2OSA9ICgoKCQxNCkpICsgMTZ8MCk7CiAgICAkNzAgPSBIRUFQMzJbJDY5Pj4yXXwwOwogICAgJDcxID0gKCQ3MHwwKT09KDB8MCk7CiAgICBpZiAoISgkNzEpKSB7CiAgICAgJDcyID0gKCgoJCQzKSkgKyAxNnwwKTsKICAgICBIRUFQMzJbJDcyPj4yXSA9ICQ3MDsKICAgICAkNzMgPSAoKCgkNzApKSArIDI0fDApOwogICAgIEhFQVAzMlskNzM+PjJdID0gJCQzOwogICAgfQogICAgJDc0ID0gKCgoJDY5KSkgKyA0fDApOwogICAgJDc1ID0gSEVBUDMyWyQ3ND4+Ml18MDsKICAgICQ3NiA9ICgkNzV8MCk9PSgwfDApOwogICAgaWYgKCQ3NikgewogICAgICQkMSA9ICQxNDskJDEzNDcgPSAkMTU7JDg3ID0gJDE0OwogICAgfSBlbHNlIHsKICAgICAkNzcgPSAoKCgkJDMpKSArIDIwfDApOwogICAgIEhFQVAzMlskNzc+PjJdID0gJDc1OwogICAgICQ3OCA9ICgoKCQ3NSkpICsgMjR8MCk7CiAgICAgSEVBUDMyWyQ3OD4+Ml0gPSAkJDM7CiAgICAgJCQxID0gJDE0OyQkMTM0NyA9ICQxNTskODcgPSAkMTQ7CiAgICB9CiAgIH0KICB9IGVsc2UgewogICAkJDEgPSAkMjskJDEzNDcgPSAkNjskODcgPSAkMjsKICB9CiB9IHdoaWxlKDApOwogJDg4ID0gKCQ4Nz4+PjApPCgkNz4+PjApOwogaWYgKCEoJDg4KSkgewogIHJldHVybjsKIH0KICQ4OSA9ICgoKCQ3KSkgKyA0fDApOwogJDkwID0gSEVBUDMyWyQ4OT4+Ml18MDsKICQ5MSA9ICQ5MCAmIDE7CiAkOTIgPSAoJDkxfDApPT0oMCk7CiBpZiAoJDkyKSB7CiAgcmV0dXJuOwogfQogJDkzID0gJDkwICYgMjsKICQ5NCA9ICgkOTN8MCk9PSgwKTsKIGlmICgkOTQpIHsKICAkOTUgPSBIRUFQMzJbKDU1Nik+PjJdfDA7CiAgJDk2ID0gKCQ5NXwwKT09KCQ3fDApOwogIGlmICgkOTYpIHsKICAgJDk3ID0gSEVBUDMyWyg1NDQpPj4yXXwwOwogICAkOTggPSAoKCQ5NykgKyAoJCQxMzQ3KSl8MDsKICAgSEVBUDMyWyg1NDQpPj4yXSA9ICQ5ODsKICAgSEVBUDMyWyg1NTYpPj4yXSA9ICQkMTsKICAgJDk5ID0gJDk4IHwgMTsKICAgJDEwMCA9ICgoKCQkMSkpICsgNHwwKTsKICAgSEVBUDMyWyQxMDA+PjJdID0gJDk5OwogICAkMTAxID0gSEVBUDMyWyg1NTIpPj4yXXwwOwogICAkMTAyID0gKCQkMXwwKT09KCQxMDF8MCk7CiAgIGlmICghKCQxMDIpKSB7CiAgICByZXR1cm47CiAgIH0KICAgSEVBUDMyWyg1NTIpPj4yXSA9IDA7CiAgIEhFQVAzMlsoNTQwKT4+Ml0gPSAwOwogICByZXR1cm47CiAgfQogICQxMDMgPSBIRUFQMzJbKDU1Mik+PjJdfDA7CiAgJDEwNCA9ICgkMTAzfDApPT0oJDd8MCk7CiAgaWYgKCQxMDQpIHsKICAgJDEwNSA9IEhFQVAzMlsoNTQwKT4+Ml18MDsKICAgJDEwNiA9ICgoJDEwNSkgKyAoJCQxMzQ3KSl8MDsKICAgSEVBUDMyWyg1NDApPj4yXSA9ICQxMDY7CiAgIEhFQVAzMlsoNTUyKT4+Ml0gPSAkODc7CiAgICQxMDcgPSAkMTA2IHwgMTsKICAgJDEwOCA9ICgoKCQkMSkpICsgNHwwKTsKICAgSEVBUDMyWyQxMDg+PjJdID0gJDEwNzsKICAgJDEwOSA9ICgoJDg3KSArICgkMTA2KXwwKTsKICAgSEVBUDMyWyQxMDk+PjJdID0gJDEwNjsKICAgcmV0dXJuOwogIH0KICAkMTEwID0gJDkwICYgLTg7CiAgJDExMSA9ICgoJDExMCkgKyAoJCQxMzQ3KSl8MDsKICAkMTEyID0gJDkwID4+PiAzOwogICQxMTMgPSAoJDkwPj4+MCk8KDI1Nik7CiAgZG8gewogICBpZiAoJDExMykgewogICAgJDExNCA9ICgoKCQ3KSkgKyA4fDApOwogICAgJDExNSA9IEhFQVAzMlskMTE0Pj4yXXwwOwogICAgJDExNiA9ICgoKCQ3KSkgKyAxMnwwKTsKICAgICQxMTcgPSBIRUFQMzJbJDExNj4+Ml18MDsKICAgICQxMTggPSAoJDExN3wwKT09KCQxMTV8MCk7CiAgICBpZiAoJDExOCkgewogICAgICQxMTkgPSAxIDw8ICQxMTI7CiAgICAgJDEyMCA9ICQxMTkgXiAtMTsKICAgICAkMTIxID0gSEVBUDMyWzEzM118MDsKICAgICAkMTIyID0gJDEyMSAmICQxMjA7CiAgICAgSEVBUDMyWzEzM10gPSAkMTIyOwogICAgIGJyZWFrOwogICAgfSBlbHNlIHsKICAgICAkMTIzID0gKCgoJDExNSkpICsgMTJ8MCk7CiAgICAgSEVBUDMyWyQxMjM+PjJdID0gJDExNzsKICAgICAkMTI0ID0gKCgoJDExNykpICsgOHwwKTsKICAgICBIRUFQMzJbJDEyND4+Ml0gPSAkMTE1OwogICAgIGJyZWFrOwogICAgfQogICB9IGVsc2UgewogICAgJDEyNSA9ICgoKCQ3KSkgKyAyNHwwKTsKICAgICQxMjYgPSBIRUFQMzJbJDEyNT4+Ml18MDsKICAgICQxMjcgPSAoKCgkNykpICsgMTJ8MCk7CiAgICAkMTI4ID0gSEVBUDMyWyQxMjc+PjJdfDA7CiAgICAkMTI5ID0gKCQxMjh8MCk9PSgkN3wwKTsKICAgIGRvIHsKICAgICBpZiAoJDEyOSkgewogICAgICAkMTM0ID0gKCgoJDcpKSArIDE2fDApOwogICAgICAkMTM1ID0gKCgoJDEzNCkpICsgNHwwKTsKICAgICAgJDEzNiA9IEhFQVAzMlskMTM1Pj4yXXwwOwogICAgICAkMTM3ID0gKCQxMzZ8MCk9PSgwfDApOwogICAgICBpZiAoJDEzNykgewogICAgICAgJDEzOCA9IEhFQVAzMlskMTM0Pj4yXXwwOwogICAgICAgJDEzOSA9ICgkMTM4fDApPT0oMHwwKTsKICAgICAgIGlmICgkMTM5KSB7CiAgICAgICAgJCQzMzY1ID0gMDsKICAgICAgICBicmVhazsKICAgICAgIH0gZWxzZSB7CiAgICAgICAgJCQxMzYzID0gJDEzODskJDEzNjcgPSAkMTM0OwogICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgJCQxMzYzID0gJDEzNjskJDEzNjcgPSAkMTM1OwogICAgICB9CiAgICAgIHdoaWxlKDEpIHsKICAgICAgICQxNDAgPSAoKCgkJDEzNjMpKSArIDIwfDApOwogICAgICAgJDE0MSA9IEhFQVAzMlskMTQwPj4yXXwwOwogICAgICAgJDE0MiA9ICgkMTQxfDApPT0oMHwwKTsKICAgICAgIGlmICghKCQxNDIpKSB7CiAgICAgICAgJCQxMzYzID0gJDE0MTskJDEzNjcgPSAkMTQwOwogICAgICAgIGNvbnRpbnVlOwogICAgICAgfQogICAgICAgJDE0MyA9ICgoKCQkMTM2MykpICsgMTZ8MCk7CiAgICAgICAkMTQ0ID0gSEVBUDMyWyQxNDM+PjJdfDA7CiAgICAgICAkMTQ1ID0gKCQxNDR8MCk9PSgwfDApOwogICAgICAgaWYgKCQxNDUpIHsKICAgICAgICBicmVhazsKICAgICAgIH0gZWxzZSB7CiAgICAgICAgJCQxMzYzID0gJDE0NDskJDEzNjcgPSAkMTQzOwogICAgICAgfQogICAgICB9CiAgICAgIEhFQVAzMlskJDEzNjc+PjJdID0gMDsKICAgICAgJCQzMzY1ID0gJCQxMzYzOwogICAgIH0gZWxzZSB7CiAgICAgICQxMzAgPSAoKCgkNykpICsgOHwwKTsKICAgICAgJDEzMSA9IEhFQVAzMlskMTMwPj4yXXwwOwogICAgICAkMTMyID0gKCgoJDEzMSkpICsgMTJ8MCk7CiAgICAgIEhFQVAzMlskMTMyPj4yXSA9ICQxMjg7CiAgICAgICQxMzMgPSAoKCgkMTI4KSkgKyA4fDApOwogICAgICBIRUFQMzJbJDEzMz4+Ml0gPSAkMTMxOwogICAgICAkJDMzNjUgPSAkMTI4OwogICAgIH0KICAgIH0gd2hpbGUoMCk7CiAgICAkMTQ2ID0gKCQxMjZ8MCk9PSgwfDApOwogICAgaWYgKCEoJDE0NikpIHsKICAgICAkMTQ3ID0gKCgoJDcpKSArIDI4fDApOwogICAgICQxNDggPSBIRUFQMzJbJDE0Nz4+Ml18MDsKICAgICAkMTQ5ID0gKDgzNiArICgkMTQ4PDwyKXwwKTsKICAgICAkMTUwID0gSEVBUDMyWyQxNDk+PjJdfDA7CiAgICAgJDE1MSA9ICgkMTUwfDApPT0oJDd8MCk7CiAgICAgaWYgKCQxNTEpIHsKICAgICAgSEVBUDMyWyQxNDk+PjJdID0gJCQzMzY1OwogICAgICAkY29uZDM3NCA9ICgkJDMzNjV8MCk9PSgwfDApOwogICAgICBpZiAoJGNvbmQzNzQpIHsKICAgICAgICQxNTIgPSAxIDw8ICQxNDg7CiAgICAgICAkMTUzID0gJDE1MiBeIC0xOwogICAgICAgJDE1NCA9IEhFQVAzMlsoNTM2KT4+Ml18MDsKICAgICAgICQxNTUgPSAkMTU0ICYgJDE1MzsKICAgICAgIEhFQVAzMlsoNTM2KT4+Ml0gPSAkMTU1OwogICAgICAgYnJlYWs7CiAgICAgIH0KICAgICB9IGVsc2UgewogICAgICAkMTU2ID0gKCgoJDEyNikpICsgMTZ8MCk7CiAgICAgICQxNTcgPSBIRUFQMzJbJDE1Nj4+Ml18MDsKICAgICAgJDE1OCA9ICgkMTU3fDApIT0oJDd8MCk7CiAgICAgICQkc2luazUgPSAkMTU4JjE7CiAgICAgICQxNTkgPSAoKCgoJDEyNikpICsgMTZ8MCkgKyAoJCRzaW5rNTw8Mil8MCk7CiAgICAgIEhFQVAzMlskMTU5Pj4yXSA9ICQkMzM2NTsKICAgICAgJDE2MCA9ICgkJDMzNjV8MCk9PSgwfDApOwogICAgICBpZiAoJDE2MCkgewogICAgICAgYnJlYWs7CiAgICAgIH0KICAgICB9CiAgICAgJDE2MSA9ICgoKCQkMzM2NSkpICsgMjR8MCk7CiAgICAgSEVBUDMyWyQxNjE+PjJdID0gJDEyNjsKICAgICAkMTYyID0gKCgoJDcpKSArIDE2fDApOwogICAgICQxNjMgPSBIRUFQMzJbJDE2Mj4+Ml18MDsKICAgICAkMTY0ID0gKCQxNjN8MCk9PSgwfDApOwogICAgIGlmICghKCQxNjQpKSB7CiAgICAgICQxNjUgPSAoKCgkJDMzNjUpKSArIDE2fDApOwogICAgICBIRUFQMzJbJDE2NT4+Ml0gPSAkMTYzOwogICAgICAkMTY2ID0gKCgoJDE2MykpICsgMjR8MCk7CiAgICAgIEhFQVAzMlskMTY2Pj4yXSA9ICQkMzM2NTsKICAgICB9CiAgICAgJDE2NyA9ICgoKCQxNjIpKSArIDR8MCk7CiAgICAgJDE2OCA9IEhFQVAzMlskMTY3Pj4yXXwwOwogICAgICQxNjkgPSAoJDE2OHwwKT09KDB8MCk7CiAgICAgaWYgKCEoJDE2OSkpIHsKICAgICAgJDE3MCA9ICgoKCQkMzM2NSkpICsgMjB8MCk7CiAgICAgIEhFQVAzMlskMTcwPj4yXSA9ICQxNjg7CiAgICAgICQxNzEgPSAoKCgkMTY4KSkgKyAyNHwwKTsKICAgICAgSEVBUDMyWyQxNzE+PjJdID0gJCQzMzY1OwogICAgIH0KICAgIH0KICAgfQogIH0gd2hpbGUoMCk7CiAgJDE3MiA9ICQxMTEgfCAxOwogICQxNzMgPSAoKCgkJDEpKSArIDR8MCk7CiAgSEVBUDMyWyQxNzM+PjJdID0gJDE3MjsKICAkMTc0ID0gKCgkODcpICsgKCQxMTEpfDApOwogIEhFQVAzMlskMTc0Pj4yXSA9ICQxMTE7CiAgJDE3NSA9IEhFQVAzMlsoNTUyKT4+Ml18MDsKICAkMTc2ID0gKCQkMXwwKT09KCQxNzV8MCk7CiAgaWYgKCQxNzYpIHsKICAgSEVBUDMyWyg1NDApPj4yXSA9ICQxMTE7CiAgIHJldHVybjsKICB9IGVsc2UgewogICAkJDIgPSAkMTExOwogIH0KIH0gZWxzZSB7CiAgJDE3NyA9ICQ5MCAmIC0yOwogIEhFQVAzMlskODk+PjJdID0gJDE3NzsKICAkMTc4ID0gJCQxMzQ3IHwgMTsKICAkMTc5ID0gKCgoJCQxKSkgKyA0fDApOwogIEhFQVAzMlskMTc5Pj4yXSA9ICQxNzg7CiAgJDE4MCA9ICgoJDg3KSArICgkJDEzNDcpfDApOwogIEhFQVAzMlskMTgwPj4yXSA9ICQkMTM0NzsKICAkJDIgPSAkJDEzNDc7CiB9CiAkMTgxID0gJCQyID4+PiAzOwogJDE4MiA9ICgkJDI+Pj4wKTwoMjU2KTsKIGlmICgkMTgyKSB7CiAgJDE4MyA9ICQxODEgPDwgMTsKICAkMTg0ID0gKDU3MiArICgkMTgzPDwyKXwwKTsKICAkMTg1ID0gSEVBUDMyWzEzM118MDsKICAkMTg2ID0gMSA8PCAkMTgxOwogICQxODcgPSAkMTg1ICYgJDE4NjsKICAkMTg4ID0gKCQxODd8MCk9PSgwKTsKICBpZiAoJDE4OCkgewogICAkMTg5ID0gJDE4NSB8ICQxODY7CiAgIEhFQVAzMlsxMzNdID0gJDE4OTsKICAgJCRwcmUgPSAoKCgkMTg0KSkgKyA4fDApOwogICAkJDAzNjggPSAkMTg0OyQkcHJlJHBoaVoyRCA9ICQkcHJlOwogIH0gZWxzZSB7CiAgICQxOTAgPSAoKCgkMTg0KSkgKyA4fDApOwogICAkMTkxID0gSEVBUDMyWyQxOTA+PjJdfDA7CiAgICQkMDM2OCA9ICQxOTE7JCRwcmUkcGhpWjJEID0gJDE5MDsKICB9CiAgSEVBUDMyWyQkcHJlJHBoaVoyRD4+Ml0gPSAkJDE7CiAgJDE5MiA9ICgoKCQkMDM2OCkpICsgMTJ8MCk7CiAgSEVBUDMyWyQxOTI+PjJdID0gJCQxOwogICQxOTMgPSAoKCgkJDEpKSArIDh8MCk7CiAgSEVBUDMyWyQxOTM+PjJdID0gJCQwMzY4OwogICQxOTQgPSAoKCgkJDEpKSArIDEyfDApOwogIEhFQVAzMlskMTk0Pj4yXSA9ICQxODQ7CiAgcmV0dXJuOwogfQogJDE5NSA9ICQkMiA+Pj4gODsKICQxOTYgPSAoJDE5NXwwKT09KDApOwogaWYgKCQxOTYpIHsKICAkJDAzNjEgPSAwOwogfSBlbHNlIHsKICAkMTk3ID0gKCQkMj4+PjApPigxNjc3NzIxNSk7CiAgaWYgKCQxOTcpIHsKICAgJCQwMzYxID0gMzE7CiAgfSBlbHNlIHsKICAgJDE5OCA9ICgoJDE5NSkgKyAxMDQ4MzIwKXwwOwogICAkMTk5ID0gJDE5OCA+Pj4gMTY7CiAgICQyMDAgPSAkMTk5ICYgODsKICAgJDIwMSA9ICQxOTUgPDwgJDIwMDsKICAgJDIwMiA9ICgoJDIwMSkgKyA1MjAxOTIpfDA7CiAgICQyMDMgPSAkMjAyID4+PiAxNjsKICAgJDIwNCA9ICQyMDMgJiA0OwogICAkMjA1ID0gJDIwNCB8ICQyMDA7CiAgICQyMDYgPSAkMjAxIDw8ICQyMDQ7CiAgICQyMDcgPSAoKCQyMDYpICsgMjQ1NzYwKXwwOwogICAkMjA4ID0gJDIwNyA+Pj4gMTY7CiAgICQyMDkgPSAkMjA4ICYgMjsKICAgJDIxMCA9ICQyMDUgfCAkMjA5OwogICAkMjExID0gKDE0IC0gKCQyMTApKXwwOwogICAkMjEyID0gJDIwNiA8PCAkMjA5OwogICAkMjEzID0gJDIxMiA+Pj4gMTU7CiAgICQyMTQgPSAoKCQyMTEpICsgKCQyMTMpKXwwOwogICAkMjE1ID0gJDIxNCA8PCAxOwogICAkMjE2ID0gKCgkMjE0KSArIDcpfDA7CiAgICQyMTcgPSAkJDIgPj4+ICQyMTY7CiAgICQyMTggPSAkMjE3ICYgMTsKICAgJDIxOSA9ICQyMTggfCAkMjE1OwogICAkJDAzNjEgPSAkMjE5OwogIH0KIH0KICQyMjAgPSAoODM2ICsgKCQkMDM2MTw8Mil8MCk7CiAkMjIxID0gKCgoJCQxKSkgKyAyOHwwKTsKIEhFQVAzMlskMjIxPj4yXSA9ICQkMDM2MTsKICQyMjIgPSAoKCgkJDEpKSArIDE2fDApOwogJDIyMyA9ICgoKCQkMSkpICsgMjB8MCk7CiBIRUFQMzJbJDIyMz4+Ml0gPSAwOwogSEVBUDMyWyQyMjI+PjJdID0gMDsKICQyMjQgPSBIRUFQMzJbKDUzNik+PjJdfDA7CiAkMjI1ID0gMSA8PCAkJDAzNjE7CiAkMjI2ID0gJDIyNCAmICQyMjU7CiAkMjI3ID0gKCQyMjZ8MCk9PSgwKTsKIGRvIHsKICBpZiAoJDIyNykgewogICAkMjI4ID0gJDIyNCB8ICQyMjU7CiAgIEhFQVAzMlsoNTM2KT4+Ml0gPSAkMjI4OwogICBIRUFQMzJbJDIyMD4+Ml0gPSAkJDE7CiAgICQyMjkgPSAoKCgkJDEpKSArIDI0fDApOwogICBIRUFQMzJbJDIyOT4+Ml0gPSAkMjIwOwogICAkMjMwID0gKCgoJCQxKSkgKyAxMnwwKTsKICAgSEVBUDMyWyQyMzA+PjJdID0gJCQxOwogICAkMjMxID0gKCgoJCQxKSkgKyA4fDApOwogICBIRUFQMzJbJDIzMT4+Ml0gPSAkJDE7CiAgfSBlbHNlIHsKICAgJDIzMiA9IEhFQVAzMlskMjIwPj4yXXwwOwogICAkMjMzID0gKCQkMDM2MXwwKT09KDMxKTsKICAgJDIzNCA9ICQkMDM2MSA+Pj4gMTsKICAgJDIzNSA9ICgyNSAtICgkMjM0KSl8MDsKICAgJDIzNiA9ICQyMzMgPyAwIDogJDIzNTsKICAgJDIzNyA9ICQkMiA8PCAkMjM2OwogICAkJDAzNDggPSAkMjM3OyQkMDM0OSA9ICQyMzI7CiAgIHdoaWxlKDEpIHsKICAgICQyMzggPSAoKCgkJDAzNDkpKSArIDR8MCk7CiAgICAkMjM5ID0gSEVBUDMyWyQyMzg+PjJdfDA7CiAgICAkMjQwID0gJDIzOSAmIC04OwogICAgJDI0MSA9ICgkMjQwfDApPT0oJCQyfDApOwogICAgaWYgKCQyNDEpIHsKICAgICBsYWJlbCA9IDczOwogICAgIGJyZWFrOwogICAgfQogICAgJDI0MiA9ICQkMDM0OCA+Pj4gMzE7CiAgICAkMjQzID0gKCgoKCQkMDM0OSkpICsgMTZ8MCkgKyAoJDI0Mjw8Mil8MCk7CiAgICAkMjQ0ID0gJCQwMzQ4IDw8IDE7CiAgICAkMjQ1ID0gSEVBUDMyWyQyNDM+PjJdfDA7CiAgICAkMjQ2ID0gKCQyNDV8MCk9PSgwfDApOwogICAgaWYgKCQyNDYpIHsKICAgICBsYWJlbCA9IDcyOwogICAgIGJyZWFrOwogICAgfSBlbHNlIHsKICAgICAkJDAzNDggPSAkMjQ0OyQkMDM0OSA9ICQyNDU7CiAgICB9CiAgIH0KICAgaWYgKChsYWJlbHwwKSA9PSA3MikgewogICAgSEVBUDMyWyQyNDM+PjJdID0gJCQxOwogICAgJDI0NyA9ICgoKCQkMSkpICsgMjR8MCk7CiAgICBIRUFQMzJbJDI0Nz4+Ml0gPSAkJDAzNDk7CiAgICAkMjQ4ID0gKCgoJCQxKSkgKyAxMnwwKTsKICAgIEhFQVAzMlskMjQ4Pj4yXSA9ICQkMTsKICAgICQyNDkgPSAoKCgkJDEpKSArIDh8MCk7CiAgICBIRUFQMzJbJDI0OT4+Ml0gPSAkJDE7CiAgICBicmVhazsKICAgfQogICBlbHNlIGlmICgobGFiZWx8MCkgPT0gNzMpIHsKICAgICQyNTAgPSAoKCgkJDAzNDkpKSArIDh8MCk7CiAgICAkMjUxID0gSEVBUDMyWyQyNTA+PjJdfDA7CiAgICAkMjUyID0gKCgoJDI1MSkpICsgMTJ8MCk7CiAgICBIRUFQMzJbJDI1Mj4+Ml0gPSAkJDE7CiAgICBIRUFQMzJbJDI1MD4+Ml0gPSAkJDE7CiAgICAkMjUzID0gKCgoJCQxKSkgKyA4fDApOwogICAgSEVBUDMyWyQyNTM+PjJdID0gJDI1MTsKICAgICQyNTQgPSAoKCgkJDEpKSArIDEyfDApOwogICAgSEVBUDMyWyQyNTQ+PjJdID0gJCQwMzQ5OwogICAgJDI1NSA9ICgoKCQkMSkpICsgMjR8MCk7CiAgICBIRUFQMzJbJDI1NT4+Ml0gPSAwOwogICAgYnJlYWs7CiAgIH0KICB9CiB9IHdoaWxlKDApOwogJDI1NiA9IEhFQVAzMlsoNTY0KT4+Ml18MDsKICQyNTcgPSAoKCQyNTYpICsgLTEpfDA7CiBIRUFQMzJbKDU2NCk+PjJdID0gJDI1NzsKICQyNTggPSAoJDI1N3wwKT09KDApOwogaWYgKCQyNTgpIHsKICAkJDAxOTUkaW4kaSA9ICg5ODgpOwogfSBlbHNlIHsKICByZXR1cm47CiB9CiB3aGlsZSgxKSB7CiAgJCQwMTk1JGkgPSBIRUFQMzJbJCQwMTk1JGluJGk+PjJdfDA7CiAgJDI1OSA9ICgkJDAxOTUkaXwwKT09KDB8MCk7CiAgJDI2MCA9ICgoKCQkMDE5NSRpKSkgKyA4fDApOwogIGlmICgkMjU5KSB7CiAgIGJyZWFrOwogIH0gZWxzZSB7CiAgICQkMDE5NSRpbiRpID0gJDI2MDsKICB9CiB9CiBIRUFQMzJbKDU2NCk+PjJdID0gLTE7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19fc3RkaW9fY2xvc2UoJDApIHsKICQwID0gJDB8MDsKIHZhciAkMSA9IDAsICQyID0gMCwgJDMgPSAwLCAkNCA9IDAsICQ1ID0gMCwgJHZhcmFyZ19idWZmZXIgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMTZ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMTZ8MCk7CiAkdmFyYXJnX2J1ZmZlciA9IHNwOwogJDEgPSAoKCgkMCkpICsgNjB8MCk7CiAkMiA9IEhFQVAzMlskMT4+Ml18MDsKICQzID0gKF9kdW1teSgkMil8MCk7CiBIRUFQMzJbJHZhcmFyZ19idWZmZXI+PjJdID0gJDM7CiAkNCA9IChfX19zeXNjYWxsNig2LCgkdmFyYXJnX2J1ZmZlcnwwKSl8MCk7CiAkNSA9IChfX19zeXNjYWxsX3JldCgkNCl8MCk7CiBTVEFDS1RPUCA9IHNwO3JldHVybiAoJDV8MCk7Cn0KZnVuY3Rpb24gX19fc3Rkb3V0X3dyaXRlKCQwLCQxLCQyKSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDMgPSAwLCAkNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCAkdmFyYXJnX2J1ZmZlciA9IDAsICR2YXJhcmdfcHRyMSA9IDAsICR2YXJhcmdfcHRyMiA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyAzMnwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdygzMnwwKTsKICR2YXJhcmdfYnVmZmVyID0gc3A7CiAkMyA9IHNwICsgMTZ8MDsKICQ0ID0gKCgoJDApKSArIDM2fDApOwogSEVBUDMyWyQ0Pj4yXSA9IDE5OwogJDUgPSBIRUFQMzJbJDA+PjJdfDA7CiAkNiA9ICQ1ICYgNjQ7CiAkNyA9ICgkNnwwKT09KDApOwogaWYgKCQ3KSB7CiAgJDggPSAoKCgkMCkpICsgNjB8MCk7CiAgJDkgPSBIRUFQMzJbJDg+PjJdfDA7CiAgJDEwID0gJDM7CiAgSEVBUDMyWyR2YXJhcmdfYnVmZmVyPj4yXSA9ICQ5OwogICR2YXJhcmdfcHRyMSA9ICgoKCR2YXJhcmdfYnVmZmVyKSkgKyA0fDApOwogIEhFQVAzMlskdmFyYXJnX3B0cjE+PjJdID0gMjE1MjM7CiAgJHZhcmFyZ19wdHIyID0gKCgoJHZhcmFyZ19idWZmZXIpKSArIDh8MCk7CiAgSEVBUDMyWyR2YXJhcmdfcHRyMj4+Ml0gPSAkMTA7CiAgJDExID0gKF9fX3N5c2NhbGw1NCg1NCwoJHZhcmFyZ19idWZmZXJ8MCkpfDApOwogICQxMiA9ICgkMTF8MCk9PSgwKTsKICBpZiAoISgkMTIpKSB7CiAgICQxMyA9ICgoKCQwKSkgKyA3NXwwKTsKICAgSEVBUDhbJDEzPj4wXSA9IC0xOwogIH0KIH0KICQxNCA9IChfX19zdGRpb193cml0ZSgkMCwkMSwkMil8MCk7CiBTVEFDS1RPUCA9IHNwO3JldHVybiAoJDE0fDApOwp9CmZ1bmN0aW9uIF9fX3N0ZGlvX3NlZWsoJDAsJDEsJDIpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKIHZhciAkJHByZSA9IDAsICQxMCA9IDAsICQzID0gMCwgJDQgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgJHZhcmFyZ19idWZmZXIgPSAwLCAkdmFyYXJnX3B0cjEgPSAwLCAkdmFyYXJnX3B0cjIgPSAwLCAkdmFyYXJnX3B0cjMgPSAwLCAkdmFyYXJnX3B0cjQgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBTVEFDS1RPUCA9IFNUQUNLVE9QICsgMzJ8MDsgaWYgKChTVEFDS1RPUHwwKSA+PSAoU1RBQ0tfTUFYfDApKSBhYm9ydFN0YWNrT3ZlcmZsb3coMzJ8MCk7CiAkdmFyYXJnX2J1ZmZlciA9IHNwOwogJDMgPSBzcCArIDIwfDA7CiAkNCA9ICgoKCQwKSkgKyA2MHwwKTsKICQ1ID0gSEVBUDMyWyQ0Pj4yXXwwOwogJDYgPSAkMzsKIEhFQVAzMlskdmFyYXJnX2J1ZmZlcj4+Ml0gPSAkNTsKICR2YXJhcmdfcHRyMSA9ICgoKCR2YXJhcmdfYnVmZmVyKSkgKyA0fDApOwogSEVBUDMyWyR2YXJhcmdfcHRyMT4+Ml0gPSAwOwogJHZhcmFyZ19wdHIyID0gKCgoJHZhcmFyZ19idWZmZXIpKSArIDh8MCk7CiBIRUFQMzJbJHZhcmFyZ19wdHIyPj4yXSA9ICQxOwogJHZhcmFyZ19wdHIzID0gKCgoJHZhcmFyZ19idWZmZXIpKSArIDEyfDApOwogSEVBUDMyWyR2YXJhcmdfcHRyMz4+Ml0gPSAkNjsKICR2YXJhcmdfcHRyNCA9ICgoKCR2YXJhcmdfYnVmZmVyKSkgKyAxNnwwKTsKIEhFQVAzMlskdmFyYXJnX3B0cjQ+PjJdID0gJDI7CiAkNyA9IChfX19zeXNjYWxsMTQwKDE0MCwoJHZhcmFyZ19idWZmZXJ8MCkpfDApOwogJDggPSAoX19fc3lzY2FsbF9yZXQoJDcpfDApOwogJDkgPSAoJDh8MCk8KDApOwogaWYgKCQ5KSB7CiAgSEVBUDMyWyQzPj4yXSA9IC0xOwogICQxMCA9IC0xOwogfSBlbHNlIHsKICAkJHByZSA9IEhFQVAzMlskMz4+Ml18MDsKICAkMTAgPSAkJHByZTsKIH0KIFNUQUNLVE9QID0gc3A7cmV0dXJuICgkMTB8MCk7Cn0KZnVuY3Rpb24gX19fc3lzY2FsbF9yZXQoJDApIHsKICQwID0gJDB8MDsKIHZhciAkJDAgPSAwLCAkMSA9IDAsICQyID0gMCwgJDMgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkMSA9ICgkMD4+PjApPig0Mjk0OTYzMjAwKTsKIGlmICgkMSkgewogICQyID0gKDAgLSAoJDApKXwwOwogICQzID0gKF9fX2Vycm5vX2xvY2F0aW9uKCl8MCk7CiAgSEVBUDMyWyQzPj4yXSA9ICQyOwogICQkMCA9IC0xOwogfSBlbHNlIHsKICAkJDAgPSAkMDsKIH0KIHJldHVybiAoJCQwfDApOwp9CmZ1bmN0aW9uIF9fX2Vycm5vX2xvY2F0aW9uKCkgewogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIHJldHVybiAoMTAyOHwwKTsKfQpmdW5jdGlvbiBfX19zdGRpb193cml0ZSgkMCwkMSwkMikgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogdmFyICQkMCA9IDAsICQkMDQ3NTYgPSAwLCAkJDA0ODU1ID0gMCwgJCQwNDk1NCA9IDAsICQkMDUxID0gMCwgJCQxID0gMCwgJCQxNTAgPSAwLCAkMTAgPSAwLCAkMTEgPSAwLCAkMTIgPSAwLCAkMTMgPSAwLCAkMTQgPSAwLCAkMTUgPSAwLCAkMTYgPSAwLCAkMTcgPSAwLCAkMTggPSAwLCAkMTkgPSAwLCAkMjAgPSAwLCAkMjEgPSAwLCAkMjIgPSAwOwogdmFyICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDAsICQyOSA9IDAsICQzID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMCwgJDM1ID0gMCwgJDM2ID0gMCwgJDM3ID0gMCwgJDM4ID0gMCwgJDM5ID0gMCwgJDQgPSAwLCAkNDAgPSAwOwogdmFyICQ0MSA9IDAsICQ0MiA9IDAsICQ0MyA9IDAsICQ0NCA9IDAsICQ0NSA9IDAsICQ0NiA9IDAsICQ0NyA9IDAsICQ0OCA9IDAsICQ0OSA9IDAsICQ1ID0gMCwgJDUwID0gMCwgJDUxID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCAkdmFyYXJnX2J1ZmZlciA9IDAsICR2YXJhcmdfYnVmZmVyMyA9IDAsICR2YXJhcmdfcHRyMSA9IDAsICR2YXJhcmdfcHRyMiA9IDA7CiB2YXIgJHZhcmFyZ19wdHI2ID0gMCwgJHZhcmFyZ19wdHI3ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDQ4fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDQ4fDApOwogJHZhcmFyZ19idWZmZXIzID0gc3AgKyAxNnwwOwogJHZhcmFyZ19idWZmZXIgPSBzcDsKICQzID0gc3AgKyAzMnwwOwogJDQgPSAoKCgkMCkpICsgMjh8MCk7CiAkNSA9IEhFQVAzMlskND4+Ml18MDsKIEhFQVAzMlskMz4+Ml0gPSAkNTsKICQ2ID0gKCgoJDMpKSArIDR8MCk7CiAkNyA9ICgoKCQwKSkgKyAyMHwwKTsKICQ4ID0gSEVBUDMyWyQ3Pj4yXXwwOwogJDkgPSAoKCQ4KSAtICgkNSkpfDA7CiBIRUFQMzJbJDY+PjJdID0gJDk7CiAkMTAgPSAoKCgkMykpICsgOHwwKTsKIEhFQVAzMlskMTA+PjJdID0gJDE7CiAkMTEgPSAoKCgkMykpICsgMTJ8MCk7CiBIRUFQMzJbJDExPj4yXSA9ICQyOwogJDEyID0gKCgkOSkgKyAoJDIpKXwwOwogJDEzID0gKCgoJDApKSArIDYwfDApOwogJDE0ID0gSEVBUDMyWyQxMz4+Ml18MDsKICQxNSA9ICQzOwogSEVBUDMyWyR2YXJhcmdfYnVmZmVyPj4yXSA9ICQxNDsKICR2YXJhcmdfcHRyMSA9ICgoKCR2YXJhcmdfYnVmZmVyKSkgKyA0fDApOwogSEVBUDMyWyR2YXJhcmdfcHRyMT4+Ml0gPSAkMTU7CiAkdmFyYXJnX3B0cjIgPSAoKCgkdmFyYXJnX2J1ZmZlcikpICsgOHwwKTsKIEhFQVAzMlskdmFyYXJnX3B0cjI+PjJdID0gMjsKICQxNiA9IChfX19zeXNjYWxsMTQ2KDE0NiwoJHZhcmFyZ19idWZmZXJ8MCkpfDApOwogJDE3ID0gKF9fX3N5c2NhbGxfcmV0KCQxNil8MCk7CiAkMTggPSAoJDEyfDApPT0oJDE3fDApOwogTDE6IGRvIHsKICBpZiAoJDE4KSB7CiAgIGxhYmVsID0gMzsKICB9IGVsc2UgewogICAkJDA0NzU2ID0gMjskJDA0ODU1ID0gJDEyOyQkMDQ5NTQgPSAkMzskMjYgPSAkMTc7CiAgIHdoaWxlKDEpIHsKICAgICQyNyA9ICgkMjZ8MCk8KDApOwogICAgaWYgKCQyNykgewogICAgIGJyZWFrOwogICAgfQogICAgJDM1ID0gKCgkJDA0ODU1KSAtICgkMjYpKXwwOwogICAgJDM2ID0gKCgoJCQwNDk1NCkpICsgNHwwKTsKICAgICQzNyA9IEhFQVAzMlskMzY+PjJdfDA7CiAgICAkMzggPSAoJDI2Pj4+MCk+KCQzNz4+PjApOwogICAgJDM5ID0gKCgoJCQwNDk1NCkpICsgOHwwKTsKICAgICQkMTUwID0gJDM4ID8gJDM5IDogJCQwNDk1NDsKICAgICQ0MCA9ICQzOCA8PCAzMSA+PiAzMTsKICAgICQkMSA9ICgoJCQwNDc1NikgKyAoJDQwKSl8MDsKICAgICQ0MSA9ICQzOCA/ICQzNyA6IDA7CiAgICAkJDAgPSAoKCQyNikgLSAoJDQxKSl8MDsKICAgICQ0MiA9IEhFQVAzMlskJDE1MD4+Ml18MDsKICAgICQ0MyA9ICgoJDQyKSArICgkJDApfDApOwogICAgSEVBUDMyWyQkMTUwPj4yXSA9ICQ0MzsKICAgICQ0NCA9ICgoKCQkMTUwKSkgKyA0fDApOwogICAgJDQ1ID0gSEVBUDMyWyQ0ND4+Ml18MDsKICAgICQ0NiA9ICgoJDQ1KSAtICgkJDApKXwwOwogICAgSEVBUDMyWyQ0ND4+Ml0gPSAkNDY7CiAgICAkNDcgPSBIRUFQMzJbJDEzPj4yXXwwOwogICAgJDQ4ID0gJCQxNTA7CiAgICBIRUFQMzJbJHZhcmFyZ19idWZmZXIzPj4yXSA9ICQ0NzsKICAgICR2YXJhcmdfcHRyNiA9ICgoKCR2YXJhcmdfYnVmZmVyMykpICsgNHwwKTsKICAgIEhFQVAzMlskdmFyYXJnX3B0cjY+PjJdID0gJDQ4OwogICAgJHZhcmFyZ19wdHI3ID0gKCgoJHZhcmFyZ19idWZmZXIzKSkgKyA4fDApOwogICAgSEVBUDMyWyR2YXJhcmdfcHRyNz4+Ml0gPSAkJDE7CiAgICAkNDkgPSAoX19fc3lzY2FsbDE0NigxNDYsKCR2YXJhcmdfYnVmZmVyM3wwKSl8MCk7CiAgICAkNTAgPSAoX19fc3lzY2FsbF9yZXQoJDQ5KXwwKTsKICAgICQ1MSA9ICgkMzV8MCk9PSgkNTB8MCk7CiAgICBpZiAoJDUxKSB7CiAgICAgbGFiZWwgPSAzOwogICAgIGJyZWFrIEwxOwogICAgfSBlbHNlIHsKICAgICAkJDA0NzU2ID0gJCQxOyQkMDQ4NTUgPSAkMzU7JCQwNDk1NCA9ICQkMTUwOyQyNiA9ICQ1MDsKICAgIH0KICAgfQogICAkMjggPSAoKCgkMCkpICsgMTZ8MCk7CiAgIEhFQVAzMlskMjg+PjJdID0gMDsKICAgSEVBUDMyWyQ0Pj4yXSA9IDA7CiAgIEhFQVAzMlskNz4+Ml0gPSAwOwogICAkMjkgPSBIRUFQMzJbJDA+PjJdfDA7CiAgICQzMCA9ICQyOSB8IDMyOwogICBIRUFQMzJbJDA+PjJdID0gJDMwOwogICAkMzEgPSAoJCQwNDc1NnwwKT09KDIpOwogICBpZiAoJDMxKSB7CiAgICAkJDA1MSA9IDA7CiAgIH0gZWxzZSB7CiAgICAkMzIgPSAoKCgkJDA0OTU0KSkgKyA0fDApOwogICAgJDMzID0gSEVBUDMyWyQzMj4+Ml18MDsKICAgICQzNCA9ICgoJDIpIC0gKCQzMykpfDA7CiAgICAkJDA1MSA9ICQzNDsKICAgfQogIH0KIH0gd2hpbGUoMCk7CiBpZiAoKGxhYmVsfDApID09IDMpIHsKICAkMTkgPSAoKCgkMCkpICsgNDR8MCk7CiAgJDIwID0gSEVBUDMyWyQxOT4+Ml18MDsKICAkMjEgPSAoKCgkMCkpICsgNDh8MCk7CiAgJDIyID0gSEVBUDMyWyQyMT4+Ml18MDsKICAkMjMgPSAoKCQyMCkgKyAoJDIyKXwwKTsKICAkMjQgPSAoKCgkMCkpICsgMTZ8MCk7CiAgSEVBUDMyWyQyND4+Ml0gPSAkMjM7CiAgJDI1ID0gJDIwOwogIEhFQVAzMlskND4+Ml0gPSAkMjU7CiAgSEVBUDMyWyQ3Pj4yXSA9ICQyNTsKICAkJDA1MSA9ICQyOwogfQogU1RBQ0tUT1AgPSBzcDtyZXR1cm4gKCQkMDUxfDApOwp9CmZ1bmN0aW9uIF9kdW1teSgkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIHJldHVybiAoJDB8MCk7Cn0KZnVuY3Rpb24gX19fbG9ja2ZpbGUoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiByZXR1cm4gMDsKfQpmdW5jdGlvbiBfX191bmxvY2tmaWxlKCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fX29mbF9sb2NrKCkgewogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIF9fX2xvY2soKDEwMzJ8MCkpOwogcmV0dXJuICgxMDQwfDApOwp9CmZ1bmN0aW9uIF9fX29mbF91bmxvY2soKSB7CiB2YXIgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogX19fdW5sb2NrKCgxMDMyfDApKTsKIHJldHVybjsKfQpmdW5jdGlvbiBfZmZsdXNoKCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgJCQwID0gMCwgJCQwMjMgPSAwLCAkJDAyMzI1ID0gMCwgJCQwMjMyNyA9IDAsICQkMDI0JGxjc3NhID0gMCwgJCQwMjQyNiA9IDAsICQkMSA9IDAsICQxID0gMCwgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIgPSAwLCAkMjAgPSAwOwogdmFyICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDAsICQyOSA9IDAsICQzID0gMCwgJDQgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgJHBoaXRtcCA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQxID0gKCQwfDApPT0oMHwwKTsKIGRvIHsKICBpZiAoJDEpIHsKICAgJDggPSBIRUFQMzJbNTRdfDA7CiAgICQ5ID0gKCQ4fDApPT0oMHwwKTsKICAgaWYgKCQ5KSB7CiAgICAkMjkgPSAwOwogICB9IGVsc2UgewogICAgJDEwID0gSEVBUDMyWzU0XXwwOwogICAgJDExID0gKF9mZmx1c2goJDEwKXwwKTsKICAgICQyOSA9ICQxMTsKICAgfQogICAkMTIgPSAoX19fb2ZsX2xvY2soKXwwKTsKICAgJCQwMjMyNSA9IEhFQVAzMlskMTI+PjJdfDA7CiAgICQxMyA9ICgkJDAyMzI1fDApPT0oMHwwKTsKICAgaWYgKCQxMykgewogICAgJCQwMjQkbGNzc2EgPSAkMjk7CiAgIH0gZWxzZSB7CiAgICAkJDAyMzI3ID0gJCQwMjMyNTskJDAyNDI2ID0gJDI5OwogICAgd2hpbGUoMSkgewogICAgICQxNCA9ICgoKCQkMDIzMjcpKSArIDc2fDApOwogICAgICQxNSA9IEhFQVAzMlskMTQ+PjJdfDA7CiAgICAgJDE2ID0gKCQxNXwwKT4oLTEpOwogICAgIGlmICgkMTYpIHsKICAgICAgJDE3ID0gKF9fX2xvY2tmaWxlKCQkMDIzMjcpfDApOwogICAgICAkMjUgPSAkMTc7CiAgICAgfSBlbHNlIHsKICAgICAgJDI1ID0gMDsKICAgICB9CiAgICAgJDE4ID0gKCgoJCQwMjMyNykpICsgMjB8MCk7CiAgICAgJDE5ID0gSEVBUDMyWyQxOD4+Ml18MDsKICAgICAkMjAgPSAoKCgkJDAyMzI3KSkgKyAyOHwwKTsKICAgICAkMjEgPSBIRUFQMzJbJDIwPj4yXXwwOwogICAgICQyMiA9ICgkMTk+Pj4wKT4oJDIxPj4+MCk7CiAgICAgaWYgKCQyMikgewogICAgICAkMjMgPSAoX19fZmZsdXNoX3VubG9ja2VkKCQkMDIzMjcpfDApOwogICAgICAkMjQgPSAkMjMgfCAkJDAyNDI2OwogICAgICAkJDEgPSAkMjQ7CiAgICAgfSBlbHNlIHsKICAgICAgJCQxID0gJCQwMjQyNjsKICAgICB9CiAgICAgJDI2ID0gKCQyNXwwKT09KDApOwogICAgIGlmICghKCQyNikpIHsKICAgICAgX19fdW5sb2NrZmlsZSgkJDAyMzI3KTsKICAgICB9CiAgICAgJDI3ID0gKCgoJCQwMjMyNykpICsgNTZ8MCk7CiAgICAgJCQwMjMgPSBIRUFQMzJbJDI3Pj4yXXwwOwogICAgICQyOCA9ICgkJDAyM3wwKT09KDB8MCk7CiAgICAgaWYgKCQyOCkgewogICAgICAkJDAyNCRsY3NzYSA9ICQkMTsKICAgICAgYnJlYWs7CiAgICAgfSBlbHNlIHsKICAgICAgJCQwMjMyNyA9ICQkMDIzOyQkMDI0MjYgPSAkJDE7CiAgICAgfQogICAgfQogICB9CiAgIF9fX29mbF91bmxvY2soKTsKICAgJCQwID0gJCQwMjQkbGNzc2E7CiAgfSBlbHNlIHsKICAgJDIgPSAoKCgkMCkpICsgNzZ8MCk7CiAgICQzID0gSEVBUDMyWyQyPj4yXXwwOwogICAkNCA9ICgkM3wwKT4oLTEpOwogICBpZiAoISgkNCkpIHsKICAgICQ1ID0gKF9fX2ZmbHVzaF91bmxvY2tlZCgkMCl8MCk7CiAgICAkJDAgPSAkNTsKICAgIGJyZWFrOwogICB9CiAgICQ2ID0gKF9fX2xvY2tmaWxlKCQwKXwwKTsKICAgJHBoaXRtcCA9ICgkNnwwKT09KDApOwogICAkNyA9IChfX19mZmx1c2hfdW5sb2NrZWQoJDApfDApOwogICBpZiAoJHBoaXRtcCkgewogICAgJCQwID0gJDc7CiAgIH0gZWxzZSB7CiAgICBfX191bmxvY2tmaWxlKCQwKTsKICAgICQkMCA9ICQ3OwogICB9CiAgfQogfSB3aGlsZSgwKTsKIHJldHVybiAoJCQwfDApOwp9CmZ1bmN0aW9uIF9fX2ZmbHVzaF91bmxvY2tlZCgkMCkgewogJDAgPSAkMHwwOwogdmFyICQkMCA9IDAsICQxID0gMCwgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDE4ID0gMCwgJDE5ID0gMCwgJDIgPSAwLCAkMjAgPSAwLCAkMyA9IDAsICQ0ID0gMCwgJDUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwOwogdmFyICQ5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogJDEgPSAoKCgkMCkpICsgMjB8MCk7CiAkMiA9IEhFQVAzMlskMT4+Ml18MDsKICQzID0gKCgoJDApKSArIDI4fDApOwogJDQgPSBIRUFQMzJbJDM+PjJdfDA7CiAkNSA9ICgkMj4+PjApPigkND4+PjApOwogaWYgKCQ1KSB7CiAgJDYgPSAoKCgkMCkpICsgMzZ8MCk7CiAgJDcgPSBIRUFQMzJbJDY+PjJdfDA7CiAgKEZVTkNUSU9OX1RBQkxFX2lpaWlbJDcgJiAzMV0oJDAsMCwwKXwwKTsKICAkOCA9IEhFQVAzMlskMT4+Ml18MDsKICAkOSA9ICgkOHwwKT09KDB8MCk7CiAgaWYgKCQ5KSB7CiAgICQkMCA9IC0xOwogIH0gZWxzZSB7CiAgIGxhYmVsID0gMzsKICB9CiB9IGVsc2UgewogIGxhYmVsID0gMzsKIH0KIGlmICgobGFiZWx8MCkgPT0gMykgewogICQxMCA9ICgoKCQwKSkgKyA0fDApOwogICQxMSA9IEhFQVAzMlskMTA+PjJdfDA7CiAgJDEyID0gKCgoJDApKSArIDh8MCk7CiAgJDEzID0gSEVBUDMyWyQxMj4+Ml18MDsKICAkMTQgPSAoJDExPj4+MCk8KCQxMz4+PjApOwogIGlmICgkMTQpIHsKICAgJDE1ID0gJDExOwogICAkMTYgPSAkMTM7CiAgICQxNyA9ICgoJDE1KSAtICgkMTYpKXwwOwogICAkMTggPSAoKCgkMCkpICsgNDB8MCk7CiAgICQxOSA9IEhFQVAzMlskMTg+PjJdfDA7CiAgIChGVU5DVElPTl9UQUJMRV9paWlpWyQxOSAmIDMxXSgkMCwkMTcsMSl8MCk7CiAgfQogICQyMCA9ICgoKCQwKSkgKyAxNnwwKTsKICBIRUFQMzJbJDIwPj4yXSA9IDA7CiAgSEVBUDMyWyQzPj4yXSA9IDA7CiAgSEVBUDMyWyQxPj4yXSA9IDA7CiAgSEVBUDMyWyQxMj4+Ml0gPSAwOwogIEhFQVAzMlskMTA+PjJdID0gMDsKICAkJDAgPSAwOwogfQogcmV0dXJuICgkJDB8MCk7Cn0KZnVuY3Rpb24gX19abndqKCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgJCQgPSAwLCAkMSA9IDAsICQyID0gMCwgJDMgPSAwLCAkNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkMSA9ICgkMHwwKT09KDApOwogJCQgPSAkMSA/IDEgOiAkMDsKIHdoaWxlKDEpIHsKICAkMiA9IChfbWFsbG9jKCQkKXwwKTsKICAkMyA9ICgkMnwwKT09KDB8MCk7CiAgaWYgKCEoJDMpKSB7CiAgIGxhYmVsID0gNjsKICAgYnJlYWs7CiAgfQogICQ0ID0gKF9fWlN0MTVnZXRfbmV3X2hhbmRsZXJ2KCl8MCk7CiAgJDUgPSAoJDR8MCk9PSgwfDApOwogIGlmICgkNSkgewogICBsYWJlbCA9IDU7CiAgIGJyZWFrOwogIH0KICBGVU5DVElPTl9UQUJMRV92WyQ0ICYgMF0oKTsKIH0KIGlmICgobGFiZWx8MCkgPT0gNSkgewogICQ2ID0gKF9fX2N4YV9hbGxvY2F0ZV9leGNlcHRpb24oNCl8MCk7CiAgX19aTlN0OWJhZF9hbGxvY0MyRXYoJDYpOwogIF9fX2N4YV90aHJvdygoJDZ8MCksKDcyfDApLCgxNnwwKSk7CiAgLy8gdW5yZWFjaGFibGU7CiB9CiBlbHNlIGlmICgobGFiZWx8MCkgPT0gNikgewogIHJldHVybiAoJDJ8MCk7CiB9CiByZXR1cm4gKDApfDA7Cn0KZnVuY3Rpb24gX19abmFqKCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgJDEgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkMSA9IChfX1pud2ooJDApfDApOwogcmV0dXJuICgkMXwwKTsKfQpmdW5jdGlvbiBfX1pkbFB2KCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogX2ZyZWUoJDApOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fWk4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9EMkV2KCQwKSB7CiAkMCA9ICQwfDA7CiB2YXIgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fWk4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRDBFdigkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIF9fWk4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9EMkV2KCQwKTsKIF9fWmRsUHYoJDApOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fWk5LMTBfX2N4eGFiaXYxMTZfX3NoaW1fdHlwZV9pbmZvNW5vb3AxRXYoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTksxMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm81bm9vcDJFdigkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm85Y2FuX2NhdGNoRVBLTlNfMTZfX3NoaW1fdHlwZV9pbmZvRVJQdigkMCwkMSwkMikgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogdmFyICQkMCA9IDAsICQkMiA9IDAsICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQzID0gMCwgJDQgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMDsKIHZhciBkZXN0ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDAsIHN0b3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIFNUQUNLVE9QID0gU1RBQ0tUT1AgKyA2NHwwOyBpZiAoKFNUQUNLVE9QfDApID49IChTVEFDS19NQVh8MCkpIGFib3J0U3RhY2tPdmVyZmxvdyg2NHwwKTsKICQzID0gc3A7CiAkNCA9IChfX1pOMTBfX2N4eGFiaXYxOGlzX2VxdWFsRVBLU3Q5dHlwZV9pbmZvUzJfYigkMCwkMSwwKXwwKTsKIGlmICgkNCkgewogICQkMiA9IDE7CiB9IGVsc2UgewogICQ1ID0gKCQxfDApPT0oMHwwKTsKICBpZiAoJDUpIHsKICAgJCQyID0gMDsKICB9IGVsc2UgewogICAkNiA9IChfX19keW5hbWljX2Nhc3QoJDEsMzIsMTYsMCl8MCk7CiAgICQ3ID0gKCQ2fDApPT0oMHwwKTsKICAgaWYgKCQ3KSB7CiAgICAkJDIgPSAwOwogICB9IGVsc2UgewogICAgJDggPSAoKCgkMykpICsgNHwwKTsKICAgIGRlc3Q9JDg7IHN0b3A9ZGVzdCs1MnwwOyBkbyB7IEhFQVAzMltkZXN0Pj4yXT0wfDA7IGRlc3Q9ZGVzdCs0fDA7IH0gd2hpbGUgKChkZXN0fDApIDwgKHN0b3B8MCkpOwogICAgSEVBUDMyWyQzPj4yXSA9ICQ2OwogICAgJDkgPSAoKCgkMykpICsgOHwwKTsKICAgIEhFQVAzMlskOT4+Ml0gPSAkMDsKICAgICQxMCA9ICgoKCQzKSkgKyAxMnwwKTsKICAgIEhFQVAzMlskMTA+PjJdID0gLTE7CiAgICAkMTEgPSAoKCgkMykpICsgNDh8MCk7CiAgICBIRUFQMzJbJDExPj4yXSA9IDE7CiAgICAkMTIgPSBIRUFQMzJbJDY+PjJdfDA7CiAgICAkMTMgPSAoKCgkMTIpKSArIDI4fDApOwogICAgJDE0ID0gSEVBUDMyWyQxMz4+Ml18MDsKICAgICQxNSA9IEhFQVAzMlskMj4+Ml18MDsKICAgIEZVTkNUSU9OX1RBQkxFX3ZpaWlpWyQxNCAmIDE1XSgkNiwkMywkMTUsMSk7CiAgICAkMTYgPSAoKCgkMykpICsgMjR8MCk7CiAgICAkMTcgPSBIRUFQMzJbJDE2Pj4yXXwwOwogICAgJDE4ID0gKCQxN3wwKT09KDEpOwogICAgaWYgKCQxOCkgewogICAgICQxOSA9ICgoKCQzKSkgKyAxNnwwKTsKICAgICAkMjAgPSBIRUFQMzJbJDE5Pj4yXXwwOwogICAgIEhFQVAzMlskMj4+Ml0gPSAkMjA7CiAgICAgJCQwID0gMTsKICAgIH0gZWxzZSB7CiAgICAgJCQwID0gMDsKICAgIH0KICAgICQkMiA9ICQkMDsKICAgfQogIH0KIH0KIFNUQUNLVE9QID0gc3A7cmV0dXJuICgkJDJ8MCk7Cn0KZnVuY3Rpb24gX19aTksxMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvMTZzZWFyY2hfYWJvdmVfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2UzRfaWIoJDAsJDEsJDIsJDMsJDQsJDUpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKICQ0ID0gJDR8MDsKICQ1ID0gJDV8MDsKIHZhciAkNiA9IDAsICQ3ID0gMCwgJDggPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkNiA9ICgoKCQxKSkgKyA4fDApOwogJDcgPSBIRUFQMzJbJDY+PjJdfDA7CiAkOCA9IChfX1pOMTBfX2N4eGFiaXYxOGlzX2VxdWFsRVBLU3Q5dHlwZV9pbmZvUzJfYigkMCwkNywkNSl8MCk7CiBpZiAoJDgpIHsKICBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yOXByb2Nlc3Nfc3RhdGljX3R5cGVfYWJvdmVfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2UzRfaSgwLCQxLCQyLCQzLCQ0KTsKIH0KIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8xNnNlYXJjaF9iZWxvd19kc3RFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQS3ZpYigkMCwkMSwkMiwkMywkNCkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogdmFyICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDAsICQyOSA9IDA7CiB2YXIgJDUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwLCAkOSA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQ1ID0gKCgoJDEpKSArIDh8MCk7CiAkNiA9IEhFQVAzMlskNT4+Ml18MDsKICQ3ID0gKF9fWk4xMF9fY3h4YWJpdjE4aXNfZXF1YWxFUEtTdDl0eXBlX2luZm9TMl9iKCQwLCQ2LCQ0KXwwKTsKIGRvIHsKICBpZiAoJDcpIHsKICAgX19aTksxMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvMjlwcm9jZXNzX3N0YXRpY190eXBlX2JlbG93X2RzdEVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVBLdmkoMCwkMSwkMiwkMyk7CiAgfSBlbHNlIHsKICAgJDggPSBIRUFQMzJbJDE+PjJdfDA7CiAgICQ5ID0gKF9fWk4xMF9fY3h4YWJpdjE4aXNfZXF1YWxFUEtTdDl0eXBlX2luZm9TMl9iKCQwLCQ4LCQ0KXwwKTsKICAgaWYgKCQ5KSB7CiAgICAkMTAgPSAoKCgkMSkpICsgMTZ8MCk7CiAgICAkMTEgPSBIRUFQMzJbJDEwPj4yXXwwOwogICAgJDEyID0gKCQxMXwwKT09KCQyfDApOwogICAgaWYgKCEoJDEyKSkgewogICAgICQxMyA9ICgoKCQxKSkgKyAyMHwwKTsKICAgICAkMTQgPSBIRUFQMzJbJDEzPj4yXXwwOwogICAgICQxNSA9ICgkMTR8MCk9PSgkMnwwKTsKICAgICBpZiAoISgkMTUpKSB7CiAgICAgICQxOCA9ICgoKCQxKSkgKyAzMnwwKTsKICAgICAgSEVBUDMyWyQxOD4+Ml0gPSAkMzsKICAgICAgSEVBUDMyWyQxMz4+Ml0gPSAkMjsKICAgICAgJDE5ID0gKCgoJDEpKSArIDQwfDApOwogICAgICAkMjAgPSBIRUFQMzJbJDE5Pj4yXXwwOwogICAgICAkMjEgPSAoKCQyMCkgKyAxKXwwOwogICAgICBIRUFQMzJbJDE5Pj4yXSA9ICQyMTsKICAgICAgJDIyID0gKCgoJDEpKSArIDM2fDApOwogICAgICAkMjMgPSBIRUFQMzJbJDIyPj4yXXwwOwogICAgICAkMjQgPSAoJDIzfDApPT0oMSk7CiAgICAgIGlmICgkMjQpIHsKICAgICAgICQyNSA9ICgoKCQxKSkgKyAyNHwwKTsKICAgICAgICQyNiA9IEhFQVAzMlskMjU+PjJdfDA7CiAgICAgICAkMjcgPSAoJDI2fDApPT0oMik7CiAgICAgICBpZiAoJDI3KSB7CiAgICAgICAgJDI4ID0gKCgoJDEpKSArIDU0fDApOwogICAgICAgIEhFQVA4WyQyOD4+MF0gPSAxOwogICAgICAgfQogICAgICB9CiAgICAgICQyOSA9ICgoKCQxKSkgKyA0NHwwKTsKICAgICAgSEVBUDMyWyQyOT4+Ml0gPSA0OwogICAgICBicmVhazsKICAgICB9CiAgICB9CiAgICAkMTYgPSAoJDN8MCk9PSgxKTsKICAgIGlmICgkMTYpIHsKICAgICAkMTcgPSAoKCgkMSkpICsgMzJ8MCk7CiAgICAgSEVBUDMyWyQxNz4+Ml0gPSAxOwogICAgfQogICB9CiAgfQogfSB3aGlsZSgwKTsKIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yN2hhc191bmFtYmlndW91c19wdWJsaWNfYmFzZUVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVB2aSgkMCwkMSwkMiwkMykgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogdmFyICQ0ID0gMCwgJDUgPSAwLCAkNiA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQ0ID0gKCgoJDEpKSArIDh8MCk7CiAkNSA9IEhFQVAzMlskND4+Ml18MDsKICQ2ID0gKF9fWk4xMF9fY3h4YWJpdjE4aXNfZXF1YWxFUEtTdDl0eXBlX2luZm9TMl9iKCQwLCQ1LDApfDApOwogaWYgKCQ2KSB7CiAgX19aTksxMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvMjRwcm9jZXNzX2ZvdW5kX2Jhc2VfY2xhc3NFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQdmkoMCwkMSwkMiwkMyk7CiB9CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTjEwX19jeHhhYml2MThpc19lcXVhbEVQS1N0OXR5cGVfaW5mb1MyX2IoJDAsJDEsJDIpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKIHZhciAkMyA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQzID0gKCQwfDApPT0oJDF8MCk7CiByZXR1cm4gKCQzfDApOwp9CmZ1bmN0aW9uIF9fWk5LMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mbzI0cHJvY2Vzc19mb3VuZF9iYXNlX2NsYXNzRVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUHZpKCQwLCQxLCQyLCQzKSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDE0ID0gMCwgJDE1ID0gMCwgJDE2ID0gMCwgJDE3ID0gMCwgJDQgPSAwLCAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogJDQgPSAoKCgkMSkpICsgMTZ8MCk7CiAkNSA9IEhFQVAzMlskND4+Ml18MDsKICQ2ID0gKCQ1fDApPT0oMHwwKTsKIGRvIHsKICBpZiAoJDYpIHsKICAgSEVBUDMyWyQ0Pj4yXSA9ICQyOwogICAkNyA9ICgoKCQxKSkgKyAyNHwwKTsKICAgSEVBUDMyWyQ3Pj4yXSA9ICQzOwogICAkOCA9ICgoKCQxKSkgKyAzNnwwKTsKICAgSEVBUDMyWyQ4Pj4yXSA9IDE7CiAgfSBlbHNlIHsKICAgJDkgPSAoJDV8MCk9PSgkMnwwKTsKICAgaWYgKCEoJDkpKSB7CiAgICAkMTMgPSAoKCgkMSkpICsgMzZ8MCk7CiAgICAkMTQgPSBIRUFQMzJbJDEzPj4yXXwwOwogICAgJDE1ID0gKCgkMTQpICsgMSl8MDsKICAgIEhFQVAzMlskMTM+PjJdID0gJDE1OwogICAgJDE2ID0gKCgoJDEpKSArIDI0fDApOwogICAgSEVBUDMyWyQxNj4+Ml0gPSAyOwogICAgJDE3ID0gKCgoJDEpKSArIDU0fDApOwogICAgSEVBUDhbJDE3Pj4wXSA9IDE7CiAgICBicmVhazsKICAgfQogICAkMTAgPSAoKCgkMSkpICsgMjR8MCk7CiAgICQxMSA9IEhFQVAzMlskMTA+PjJdfDA7CiAgICQxMiA9ICgkMTF8MCk9PSgyKTsKICAgaWYgKCQxMikgewogICAgSEVBUDMyWyQxMD4+Ml0gPSAkMzsKICAgfQogIH0KIH0gd2hpbGUoMCk7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTksxMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvMjlwcm9jZXNzX3N0YXRpY190eXBlX2JlbG93X2RzdEVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVBLdmkoJDAsJDEsJDIsJDMpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKIHZhciAkNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkNCA9ICgoKCQxKSkgKyA0fDApOwogJDUgPSBIRUFQMzJbJDQ+PjJdfDA7CiAkNiA9ICgkNXwwKT09KCQyfDApOwogaWYgKCQ2KSB7CiAgJDcgPSAoKCgkMSkpICsgMjh8MCk7CiAgJDggPSBIRUFQMzJbJDc+PjJdfDA7CiAgJDkgPSAoJDh8MCk9PSgxKTsKICBpZiAoISgkOSkpIHsKICAgSEVBUDMyWyQ3Pj4yXSA9ICQzOwogIH0KIH0KIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yOXByb2Nlc3Nfc3RhdGljX3R5cGVfYWJvdmVfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2UzRfaSgkMCwkMSwkMiwkMywkNCkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogdmFyICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDAsICQyOCA9IDAsICQyOSA9IDA7CiB2YXIgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDUgPSAwLCAkNiA9IDAsICQ3ID0gMCwgJDggPSAwLCAkOSA9IDAsICRvciRjb25kID0gMCwgJG9yJGNvbmQyMiA9IDAsIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKICQ1ID0gKCgoJDEpKSArIDUzfDApOwogSEVBUDhbJDU+PjBdID0gMTsKICQ2ID0gKCgoJDEpKSArIDR8MCk7CiAkNyA9IEhFQVAzMlskNj4+Ml18MDsKICQ4ID0gKCQ3fDApPT0oJDN8MCk7CiBkbyB7CiAgaWYgKCQ4KSB7CiAgICQ5ID0gKCgoJDEpKSArIDUyfDApOwogICBIRUFQOFskOT4+MF0gPSAxOwogICAkMTAgPSAoKCgkMSkpICsgMTZ8MCk7CiAgICQxMSA9IEhFQVAzMlskMTA+PjJdfDA7CiAgICQxMiA9ICgkMTF8MCk9PSgwfDApOwogICBpZiAoJDEyKSB7CiAgICBIRUFQMzJbJDEwPj4yXSA9ICQyOwogICAgJDEzID0gKCgoJDEpKSArIDI0fDApOwogICAgSEVBUDMyWyQxMz4+Ml0gPSAkNDsKICAgICQxNCA9ICgoKCQxKSkgKyAzNnwwKTsKICAgIEhFQVAzMlskMTQ+PjJdID0gMTsKICAgICQxNSA9ICgoKCQxKSkgKyA0OHwwKTsKICAgICQxNiA9IEhFQVAzMlskMTU+PjJdfDA7CiAgICAkMTcgPSAoJDE2fDApPT0oMSk7CiAgICAkMTggPSAoJDR8MCk9PSgxKTsKICAgICRvciRjb25kID0gJDE3ICYgJDE4OwogICAgaWYgKCEoJG9yJGNvbmQpKSB7CiAgICAgYnJlYWs7CiAgICB9CiAgICAkMTkgPSAoKCgkMSkpICsgNTR8MCk7CiAgICBIRUFQOFskMTk+PjBdID0gMTsKICAgIGJyZWFrOwogICB9CiAgICQyMCA9ICgkMTF8MCk9PSgkMnwwKTsKICAgaWYgKCEoJDIwKSkgewogICAgJDMwID0gKCgoJDEpKSArIDM2fDApOwogICAgJDMxID0gSEVBUDMyWyQzMD4+Ml18MDsKICAgICQzMiA9ICgoJDMxKSArIDEpfDA7CiAgICBIRUFQMzJbJDMwPj4yXSA9ICQzMjsKICAgICQzMyA9ICgoKCQxKSkgKyA1NHwwKTsKICAgIEhFQVA4WyQzMz4+MF0gPSAxOwogICAgYnJlYWs7CiAgIH0KICAgJDIxID0gKCgoJDEpKSArIDI0fDApOwogICAkMjIgPSBIRUFQMzJbJDIxPj4yXXwwOwogICAkMjMgPSAoJDIyfDApPT0oMik7CiAgIGlmICgkMjMpIHsKICAgIEhFQVAzMlskMjE+PjJdID0gJDQ7CiAgICAkMjcgPSAkNDsKICAgfSBlbHNlIHsKICAgICQyNyA9ICQyMjsKICAgfQogICAkMjQgPSAoKCgkMSkpICsgNDh8MCk7CiAgICQyNSA9IEhFQVAzMlskMjQ+PjJdfDA7CiAgICQyNiA9ICgkMjV8MCk9PSgxKTsKICAgJDI4ID0gKCQyN3wwKT09KDEpOwogICAkb3IkY29uZDIyID0gJDI2ICYgJDI4OwogICBpZiAoJG9yJGNvbmQyMikgewogICAgJDI5ID0gKCgoJDEpKSArIDU0fDApOwogICAgSEVBUDhbJDI5Pj4wXSA9IDE7CiAgIH0KICB9CiB9IHdoaWxlKDApOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fX2R5bmFtaWNfY2FzdCgkMCwkMSwkMiwkMykgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogdmFyICQkID0gMCwgJCQwID0gMCwgJCQzMyA9IDAsICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDA7CiB2YXIgJDI3ID0gMCwgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMCwgJDM1ID0gMCwgJDM2ID0gMCwgJDM3ID0gMCwgJDM4ID0gMCwgJDM5ID0gMCwgJDQgPSAwLCAkNDAgPSAwLCAkNDEgPSAwLCAkNDIgPSAwLCAkNDMgPSAwLCAkNDQgPSAwLCAkNDUgPSAwOwogdmFyICQ0NiA9IDAsICQ0NyA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCAkb3IkY29uZCA9IDAsICRvciRjb25kMjggPSAwLCAkb3IkY29uZDMwID0gMCwgJG9yJGNvbmQzMiA9IDAsIGRlc3QgPSAwLCBsYWJlbCA9IDAsIHNwID0gMCwgc3RvcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogU1RBQ0tUT1AgPSBTVEFDS1RPUCArIDY0fDA7IGlmICgoU1RBQ0tUT1B8MCkgPj0gKFNUQUNLX01BWHwwKSkgYWJvcnRTdGFja092ZXJmbG93KDY0fDApOwogJDQgPSBzcDsKICQ1ID0gSEVBUDMyWyQwPj4yXXwwOwogJDYgPSAoKCgkNSkpICsgLTh8MCk7CiAkNyA9IEhFQVAzMlskNj4+Ml18MDsKICQ4ID0gKCgkMCkgKyAoJDcpfDApOwogJDkgPSAoKCgkNSkpICsgLTR8MCk7CiAkMTAgPSBIRUFQMzJbJDk+PjJdfDA7CiBIRUFQMzJbJDQ+PjJdID0gJDI7CiAkMTEgPSAoKCgkNCkpICsgNHwwKTsKIEhFQVAzMlskMTE+PjJdID0gJDA7CiAkMTIgPSAoKCgkNCkpICsgOHwwKTsKIEhFQVAzMlskMTI+PjJdID0gJDE7CiAkMTMgPSAoKCgkNCkpICsgMTJ8MCk7CiBIRUFQMzJbJDEzPj4yXSA9ICQzOwogJDE0ID0gKCgoJDQpKSArIDE2fDApOwogJDE1ID0gKCgoJDQpKSArIDIwfDApOwogJDE2ID0gKCgoJDQpKSArIDI0fDApOwogJDE3ID0gKCgoJDQpKSArIDI4fDApOwogJDE4ID0gKCgoJDQpKSArIDMyfDApOwogJDE5ID0gKCgoJDQpKSArIDQwfDApOwogZGVzdD0kMTQ7IHN0b3A9ZGVzdCszNnwwOyBkbyB7IEhFQVAzMltkZXN0Pj4yXT0wfDA7IGRlc3Q9ZGVzdCs0fDA7IH0gd2hpbGUgKChkZXN0fDApIDwgKHN0b3B8MCkpO0hFQVAxNlskMTQrMzY+PjFdPTB8MDtIRUFQOFskMTQrMzg+PjBdPTB8MDsKICQyMCA9IChfX1pOMTBfX2N4eGFiaXYxOGlzX2VxdWFsRVBLU3Q5dHlwZV9pbmZvUzJfYigkMTAsJDIsMCl8MCk7CiBMMTogZG8gewogIGlmICgkMjApIHsKICAgJDIxID0gKCgoJDQpKSArIDQ4fDApOwogICBIRUFQMzJbJDIxPj4yXSA9IDE7CiAgICQyMiA9IEhFQVAzMlskMTA+PjJdfDA7CiAgICQyMyA9ICgoKCQyMikpICsgMjB8MCk7CiAgICQyNCA9IEhFQVAzMlskMjM+PjJdfDA7CiAgIEZVTkNUSU9OX1RBQkxFX3ZpaWlpaWlbJDI0ICYgMTVdKCQxMCwkNCwkOCwkOCwxLDApOwogICAkMjUgPSBIRUFQMzJbJDE2Pj4yXXwwOwogICAkMjYgPSAoJDI1fDApPT0oMSk7CiAgICQkID0gJDI2ID8gJDggOiAwOwogICAkJDAgPSAkJDsKICB9IGVsc2UgewogICAkMjcgPSAoKCgkNCkpICsgMzZ8MCk7CiAgICQyOCA9IEhFQVAzMlskMTA+PjJdfDA7CiAgICQyOSA9ICgoKCQyOCkpICsgMjR8MCk7CiAgICQzMCA9IEhFQVAzMlskMjk+PjJdfDA7CiAgIEZVTkNUSU9OX1RBQkxFX3ZpaWlpaVskMzAgJiAxNV0oJDEwLCQ0LCQ4LDEsMCk7CiAgICQzMSA9IEhFQVAzMlskMjc+PjJdfDA7CiAgIHN3aXRjaCAoJDMxfDApIHsKICAgY2FzZSAwOiAgewogICAgJDMyID0gSEVBUDMyWyQxOT4+Ml18MDsKICAgICQzMyA9ICgkMzJ8MCk9PSgxKTsKICAgICQzNCA9IEhFQVAzMlskMTc+PjJdfDA7CiAgICAkMzUgPSAoJDM0fDApPT0oMSk7CiAgICAkb3IkY29uZCA9ICQzMyAmICQzNTsKICAgICQzNiA9IEhFQVAzMlskMTg+PjJdfDA7CiAgICAkMzcgPSAoJDM2fDApPT0oMSk7CiAgICAkb3IkY29uZDI4ID0gJG9yJGNvbmQgJiAkMzc7CiAgICAkMzggPSBIRUFQMzJbJDE1Pj4yXXwwOwogICAgJCQzMyA9ICRvciRjb25kMjggPyAkMzggOiAwOwogICAgJCQwID0gJCQzMzsKICAgIGJyZWFrIEwxOwogICAgYnJlYWs7CiAgIH0KICAgY2FzZSAxOiAgewogICAgYnJlYWs7CiAgIH0KICAgZGVmYXVsdDogewogICAgJCQwID0gMDsKICAgIGJyZWFrIEwxOwogICB9CiAgIH0KICAgJDM5ID0gSEVBUDMyWyQxNj4+Ml18MDsKICAgJDQwID0gKCQzOXwwKT09KDEpOwogICBpZiAoISgkNDApKSB7CiAgICAkNDEgPSBIRUFQMzJbJDE5Pj4yXXwwOwogICAgJDQyID0gKCQ0MXwwKT09KDApOwogICAgJDQzID0gSEVBUDMyWyQxNz4+Ml18MDsKICAgICQ0NCA9ICgkNDN8MCk9PSgxKTsKICAgICRvciRjb25kMzAgPSAkNDIgJiAkNDQ7CiAgICAkNDUgPSBIRUFQMzJbJDE4Pj4yXXwwOwogICAgJDQ2ID0gKCQ0NXwwKT09KDEpOwogICAgJG9yJGNvbmQzMiA9ICRvciRjb25kMzAgJiAkNDY7CiAgICBpZiAoISgkb3IkY29uZDMyKSkgewogICAgICQkMCA9IDA7CiAgICAgYnJlYWs7CiAgICB9CiAgIH0KICAgJDQ3ID0gSEVBUDMyWyQxND4+Ml18MDsKICAgJCQwID0gJDQ3OwogIH0KIH0gd2hpbGUoMCk7CiBTVEFDS1RPUCA9IHNwO3JldHVybiAoJCQwfDApOwp9CmZ1bmN0aW9uIF9fWk4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRDBFdigkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIF9fWk4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9EMkV2KCQwKTsKIF9fWmRsUHYoJDApOwogcmV0dXJuOwp9CmZ1bmN0aW9uIF9fWk5LMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mbzE2c2VhcmNoX2Fib3ZlX2RzdEVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVBLdlM0X2liKCQwLCQxLCQyLCQzLCQ0LCQ1KSB7CiAkMCA9ICQwfDA7CiAkMSA9ICQxfDA7CiAkMiA9ICQyfDA7CiAkMyA9ICQzfDA7CiAkNCA9ICQ0fDA7CiAkNSA9ICQ1fDA7CiB2YXIgJDEwID0gMCwgJDExID0gMCwgJDEyID0gMCwgJDEzID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkNiA9ICgoKCQxKSkgKyA4fDApOwogJDcgPSBIRUFQMzJbJDY+PjJdfDA7CiAkOCA9IChfX1pOMTBfX2N4eGFiaXYxOGlzX2VxdWFsRVBLU3Q5dHlwZV9pbmZvUzJfYigkMCwkNywkNSl8MCk7CiBpZiAoJDgpIHsKICBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yOXByb2Nlc3Nfc3RhdGljX3R5cGVfYWJvdmVfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2UzRfaSgwLCQxLCQyLCQzLCQ0KTsKIH0gZWxzZSB7CiAgJDkgPSAoKCgkMCkpICsgOHwwKTsKICAkMTAgPSBIRUFQMzJbJDk+PjJdfDA7CiAgJDExID0gSEVBUDMyWyQxMD4+Ml18MDsKICAkMTIgPSAoKCgkMTEpKSArIDIwfDApOwogICQxMyA9IEhFQVAzMlskMTI+PjJdfDA7CiAgRlVOQ1RJT05fVEFCTEVfdmlpaWlpaVskMTMgJiAxNV0oJDEwLCQxLCQyLCQzLCQ0LCQ1KTsKIH0KIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOSzEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm8xNnNlYXJjaF9iZWxvd19kc3RFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQS3ZpYigkMCwkMSwkMiwkMywkNCkgewogJDAgPSAkMHwwOwogJDEgPSAkMXwwOwogJDIgPSAkMnwwOwogJDMgPSAkM3wwOwogJDQgPSAkNHwwOwogdmFyICQkMDM3JG9mZjAzOCA9IDAsICQkMDM3JG9mZjAzOSA9IDAsICQxMCA9IDAsICQxMSA9IDAsICQxMiA9IDAsICQxMyA9IDAsICQxNCA9IDAsICQxNSA9IDAsICQxNiA9IDAsICQxNyA9IDAsICQxOCA9IDAsICQxOSA9IDAsICQyMCA9IDAsICQyMSA9IDAsICQyMiA9IDAsICQyMyA9IDAsICQyNCA9IDAsICQyNSA9IDAsICQyNiA9IDAsICQyNyA9IDA7CiB2YXIgJDI4ID0gMCwgJDI5ID0gMCwgJDMwID0gMCwgJDMxID0gMCwgJDMyID0gMCwgJDMzID0gMCwgJDM0ID0gMCwgJDM1ID0gMCwgJDM2ID0gMCwgJDM3ID0gMCwgJDM4ID0gMCwgJDM5ID0gMCwgJDQwID0gMCwgJDQxID0gMCwgJDQyID0gMCwgJDQzID0gMCwgJDQ0ID0gMCwgJDQ1ID0gMCwgJDQ2ID0gMCwgJDQ3ID0gMDsKIHZhciAkNSA9IDAsICQ2ID0gMCwgJDcgPSAwLCAkOCA9IDAsICQ5ID0gMCwgbGFiZWwgPSAwLCBzcCA9IDA7CiBzcCA9IFNUQUNLVE9QOwogJDUgPSAoKCgkMSkpICsgOHwwKTsKICQ2ID0gSEVBUDMyWyQ1Pj4yXXwwOwogJDcgPSAoX19aTjEwX19jeHhhYml2MThpc19lcXVhbEVQS1N0OXR5cGVfaW5mb1MyX2IoJDAsJDYsJDQpfDApOwogZG8gewogIGlmICgkNykgewogICBfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yOXByb2Nlc3Nfc3RhdGljX3R5cGVfYmVsb3dfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2aSgwLCQxLCQyLCQzKTsKICB9IGVsc2UgewogICAkOCA9IEhFQVAzMlskMT4+Ml18MDsKICAgJDkgPSAoX19aTjEwX19jeHhhYml2MThpc19lcXVhbEVQS1N0OXR5cGVfaW5mb1MyX2IoJDAsJDgsJDQpfDApOwogICBpZiAoISgkOSkpIHsKICAgICQ0MyA9ICgoKCQwKSkgKyA4fDApOwogICAgJDQ0ID0gSEVBUDMyWyQ0Mz4+Ml18MDsKICAgICQ0NSA9IEhFQVAzMlskNDQ+PjJdfDA7CiAgICAkNDYgPSAoKCgkNDUpKSArIDI0fDApOwogICAgJDQ3ID0gSEVBUDMyWyQ0Nj4+Ml18MDsKICAgIEZVTkNUSU9OX1RBQkxFX3ZpaWlpaVskNDcgJiAxNV0oJDQ0LCQxLCQyLCQzLCQ0KTsKICAgIGJyZWFrOwogICB9CiAgICQxMCA9ICgoKCQxKSkgKyAxNnwwKTsKICAgJDExID0gSEVBUDMyWyQxMD4+Ml18MDsKICAgJDEyID0gKCQxMXwwKT09KCQyfDApOwogICBpZiAoISgkMTIpKSB7CiAgICAkMTMgPSAoKCgkMSkpICsgMjB8MCk7CiAgICAkMTQgPSBIRUFQMzJbJDEzPj4yXXwwOwogICAgJDE1ID0gKCQxNHwwKT09KCQyfDApOwogICAgaWYgKCEoJDE1KSkgewogICAgICQxOCA9ICgoKCQxKSkgKyAzMnwwKTsKICAgICBIRUFQMzJbJDE4Pj4yXSA9ICQzOwogICAgICQxOSA9ICgoKCQxKSkgKyA0NHwwKTsKICAgICAkMjAgPSBIRUFQMzJbJDE5Pj4yXXwwOwogICAgICQyMSA9ICgkMjB8MCk9PSg0KTsKICAgICBpZiAoJDIxKSB7CiAgICAgIGJyZWFrOwogICAgIH0KICAgICAkMjIgPSAoKCgkMSkpICsgNTJ8MCk7CiAgICAgSEVBUDhbJDIyPj4wXSA9IDA7CiAgICAgJDIzID0gKCgoJDEpKSArIDUzfDApOwogICAgIEhFQVA4WyQyMz4+MF0gPSAwOwogICAgICQyNCA9ICgoKCQwKSkgKyA4fDApOwogICAgICQyNSA9IEhFQVAzMlskMjQ+PjJdfDA7CiAgICAgJDI2ID0gSEVBUDMyWyQyNT4+Ml18MDsKICAgICAkMjcgPSAoKCgkMjYpKSArIDIwfDApOwogICAgICQyOCA9IEhFQVAzMlskMjc+PjJdfDA7CiAgICAgRlVOQ1RJT05fVEFCTEVfdmlpaWlpaVskMjggJiAxNV0oJDI1LCQxLCQyLCQyLDEsJDQpOwogICAgICQyOSA9IEhFQVA4WyQyMz4+MF18MDsKICAgICAkMzAgPSAoJDI5PDwyND4+MjQpPT0oMCk7CiAgICAgaWYgKCQzMCkgewogICAgICAkJDAzNyRvZmYwMzggPSA0OwogICAgICBsYWJlbCA9IDExOwogICAgIH0gZWxzZSB7CiAgICAgICQzMSA9IEhFQVA4WyQyMj4+MF18MDsKICAgICAgJDMyID0gKCQzMTw8MjQ+PjI0KT09KDApOwogICAgICBpZiAoJDMyKSB7CiAgICAgICAkJDAzNyRvZmYwMzggPSAzOwogICAgICAgbGFiZWwgPSAxMTsKICAgICAgfSBlbHNlIHsKICAgICAgICQkMDM3JG9mZjAzOSA9IDM7CiAgICAgIH0KICAgICB9CiAgICAgaWYgKChsYWJlbHwwKSA9PSAxMSkgewogICAgICBIRUFQMzJbJDEzPj4yXSA9ICQyOwogICAgICAkMzMgPSAoKCgkMSkpICsgNDB8MCk7CiAgICAgICQzNCA9IEhFQVAzMlskMzM+PjJdfDA7CiAgICAgICQzNSA9ICgoJDM0KSArIDEpfDA7CiAgICAgIEhFQVAzMlskMzM+PjJdID0gJDM1OwogICAgICAkMzYgPSAoKCgkMSkpICsgMzZ8MCk7CiAgICAgICQzNyA9IEhFQVAzMlskMzY+PjJdfDA7CiAgICAgICQzOCA9ICgkMzd8MCk9PSgxKTsKICAgICAgaWYgKCQzOCkgewogICAgICAgJDM5ID0gKCgoJDEpKSArIDI0fDApOwogICAgICAgJDQwID0gSEVBUDMyWyQzOT4+Ml18MDsKICAgICAgICQ0MSA9ICgkNDB8MCk9PSgyKTsKICAgICAgIGlmICgkNDEpIHsKICAgICAgICAkNDIgPSAoKCgkMSkpICsgNTR8MCk7CiAgICAgICAgSEVBUDhbJDQyPj4wXSA9IDE7CiAgICAgICAgJCQwMzckb2ZmMDM5ID0gJCQwMzckb2ZmMDM4OwogICAgICAgfSBlbHNlIHsKICAgICAgICAkJDAzNyRvZmYwMzkgPSAkJDAzNyRvZmYwMzg7CiAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAkJDAzNyRvZmYwMzkgPSAkJDAzNyRvZmYwMzg7CiAgICAgIH0KICAgICB9CiAgICAgSEVBUDMyWyQxOT4+Ml0gPSAkJDAzNyRvZmYwMzk7CiAgICAgYnJlYWs7CiAgICB9CiAgIH0KICAgJDE2ID0gKCQzfDApPT0oMSk7CiAgIGlmICgkMTYpIHsKICAgICQxNyA9ICgoKCQxKSkgKyAzMnwwKTsKICAgIEhFQVAzMlskMTc+PjJdID0gMTsKICAgfQogIH0KIH0gd2hpbGUoMCk7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTksxMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvMjdoYXNfdW5hbWJpZ3VvdXNfcHVibGljX2Jhc2VFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQdmkoJDAsJDEsJDIsJDMpIHsKICQwID0gJDB8MDsKICQxID0gJDF8MDsKICQyID0gJDJ8MDsKICQzID0gJDN8MDsKIHZhciAkMTAgPSAwLCAkMTEgPSAwLCAkNCA9IDAsICQ1ID0gMCwgJDYgPSAwLCAkNyA9IDAsICQ4ID0gMCwgJDkgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkNCA9ICgoKCQxKSkgKyA4fDApOwogJDUgPSBIRUFQMzJbJDQ+PjJdfDA7CiAkNiA9IChfX1pOMTBfX2N4eGFiaXYxOGlzX2VxdWFsRVBLU3Q5dHlwZV9pbmZvUzJfYigkMCwkNSwwKXwwKTsKIGlmICgkNikgewogIF9fWk5LMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mbzI0cHJvY2Vzc19mb3VuZF9iYXNlX2NsYXNzRVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUHZpKDAsJDEsJDIsJDMpOwogfSBlbHNlIHsKICAkNyA9ICgoKCQwKSkgKyA4fDApOwogICQ4ID0gSEVBUDMyWyQ3Pj4yXXwwOwogICQ5ID0gSEVBUDMyWyQ4Pj4yXXwwOwogICQxMCA9ICgoKCQ5KSkgKyAyOHwwKTsKICAkMTEgPSBIRUFQMzJbJDEwPj4yXXwwOwogIEZVTkNUSU9OX1RBQkxFX3ZpaWlpWyQxMSAmIDE1XSgkOCwkMSwkMiwkMyk7CiB9CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTlN0OXR5cGVfaW5mb0QyRXYoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTlN0OWJhZF9hbGxvY0QyRXYoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiByZXR1cm47Cn0KZnVuY3Rpb24gX19aTlN0OWJhZF9hbGxvY0QwRXYoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiBfX1pOU3Q5YmFkX2FsbG9jRDJFdigkMCk7CiBfX1pkbFB2KCQwKTsKIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOS1N0OWJhZF9hbGxvYzR3aGF0RXYoJDApIHsKICQwID0gJDB8MDsKIHZhciBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiByZXR1cm4gKDQ1MHwwKTsKfQpmdW5jdGlvbiBfX1pOU3Q5ZXhjZXB0aW9uRDJFdigkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIHJldHVybjsKfQpmdW5jdGlvbiBfX1pOU3Q5YmFkX2FsbG9jQzJFdigkMCkgewogJDAgPSAkMHwwOwogdmFyIGxhYmVsID0gMCwgc3AgPSAwOwogc3AgPSBTVEFDS1RPUDsKIEhFQVAzMlskMD4+Ml0gPSAoMzA4KTsKIHJldHVybjsKfQpmdW5jdGlvbiBfX1pTdDE1Z2V0X25ld19oYW5kbGVydigpIHsKIHZhciAkMCA9IDAsICQxID0gMCwgJDIgPSAwLCBsYWJlbCA9IDAsIHNwID0gMDsKIHNwID0gU1RBQ0tUT1A7CiAkMCA9IEhFQVAzMlsyNjFdfDA7CiAkMSA9ICgoJDApICsgMCl8MDsKIEhFQVAzMlsyNjFdID0gJDE7CiAkMiA9ICQwOwogcmV0dXJuICgkMnwwKTsKfQpmdW5jdGlvbiBydW5Qb3N0U2V0cygpIHsKfQpmdW5jdGlvbiBfbWVtY3B5KGRlc3QsIHNyYywgbnVtKSB7CiAgICBkZXN0ID0gZGVzdHwwOyBzcmMgPSBzcmN8MDsgbnVtID0gbnVtfDA7CiAgICB2YXIgcmV0ID0gMDsKICAgIHZhciBhbGlnbmVkX2Rlc3RfZW5kID0gMDsKICAgIHZhciBibG9ja19hbGlnbmVkX2Rlc3RfZW5kID0gMDsKICAgIHZhciBkZXN0X2VuZCA9IDA7CiAgICAvLyBUZXN0IGFnYWluc3QgYSBiZW5jaG1hcmtlZCBjdXRvZmYgbGltaXQgZm9yIHdoZW4gSEVBUFU4LnNldCgpIGJlY29tZXMgZmFzdGVyIHRvIHVzZS4KICAgIGlmICgobnVtfDApID49CiAgICAgIDgxOTIKICAgICkgewogICAgICByZXR1cm4gX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyhkZXN0fDAsIHNyY3wwLCBudW18MCl8MDsKICAgIH0KCiAgICByZXQgPSBkZXN0fDA7CiAgICBkZXN0X2VuZCA9IChkZXN0ICsgbnVtKXwwOwogICAgaWYgKChkZXN0JjMpID09IChzcmMmMykpIHsKICAgICAgLy8gVGhlIGluaXRpYWwgdW5hbGlnbmVkIDwgNC1ieXRlIGZyb250LgogICAgICB3aGlsZSAoZGVzdCAmIDMpIHsKICAgICAgICBpZiAoKG51bXwwKSA9PSAwKSByZXR1cm4gcmV0fDA7CiAgICAgICAgSEVBUDhbKChkZXN0KT4+MCldPSgoSEVBUDhbKChzcmMpPj4wKV0pfDApOwogICAgICAgIGRlc3QgPSAoZGVzdCsxKXwwOwogICAgICAgIHNyYyA9IChzcmMrMSl8MDsKICAgICAgICBudW0gPSAobnVtLTEpfDA7CiAgICAgIH0KICAgICAgYWxpZ25lZF9kZXN0X2VuZCA9IChkZXN0X2VuZCAmIC00KXwwOwogICAgICBibG9ja19hbGlnbmVkX2Rlc3RfZW5kID0gKGFsaWduZWRfZGVzdF9lbmQgLSA2NCl8MDsKICAgICAgd2hpbGUgKChkZXN0fDApIDw9IChibG9ja19hbGlnbmVkX2Rlc3RfZW5kfDApICkgewogICAgICAgIEhFQVAzMlsoKGRlc3QpPj4yKV09KChIRUFQMzJbKChzcmMpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoNCkpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoNCkpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoOCkpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoOCkpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoMTIpKT4+MildPSgoSEVBUDMyWygoKHNyYykrKDEyKSk+PjIpXSl8MCk7CiAgICAgICAgSEVBUDMyWygoKGRlc3QpKygxNikpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoMTYpKT4+MildKXwwKTsKICAgICAgICBIRUFQMzJbKCgoZGVzdCkrKDIwKSk+PjIpXT0oKEhFQVAzMlsoKChzcmMpKygyMCkpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoMjQpKT4+MildPSgoSEVBUDMyWygoKHNyYykrKDI0KSk+PjIpXSl8MCk7CiAgICAgICAgSEVBUDMyWygoKGRlc3QpKygyOCkpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoMjgpKT4+MildKXwwKTsKICAgICAgICBIRUFQMzJbKCgoZGVzdCkrKDMyKSk+PjIpXT0oKEhFQVAzMlsoKChzcmMpKygzMikpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoMzYpKT4+MildPSgoSEVBUDMyWygoKHNyYykrKDM2KSk+PjIpXSl8MCk7CiAgICAgICAgSEVBUDMyWygoKGRlc3QpKyg0MCkpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoNDApKT4+MildKXwwKTsKICAgICAgICBIRUFQMzJbKCgoZGVzdCkrKDQ0KSk+PjIpXT0oKEhFQVAzMlsoKChzcmMpKyg0NCkpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoNDgpKT4+MildPSgoSEVBUDMyWygoKHNyYykrKDQ4KSk+PjIpXSl8MCk7CiAgICAgICAgSEVBUDMyWygoKGRlc3QpKyg1MikpPj4yKV09KChIRUFQMzJbKCgoc3JjKSsoNTIpKT4+MildKXwwKTsKICAgICAgICBIRUFQMzJbKCgoZGVzdCkrKDU2KSk+PjIpXT0oKEhFQVAzMlsoKChzcmMpKyg1NikpPj4yKV0pfDApOwogICAgICAgIEhFQVAzMlsoKChkZXN0KSsoNjApKT4+MildPSgoSEVBUDMyWygoKHNyYykrKDYwKSk+PjIpXSl8MCk7CiAgICAgICAgZGVzdCA9IChkZXN0KzY0KXwwOwogICAgICAgIHNyYyA9IChzcmMrNjQpfDA7CiAgICAgIH0KICAgICAgd2hpbGUgKChkZXN0fDApIDwgKGFsaWduZWRfZGVzdF9lbmR8MCkgKSB7CiAgICAgICAgSEVBUDMyWygoZGVzdCk+PjIpXT0oKEhFQVAzMlsoKHNyYyk+PjIpXSl8MCk7CiAgICAgICAgZGVzdCA9IChkZXN0KzQpfDA7CiAgICAgICAgc3JjID0gKHNyYys0KXwwOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBJbiB0aGUgdW5hbGlnbmVkIGNvcHkgY2FzZSwgdW5yb2xsIGEgYml0IGFzIHdlbGwuCiAgICAgIGFsaWduZWRfZGVzdF9lbmQgPSAoZGVzdF9lbmQgLSA0KXwwOwogICAgICB3aGlsZSAoKGRlc3R8MCkgPCAoYWxpZ25lZF9kZXN0X2VuZHwwKSApIHsKICAgICAgICBIRUFQOFsoKGRlc3QpPj4wKV09KChIRUFQOFsoKHNyYyk+PjApXSl8MCk7CiAgICAgICAgSEVBUDhbKCgoZGVzdCkrKDEpKT4+MCldPSgoSEVBUDhbKCgoc3JjKSsoMSkpPj4wKV0pfDApOwogICAgICAgIEhFQVA4WygoKGRlc3QpKygyKSk+PjApXT0oKEhFQVA4WygoKHNyYykrKDIpKT4+MCldKXwwKTsKICAgICAgICBIRUFQOFsoKChkZXN0KSsoMykpPj4wKV09KChIRUFQOFsoKChzcmMpKygzKSk+PjApXSl8MCk7CiAgICAgICAgZGVzdCA9IChkZXN0KzQpfDA7CiAgICAgICAgc3JjID0gKHNyYys0KXwwOwogICAgICB9CiAgICB9CiAgICAvLyBUaGUgcmVtYWluaW5nIHVuYWxpZ25lZCA8IDQgYnl0ZSB0YWlsLgogICAgd2hpbGUgKChkZXN0fDApIDwgKGRlc3RfZW5kfDApKSB7CiAgICAgIEhFQVA4WygoZGVzdCk+PjApXT0oKEhFQVA4Wygoc3JjKT4+MCldKXwwKTsKICAgICAgZGVzdCA9IChkZXN0KzEpfDA7CiAgICAgIHNyYyA9IChzcmMrMSl8MDsKICAgIH0KICAgIHJldHVybiByZXR8MDsKfQpmdW5jdGlvbiBfbWVtc2V0KHB0ciwgdmFsdWUsIG51bSkgewogICAgcHRyID0gcHRyfDA7IHZhbHVlID0gdmFsdWV8MDsgbnVtID0gbnVtfDA7CiAgICB2YXIgZW5kID0gMCwgYWxpZ25lZF9lbmQgPSAwLCBibG9ja19hbGlnbmVkX2VuZCA9IDAsIHZhbHVlNCA9IDA7CiAgICBlbmQgPSAocHRyICsgbnVtKXwwOwoKICAgIHZhbHVlID0gdmFsdWUgJiAweGZmOwogICAgaWYgKChudW18MCkgPj0gNjcgLyogNjQgYnl0ZXMgZm9yIGFuIHVucm9sbGVkIGxvb3AgKyAzIGJ5dGVzIGZvciB1bmFsaWduZWQgaGVhZCovKSB7CiAgICAgIHdoaWxlICgocHRyJjMpICE9IDApIHsKICAgICAgICBIRUFQOFsoKHB0cik+PjApXT12YWx1ZTsKICAgICAgICBwdHIgPSAocHRyKzEpfDA7CiAgICAgIH0KCiAgICAgIGFsaWduZWRfZW5kID0gKGVuZCAmIC00KXwwOwogICAgICBibG9ja19hbGlnbmVkX2VuZCA9IChhbGlnbmVkX2VuZCAtIDY0KXwwOwogICAgICB2YWx1ZTQgPSB2YWx1ZSB8ICh2YWx1ZSA8PCA4KSB8ICh2YWx1ZSA8PCAxNikgfCAodmFsdWUgPDwgMjQpOwoKICAgICAgd2hpbGUoKHB0cnwwKSA8PSAoYmxvY2tfYWxpZ25lZF9lbmR8MCkpIHsKICAgICAgICBIRUFQMzJbKChwdHIpPj4yKV09dmFsdWU0OwogICAgICAgIEhFQVAzMlsoKChwdHIpKyg0KSk+PjIpXT12YWx1ZTQ7CiAgICAgICAgSEVBUDMyWygoKHB0cikrKDgpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMTIpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMTYpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjApKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjQpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMjgpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMzIpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoMzYpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNDApKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNDQpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNDgpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNTIpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNTYpKT4+MildPXZhbHVlNDsKICAgICAgICBIRUFQMzJbKCgocHRyKSsoNjApKT4+MildPXZhbHVlNDsKICAgICAgICBwdHIgPSAocHRyICsgNjQpfDA7CiAgICAgIH0KCiAgICAgIHdoaWxlICgocHRyfDApIDwgKGFsaWduZWRfZW5kfDApICkgewogICAgICAgIEhFQVAzMlsoKHB0cik+PjIpXT12YWx1ZTQ7CiAgICAgICAgcHRyID0gKHB0cis0KXwwOwogICAgICB9CiAgICB9CiAgICAvLyBUaGUgcmVtYWluaW5nIGJ5dGVzLgogICAgd2hpbGUgKChwdHJ8MCkgPCAoZW5kfDApKSB7CiAgICAgIEhFQVA4WygocHRyKT4+MCldPXZhbHVlOwogICAgICBwdHIgPSAocHRyKzEpfDA7CiAgICB9CiAgICByZXR1cm4gKGVuZC1udW0pfDA7Cn0KZnVuY3Rpb24gX3NicmsoaW5jcmVtZW50KSB7CiAgICBpbmNyZW1lbnQgPSBpbmNyZW1lbnR8MDsKICAgIHZhciBvbGREeW5hbWljVG9wID0gMDsKICAgIHZhciBvbGREeW5hbWljVG9wT25DaGFuZ2UgPSAwOwogICAgdmFyIG5ld0R5bmFtaWNUb3AgPSAwOwogICAgdmFyIHRvdGFsTWVtb3J5ID0gMDsKICAgIG9sZER5bmFtaWNUb3AgPSBIRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdfDA7CiAgICBuZXdEeW5hbWljVG9wID0gb2xkRHluYW1pY1RvcCArIGluY3JlbWVudCB8IDA7CgogICAgaWYgKCgoaW5jcmVtZW50fDApID4gMCAmIChuZXdEeW5hbWljVG9wfDApIDwgKG9sZER5bmFtaWNUb3B8MCkpIC8vIERldGVjdCBhbmQgZmFpbCBpZiB3ZSB3b3VsZCB3cmFwIGFyb3VuZCBzaWduZWQgMzItYml0IGludC4KICAgICAgfCAobmV3RHluYW1pY1RvcHwwKSA8IDApIHsgLy8gQWxzbyB1bmRlcmZsb3csIHNicmsoKSBzaG91bGQgYmUgYWJsZSB0byBiZSB1c2VkIHRvIHN1YnRyYWN0LgogICAgICBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeSgpfDA7CiAgICAgIF9fX3NldEVyck5vKDEyKTsKICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIEhFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml0gPSBuZXdEeW5hbWljVG9wOwogICAgdG90YWxNZW1vcnkgPSBnZXRUb3RhbE1lbW9yeSgpfDA7CiAgICBpZiAoKG5ld0R5bmFtaWNUb3B8MCkgPiAodG90YWxNZW1vcnl8MCkpIHsKICAgICAgaWYgKChlbmxhcmdlTWVtb3J5KCl8MCkgPT0gMCkgewogICAgICAgIEhFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml0gPSBvbGREeW5hbWljVG9wOwogICAgICAgIF9fX3NldEVyck5vKDEyKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvbGREeW5hbWljVG9wfDA7Cn0KCiAgCmZ1bmN0aW9uIGR5bkNhbGxfaWkoaW5kZXgsYTEpIHsKICBpbmRleCA9IGluZGV4fDA7CiAgYTE9YTF8MDsKICByZXR1cm4gRlVOQ1RJT05fVEFCTEVfaWlbaW5kZXgmMzFdKGExfDApfDA7Cn0KCgpmdW5jdGlvbiBkeW5DYWxsX2lpaWkoaW5kZXgsYTEsYTIsYTMpIHsKICBpbmRleCA9IGluZGV4fDA7CiAgYTE9YTF8MDsgYTI9YTJ8MDsgYTM9YTN8MDsKICByZXR1cm4gRlVOQ1RJT05fVEFCTEVfaWlpaVtpbmRleCYzMV0oYTF8MCxhMnwwLGEzfDApfDA7Cn0KCgpmdW5jdGlvbiBkeW5DYWxsX3YoaW5kZXgpIHsKICBpbmRleCA9IGluZGV4fDA7CiAgCiAgRlVOQ1RJT05fVEFCTEVfdltpbmRleCYwXSgpOwp9CgoKZnVuY3Rpb24gZHluQ2FsbF92aShpbmRleCxhMSkgewogIGluZGV4ID0gaW5kZXh8MDsKICBhMT1hMXwwOwogIEZVTkNUSU9OX1RBQkxFX3ZpW2luZGV4JjMxXShhMXwwKTsKfQoKCmZ1bmN0aW9uIGR5bkNhbGxfdmlpaWkoaW5kZXgsYTEsYTIsYTMsYTQpIHsKICBpbmRleCA9IGluZGV4fDA7CiAgYTE9YTF8MDsgYTI9YTJ8MDsgYTM9YTN8MDsgYTQ9YTR8MDsKICBGVU5DVElPTl9UQUJMRV92aWlpaVtpbmRleCYxNV0oYTF8MCxhMnwwLGEzfDAsYTR8MCk7Cn0KCgpmdW5jdGlvbiBkeW5DYWxsX3ZpaWlpaShpbmRleCxhMSxhMixhMyxhNCxhNSkgewogIGluZGV4ID0gaW5kZXh8MDsKICBhMT1hMXwwOyBhMj1hMnwwOyBhMz1hM3wwOyBhND1hNHwwOyBhNT1hNXwwOwogIEZVTkNUSU9OX1RBQkxFX3ZpaWlpaVtpbmRleCYxNV0oYTF8MCxhMnwwLGEzfDAsYTR8MCxhNXwwKTsKfQoKCmZ1bmN0aW9uIGR5bkNhbGxfdmlpaWlpaShpbmRleCxhMSxhMixhMyxhNCxhNSxhNikgewogIGluZGV4ID0gaW5kZXh8MDsKICBhMT1hMXwwOyBhMj1hMnwwOyBhMz1hM3wwOyBhND1hNHwwOyBhNT1hNXwwOyBhNj1hNnwwOwogIEZVTkNUSU9OX1RBQkxFX3ZpaWlpaWlbaW5kZXgmMTVdKGExfDAsYTJ8MCxhM3wwLGE0fDAsYTV8MCxhNnwwKTsKfQoKZnVuY3Rpb24gYjAocDApIHsKIHAwID0gcDB8MDsgbnVsbEZ1bmNfaWkoMCk7cmV0dXJuIDA7Cn0KZnVuY3Rpb24gYjEocDAscDEscDIpIHsKIHAwID0gcDB8MDtwMSA9IHAxfDA7cDIgPSBwMnwwOyBudWxsRnVuY19paWlpKDEpO3JldHVybiAwOwp9CmZ1bmN0aW9uIGIyKCkgewogOyBudWxsRnVuY192KDIpOwp9CmZ1bmN0aW9uIGIzKHAwKSB7CiBwMCA9IHAwfDA7IG51bGxGdW5jX3ZpKDMpOwp9CmZ1bmN0aW9uIGI0KHAwLHAxLHAyLHAzKSB7CiBwMCA9IHAwfDA7cDEgPSBwMXwwO3AyID0gcDJ8MDtwMyA9IHAzfDA7IG51bGxGdW5jX3ZpaWlpKDQpOwp9CmZ1bmN0aW9uIGI1KHAwLHAxLHAyLHAzLHA0KSB7CiBwMCA9IHAwfDA7cDEgPSBwMXwwO3AyID0gcDJ8MDtwMyA9IHAzfDA7cDQgPSBwNHwwOyBudWxsRnVuY192aWlpaWkoNSk7Cn0KZnVuY3Rpb24gYjYocDAscDEscDIscDMscDQscDUpIHsKIHAwID0gcDB8MDtwMSA9IHAxfDA7cDIgPSBwMnwwO3AzID0gcDN8MDtwNCA9IHA0fDA7cDUgPSBwNXwwOyBudWxsRnVuY192aWlpaWlpKDYpOwp9CgovLyBFTVNDUklQVEVOX0VORF9GVU5DUwp2YXIgRlVOQ1RJT05fVEFCTEVfaWkgPSBbYjAsX19fc3RkaW9fY2xvc2UsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsYjAsX19aTktTdDliYWRfYWxsb2M0d2hhdEV2LGIwLGIwLGIwLGIwLGIwLGIwLGIwLGIwLGIwLGIwCixiMCxiMCxiMF07CnZhciBGVU5DVElPTl9UQUJMRV9paWlpID0gW2IxLGIxLF9fX3N0ZG91dF93cml0ZSxfX19zdGRpb19zZWVrLGIxLGIxLGIxLGIxLF9fWk5LMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mbzljYW5fY2F0Y2hFUEtOU18xNl9fc2hpbV90eXBlX2luZm9FUlB2LGIxLGIxLGIxLGIxLGIxLGIxLGIxLGIxLGIxLGIxLF9fX3N0ZGlvX3dyaXRlLGIxLGIxLGIxLGIxLGIxLGIxLGIxLGIxLGIxCixiMSxiMSxiMV07CnZhciBGVU5DVElPTl9UQUJMRV92ID0gW2IyXTsKdmFyIEZVTkNUSU9OX1RBQkxFX3ZpID0gW2IzLGIzLGIzLGIzLF9fWk4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9EMkV2LF9fWk4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRDBFdixfX1pOSzEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mbzVub29wMUV2LF9fWk5LMTBfX2N4eGFiaXYxMTZfX3NoaW1fdHlwZV9pbmZvNW5vb3AyRXYsYjMsYjMsYjMsYjMsX19aTjEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm9EMEV2LGIzLGIzLGIzLF9fWk5TdDliYWRfYWxsb2NEMkV2LF9fWk5TdDliYWRfYWxsb2NEMEV2LGIzLGIzLGIzLGIzLGIzLGIzLGIzLGIzLGIzLGIzLGIzCixiMyxiMyxiM107CnZhciBGVU5DVElPTl9UQUJMRV92aWlpaSA9IFtiNCxiNCxiNCxiNCxiNCxiNCxiNCxiNCxiNCxiNCxiNCxfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8yN2hhc191bmFtYmlndW91c19wdWJsaWNfYmFzZUVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVB2aSxiNCxiNCxiNCxfX1pOSzEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm8yN2hhc191bmFtYmlndW91c19wdWJsaWNfYmFzZUVQTlNfMTlfX2R5bmFtaWNfY2FzdF9pbmZvRVB2aV07CnZhciBGVU5DVElPTl9UQUJMRV92aWlpaWkgPSBbYjUsYjUsYjUsYjUsYjUsYjUsYjUsYjUsYjUsYjUsX19aTksxMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvMTZzZWFyY2hfYmVsb3dfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2aWIsYjUsYjUsYjUsX19aTksxMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvMTZzZWFyY2hfYmVsb3dfZHN0RVBOU18xOV9fZHluYW1pY19jYXN0X2luZm9FUEt2aWIsYjVdOwp2YXIgRlVOQ1RJT05fVEFCTEVfdmlpaWlpaSA9IFtiNixiNixiNixiNixiNixiNixiNixiNixiNixfX1pOSzEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm8xNnNlYXJjaF9hYm92ZV9kc3RFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQS3ZTNF9pYixiNixiNixiNixfX1pOSzEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm8xNnNlYXJjaF9hYm92ZV9kc3RFUE5TXzE5X19keW5hbWljX2Nhc3RfaW5mb0VQS3ZTNF9pYixiNixiNl07CgogIHJldHVybiB7IF9fR0xPQkFMX19zdWJfSV9EcmF3MTZDb3JlX2NwcDogX19HTE9CQUxfX3N1Yl9JX0RyYXcxNkNvcmVfY3BwLCBfX19lcnJub19sb2NhdGlvbjogX19fZXJybm9fbG9jYXRpb24sIF9kMTZDbGVhcjogX2QxNkNsZWFyLCBfZDE2RHJhd0FyZWE6IF9kMTZEcmF3QXJlYSwgX2QxNkRyYXdDaGlwOiBfZDE2RHJhd0NoaXAsIF9kMTZEcmF3Q2hpcDg6IF9kMTZEcmF3Q2hpcDgsIF9kMTZEcmF3RWxsaXBzZTogX2QxNkRyYXdFbGxpcHNlLCBfZDE2RHJhd0VsbGlwc2VGaWxsOiBfZDE2RHJhd0VsbGlwc2VGaWxsLCBfZDE2RHJhd0xpbmU6IF9kMTZEcmF3TGluZSwgX2QxNkRyYXdQaXhlbDogX2QxNkRyYXdQaXhlbCwgX2QxNkRyYXdSZWN0YW5nbGU6IF9kMTZEcmF3UmVjdGFuZ2xlLCBfZDE2RHJhd1JlY3RhbmdsZUZpbGw6IF9kMTZEcmF3UmVjdGFuZ2xlRmlsbCwgX2QxNkRyYXdTaGlmdExpbmVIOiBfZDE2RHJhd1NoaWZ0TGluZUgsIF9kMTZEcmF3VGV4dDg6IF9kMTZEcmF3VGV4dDgsIF9kMTZGbHVzaDogX2QxNkZsdXNoLCBfZDE2SW5pdDogX2QxNkluaXQsIF9kMTZUZXh0dXJlTG9hZDogX2QxNlRleHR1cmVMb2FkLCBfZmZsdXNoOiBfZmZsdXNoLCBfZnJlZTogX2ZyZWUsIF9tYWxsb2M6IF9tYWxsb2MsIF9tZW1jcHk6IF9tZW1jcHksIF9tZW1zZXQ6IF9tZW1zZXQsIF9zYnJrOiBfc2JyaywgZHluQ2FsbF9paTogZHluQ2FsbF9paSwgZHluQ2FsbF9paWlpOiBkeW5DYWxsX2lpaWksIGR5bkNhbGxfdjogZHluQ2FsbF92LCBkeW5DYWxsX3ZpOiBkeW5DYWxsX3ZpLCBkeW5DYWxsX3ZpaWlpOiBkeW5DYWxsX3ZpaWlpLCBkeW5DYWxsX3ZpaWlpaTogZHluQ2FsbF92aWlpaWksIGR5bkNhbGxfdmlpaWlpaTogZHluQ2FsbF92aWlpaWlpLCBlc3RhYmxpc2hTdGFja1NwYWNlOiBlc3RhYmxpc2hTdGFja1NwYWNlLCBnZXRUZW1wUmV0MDogZ2V0VGVtcFJldDAsIHJ1blBvc3RTZXRzOiBydW5Qb3N0U2V0cywgc2V0VGVtcFJldDA6IHNldFRlbXBSZXQwLCBzZXRUaHJldzogc2V0VGhyZXcsIHN0YWNrQWxsb2M6IHN0YWNrQWxsb2MsIHN0YWNrUmVzdG9yZTogc3RhY2tSZXN0b3JlLCBzdGFja1NhdmU6IHN0YWNrU2F2ZSB9Owp9KQovLyBFTVNDUklQVEVOX0VORF9BU00KKE1vZHVsZS5hc21HbG9iYWxBcmcsIE1vZHVsZS5hc21MaWJyYXJ5QXJnLCBidWZmZXIpOwoKdmFyIHJlYWxfX19HTE9CQUxfX3N1Yl9JX0RyYXcxNkNvcmVfY3BwID0gYXNtWyJfX0dMT0JBTF9fc3ViX0lfRHJhdzE2Q29yZV9jcHAiXTsgYXNtWyJfX0dMT0JBTF9fc3ViX0lfRHJhdzE2Q29yZV9jcHAiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX19HTE9CQUxfX3N1Yl9JX0RyYXcxNkNvcmVfY3BwLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fX19lcnJub19sb2NhdGlvbiA9IGFzbVsiX19fZXJybm9fbG9jYXRpb24iXTsgYXNtWyJfX19lcnJub19sb2NhdGlvbiJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fX19lcnJub19sb2NhdGlvbi5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNkNsZWFyID0gYXNtWyJfZDE2Q2xlYXIiXTsgYXNtWyJfZDE2Q2xlYXIiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNkNsZWFyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZDE2RHJhd0FyZWEgPSBhc21bIl9kMTZEcmF3QXJlYSJdOyBhc21bIl9kMTZEcmF3QXJlYSJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZDE2RHJhd0FyZWEuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX19kMTZEcmF3Q2hpcCA9IGFzbVsiX2QxNkRyYXdDaGlwIl07IGFzbVsiX2QxNkRyYXdDaGlwIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX19kMTZEcmF3Q2hpcC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNkRyYXdDaGlwOCA9IGFzbVsiX2QxNkRyYXdDaGlwOCJdOyBhc21bIl9kMTZEcmF3Q2hpcDgiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNkRyYXdDaGlwOC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNkRyYXdFbGxpcHNlID0gYXNtWyJfZDE2RHJhd0VsbGlwc2UiXTsgYXNtWyJfZDE2RHJhd0VsbGlwc2UiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNkRyYXdFbGxpcHNlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZDE2RHJhd0VsbGlwc2VGaWxsID0gYXNtWyJfZDE2RHJhd0VsbGlwc2VGaWxsIl07IGFzbVsiX2QxNkRyYXdFbGxpcHNlRmlsbCJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZDE2RHJhd0VsbGlwc2VGaWxsLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZDE2RHJhd0xpbmUgPSBhc21bIl9kMTZEcmF3TGluZSJdOyBhc21bIl9kMTZEcmF3TGluZSJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZDE2RHJhd0xpbmUuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX19kMTZEcmF3UGl4ZWwgPSBhc21bIl9kMTZEcmF3UGl4ZWwiXTsgYXNtWyJfZDE2RHJhd1BpeGVsIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX19kMTZEcmF3UGl4ZWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX19kMTZEcmF3UmVjdGFuZ2xlID0gYXNtWyJfZDE2RHJhd1JlY3RhbmdsZSJdOyBhc21bIl9kMTZEcmF3UmVjdGFuZ2xlIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX19kMTZEcmF3UmVjdGFuZ2xlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZDE2RHJhd1JlY3RhbmdsZUZpbGwgPSBhc21bIl9kMTZEcmF3UmVjdGFuZ2xlRmlsbCJdOyBhc21bIl9kMTZEcmF3UmVjdGFuZ2xlRmlsbCJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZDE2RHJhd1JlY3RhbmdsZUZpbGwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX19kMTZEcmF3U2hpZnRMaW5lSCA9IGFzbVsiX2QxNkRyYXdTaGlmdExpbmVIIl07IGFzbVsiX2QxNkRyYXdTaGlmdExpbmVIIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX19kMTZEcmF3U2hpZnRMaW5lSC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNkRyYXdUZXh0OCA9IGFzbVsiX2QxNkRyYXdUZXh0OCJdOyBhc21bIl9kMTZEcmF3VGV4dDgiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNkRyYXdUZXh0OC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNkZsdXNoID0gYXNtWyJfZDE2Rmx1c2giXTsgYXNtWyJfZDE2Rmx1c2giXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNkZsdXNoLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZDE2SW5pdCA9IGFzbVsiX2QxNkluaXQiXTsgYXNtWyJfZDE2SW5pdCJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZDE2SW5pdC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX2QxNlRleHR1cmVMb2FkID0gYXNtWyJfZDE2VGV4dHVyZUxvYWQiXTsgYXNtWyJfZDE2VGV4dHVyZUxvYWQiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX2QxNlRleHR1cmVMb2FkLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZmZsdXNoID0gYXNtWyJfZmZsdXNoIl07IGFzbVsiX2ZmbHVzaCJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZmZsdXNoLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9fZnJlZSA9IGFzbVsiX2ZyZWUiXTsgYXNtWyJfZnJlZSJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9fZnJlZS5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX21hbGxvYyA9IGFzbVsiX21hbGxvYyJdOyBhc21bIl9tYWxsb2MiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX21hbGxvYy5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfX3NicmsgPSBhc21bIl9zYnJrIl07IGFzbVsiX3NicmsiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfX3NicmsuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX2VzdGFibGlzaFN0YWNrU3BhY2UgPSBhc21bImVzdGFibGlzaFN0YWNrU3BhY2UiXTsgYXNtWyJlc3RhYmxpc2hTdGFja1NwYWNlIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX2VzdGFibGlzaFN0YWNrU3BhY2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX2dldFRlbXBSZXQwID0gYXNtWyJnZXRUZW1wUmV0MCJdOyBhc21bImdldFRlbXBSZXQwIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX2dldFRlbXBSZXQwLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgcmVhbF9zZXRUZW1wUmV0MCA9IGFzbVsic2V0VGVtcFJldDAiXTsgYXNtWyJzZXRUZW1wUmV0MCJdID0gZnVuY3Rpb24oKSB7CiAgYXNzZXJ0KHJ1bnRpbWVJbml0aWFsaXplZCwgJ3lvdSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBydW50aW1lIHRvIGJlIHJlYWR5IChlLmcuIHdhaXQgZm9yIG1haW4oKSB0byBiZSBjYWxsZWQpJyk7CiAgYXNzZXJ0KCFydW50aW1lRXhpdGVkLCAndGhlIHJ1bnRpbWUgd2FzIGV4aXRlZCAodXNlIE5PX0VYSVRfUlVOVElNRSB0byBrZWVwIGl0IGFsaXZlIGFmdGVyIG1haW4oKSBleGl0cyknKTsKICByZXR1cm4gcmVhbF9zZXRUZW1wUmV0MC5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfc2V0VGhyZXcgPSBhc21bInNldFRocmV3Il07IGFzbVsic2V0VGhyZXciXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfc2V0VGhyZXcuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX3N0YWNrQWxsb2MgPSBhc21bInN0YWNrQWxsb2MiXTsgYXNtWyJzdGFja0FsbG9jIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX3N0YWNrQWxsb2MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKfTsKCnZhciByZWFsX3N0YWNrUmVzdG9yZSA9IGFzbVsic3RhY2tSZXN0b3JlIl07IGFzbVsic3RhY2tSZXN0b3JlIl0gPSBmdW5jdGlvbigpIHsKICBhc3NlcnQocnVudGltZUluaXRpYWxpemVkLCAneW91IG5lZWQgdG8gd2FpdCBmb3IgdGhlIHJ1bnRpbWUgdG8gYmUgcmVhZHkgKGUuZy4gd2FpdCBmb3IgbWFpbigpIHRvIGJlIGNhbGxlZCknKTsKICBhc3NlcnQoIXJ1bnRpbWVFeGl0ZWQsICd0aGUgcnVudGltZSB3YXMgZXhpdGVkICh1c2UgTk9fRVhJVF9SVU5USU1FIHRvIGtlZXAgaXQgYWxpdmUgYWZ0ZXIgbWFpbigpIGV4aXRzKScpOwogIHJldHVybiByZWFsX3N0YWNrUmVzdG9yZS5hcHBseShudWxsLCBhcmd1bWVudHMpOwp9OwoKdmFyIHJlYWxfc3RhY2tTYXZlID0gYXNtWyJzdGFja1NhdmUiXTsgYXNtWyJzdGFja1NhdmUiXSA9IGZ1bmN0aW9uKCkgewogIGFzc2VydChydW50aW1lSW5pdGlhbGl6ZWQsICd5b3UgbmVlZCB0byB3YWl0IGZvciB0aGUgcnVudGltZSB0byBiZSByZWFkeSAoZS5nLiB3YWl0IGZvciBtYWluKCkgdG8gYmUgY2FsbGVkKScpOwogIGFzc2VydCghcnVudGltZUV4aXRlZCwgJ3RoZSBydW50aW1lIHdhcyBleGl0ZWQgKHVzZSBOT19FWElUX1JVTlRJTUUgdG8ga2VlcCBpdCBhbGl2ZSBhZnRlciBtYWluKCkgZXhpdHMpJyk7CiAgcmV0dXJuIHJlYWxfc3RhY2tTYXZlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Cn07CnZhciBfX0dMT0JBTF9fc3ViX0lfRHJhdzE2Q29yZV9jcHAgPSBNb2R1bGVbIl9fR0xPQkFMX19zdWJfSV9EcmF3MTZDb3JlX2NwcCJdID0gYXNtWyJfX0dMT0JBTF9fc3ViX0lfRHJhdzE2Q29yZV9jcHAiXTsKdmFyIF9fX2Vycm5vX2xvY2F0aW9uID0gTW9kdWxlWyJfX19lcnJub19sb2NhdGlvbiJdID0gYXNtWyJfX19lcnJub19sb2NhdGlvbiJdOwp2YXIgX2QxNkNsZWFyID0gTW9kdWxlWyJfZDE2Q2xlYXIiXSA9IGFzbVsiX2QxNkNsZWFyIl07CnZhciBfZDE2RHJhd0FyZWEgPSBNb2R1bGVbIl9kMTZEcmF3QXJlYSJdID0gYXNtWyJfZDE2RHJhd0FyZWEiXTsKdmFyIF9kMTZEcmF3Q2hpcCA9IE1vZHVsZVsiX2QxNkRyYXdDaGlwIl0gPSBhc21bIl9kMTZEcmF3Q2hpcCJdOwp2YXIgX2QxNkRyYXdDaGlwOCA9IE1vZHVsZVsiX2QxNkRyYXdDaGlwOCJdID0gYXNtWyJfZDE2RHJhd0NoaXA4Il07CnZhciBfZDE2RHJhd0VsbGlwc2UgPSBNb2R1bGVbIl9kMTZEcmF3RWxsaXBzZSJdID0gYXNtWyJfZDE2RHJhd0VsbGlwc2UiXTsKdmFyIF9kMTZEcmF3RWxsaXBzZUZpbGwgPSBNb2R1bGVbIl9kMTZEcmF3RWxsaXBzZUZpbGwiXSA9IGFzbVsiX2QxNkRyYXdFbGxpcHNlRmlsbCJdOwp2YXIgX2QxNkRyYXdMaW5lID0gTW9kdWxlWyJfZDE2RHJhd0xpbmUiXSA9IGFzbVsiX2QxNkRyYXdMaW5lIl07CnZhciBfZDE2RHJhd1BpeGVsID0gTW9kdWxlWyJfZDE2RHJhd1BpeGVsIl0gPSBhc21bIl9kMTZEcmF3UGl4ZWwiXTsKdmFyIF9kMTZEcmF3UmVjdGFuZ2xlID0gTW9kdWxlWyJfZDE2RHJhd1JlY3RhbmdsZSJdID0gYXNtWyJfZDE2RHJhd1JlY3RhbmdsZSJdOwp2YXIgX2QxNkRyYXdSZWN0YW5nbGVGaWxsID0gTW9kdWxlWyJfZDE2RHJhd1JlY3RhbmdsZUZpbGwiXSA9IGFzbVsiX2QxNkRyYXdSZWN0YW5nbGVGaWxsIl07CnZhciBfZDE2RHJhd1NoaWZ0TGluZUggPSBNb2R1bGVbIl9kMTZEcmF3U2hpZnRMaW5lSCJdID0gYXNtWyJfZDE2RHJhd1NoaWZ0TGluZUgiXTsKdmFyIF9kMTZEcmF3VGV4dDggPSBNb2R1bGVbIl9kMTZEcmF3VGV4dDgiXSA9IGFzbVsiX2QxNkRyYXdUZXh0OCJdOwp2YXIgX2QxNkZsdXNoID0gTW9kdWxlWyJfZDE2Rmx1c2giXSA9IGFzbVsiX2QxNkZsdXNoIl07CnZhciBfZDE2SW5pdCA9IE1vZHVsZVsiX2QxNkluaXQiXSA9IGFzbVsiX2QxNkluaXQiXTsKdmFyIF9kMTZUZXh0dXJlTG9hZCA9IE1vZHVsZVsiX2QxNlRleHR1cmVMb2FkIl0gPSBhc21bIl9kMTZUZXh0dXJlTG9hZCJdOwp2YXIgX2ZmbHVzaCA9IE1vZHVsZVsiX2ZmbHVzaCJdID0gYXNtWyJfZmZsdXNoIl07CnZhciBfZnJlZSA9IE1vZHVsZVsiX2ZyZWUiXSA9IGFzbVsiX2ZyZWUiXTsKdmFyIF9tYWxsb2MgPSBNb2R1bGVbIl9tYWxsb2MiXSA9IGFzbVsiX21hbGxvYyJdOwp2YXIgX21lbWNweSA9IE1vZHVsZVsiX21lbWNweSJdID0gYXNtWyJfbWVtY3B5Il07CnZhciBfbWVtc2V0ID0gTW9kdWxlWyJfbWVtc2V0Il0gPSBhc21bIl9tZW1zZXQiXTsKdmFyIF9zYnJrID0gTW9kdWxlWyJfc2JyayJdID0gYXNtWyJfc2JyayJdOwp2YXIgZXN0YWJsaXNoU3RhY2tTcGFjZSA9IE1vZHVsZVsiZXN0YWJsaXNoU3RhY2tTcGFjZSJdID0gYXNtWyJlc3RhYmxpc2hTdGFja1NwYWNlIl07CnZhciBnZXRUZW1wUmV0MCA9IE1vZHVsZVsiZ2V0VGVtcFJldDAiXSA9IGFzbVsiZ2V0VGVtcFJldDAiXTsKdmFyIHJ1blBvc3RTZXRzID0gTW9kdWxlWyJydW5Qb3N0U2V0cyJdID0gYXNtWyJydW5Qb3N0U2V0cyJdOwp2YXIgc2V0VGVtcFJldDAgPSBNb2R1bGVbInNldFRlbXBSZXQwIl0gPSBhc21bInNldFRlbXBSZXQwIl07CnZhciBzZXRUaHJldyA9IE1vZHVsZVsic2V0VGhyZXciXSA9IGFzbVsic2V0VGhyZXciXTsKdmFyIHN0YWNrQWxsb2MgPSBNb2R1bGVbInN0YWNrQWxsb2MiXSA9IGFzbVsic3RhY2tBbGxvYyJdOwp2YXIgc3RhY2tSZXN0b3JlID0gTW9kdWxlWyJzdGFja1Jlc3RvcmUiXSA9IGFzbVsic3RhY2tSZXN0b3JlIl07CnZhciBzdGFja1NhdmUgPSBNb2R1bGVbInN0YWNrU2F2ZSJdID0gYXNtWyJzdGFja1NhdmUiXTsKdmFyIGR5bkNhbGxfaWkgPSBNb2R1bGVbImR5bkNhbGxfaWkiXSA9IGFzbVsiZHluQ2FsbF9paSJdOwp2YXIgZHluQ2FsbF9paWlpID0gTW9kdWxlWyJkeW5DYWxsX2lpaWkiXSA9IGFzbVsiZHluQ2FsbF9paWlpIl07CnZhciBkeW5DYWxsX3YgPSBNb2R1bGVbImR5bkNhbGxfdiJdID0gYXNtWyJkeW5DYWxsX3YiXTsKdmFyIGR5bkNhbGxfdmkgPSBNb2R1bGVbImR5bkNhbGxfdmkiXSA9IGFzbVsiZHluQ2FsbF92aSJdOwp2YXIgZHluQ2FsbF92aWlpaSA9IE1vZHVsZVsiZHluQ2FsbF92aWlpaSJdID0gYXNtWyJkeW5DYWxsX3ZpaWlpIl07CnZhciBkeW5DYWxsX3ZpaWlpaSA9IE1vZHVsZVsiZHluQ2FsbF92aWlpaWkiXSA9IGFzbVsiZHluQ2FsbF92aWlpaWkiXTsKdmFyIGR5bkNhbGxfdmlpaWlpaSA9IE1vZHVsZVsiZHluQ2FsbF92aWlpaWlpIl0gPSBhc21bImR5bkNhbGxfdmlpaWlpaSJdOwo7CgoKCi8vID09PSBBdXRvLWdlbmVyYXRlZCBwb3N0YW1ibGUgc2V0dXAgZW50cnkgc3R1ZmYgPT09CgpNb2R1bGVbJ2FzbSddID0gYXNtOwoKaWYgKCFNb2R1bGVbImludEFycmF5RnJvbVN0cmluZyJdKSBNb2R1bGVbImludEFycmF5RnJvbVN0cmluZyJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInaW50QXJyYXlGcm9tU3RyaW5nJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiaW50QXJyYXlUb1N0cmluZyJdKSBNb2R1bGVbImludEFycmF5VG9TdHJpbmciXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2ludEFycmF5VG9TdHJpbmcnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07Ck1vZHVsZVsiY2NhbGwiXSA9IGNjYWxsOwpNb2R1bGVbImN3cmFwIl0gPSBjd3JhcDsKaWYgKCFNb2R1bGVbInNldFZhbHVlIl0pIE1vZHVsZVsic2V0VmFsdWUiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ3NldFZhbHVlJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiZ2V0VmFsdWUiXSkgTW9kdWxlWyJnZXRWYWx1ZSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInZ2V0VmFsdWUnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJhbGxvY2F0ZSJdKSBNb2R1bGVbImFsbG9jYXRlIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidhbGxvY2F0ZScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImdldE1lbW9yeSJdKSBNb2R1bGVbImdldE1lbW9yeSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInZ2V0TWVtb3J5JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkuIEFsdGVybmF0aXZlbHksIGZvcmNpbmcgZmlsZXN5c3RlbSBzdXBwb3J0ICgtcyBGT1JDRV9GSUxFU1lTVEVNPTEpIGNhbiBleHBvcnQgdGhpcyBmb3IgeW91IikgfTsKaWYgKCFNb2R1bGVbIlBvaW50ZXJfc3RyaW5naWZ5Il0pIE1vZHVsZVsiUG9pbnRlcl9zdHJpbmdpZnkiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ1BvaW50ZXJfc3RyaW5naWZ5JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiQXNjaWlUb1N0cmluZyJdKSBNb2R1bGVbIkFzY2lpVG9TdHJpbmciXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0FzY2lpVG9TdHJpbmcnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJzdHJpbmdUb0FzY2lpIl0pIE1vZHVsZVsic3RyaW5nVG9Bc2NpaSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInc3RyaW5nVG9Bc2NpaScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbIlVURjhBcnJheVRvU3RyaW5nIl0pIE1vZHVsZVsiVVRGOEFycmF5VG9TdHJpbmciXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ1VURjhBcnJheVRvU3RyaW5nJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiVVRGOFRvU3RyaW5nIl0pIE1vZHVsZVsiVVRGOFRvU3RyaW5nIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidVVEY4VG9TdHJpbmcnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJzdHJpbmdUb1VURjhBcnJheSJdKSBNb2R1bGVbInN0cmluZ1RvVVRGOEFycmF5Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidzdHJpbmdUb1VURjhBcnJheScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbInN0cmluZ1RvVVRGOCJdKSBNb2R1bGVbInN0cmluZ1RvVVRGOCJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInc3RyaW5nVG9VVEY4JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsibGVuZ3RoQnl0ZXNVVEY4Il0pIE1vZHVsZVsibGVuZ3RoQnl0ZXNVVEY4Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidsZW5ndGhCeXRlc1VURjgnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJVVEYxNlRvU3RyaW5nIl0pIE1vZHVsZVsiVVRGMTZUb1N0cmluZyJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInVVRGMTZUb1N0cmluZycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbInN0cmluZ1RvVVRGMTYiXSkgTW9kdWxlWyJzdHJpbmdUb1VURjE2Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidzdHJpbmdUb1VURjE2JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsibGVuZ3RoQnl0ZXNVVEYxNiJdKSBNb2R1bGVbImxlbmd0aEJ5dGVzVVRGMTYiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2xlbmd0aEJ5dGVzVVRGMTYnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJVVEYzMlRvU3RyaW5nIl0pIE1vZHVsZVsiVVRGMzJUb1N0cmluZyJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInVVRGMzJUb1N0cmluZycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbInN0cmluZ1RvVVRGMzIiXSkgTW9kdWxlWyJzdHJpbmdUb1VURjMyIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidzdHJpbmdUb1VURjMyJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsibGVuZ3RoQnl0ZXNVVEYzMiJdKSBNb2R1bGVbImxlbmd0aEJ5dGVzVVRGMzIiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2xlbmd0aEJ5dGVzVVRGMzInIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJhbGxvY2F0ZVVURjgiXSkgTW9kdWxlWyJhbGxvY2F0ZVVURjgiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2FsbG9jYXRlVVRGOCcgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbInN0YWNrVHJhY2UiXSkgTW9kdWxlWyJzdGFja1RyYWNlIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidzdGFja1RyYWNlJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiYWRkT25QcmVSdW4iXSkgTW9kdWxlWyJhZGRPblByZVJ1biJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInYWRkT25QcmVSdW4nIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJhZGRPbkluaXQiXSkgTW9kdWxlWyJhZGRPbkluaXQiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2FkZE9uSW5pdCcgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImFkZE9uUHJlTWFpbiJdKSBNb2R1bGVbImFkZE9uUHJlTWFpbiJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInYWRkT25QcmVNYWluJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiYWRkT25FeGl0Il0pIE1vZHVsZVsiYWRkT25FeGl0Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidhZGRPbkV4aXQnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJhZGRPblBvc3RSdW4iXSkgTW9kdWxlWyJhZGRPblBvc3RSdW4iXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2FkZE9uUG9zdFJ1bicgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbIndyaXRlU3RyaW5nVG9NZW1vcnkiXSkgTW9kdWxlWyJ3cml0ZVN0cmluZ1RvTWVtb3J5Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIid3cml0ZVN0cmluZ1RvTWVtb3J5JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsid3JpdGVBcnJheVRvTWVtb3J5Il0pIE1vZHVsZVsid3JpdGVBcnJheVRvTWVtb3J5Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIid3cml0ZUFycmF5VG9NZW1vcnknIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJ3cml0ZUFzY2lpVG9NZW1vcnkiXSkgTW9kdWxlWyJ3cml0ZUFzY2lpVG9NZW1vcnkiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ3dyaXRlQXNjaWlUb01lbW9yeScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImFkZFJ1bkRlcGVuZGVuY3kiXSkgTW9kdWxlWyJhZGRSdW5EZXBlbmRlbmN5Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidhZGRSdW5EZXBlbmRlbmN5JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkuIEFsdGVybmF0aXZlbHksIGZvcmNpbmcgZmlsZXN5c3RlbSBzdXBwb3J0ICgtcyBGT1JDRV9GSUxFU1lTVEVNPTEpIGNhbiBleHBvcnQgdGhpcyBmb3IgeW91IikgfTsKaWYgKCFNb2R1bGVbInJlbW92ZVJ1bkRlcGVuZGVuY3kiXSkgTW9kdWxlWyJyZW1vdmVSdW5EZXBlbmRlbmN5Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidyZW1vdmVSdW5EZXBlbmRlbmN5JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkuIEFsdGVybmF0aXZlbHksIGZvcmNpbmcgZmlsZXN5c3RlbSBzdXBwb3J0ICgtcyBGT1JDRV9GSUxFU1lTVEVNPTEpIGNhbiBleHBvcnQgdGhpcyBmb3IgeW91IikgfTsKaWYgKCFNb2R1bGVbIkZTIl0pIE1vZHVsZVsiRlMiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0ZTJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlRm9sZGVyIl0pIE1vZHVsZVsiRlNfY3JlYXRlRm9sZGVyIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidGU19jcmVhdGVGb2xkZXInIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlUGF0aCJdKSBNb2R1bGVbIkZTX2NyZWF0ZVBhdGgiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0ZTX2NyZWF0ZVBhdGgnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlRGF0YUZpbGUiXSkgTW9kdWxlWyJGU19jcmVhdGVEYXRhRmlsZSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInRlNfY3JlYXRlRGF0YUZpbGUnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlUHJlbG9hZGVkRmlsZSJdKSBNb2R1bGVbIkZTX2NyZWF0ZVByZWxvYWRlZEZpbGUiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0ZTX2NyZWF0ZVByZWxvYWRlZEZpbGUnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlTGF6eUZpbGUiXSkgTW9kdWxlWyJGU19jcmVhdGVMYXp5RmlsZSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInRlNfY3JlYXRlTGF6eUZpbGUnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlTGluayJdKSBNb2R1bGVbIkZTX2NyZWF0ZUxpbmsiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0ZTX2NyZWF0ZUxpbmsnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfY3JlYXRlRGV2aWNlIl0pIE1vZHVsZVsiRlNfY3JlYXRlRGV2aWNlIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidGU19jcmVhdGVEZXZpY2UnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiRlNfdW5saW5rIl0pIE1vZHVsZVsiRlNfdW5saW5rIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidGU191bmxpbmsnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKS4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zIEZPUkNFX0ZJTEVTWVNURU09MSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSB9OwppZiAoIU1vZHVsZVsiR0wiXSkgTW9kdWxlWyJHTCJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInR0wnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJzdGF0aWNBbGxvYyJdKSBNb2R1bGVbInN0YXRpY0FsbG9jIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidzdGF0aWNBbGxvYycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImR5bmFtaWNBbGxvYyJdKSBNb2R1bGVbImR5bmFtaWNBbGxvYyJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInZHluYW1pY0FsbG9jJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsid2Fybk9uY2UiXSkgTW9kdWxlWyJ3YXJuT25jZSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInd2Fybk9uY2UnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJsb2FkRHluYW1pY0xpYnJhcnkiXSkgTW9kdWxlWyJsb2FkRHluYW1pY0xpYnJhcnkiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2xvYWREeW5hbWljTGlicmFyeScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImxvYWRXZWJBc3NlbWJseU1vZHVsZSJdKSBNb2R1bGVbImxvYWRXZWJBc3NlbWJseU1vZHVsZSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInbG9hZFdlYkFzc2VtYmx5TW9kdWxlJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiZ2V0TEVCIl0pIE1vZHVsZVsiZ2V0TEVCIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidnZXRMRUInIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJnZXRGdW5jdGlvblRhYmxlcyJdKSBNb2R1bGVbImdldEZ1bmN0aW9uVGFibGVzIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidnZXRGdW5jdGlvblRhYmxlcycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImFsaWduRnVuY3Rpb25UYWJsZXMiXSkgTW9kdWxlWyJhbGlnbkZ1bmN0aW9uVGFibGVzIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidhbGlnbkZ1bmN0aW9uVGFibGVzJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsicmVnaXN0ZXJGdW5jdGlvbnMiXSkgTW9kdWxlWyJyZWdpc3RlckZ1bmN0aW9ucyJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCIncmVnaXN0ZXJGdW5jdGlvbnMnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJhZGRGdW5jdGlvbiJdKSBNb2R1bGVbImFkZEZ1bmN0aW9uIl0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidhZGRGdW5jdGlvbicgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbInJlbW92ZUZ1bmN0aW9uIl0pIE1vZHVsZVsicmVtb3ZlRnVuY3Rpb24iXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ3JlbW92ZUZ1bmN0aW9uJyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiZ2V0RnVuY1dyYXBwZXIiXSkgTW9kdWxlWyJnZXRGdW5jV3JhcHBlciJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInZ2V0RnVuY1dyYXBwZXInIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJwcmV0dHlQcmludCJdKSBNb2R1bGVbInByZXR0eVByaW50Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidwcmV0dHlQcmludCcgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbIm1ha2VCaWdJbnQiXSkgTW9kdWxlWyJtYWtlQmlnSW50Il0gPSBmdW5jdGlvbigpIHsgYWJvcnQoIidtYWtlQmlnSW50JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsiZHluQ2FsbCJdKSBNb2R1bGVbImR5bkNhbGwiXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2R5bkNhbGwnIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07CmlmICghTW9kdWxlWyJnZXRDb21waWxlclNldHRpbmciXSkgTW9kdWxlWyJnZXRDb21waWxlclNldHRpbmciXSA9IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ2dldENvbXBpbGVyU2V0dGluZycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfTsKaWYgKCFNb2R1bGVbImludEFycmF5RnJvbUJhc2U2NCJdKSBNb2R1bGVbImludEFycmF5RnJvbUJhc2U2NCJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCInaW50QXJyYXlGcm9tQmFzZTY0JyB3YXMgbm90IGV4cG9ydGVkLiBhZGQgaXQgdG8gRVhUUkFfRVhQT1JURURfUlVOVElNRV9NRVRIT0RTIChzZWUgdGhlIEZBUSkiKSB9OwppZiAoIU1vZHVsZVsidHJ5UGFyc2VBc0RhdGFVUkkiXSkgTW9kdWxlWyJ0cnlQYXJzZUFzRGF0YVVSSSJdID0gZnVuY3Rpb24oKSB7IGFib3J0KCIndHJ5UGFyc2VBc0RhdGFVUkknIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFRSQV9FWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRkFRKSIpIH07aWYgKCFNb2R1bGVbIkFMTE9DX05PUk1BTCJdKSBPYmplY3QuZGVmaW5lUHJvcGVydHkoTW9kdWxlLCAiQUxMT0NfTk9STUFMIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0FMTE9DX05PUk1BTCcgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfSB9KTsKaWYgKCFNb2R1bGVbIkFMTE9DX1NUQUNLIl0pIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNb2R1bGUsICJBTExPQ19TVEFDSyIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgYWJvcnQoIidBTExPQ19TVEFDSycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfSB9KTsKaWYgKCFNb2R1bGVbIkFMTE9DX1NUQVRJQyJdKSBPYmplY3QuZGVmaW5lUHJvcGVydHkoTW9kdWxlLCAiQUxMT0NfU1RBVElDIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyBhYm9ydCgiJ0FMTE9DX1NUQVRJQycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfSB9KTsKaWYgKCFNb2R1bGVbIkFMTE9DX0RZTkFNSUMiXSkgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vZHVsZSwgIkFMTE9DX0RZTkFNSUMiLCB7IGdldDogZnVuY3Rpb24oKSB7IGFib3J0KCInQUxMT0NfRFlOQU1JQycgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfSB9KTsKaWYgKCFNb2R1bGVbIkFMTE9DX05PTkUiXSkgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vZHVsZSwgIkFMTE9DX05PTkUiLCB7IGdldDogZnVuY3Rpb24oKSB7IGFib3J0KCInQUxMT0NfTk9ORScgd2FzIG5vdCBleHBvcnRlZC4gYWRkIGl0IHRvIEVYVFJBX0VYUE9SVEVEX1JVTlRJTUVfTUVUSE9EUyAoc2VlIHRoZSBGQVEpIikgfSB9KTsKCmlmIChtZW1vcnlJbml0aWFsaXplcikgewogIGlmICghaXNEYXRhVVJJKG1lbW9yeUluaXRpYWxpemVyKSkgewogICAgaWYgKHR5cGVvZiBNb2R1bGVbJ2xvY2F0ZUZpbGUnXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBtZW1vcnlJbml0aWFsaXplciA9IE1vZHVsZVsnbG9jYXRlRmlsZSddKG1lbW9yeUluaXRpYWxpemVyKTsKICAgIH0gZWxzZSBpZiAoTW9kdWxlWydtZW1vcnlJbml0aWFsaXplclByZWZpeFVSTCddKSB7CiAgICAgIG1lbW9yeUluaXRpYWxpemVyID0gTW9kdWxlWydtZW1vcnlJbml0aWFsaXplclByZWZpeFVSTCddICsgbWVtb3J5SW5pdGlhbGl6ZXI7CiAgICB9CiAgfQogIGlmIChFTlZJUk9OTUVOVF9JU19OT0RFIHx8IEVOVklST05NRU5UX0lTX1NIRUxMKSB7CiAgICB2YXIgZGF0YSA9IE1vZHVsZVsncmVhZEJpbmFyeSddKG1lbW9yeUluaXRpYWxpemVyKTsKICAgIEhFQVBVOC5zZXQoZGF0YSwgR0xPQkFMX0JBU0UpOwogIH0gZWxzZSB7CiAgICBhZGRSdW5EZXBlbmRlbmN5KCdtZW1vcnkgaW5pdGlhbGl6ZXInKTsKICAgIHZhciBhcHBseU1lbW9yeUluaXRpYWxpemVyID0gZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoZGF0YS5ieXRlTGVuZ3RoKSBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGFzc2VydChIRUFQVThbR0xPQkFMX0JBU0UgKyBpXSA9PT0gMCwgImFyZWEgZm9yIG1lbW9yeSBpbml0aWFsaXplciBzaG91bGQgbm90IGhhdmUgYmVlbiB0b3VjaGVkIGJlZm9yZSBpdCdzIGxvYWRlZCIpOwogICAgICB9CiAgICAgIEhFQVBVOC5zZXQoZGF0YSwgR0xPQkFMX0JBU0UpOwogICAgICAvLyBEZWxldGUgdGhlIHR5cGVkIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIGxhcmdlIGJsb2Igb2YgdGhlIG1lbW9yeSBpbml0aWFsaXplciByZXF1ZXN0IHJlc3BvbnNlIHNvIHRoYXQKICAgICAgLy8gd2Ugd29uJ3Qga2VlcCB1bm5lY2Vzc2FyeSBtZW1vcnkgbHlpbmcgYXJvdW5kLiBIb3dldmVyLCBrZWVwIHRoZSBYSFIgb2JqZWN0IGl0c2VsZiBhbGl2ZSBzbyB0aGF0IGUuZy4KICAgICAgLy8gaXRzIC5zdGF0dXMgZmllbGQgY2FuIHN0aWxsIGJlIGFjY2Vzc2VkIGxhdGVyLgogICAgICBpZiAoTW9kdWxlWydtZW1vcnlJbml0aWFsaXplclJlcXVlc3QnXSkgZGVsZXRlIE1vZHVsZVsnbWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0J10ucmVzcG9uc2U7CiAgICAgIHJlbW92ZVJ1bkRlcGVuZGVuY3koJ21lbW9yeSBpbml0aWFsaXplcicpOwogICAgfQogICAgZnVuY3Rpb24gZG9Ccm93c2VyTG9hZCgpIHsKICAgICAgTW9kdWxlWydyZWFkQXN5bmMnXShtZW1vcnlJbml0aWFsaXplciwgYXBwbHlNZW1vcnlJbml0aWFsaXplciwgZnVuY3Rpb24oKSB7CiAgICAgICAgdGhyb3cgJ2NvdWxkIG5vdCBsb2FkIG1lbW9yeSBpbml0aWFsaXplciAnICsgbWVtb3J5SW5pdGlhbGl6ZXI7CiAgICAgIH0pOwogICAgfQogICAgdmFyIG1lbW9yeUluaXRpYWxpemVyQnl0ZXMgPSB0cnlQYXJzZUFzRGF0YVVSSShtZW1vcnlJbml0aWFsaXplcik7CiAgICBpZiAobWVtb3J5SW5pdGlhbGl6ZXJCeXRlcykgewogICAgICBhcHBseU1lbW9yeUluaXRpYWxpemVyKG1lbW9yeUluaXRpYWxpemVyQnl0ZXMuYnVmZmVyKTsKICAgIH0gZWxzZQogICAgaWYgKE1vZHVsZVsnbWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0J10pIHsKICAgICAgLy8gYSBuZXR3b3JrIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkLCBqdXN0IHVzZSB0aGF0CiAgICAgIGZ1bmN0aW9uIHVzZVJlcXVlc3QoKSB7CiAgICAgICAgdmFyIHJlcXVlc3QgPSBNb2R1bGVbJ21lbW9yeUluaXRpYWxpemVyUmVxdWVzdCddOwogICAgICAgIHZhciByZXNwb25zZSA9IHJlcXVlc3QucmVzcG9uc2U7CiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzICE9PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgIT09IDApIHsKICAgICAgICAgIHZhciBkYXRhID0gdHJ5UGFyc2VBc0RhdGFVUkkoTW9kdWxlWydtZW1vcnlJbml0aWFsaXplclJlcXVlc3RVUkwnXSk7CiAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICByZXNwb25zZSA9IGRhdGEuYnVmZmVyOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gSWYgeW91IHNlZSB0aGlzIHdhcm5pbmcsIHRoZSBpc3N1ZSBtYXkgYmUgdGhhdCB5b3UgYXJlIHVzaW5nIGxvY2F0ZUZpbGUgb3IgbWVtb3J5SW5pdGlhbGl6ZXJQcmVmaXhVUkwsIGFuZCBkZWZpbmluZyB0aGVtIGluIEpTLiBUaGF0CiAgICAgICAgICAgIC8vIG1lYW5zIHRoYXQgdGhlIEhUTUwgZmlsZSBkb2Vzbid0IGtub3cgYWJvdXQgdGhlbSwgYW5kIHdoZW4gaXQgdHJpZXMgdG8gY3JlYXRlIHRoZSBtZW0gaW5pdCByZXF1ZXN0IGVhcmx5LCBkb2VzIGl0IHRvIHRoZSB3cm9uZyBwbGFjZS4KICAgICAgICAgICAgLy8gTG9vayBpbiB5b3VyIGJyb3dzZXIncyBkZXZ0b29scyBuZXR3b3JrIGNvbnNvbGUgdG8gc2VlIHdoYXQncyBnb2luZyBvbi4KICAgICAgICAgICAgY29uc29sZS53YXJuKCdhIHByb2JsZW0gc2VlbXMgdG8gaGF2ZSBoYXBwZW5lZCB3aXRoIE1vZHVsZS5tZW1vcnlJbml0aWFsaXplclJlcXVlc3QsIHN0YXR1czogJyArIHJlcXVlc3Quc3RhdHVzICsgJywgcmV0cnlpbmcgJyArIG1lbW9yeUluaXRpYWxpemVyKTsKICAgICAgICAgICAgZG9Ccm93c2VyTG9hZCgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFwcGx5TWVtb3J5SW5pdGlhbGl6ZXIocmVzcG9uc2UpOwogICAgICB9CiAgICAgIGlmIChNb2R1bGVbJ21lbW9yeUluaXRpYWxpemVyUmVxdWVzdCddLnJlc3BvbnNlKSB7CiAgICAgICAgc2V0VGltZW91dCh1c2VSZXF1ZXN0LCAwKTsgLy8gaXQncyBhbHJlYWR5IGhlcmU7IGJ1dCwgYXBwbHkgaXQgYXN5bmNocm9ub3VzbHkKICAgICAgfSBlbHNlIHsKICAgICAgICBNb2R1bGVbJ21lbW9yeUluaXRpYWxpemVyUmVxdWVzdCddLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB1c2VSZXF1ZXN0KTsgLy8gd2FpdCBmb3IgaXQKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8gZmV0Y2ggaXQgZnJvbSB0aGUgbmV0d29yayBvdXJzZWx2ZXMKICAgICAgZG9Ccm93c2VyTG9hZCgpOwogICAgfQogIH0KfQoKCgovKioKICogQGNvbnN0cnVjdG9yCiAqIEBleHRlbmRzIHtFcnJvcn0KICogQHRoaXMge0V4aXRTdGF0dXN9CiAqLwpmdW5jdGlvbiBFeGl0U3RhdHVzKHN0YXR1cykgewogIHRoaXMubmFtZSA9ICJFeGl0U3RhdHVzIjsKICB0aGlzLm1lc3NhZ2UgPSAiUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgiICsgc3RhdHVzICsgIikiOwogIHRoaXMuc3RhdHVzID0gc3RhdHVzOwp9OwpFeGl0U3RhdHVzLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpOwpFeGl0U3RhdHVzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEV4aXRTdGF0dXM7Cgp2YXIgaW5pdGlhbFN0YWNrVG9wOwp2YXIgY2FsbGVkTWFpbiA9IGZhbHNlOwoKZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gZnVuY3Rpb24gcnVuQ2FsbGVyKCkgewogIC8vIElmIHJ1biBoYXMgbmV2ZXIgYmVlbiBjYWxsZWQsIGFuZCB3ZSBzaG91bGQgY2FsbCBydW4gKElOVk9LRV9SVU4gaXMgdHJ1ZSwgYW5kIE1vZHVsZS5ub0luaXRpYWxSdW4gaXMgbm90IGZhbHNlKQogIGlmICghTW9kdWxlWydjYWxsZWRSdW4nXSkgcnVuKCk7CiAgaWYgKCFNb2R1bGVbJ2NhbGxlZFJ1biddKSBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgPSBydW5DYWxsZXI7IC8vIHRyeSB0aGlzIGFnYWluIGxhdGVyLCBhZnRlciBuZXcgZGVwcyBhcmUgZnVsZmlsbGVkCn0KCgoKCgovKiogQHR5cGUge2Z1bmN0aW9uKEFycmF5PSl9ICovCmZ1bmN0aW9uIHJ1bihhcmdzKSB7CiAgYXJncyA9IGFyZ3MgfHwgTW9kdWxlWydhcmd1bWVudHMnXTsKCiAgaWYgKHJ1bkRlcGVuZGVuY2llcyA+IDApIHsKICAgIHJldHVybjsKICB9CgogIHdyaXRlU3RhY2tDb29raWUoKTsKCiAgcHJlUnVuKCk7CgogIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSByZXR1cm47IC8vIGEgcHJlUnVuIGFkZGVkIGEgZGVwZW5kZW5jeSwgcnVuIHdpbGwgYmUgY2FsbGVkIGxhdGVyCiAgaWYgKE1vZHVsZVsnY2FsbGVkUnVuJ10pIHJldHVybjsgLy8gcnVuIG1heSBoYXZlIGp1c3QgYmVlbiBjYWxsZWQgdGhyb3VnaCBkZXBlbmRlbmNpZXMgYmVpbmcgZnVsZmlsbGVkIGp1c3QgaW4gdGhpcyB2ZXJ5IGZyYW1lCgogIGZ1bmN0aW9uIGRvUnVuKCkgewogICAgaWYgKE1vZHVsZVsnY2FsbGVkUnVuJ10pIHJldHVybjsgLy8gcnVuIG1heSBoYXZlIGp1c3QgYmVlbiBjYWxsZWQgd2hpbGUgdGhlIGFzeW5jIHNldFN0YXR1cyB0aW1lIGJlbG93IHdhcyBoYXBwZW5pbmcKICAgIE1vZHVsZVsnY2FsbGVkUnVuJ10gPSB0cnVlOwoKICAgIGlmIChBQk9SVCkgcmV0dXJuOwoKICAgIGVuc3VyZUluaXRSdW50aW1lKCk7CgogICAgcHJlTWFpbigpOwoKICAgIGlmIChNb2R1bGVbJ29uUnVudGltZUluaXRpYWxpemVkJ10pIE1vZHVsZVsnb25SdW50aW1lSW5pdGlhbGl6ZWQnXSgpOwoKICAgIGFzc2VydCghTW9kdWxlWydfbWFpbiddLCAnY29tcGlsZWQgd2l0aG91dCBhIG1haW4sIGJ1dCBvbmUgaXMgcHJlc2VudC4gaWYgeW91IGFkZGVkIGl0IGZyb20gSlMsIHVzZSBNb2R1bGVbIm9uUnVudGltZUluaXRpYWxpemVkIl0nKTsKCiAgICBwb3N0UnVuKCk7CiAgfQoKICBpZiAoTW9kdWxlWydzZXRTdGF0dXMnXSkgewogICAgTW9kdWxlWydzZXRTdGF0dXMnXSgnUnVubmluZy4uLicpOwogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBNb2R1bGVbJ3NldFN0YXR1cyddKCcnKTsKICAgICAgfSwgMSk7CiAgICAgIGRvUnVuKCk7CiAgICB9LCAxKTsKICB9IGVsc2UgewogICAgZG9SdW4oKTsKICB9CiAgY2hlY2tTdGFja0Nvb2tpZSgpOwp9Ck1vZHVsZVsncnVuJ10gPSBydW47CgpmdW5jdGlvbiBjaGVja1VuZmx1c2hlZENvbnRlbnQoKSB7CiAgLy8gQ29tcGlsZXIgc2V0dGluZ3MgZG8gbm90IGFsbG93IGV4aXRpbmcgdGhlIHJ1bnRpbWUsIHNvIGZsdXNoaW5nCiAgLy8gdGhlIHN0cmVhbXMgaXMgbm90IHBvc3NpYmxlLiBidXQgaW4gQVNTRVJUSU9OUyBtb2RlIHdlIGNoZWNrCiAgLy8gaWYgdGhlcmUgd2FzIHNvbWV0aGluZyB0byBmbHVzaCwgYW5kIGlmIHNvIHRlbGwgdGhlIHVzZXIgdGhleQogIC8vIHNob3VsZCByZXF1ZXN0IHRoYXQgdGhlIHJ1bnRpbWUgYmUgZXhpdGFibGUuCiAgLy8gTm9ybWFsbHkgd2Ugd291bGQgbm90IGV2ZW4gaW5jbHVkZSBmbHVzaCgpIGF0IGFsbCwgYnV0IGluIEFTU0VSVElPTlMKICAvLyBidWlsZHMgd2UgZG8gc28ganVzdCBmb3IgdGhpcyBjaGVjaywgYW5kIGhlcmUgd2Ugc2VlIGlmIHRoZXJlIGlzIGFueQogIC8vIGNvbnRlbnQgdG8gZmx1c2gsIHRoYXQgaXMsIHdlIGNoZWNrIGlmIHRoZXJlIHdvdWxkIGhhdmUgYmVlbgogIC8vIHNvbWV0aGluZyBhIG5vbi1BU1NFUlRJT05TIGJ1aWxkIHdvdWxkIGhhdmUgbm90IHNlZW4uCiAgLy8gSG93IHdlIGZsdXNoIHRoZSBzdHJlYW1zIGRlcGVuZHMgb24gd2hldGhlciB3ZSBhcmUgaW4gTk9fRklMRVNZU1RFTQogIC8vIG1vZGUgKHdoaWNoIGhhcyBpdHMgb3duIHNwZWNpYWwgZnVuY3Rpb24gZm9yIHRoaXM7IG90aGVyd2lzZSwgYWxsCiAgLy8gdGhlIGNvZGUgaXMgaW5zaWRlIGxpYmMpCiAgdmFyIHByaW50ID0gTW9kdWxlWydwcmludCddOwogIHZhciBwcmludEVyciA9IE1vZHVsZVsncHJpbnRFcnInXTsKICB2YXIgaGFzID0gZmFsc2U7CiAgTW9kdWxlWydwcmludCddID0gTW9kdWxlWydwcmludEVyciddID0gZnVuY3Rpb24oeCkgewogICAgaGFzID0gdHJ1ZTsKICB9CiAgdHJ5IHsgLy8gaXQgZG9lc24ndCBtYXR0ZXIgaWYgaXQgZmFpbHMKICAgIHZhciBmbHVzaCA9IGZsdXNoX05PX0ZJTEVTWVNURU07CiAgICBpZiAoZmx1c2gpIGZsdXNoKDApOwogIH0gY2F0Y2goZSkge30KICBNb2R1bGVbJ3ByaW50J10gPSBwcmludDsKICBNb2R1bGVbJ3ByaW50RXJyJ10gPSBwcmludEVycjsKICBpZiAoaGFzKSB7CiAgICB3YXJuT25jZSgnc3RkaW8gc3RyZWFtcyBoYWQgY29udGVudCBpbiB0aGVtIHRoYXQgd2FzIG5vdCBmbHVzaGVkLiB5b3Ugc2hvdWxkIHNldCBOT19FWElUX1JVTlRJTUUgdG8gMCAoc2VlIHRoZSBGQVEpLCBvciBtYWtlIHN1cmUgdG8gZW1pdCBhIG5ld2xpbmUgd2hlbiB5b3UgcHJpbnRmIGV0Yy4nKTsKICB9Cn0KCmZ1bmN0aW9uIGV4aXQoc3RhdHVzLCBpbXBsaWNpdCkgewogIGNoZWNrVW5mbHVzaGVkQ29udGVudCgpOwoKICAvLyBpZiB0aGlzIGlzIGp1c3QgbWFpbiBleGl0LWluZyBpbXBsaWNpdGx5LCBhbmQgdGhlIHN0YXR1cyBpcyAwLCB0aGVuIHdlCiAgLy8gZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBoZXJlIGFuZCBjYW4ganVzdCBsZWF2ZS4gaWYgdGhlIHN0YXR1cyBpcwogIC8vIG5vbi16ZXJvLCB0aG91Z2gsIHRoZW4gd2UgbmVlZCB0byByZXBvcnQgaXQuCiAgLy8gKHdlIG1heSBoYXZlIHdhcm5lZCBhYm91dCB0aGlzIGVhcmxpZXIsIGlmIGEgc2l0dWF0aW9uIGp1c3RpZmllcyBkb2luZyBzbykKICBpZiAoaW1wbGljaXQgJiYgTW9kdWxlWydub0V4aXRSdW50aW1lJ10gJiYgc3RhdHVzID09PSAwKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoTW9kdWxlWydub0V4aXRSdW50aW1lJ10pIHsKICAgIC8vIGlmIGV4aXQoKSB3YXMgY2FsbGVkLCB3ZSBtYXkgd2FybiB0aGUgdXNlciBpZiB0aGUgcnVudGltZSBpc24ndCBhY3R1YWxseSBiZWluZyBzaHV0IGRvd24KICAgIGlmICghaW1wbGljaXQpIHsKICAgICAgTW9kdWxlLnByaW50RXJyKCdleGl0KCcgKyBzdGF0dXMgKyAnKSBjYWxsZWQsIGJ1dCBOT19FWElUX1JVTlRJTUUgaXMgc2V0LCBzbyBoYWx0aW5nIGV4ZWN1dGlvbiBidXQgbm90IGV4aXRpbmcgdGhlIHJ1bnRpbWUgb3IgcHJldmVudGluZyBmdXJ0aGVyIGFzeW5jIGV4ZWN1dGlvbiAoYnVpbGQgd2l0aCBOT19FWElUX1JVTlRJTUU9MCwgaWYgeW91IHdhbnQgYSB0cnVlIHNodXRkb3duKScpOwogICAgfQogIH0gZWxzZSB7CgogICAgQUJPUlQgPSB0cnVlOwogICAgRVhJVFNUQVRVUyA9IHN0YXR1czsKICAgIFNUQUNLVE9QID0gaW5pdGlhbFN0YWNrVG9wOwoKICAgIGV4aXRSdW50aW1lKCk7CgogICAgaWYgKE1vZHVsZVsnb25FeGl0J10pIE1vZHVsZVsnb25FeGl0J10oc3RhdHVzKTsKICB9CgogIGlmIChFTlZJUk9OTUVOVF9JU19OT0RFKSB7CiAgICBwcm9jZXNzWydleGl0J10oc3RhdHVzKTsKICB9CiAgTW9kdWxlWydxdWl0J10oc3RhdHVzLCBuZXcgRXhpdFN0YXR1cyhzdGF0dXMpKTsKfQpNb2R1bGVbJ2V4aXQnXSA9IGV4aXQ7Cgp2YXIgYWJvcnREZWNvcmF0b3JzID0gW107CgpmdW5jdGlvbiBhYm9ydCh3aGF0KSB7CiAgaWYgKE1vZHVsZVsnb25BYm9ydCddKSB7CiAgICBNb2R1bGVbJ29uQWJvcnQnXSh3aGF0KTsKICB9CgogIGlmICh3aGF0ICE9PSB1bmRlZmluZWQpIHsKICAgIE1vZHVsZS5wcmludCh3aGF0KTsKICAgIE1vZHVsZS5wcmludEVycih3aGF0KTsKICAgIHdoYXQgPSBKU09OLnN0cmluZ2lmeSh3aGF0KQogIH0gZWxzZSB7CiAgICB3aGF0ID0gJyc7CiAgfQoKICBBQk9SVCA9IHRydWU7CiAgRVhJVFNUQVRVUyA9IDE7CgogIHZhciBleHRyYSA9ICcnOwogIHZhciBvdXRwdXQgPSAnYWJvcnQoJyArIHdoYXQgKyAnKSBhdCAnICsgc3RhY2tUcmFjZSgpICsgZXh0cmE7CiAgaWYgKGFib3J0RGVjb3JhdG9ycykgewogICAgYWJvcnREZWNvcmF0b3JzLmZvckVhY2goZnVuY3Rpb24oZGVjb3JhdG9yKSB7CiAgICAgIG91dHB1dCA9IGRlY29yYXRvcihvdXRwdXQsIHdoYXQpOwogICAgfSk7CiAgfQogIHRocm93IG91dHB1dDsKfQpNb2R1bGVbJ2Fib3J0J10gPSBhYm9ydDsKCi8vIHt7UFJFX1JVTl9BRERJVElPTlN9fQoKaWYgKE1vZHVsZVsncHJlSW5pdCddKSB7CiAgaWYgKHR5cGVvZiBNb2R1bGVbJ3ByZUluaXQnXSA9PSAnZnVuY3Rpb24nKSBNb2R1bGVbJ3ByZUluaXQnXSA9IFtNb2R1bGVbJ3ByZUluaXQnXV07CiAgd2hpbGUgKE1vZHVsZVsncHJlSW5pdCddLmxlbmd0aCA+IDApIHsKICAgIE1vZHVsZVsncHJlSW5pdCddLnBvcCgpKCk7CiAgfQp9CgoKTW9kdWxlWyJub0V4aXRSdW50aW1lIl0gPSB0cnVlOwoKcnVuKCk7CgovLyB7e1BPU1RfUlVOX0FERElUSU9OU319CgoKCgoKLy8ge3tNT0RVTEVfQURESVRJT05TfX0KCgoKU0RMLnJlY2VpdmVFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KSB7fQpjbGFzcyBEcmF3MTYgeyB9CgpEcmF3MTYuY2FudmFzID0gbnVsbDsKCkRyYXcxNi50ZXh0dXJlID0ge307CkRyYXcxNi5yZWFkeSA9IGZhbHNlOwpEcmF3MTYuc3RlcCA9IDA7CgpEcmF3MTYuZnVsbHNjcmVlbiA9IGZhbHNlOwpEcmF3MTYud2lkdGggPSAwOwpEcmF3MTYuaGVpZ2h0ID0gMDsKCkRyYXcxNi5maXRNb2RlID0gMDsKRHJhdzE2Ll9maXRNb2RlID0gLTE7CkRyYXcxNi5GSVRfQ09OVEFJTiA9IDA7CkRyYXcxNi5GSVRfQ09WRVIgPSAxOwpEcmF3MTYuRklUX1NUUkVUQ0ggPSAyOwpEcmF3MTYuRklUX1ZFUlRJQ0FMID0gMzsKRHJhdzE2LkZJVF9IT1JJWk9OVEFMID0gNDsKCkRyYXcxNi5sb2FkID0gMDsKRHJhdzE2LmZwcyA9IDMwOwpEcmF3MTYuZnBzTGFzdCA9IDA7CkRyYXcxNi5mcHNNZWFzdXJlU3RhcnQgPSAwOwpEcmF3MTYuZnBzTWVhc3VyZVRpbWUgPSAwOwpEcmF3MTYuZnBzTWVhc3VyZVN0ZXBzID0gMDsKCkRyYXcxNi5tb3VzZVggPSAwOwpEcmF3MTYubW91c2VZID0gMDsKRHJhdzE2Lm1vdXNlSGlkZSA9IGZhbHNlOwpEcmF3MTYuX21vdXNlSGlkZSA9IGZhbHNlOwoKd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJRHJhdzE2LmZwc0xhc3QgPSBEcmF3MTYuZnBzTWVhc3VyZVN0ZXBzOwoJRHJhdzE2LmZwc01lYXN1cmVTdGVwcyA9IDA7CgoJRHJhdzE2LmxvYWQgPSBNYXRoLnJvdW5kKERyYXcxNi5mcHNNZWFzdXJlVGltZSAvIDEwKTsKCURyYXcxNi5mcHNNZWFzdXJlVGltZSA9IDA7Cn0sIDEwMDApOwoKRHJhdzE2LmNvbG9yID0gZnVuY3Rpb24ociwgZywgYikgewoJcmV0dXJuIHIgKyAoZyA8PCA4KSArIChiIDw8IDE2KQp9CgpEcmF3MTYuaW5pdCA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHsKCURyYXcxNi53aWR0aCA9IHdpZHRoOwoJRHJhdzE2LmhlaWdodCA9IGhlaWdodDsKCglEcmF3MTYuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RyYXcxNkNhbnZhcycpOwoKCURyYXcxNi5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigid2ViZ2xjb250ZXh0bG9zdCIsIGZ1bmN0aW9uKGUpIHsKCQl3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoJCWUucHJldmVudERlZmF1bHQoKTsKCX0sIGZhbHNlKTsKCglEcmF3MTZDb3JlLl9kMTZJbml0KHdpZHRoLCBoZWlnaHQpOwoKCURyYXcxNi5pbml0ID0gZnVuY3Rpb24oKSB7fQoJRHJhdzE2LnJlYWR5ID0gdHJ1ZTsKCgl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKERyYXcxNi5vblN0ZXBXcmFwcGVyKTsKfQoKRHJhdzE2Lmluc3RhbGxGdWxsc2NyZWVuID0gZnVuY3Rpb24oKSB7CgoJRHJhdzE2LmZ1bGxzY3JlZW4gPSB0cnVlOwoKCWRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnOwoJZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAnMCc7Cglkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmcgPSAnMCc7Cglkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7CgoJdmFyIHZpZXdwb3J0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpOwoJdmlld3BvcnQubmFtZSA9ICd2aWV3cG9ydCc7Cgl2aWV3cG9ydC5jb250ZW50ID0gJ3dpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEuMCxtYXhpbXVtLXNjYWxlPTEuMCx1c2VyLXNjYWxhYmxlPW5vJzsKCWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQodmlld3BvcnQpOwoKCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKTsgfSwgZmFsc2UpOwoJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IH0sIGZhbHNlKTsKCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IH0sIGZhbHNlKTsKCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyB9LCBmYWxzZSk7Cglkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IH0sIGZhbHNlKTsKCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IH0sIGZhbHNlKTsKCgl2YXIgY2FudmFzID0gRHJhdzE2LmNhbnZhczsKCgljYW52YXMuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwoJY2FudmFzLnN0eWxlLmxlZnQgPSAnY2FsYyg1MCUgLSAnK01hdGguZmxvb3IoRHJhdzE2LndpZHRoLzIpKydweCknOwoJY2FudmFzLnN0eWxlLnRvcCA9ICdjYWxjKDUwJSAtICcrTWF0aC5mbG9vcihEcmF3MTYuaGVpZ2h0LzIpKydweCknOwoJY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgnKyh3aW5kb3cuaW5uZXJIZWlnaHQgLyBEcmF3MTYuaGVpZ2h0KSsnKSc7CgoJY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gJ29wdGltaXplU3BlZWQnOwoJY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gJy1tb3otY3Jpc3AtZWRnZXMnOwoJY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gJy1vLWNyaXNwLWVkZ2VzJzsKCWNhbnZhcy5zdHlsZS5pbWFnZVJlbmRlcmluZyA9ICctd2Via2l0LW9wdGltaXplLWNvbnRyYXN0JzsKCWNhbnZhcy5zdHlsZS5pbWFnZVJlbmRlcmluZyA9ICdwaXhlbGF0ZWQnOwoJY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gJ29wdGltaXplLWNvbnRyYXN0JzsKCWNhbnZhcy5zdHlsZS5tc0ludGVycG9sYXRpb25Nb2RlID0gJ25lYXJlc3QtbmVpZ2hib3InOyAvLyB5b3UgZm91bmQgdGhlIHNwZWNpYWwgc25vd2ZsYWtlCgoKfQoKRHJhdzE2Ll91cGRhdGVDYW52YXNTaXplID0gZnVuY3Rpb24oKSB7CgoJaWYgKCFEcmF3MTYuZnVsbHNjcmVlbikKCQlyZXR1cm47CgoJdmFyIGNhbnZhcyA9IERyYXcxNi5jYW52YXM7CgoJaWYgKERyYXcxNi5maXRNb2RlID09IERyYXcxNi5GSVRfVkVSVElDQUwpCgkJY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgnKyh3aW5kb3cuaW5uZXJIZWlnaHQgLyBEcmF3MTYuaGVpZ2h0KSsnKSc7CgkKCWVsc2UgaWYgKERyYXcxNi5maXRNb2RlID09IERyYXcxNi5GSVRfSE9SSVpPTlRBTCkKCQljYW52YXMuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKCcrKHdpbmRvdy5pbm5lcldpZHRoIC8gRHJhdzE2LndpZHRoKSsnKSc7CgoJZWxzZSBpZiAoRHJhdzE2LmZpdE1vZGUgPT0gRHJhdzE2LkZJVF9TVFJFVENIKQoJCWNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoJysod2luZG93LmlubmVyV2lkdGggLyBEcmF3MTYud2lkdGgpKycsICcrKHdpbmRvdy5pbm5lckhlaWdodCAvIERyYXcxNi5oZWlnaHQpKycpJzsKCgllbHNlIGlmICgKCQlEcmF3MTYuZml0TW9kZSA9PSBEcmF3MTYuRklUX0NPTlRBSU4KCQl8fCBEcmF3MTYuZml0TW9kZSA9PSBEcmF3MTYuRklUX0NPVkVSCgkpIHsKCQl2YXIgd3IgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDsKCQl2YXIgY3IgPSBEcmF3MTYud2lkdGggLyBEcmF3MTYuaGVpZ2h0OwoKCQlpZiAoCgkJCShEcmF3MTYuZml0TW9kZSA9PSBEcmF3MTYuRklUX0NPTlRBSU4gJiYgd3IgPiBjcikKCQkJfHwgKERyYXcxNi5maXRNb2RlID09IERyYXcxNi5GSVRfQ09WRVIgJiYgd3IgPCBjcikKCQkpCgkJCWNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoJysod2luZG93LmlubmVySGVpZ2h0IC8gRHJhdzE2LmhlaWdodCkrJyknOwoJCWVsc2UKCQkJY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgnKyh3aW5kb3cuaW5uZXJXaWR0aCAvIERyYXcxNi53aWR0aCkrJyknOwoJfQoKfQoKRHJhdzE2LmxvYWRUZXh0dXJlID0gZnVuY3Rpb24oaW1hZ2UpIHsKCXZhciB3aWR0aCA9IGltYWdlLndpZHRoOwoJdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDsKCgl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CgljYW52YXMud2lkdGggPSB3aWR0aDsKCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CgoJdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCWNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKCgl2YXIgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7Cgl2YXIgZGF0YSA9IGltYWdlRGF0YS5kYXRhOwoKCXZhciBwb2ludGVyVG9CdWZmZXIgPSBEcmF3MTZDb3JlLl9tYWxsb2MoZGF0YS5sZW5ndGgpOwoJdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KERyYXcxNkNvcmUuSEVBUFU4LmJ1ZmZlciwgcG9pbnRlclRvQnVmZmVyLCBkYXRhLmxlbmd0aCk7CglidWZmZXIuc2V0KG5ldyBVaW50OEFycmF5KGRhdGEuYnVmZmVyKSk7CgoJdmFyIHZhbHVlID0gRHJhdzE2Q29yZS5jY2FsbCgnZDE2VGV4dHVyZUxvYWQnLCAnbnVtYmVyJyxbJ251bWJlcicsJ251bWJlcicsJ251bWJlciddLCBbd2lkdGgsIGhlaWdodCwgYnVmZmVyLmJ5dGVPZmZzZXRdKTsKCURyYXcxNkNvcmUuX2ZyZWUoYnVmZmVyLmJ5dGVPZmZzZXQpOwoKCXJldHVybiB2YWx1ZTsKfQoKRHJhdzE2LmxvYWRUZXh0dXJlQXN5bmMgPSBmdW5jdGlvbihuYW1lLCBzcmMsIGNiKSB7CglEcmF3MTYudGV4dHVyZVtuYW1lXSA9IDA7Cgl2YXIgaW1nID0gbmV3IEltYWdlKCk7CglpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CgkJRHJhdzE2LnRleHR1cmVbbmFtZV0gPSBEcmF3MTYubG9hZFRleHR1cmUoaW1nKTsKCQlpZiAoY2IpCgkJCWNiKG5hbWUsIGltZywgRHJhdzE2LnRleHR1cmVbbmFtZV0pOwoJfQoJaW1nLnNyYyA9IHNyYzsKfQoKRHJhdzE2LmZsdXNoID0gZnVuY3Rpb24oKSB7IERyYXcxNkNvcmUuX2QxNkZsdXNoKCk7IH0KRHJhdzE2LmNsZWFyID0gZnVuY3Rpb24oKSB7IERyYXcxNkNvcmUuX2QxNkNsZWFyKCk7IH0KCkRyYXcxNi5kcmF3Q2hpcCA9IERyYXcxNkNvcmUuX2QxNkRyYXdDaGlwOyAvLyB0ZXh0dXJlLCBncmlkWCwgZ3JpZFksIHRhcmdldFgsIHRhcmdldFkKRHJhdzE2LmRyYXdDaGlwOCA9IERyYXcxNkNvcmUuX2QxNkRyYXdDaGlwODsgLy8gdGV4dHVyZSwgZ3JpZFgsIGdyaWRZLCB0YXJnZXRYLCB0YXJnZXRZCkRyYXcxNi5kcmF3QXJlYSA9IERyYXcxNkNvcmUuX2QxNkRyYXdBcmVhOyAvLyB0ZXh0dXJlLCB0YXJnZXRYLCB0YXJnZXRZLCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0LCBncmlkWCwgZ3JpZFksIHNvdXJjZVdpZHRoLCBzb3VyY2VIZWlnaHQKRHJhdzE2LmRyYXdUZXh0OCA9IERyYXcxNkNvcmUuY3dyYXAoJ2QxNkRyYXdUZXh0OCcsIG51bGwsIFsnbnVtYmVyJywgJ251bWJlcicsICdudW1iZXInLCAnc3RyaW5nJywgJ251bWJlcicsICdudW1iZXInXSk7IC8vIAoKRHJhdzE2LmRyYXdQaXhlbCA9IERyYXcxNkNvcmUuX2QxNkRyYXdQaXhlbDsgLy8gY29sb3IsIHRhcmdldFgsIHRhcmdldFkKRHJhdzE2LmRyYXdMaW5lID0gRHJhdzE2Q29yZS5fZDE2RHJhd0xpbmU7IC8vIGNvbG9yLCB0YXJnZXRYLCB0YXJnZXRZLCB0YXJnZXRYMiwgdGFyZ2V0WTIKRHJhdzE2LmRyYXdFbGxpcHNlID0gRHJhdzE2Q29yZS5fZDE2RHJhd0VsbGlwc2U7IC8vIGNvbG9yLCB0YXJnZXRYLCB0YXJnZXRZLCB3aWR0aCwgaGVpZ2h0CkRyYXcxNi5kcmF3RWxsaXBzZUZpbGwgPSBEcmF3MTZDb3JlLl9kMTZEcmF3RWxsaXBzZUZpbGw7IC8vIGNvbG9yLCB0YXJnZXRYLCB0YXJnZXRZLCB3aWR0aCwgaGVpZ2h0CkRyYXcxNi5kcmF3UmVjdGFuZ2xlID0gRHJhdzE2Q29yZS5fZDE2RHJhd1JlY3RhbmdsZTsgLy8gY29sb3IsIHRhcmdldFgsIHRhcmdldFksIHdpZHRoLCBoZWlnaHQKRHJhdzE2LmRyYXdSZWN0YW5nbGVGaWxsID0gRHJhdzE2Q29yZS5fZDE2RHJhd1JlY3RhbmdsZUZpbGw7IC8vIGNvbG9yLCB0YXJnZXRYLCB0YXJnZXRZLCB3aWR0aCwgaGVpZ2h0CgpEcmF3MTYuZDE2RHJhd1NoaWZ0TGluZUggPSBEcmF3MTZDb3JlLl9kMTZEcmF3U2hpZnRMaW5lSDsgLy8geSwgb2Zmc2V0CgpEcmF3MTYub25TdGVwID0gZnVuY3Rpb24oKSB7fQpEcmF3MTYub25TdGVwTGFzdFRpbWUgPSAwOwoKRHJhdzE2Lm9uU3RlcFdyYXBwZXIgPSBmdW5jdGlvbigpIHsKCXZhciBjdXJyZW50VGltZSA9IERhdGUubm93KCk7Cgl2YXIgZGVsdGEgPSAxMDAwIC8gRHJhdzE2LmZwczsKCWlmIChjdXJyZW50VGltZSAtIERyYXcxNi5vblN0ZXBMYXN0VGltZSA+IGRlbHRhKSB7CgkJRHJhdzE2Lm9uU3RlcExhc3RUaW1lICs9IGRlbHRhOwoJCWlmIChjdXJyZW50VGltZSAtIERyYXcxNi5vblN0ZXBMYXN0VGltZSA+IGRlbHRhICogMykgewoJCQlEcmF3MTYub25TdGVwTGFzdFRpbWUgPSBjdXJyZW50VGltZSAtIGRlbHRhICogMzsKCQl9CgoJCURyYXcxNi5mcHNNZWFzdXJlU3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7CgoJCURyYXcxNi5jbGVhcigpOwoJCURyYXcxNi5vblN0ZXAoKTsKCQlEcmF3MTYuZmx1c2goKTsKCgkJRHJhdzE2LmZwc01lYXN1cmVUaW1lICs9IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSAtIERyYXcxNi5mcHNNZWFzdXJlU3RhcnQ7CgkJRHJhdzE2LmZwc01lYXN1cmVTdGVwcysrOwoKCQlpZiAoRHJhdzE2Lm1vdXNlSGlkZSAhPSBEcmF3MTYuX21vdXNlSGlkZSkgewoJCQlEcmF3MTYuX21vdXNlSGlkZSA9IERyYXcxNi5tb3VzZUhpZGU7CgoJCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RyYXcxNkNhbnZhcycpOwoJCQljYW52YXMuc3R5bGUuY3Vyc29yID0gRHJhdzE2Lm1vdXNlSGlkZSA/ICdub25lJyA6ICdhdXRvJzsKCQl9CgoJCWlmIChEcmF3MTYuZml0TW9kZSAhPSBEcmF3MTYuX2ZpdE1vZGUpIHsKCQkJRHJhdzE2Ll9maXRNb2RlID0gRHJhdzE2LmZpdE1vZGU7CgoJCQlEcmF3MTYuX3VwZGF0ZUNhbnZhc1NpemUoKTsKCQl9CgoJCURyYXcxNi5zdGVwKys7Cgl9CgoJd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShEcmF3MTYub25TdGVwV3JhcHBlcik7Cn0KCkRyYXcxNi5zY3JlZW5Ub1BpeGVsUG9zaXRpb24gPSBmdW5jdGlvbih4LCB5KSB7Cgl2YXIgZiA9IHdpbmRvdy5pbm5lckhlaWdodCAvIERyYXcxNi5oZWlnaHQ7Cgl4ID0geCAvIGY7Cgl5ID0geSAvIGY7Cgl4ID0geCAtICh3aW5kb3cuaW5uZXJXaWR0aC9mIC0gRHJhdzE2LndpZHRoKSAvIDI7CglyZXR1cm4geyB4OiBNYXRoLmZsb29yKHgpLCB5OiBNYXRoLmZsb29yKHkpIH07Cn0KCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7CglpZiAoRHJhdzE2LmZ1bGxzY3JlZW4pIHsKCgkJdmFyIGYgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyBEcmF3MTYuaGVpZ2h0OwoKCQl2YXIgeCA9IGV2ZW50LmNsaWVudFg7CgkJdmFyIHkgPSBldmVudC5jbGllbnRZOwoKCQl4ID0geCAvIGY7CgkJeSA9IHkgLyBmOwoKCQl4ID0geCAtICh3aW5kb3cuaW5uZXJXaWR0aC9mIC0gRHJhdzE2LndpZHRoKSAvIDI7CgoJCURyYXcxNi5tb3VzZVggPSBNYXRoLmZsb29yKHgpOwoJCURyYXcxNi5tb3VzZVkgPSBNYXRoLmZsb29yKHkpOwoJfQp9LCBmYWxzZSk7Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7CglEcmF3MTYuX2ZpdE1vZGUgPSAtMTsKfSk7Cg=="></script>
		<script type="text/javascript" src="data:text/javascript;base64,ZnVuY3Rpb24gYmVlcEluaXQoKXtiZWVwLmF1ZGlvQ3R4fHwoYmVlcC5hdWRpb0N0eD1uZXcod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCksYmVlcChbWzQxODYuMDEsLjAwNV1dLC4wMSkpfWZ1bmN0aW9uIGJlZXAobm90ZXMsdm9sdW1lLHR5cGUpe2JlZXAuYXVkaW9DdHh8fGJlZXBJbml0KCk7dmFyIGF1ZGlvQ3R4PWJlZXAuYXVkaW9DdHgsYnBtPTI0MDsobm90ZXM9YmVlcENvbXBpbGUobm90ZXMpKXx8KG5vdGVzPVtbNDAwLDFdXSksdHlwZXx8KHR5cGU9InNxdWFyZSIpLHZvbHVtZXx8KHZvbHVtZT0uNSk7dmFyIHRpbWVTdGFydD1hdWRpb0N0eC5jdXJyZW50VGltZSx0aW1lQ3VycmVudD10aW1lU3RhcnQsZ2Fpbj1hdWRpb0N0eC5jcmVhdGVHYWluKCk7Z2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKSxnYWluLmdhaW4udmFsdWU9dm9sdW1lLzQ7dmFyIG9zY2lsbGF0b3I9YXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpO29zY2lsbGF0b3IudHlwZT10eXBlLG9zY2lsbGF0b3IuY29ubmVjdChnYWluKSxvc2NpbGxhdG9yLnN0YXJ0KHRpbWVTdGFydCk7Zm9yKHZhciBpPTA7aTxub3Rlcy5sZW5ndGg7aSsrKXt2YXIga2V5PW5vdGVzW2ldWzBdLHZhbHVlPW5vdGVzW2ldWzFdOyJ2b2wiIT1rZXk/ImJwbSIhPWtleT8oa2V5Pyhvc2NpbGxhdG9yLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShrZXksdGltZUN1cnJlbnQpLGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUvNCx0aW1lQ3VycmVudCkpOihvc2NpbGxhdG9yLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgwLHRpbWVDdXJyZW50KSxnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCx0aW1lQ3VycmVudCkpLHRpbWVDdXJyZW50Kz0yNDAqdmFsdWUvYnBtKTooY29uc29sZS5sb2coIlgiKSxicG09dmFsdWUpOnZvbHVtZT12YWx1ZX1vc2NpbGxhdG9yLnN0b3AodGltZUN1cnJlbnQpfWZ1bmN0aW9uIHNvdW5kKGZyZXF1ZW5jeSxkdXJhdGlvbix2b2x1bWUpe2R1cmF0aW9ufHwoZHVyYXRpb249MSksYmVlcChbW2ZyZXF1ZW5jeSxkdXJhdGlvbl1dLHZvbHVtZSl9ZnVuY3Rpb24gYmVlcENvbXBpbGUocyl7aWYoInN0cmluZyIhPXR5cGVvZiBzKXJldHVybiBzO3ZhciBub3RlTGlzdD1bXSxkdXJhdGlvbj0xLGdhcD0wO3M9KHM9KHM9KHM9KHM9cy5yZXBsYWNlKC9bIF0jWyBdLiovZywiIikpLnJlcGxhY2UoL1xzKy9nLCIgIikpLnRyaW0oKSkudG9Mb3dlckNhc2UoKSkuc3BsaXQoIiAiKTtmb3IodmFyIGk9MDtpPHMubGVuZ3RoO2krKyl7aWYoKGN1cj1zW2ldKS5tYXRjaCgvXltjZGVmZ2FiaC1dWyNiXT9bMC05XT8kLykpe2lmKCItIj09Y3VyKXtub3RlTGlzdC5wdXNoKFswLGR1cmF0aW9uXSk7Y29udGludWV9Y3VyLm1hdGNoKC9bMC05XS8pfHwoY3VyKz0iNCIpLGdhcCYmZ2FwPGR1cmF0aW9uPyhub3RlTGlzdC5wdXNoKFtjdXIsZHVyYXRpb24tZ2FwXSksbm90ZUxpc3QucHVzaChbMCxnYXBdKSk6bm90ZUxpc3QucHVzaChbY3VyLGR1cmF0aW9uXSl9ZWxzZSBpZihjdXIubWF0Y2goL15bMC05XSsoXC5bMC05XSspPyhcL1swLTldKyhcLlswLTldKyk/KT8kLykpZHVyYXRpb249MT09KGN1cj1jdXIuc3BsaXQoIi8iKSkubGVuZ3RoPzEqY3VyWzBdOmN1clswXS9jdXJbMV07ZWxzZSBpZihjdXIubWF0Y2goL14oZ2FwfHZvbHxicG0pPVswLTldKyhcLlswLTldKyk/KFwvWzAtOV0rKFwuWzAtOV0rKT8pPyQvKSl7dmFyIG5hbWU9KGN1cj1jdXIuc3BsaXQoIj0iKSlbMF0sdmFsdWU9MDt2YWx1ZT0xPT0oY3VyPWN1clsxXS5zcGxpdCgiLyIpKS5sZW5ndGg/MSpjdXJbMF06Y3VyWzBdL2N1clsxXSwiZ2FwIj09bmFtZT9nYXA9dmFsdWU6InZvbCIhPW5hbWUmJiJicG0iIT1uYW1lfHxub3RlTGlzdC5wdXNoKFtuYW1lLHZhbHVlXSl9fWZvcihpPTA7aTxub3RlTGlzdC5sZW5ndGg7aSsrKXt2YXIgY3VyPW5vdGVMaXN0W2ldO2JlZXBOb3RlW2N1clswXV0/Y3VyWzBdPWJlZXBOb3RlW2N1clswXV06Ii0iPT1jdXJbMF0mJihjdXJbMF09MCl9cmV0dXJuIGNvbnNvbGUubG9nKG5vdGVMaXN0KSxub3RlTGlzdH12YXIgYmVlcE5vdGU9e2M4OjQxODYuMDEsYjc6Mzk1MS4wNywiYSM3IjozNzI5LjMxLGE3OjM1MjAsImcjNyI6MzMyMi40NCxnNzozMTM1Ljk2LCJmIzciOjI5NTkuOTYsZjc6Mjc5My44MyxlNzoyNjM3LjAyLCJkIzciOjI0ODkuMDIsZDc6MjM0OS4zMiwiYyM3IjoyMjE3LjQ2LGM3OjIwOTMsYjY6MTk3NS41MywiYSM2IjoxODY0LjY2LGE2OjE3NjAsImcjNiI6MTY2MS4yMixnNjoxNTY3Ljk4LCJmIzYiOjE0NzkuOTgsZjY6MTM5Ni45MSxlNjoxMzE4LjUxLCJkIzYiOjEyNDQuNTEsZDY6MTE3NC42NiwiYyM2IjoxMTA4LjczLGM2OjEwNDYuNSxiNTo5ODcuNzY3LCJhIzUiOjkzMi4zMjgsYTU6ODgwLCJnIzUiOjgzMC42MDksZzU6NzgzLjk5MSwiZiM1Ijo3MzkuOTg5LGY1OjY5OC40NTYsZTU6NjU5LjI1NSwiZCM1Ijo2MjIuMjU0LGQ1OjU4Ny4zMywiYyM1Ijo1NTQuMzY1LGM1OjUyMy4yNTEsYjQ6NDkzLjg4MywiYSM0Ijo0NjYuMTY0LGE0OjQ0MCwiZyM0Ijo0MTUuMzA1LGc0OjM5MS45OTUsImYjNCI6MzY5Ljk5NCxmNDozNDkuMjI4LGU0OjMyOS42MjgsImQjNCI6MzExLjEyNyxkNDoyOTMuNjY1LCJjIzQiOjI3Ny4xODMsYzQ6MjYxLjYyNixiMzoyNDYuOTQyLCJhIzMiOjIzMy4wODIsYTM6MjIwLCJnIzMiOjIwNy42NTIsZzM6MTk1Ljk5OCwiZiMzIjoxODQuOTk3LGYzOjE3NC42MTQsZTM6MTY0LjgxNCwiZCMzIjoxNTUuNTYzLGQzOjE0Ni44MzIsImMjMyI6MTM4LjU5MSxjMzoxMzAuODEzLGIyOjEyMy40NzEsImEjMiI6MTE2LjU0MSxhMjoxMTAsImcjMiI6MTAzLjgyNixnMjo5Ny45OTg5LCJmIzIiOjkyLjQ5ODYsZjI6ODcuMzA3MSxlMjo4Mi40MDY5LCJkIzIiOjc3Ljc4MTcsZDI6NzMuNDE2MiwiYyMyIjo2OS4yOTU3LGMyOjY1LjQwNjQsYjE6NjEuNzM1NCwiYSMxIjo1OC4yNzA1LGExOjU1LCJnIzEiOjUxLjkxMzEsZzE6NDguOTk5NCwiZiMxIjo0Ni4yNDkzLGYxOjQzLjY1MzUsZTE6NDEuMjAzNCwiZCMxIjozOC44OTA5LGQxOjM2LjcwODEsImMjMSI6MzQuNjQ3OCxjMTozMi43MDMyLGIwOjMwLjg2NzcsImEjMCI6MjkuMTM1MixhMDoyNy41LGJiNzozNzI5LjMxLGFiNzozMzIyLjQ0LGdiNzoyOTU5Ljk2LGViNzoyNDg5LjAyLGRiNzoyMjE3LjQ2LGJiNjoxODY0LjY2LGFiNjoxNjYxLjIyLGdiNjoxNDc5Ljk4LGViNjoxMjQ0LjUxLGRiNjoxMTA4LjczLGJiNTo5MzIuMzI4LGFiNTo4MzAuNjA5LGdiNTo3MzkuOTg5LGViNTo2MjIuMjU0LGRiNTo1NTQuMzY1LGJiNDo0NjYuMTY0LGFiNDo0MTUuMzA1LGdiNDozNjkuOTk0LGViNDozMTEuMTI3LGRiNDoyNzcuMTgzLGJiMzoyMzMuMDgyLGFiMzoyMDcuNjUyLGdiMzoxODQuOTk3LGViMzoxNTUuNTYzLGRiMzoxMzguNTkxLGJiMjoxMTYuNTQxLGFiMjoxMDMuODI2LGdiMjo5Mi40OTg2LGViMjo3Ny43ODE3LGRiMjo2OS4yOTU3LGJiMTo1OC4yNzA1LGFiMTo1MS45MTMxLGdiMTo0Ni4yNDkzLGViMTozOC44OTA5LGRiMTozNC42NDc4LGJiMDoyOS4xMzUyLGg3OjM5NTEuMDcsaDY6MTk3NS41MyxoNTo5ODcuNzY3LGg0OjQ5My44ODMsaDM6MjQ2Ljk0MixoMjoxMjMuNDcxLGgxOjYxLjczNTQsaDA6MzAuODY3NyxoYjc6MzcyOS4zMSxoYjY6MTg2NC42NixoYjU6OTMyLjMyOCxoYjQ6NDY2LjE2NCxoYjM6MjMzLjA4MixoYjI6MTE2LjU0MSxoYjE6NTguMjcwNSxoYjA6MjkuMTM1MixrODg6NDE4Ni4wMSxrODc6Mzk1MS4wNyxrODY6MzcyOS4zMSxrODU6MzUyMCxrODQ6MzMyMi40NCxrODM6MzEzNS45NixrODI6Mjk1OS45NixrODE6Mjc5My44MyxrODA6MjYzNy4wMixrNzk6MjQ4OS4wMixrNzg6MjM0OS4zMixrNzc6MjIxNy40NixrNzY6MjA5MyxrNzU6MTk3NS41MyxrNzQ6MTg2NC42NixrNzM6MTc2MCxrNzI6MTY2MS4yMixrNzE6MTU2Ny45OCxrNzA6MTQ3OS45OCxrNjk6MTM5Ni45MSxrNjg6MTMxOC41MSxrNjc6MTI0NC41MSxrNjY6MTE3NC42NixrNjU6MTEwOC43MyxrNjQ6MTA0Ni41LGs2Mzo5ODcuNzY3LGs2Mjo5MzIuMzI4LGs2MTo4ODAsazYwOjgzMC42MDksazU5Ojc4My45OTEsazU4OjczOS45ODksazU3OjY5OC40NTYsazU2OjY1OS4yNTUsazU1OjYyMi4yNTQsazU0OjU4Ny4zMyxrNTM6NTU0LjM2NSxrNTI6NTIzLjI1MSxrNTE6NDkzLjg4MyxrNTA6NDY2LjE2NCxrNDk6NDQwLGs0ODo0MTUuMzA1LGs0NzozOTEuOTk1LGs0NjozNjkuOTk0LGs0NTozNDkuMjI4LGs0NDozMjkuNjI4LGs0MzozMTEuMTI3LGs0MjoyOTMuNjY1LGs0MToyNzcuMTgzLGs0MDoyNjEuNjI2LGszOToyNDYuOTQyLGszODoyMzMuMDgyLGszNzoyMjAsazM2OjIwNy42NTIsazM1OjE5NS45OTgsazM0OjE4NC45OTcsazMzOjE3NC42MTQsazMyOjE2NC44MTQsazMxOjE1NS41NjMsazMwOjE0Ni44MzIsazI5OjEzOC41OTEsazI4OjEzMC44MTMsazI3OjEyMy40NzEsazI2OjExNi41NDEsazI1OjExMCxrMjQ6MTAzLjgyNixrMjM6OTcuOTk4OSxrMjI6OTIuNDk4NixrMjE6ODcuMzA3MSxrMjA6ODIuNDA2OSxrMTk6NzcuNzgxNyxrMTg6NzMuNDE2MixrMTc6NjkuMjk1NyxrMTY6NjUuNDA2NCxrMTU6NjEuNzM1NCxrMTQ6NTguMjcwNSxrMTM6NTUsazEyOjUxLjkxMzEsazExOjQ4Ljk5OTQsazEwOjQ2LjI0OTMsazk6NDMuNjUzNSxrODo0MS4yMDM0LGs3OjM4Ljg5MDksazY6MzYuNzA4MSxrNTozNC42NDc4LGs0OjMyLjcwMzIsazM6MzAuODY3NyxrMjoyOS4xMzUyLGsxOjI3LjV9Ow=="></script>

		<script type="text/javascript" src="data:text/javascript;base64,ZnVuY3Rpb24gc3BhY2VEaXN0YW5jZSh4MSwgeTEsIHgyLCB5MikgewoJdmFyIHggPSB4MiAtIHgxOwoJdmFyIHkgPSB5MiAtIHkxOwoJd2hpbGUgKHggPiBEcmF3MTYud2lkdGgvMikgeCAtPSBEcmF3MTYud2lkdGg7Cgl3aGlsZSAoeCA8IC1EcmF3MTYud2lkdGgvMikgeCArPSBEcmF3MTYud2lkdGg7Cgl3aGlsZSAoeSA+IERyYXcxNi5oZWlnaHQvMikgeSAtPSBEcmF3MTYuaGVpZ2h0OwoJd2hpbGUgKHkgPCAtRHJhdzE2LmhlaWdodC8yKSB5ICs9IERyYXcxNi5oZWlnaHQ7CglyZXR1cm4gcG9pbnREaXN0YW5jZSgwLCAwLCB4LCB5KTsKfQoKZnVuY3Rpb24gcG9pbnREaXN0YW5jZSh4MSwgeTEsIHgyLCB5MikgewoJdmFyIGEgPSAoeDIteDEpKih4Mi14MSk7Cgl2YXIgYiA9ICh5Mi15MSkqKHkyLXkxKTsKCXJldHVybiBNYXRoLnNxcnQoYStiKTsKfQoKZnVuY3Rpb24gcG9pbnRJbkRpcih4LCB5LCBkLCBhKSB7CglyZXR1cm4gcG9pbnRSb3VuZFBvaW50KHgsIHkgLSBkLCB4LCB5LCBhKTsKfQoKZnVuY3Rpb24gcG9pbnRSb3VuZFBvaW50KHB4LCBweSwgY3gsIGN5LCBhKSB7CglhID0gYS8xODAqTWF0aC5QSTsKCXZhciBzID0gTWF0aC5zaW4oYSk7Cgl2YXIgYyA9IE1hdGguY29zKGEpOwoJcHggLT0gY3g7CglweSAtPSBjeTsKCgl2YXIgbnggPSBweCAqIGMgLSBweSAqIHM7Cgl2YXIgbnkgPSBweCAqIHMgKyBweSAqIGM7CgoJcHggPSBueCArIGN4OwoJcHkgPSBueSArIGN5OwoJcmV0dXJuIFtNYXRoLnJvdW5kKHB4KjEwMDAwKS8xMDAwMCwgTWF0aC5yb3VuZChweSoxMDAwMCkvMTAwMDBdOwp9CgpmdW5jdGlvbiBhbmdsZUZyb21Qb2ludHMoeDEsIHkxLCB4MiwgeTIpIHsKCXZhciBhID0gMTgwICogTWF0aC5hdGFuMih5Mi15MSwgeDIteDEpIC8gTWF0aC5QSTsKCWEgLT0gMjcwOwoJd2hpbGUgKGEgPCAwKQoJCWEgKz0gMzYwOwoJcmV0dXJuIGE7Cn0KCmZ1bmN0aW9uIHJhbmQoYSwgYikgewoJaWYgKHR5cGVvZiBiID09ICd1bmRlZmluZWQnKSB7CgkJYiA9IGE7CgkJYSA9IDA7Cgl9CglpZiAoYSA+IGIpIHsKCQl2YXIgYyA9IGI7CgkJYiA9IGE7CgkJYSA9IGM7Cgl9CglpZiAoYi1hIDwgMTAwMCkgewoJCS8vIGJldHRlciByYW5kb20gbnVtYmVyCgkJcmV0dXJuIGEgKyAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDAwMCkgJSAoYi1hKzEpKTsKCX0KCXJldHVybiBhICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpOwp9Cg=="></script>
		<script type="text/javascript" src="data:text/javascript;base64,dmFyIGtleVN0YXRlID0ge307Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKCWlmICghKAoJCWUuY3RybEtleQoJCXx8IGUuYWx0S2V5CgkJfHwgKGUuY29kZSA9PSAnS2V5UicgJiYgZS5jdHJsS2V5KSAvLyBSZWxvYWQKCQl8fCAoKGUuY29kZS5sZW5ndGg9PTJ8fGUuY29kZS5sZW5ndGg9PTMpICYmIGUuY29kZS5jaGFyQXQoMCkgPT0gJ0YnKSAvLyBGdW5jdGlvbiBrZXlzCgkpKSB7CgkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJfQoKCXZhciBrZXlDb2RlID0gZS5jb2RlOwoJaWYgKGtleUNvZGUuc3Vic3RyKDAsMykgPT0gJ0tleScpIGtleUNvZGUgPSBrZXlDb2RlLnN1YnN0cmluZygzLCBrZXlDb2RlLmxlbmd0aCk7CglrZXlDb2RlID0ga2V5Q29kZS5zdWJzdHIoMCwxKS50b0xvd2VyQ2FzZSgpK2tleUNvZGUuc3Vic3RyKDEpOwoJa2V5U3RhdGVba2V5Q29kZV0gPSB0cnVlOwp9KTsKCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHsKCWUucHJldmVudERlZmF1bHQoKTsKCgl2YXIga2V5Q29kZSA9IGUuY29kZTsKCWlmIChrZXlDb2RlLnN1YnN0cigwLDMpID09ICdLZXknKSBrZXlDb2RlID0ga2V5Q29kZS5zdWJzdHJpbmcoMywga2V5Q29kZS5sZW5ndGgpOwoJa2V5Q29kZSA9IGtleUNvZGUuc3Vic3RyKDAsMSkudG9Mb3dlckNhc2UoKStrZXlDb2RlLnN1YnN0cigxKTsKCWtleVN0YXRlW2tleUNvZGVdID0gZmFsc2U7Cn0pOwo="></script>
		
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgQXBwIHsKCgljb25zdHJ1Y3RvcigpIHsKCQl3aW5kb3cuYXBwID0gdGhpczsKCgkJdGhpcy5zY29yZSA9IDA7CgkJdGhpcy5saXZlcyA9IDM7CgkJdGhpcy5sZXZlbCA9IDE7CgoJCXRoaXMuc3RhcnRTdGVwID0gMDsKCQkKCQl0aGlzLm1lbnUgPSB0cnVlOwoJCXRoaXMuZ2FtZU92ZXIgPSB0cnVlOwoKCQl0aGlzLnNoaXAgPSBudWxsOwoJCXRoaXMuc2hpcENvb2xEb3duID0gMDsKCgkJdGhpcy5hc3Rlcm9pZENvdW50ID0gMDsKCgkJdGhpcy5oaWdoc2NvcmVMaXN0ID0gSGlnaHNjb3JlLmdldExpc3QoKTsKCgkJdGhpcy5yZXNldCgpOwoJfQoKCXRyaWdnZXJTdGVwKCkgewoKCQkvLyBDYWxsIHRoZSBvblN0ZXAgZnVuY3Rpb24gb24gZXZlcnkgb2JqZWN0CgkJZm9yICh2YXIgaT0wOyBpPG9iamVjdExpc3QubGVuZ3RoOyBpKyspIHsKCQkJaWYgKG9iamVjdExpc3RbaV0ub25TdGVwKQoJCQkJb2JqZWN0TGlzdFtpXS5vblN0ZXAoKTsKCQl9CgoJCS8vIENhbGwgb3duIG9uU3RlcCBmdW5jdGlvbgoJCXRoaXMub25TdGVwKCk7CgoJCS8vIENhbGwgdGhlIG9uRHJhdyBmdW5jdGlvbiBvbiBldmVyeSBvYmplY3QKCQlmb3IgKHZhciBpPTA7IGk8b2JqZWN0TGlzdC5sZW5ndGg7IGkrKykgewoJCQlpZiAob2JqZWN0TGlzdFtpXS5vbkRyYXcpCgkJCQlvYmplY3RMaXN0W2ldLm9uRHJhdygpOwoJCX0KCgkJLy8gQ2FsbCBvd24gb25EcmF3IGZ1bmN0aW9uCgkJdGhpcy5vbkRyYXcoKTsKCX0KCglvblN0ZXAoKSB7CgoJCS8vIFN0YXJ0IGdhbWUgKFNwYWNlIGtleSkKCQlpZiAoa2V5U3RhdGUuc3BhY2UgJiYgdGhpcy5tZW51ICYmICF0aGlzLnNoaXBDb29sRG93bikgewoJCQl0aGlzLm1lbnUgPSBmYWxzZTsKCQkJdGhpcy5yZXNldCgpOwoJCX0KCgkJLy8gQmFjayB0byBtZW51IChTcGFjZSBrZXkpCgkJaWYgKGtleVN0YXRlLnNwYWNlICYmICF0aGlzLm1lbnUgJiYgdGhpcy5nYW1lT3ZlciAmJiAhdGhpcy5zaGlwQ29vbERvd24pIHsKCQkJdGhpcy5tZW51ID0gdHJ1ZTsKCQkJdGhpcy5zaGlwQ29vbERvd24gPSA2MDsKCQkJdGhpcy5yZXNldCgpOwoJCX0KCgkJLy8gUmVzcGF3biBzaGlwIHdoZW4gYXQgbGVhc3Qgb25lIGxpdmUgaXMgbGVmdAoJCWlmICh0aGlzLnNoaXBDb29sRG93bikgewoJCQl0aGlzLnNoaXBDb29sRG93bi0tOwoJCQlpZiAoIXRoaXMuc2hpcENvb2xEb3duICYmIHRoaXMubGl2ZXMgJiYgIXRoaXMubWVudSkKCQkJCW5ldyBTaGlwKERyYXcxNi53aWR0aC8yLCBEcmF3MTYuaGVpZ2h0LzIpOwoJCX0KCgkJLy8gU2V0IHRoZSBjb29sZG93biB3aGVuIG5vIHNoaXAgaXMgcHJlc2VudAoJCWlmICghdGhpcy5tZW51ICYmICF0aGlzLnNoaXAgJiYgIXRoaXMuc2hpcENvb2xEb3duICYmICF0aGlzLmdhbWVPdmVyKSB7CgkJCXRoaXMuc2hpcENvb2xEb3duID0gNjA7CgkJfQoKCQkvLyBHYW1lIG92ZXIgY29uZGl0aW9uCgkJaWYgKCF0aGlzLm1lbnUgJiYgIXRoaXMuc2hpcCAmJiAhdGhpcy5saXZlcyAmJiAhdGhpcy5nYW1lT3ZlcikgewoJCQl0aGlzLmdhbWVPdmVyID0gdHJ1ZTsKCQkJSGlnaHNjb3JlLmFkZCh0aGlzLnNjb3JlKTsKCQl9CgoJCS8vIE5leHQgbGV2ZWwgY29uZGl0aW9uCgkJaWYgKCF0aGlzLmFzdGVyb2lkQ291bnQpIHsKCQkJdGhpcy5sZXZlbCsrOwoJCQl0aGlzLnJlc2V0TGV2ZWwoKTsKCQl9Cgl9CgoJb25EcmF3KCkgewoKCQkvLyBEcmF3IHRoZSBtZW51CgkJaWYgKHRoaXMubWVudSkgewoKCQkJLy8gTG9nbyBncmFwaGljCgkJCURyYXcxNi5kcmF3QXJlYShEcmF3MTYudGV4dHVyZS5sb2dvLCAwLCAzMik7CgoJCQkvLyBUZXh0OiBIaWdoc2NvcmUKCQkJRHJhdzE2LmRyYXdUZXh0OChEcmF3MTYudGV4dHVyZS5mb250LCAxLCAweGZmZmZmZiwgJ0hpZ2hzY29yZScsIDg4LCAxMTIpOwoKCQkJLy8gVGV4dDogUmVjZW50IGhpZ2hzY29yZXMgd2l0aCBkYXRlIGFuZCBzY29yZQoJCQlmb3IgKHZhciBpPTA7IGk8dGhpcy5oaWdoc2NvcmVMaXN0Lmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgc2NvcmUgPSB0aGlzLmhpZ2hzY29yZUxpc3RbaV07CgkJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDAsIDB4ZmZmZmZmLCBzY29yZVsxXSwgODgsIDEyMitpKjEwKTsKCQkJCURyYXcxNi5kcmF3VGV4dDgoRHJhdzE2LnRleHR1cmUuZm9udCwgMCwgMHhmZmZmZmYsIHNjb3JlWzBdKycnLCAxNDQsIDEyMitpKjEwKTsKCQkJfQoKCQkJLy8gQmxpbmtpbmcgdGV4dDogUHJlc3Mgc3BhY2UgdG8gc3RhcnQhCgkJCWlmIChNYXRoLmZsb29yKERyYXcxNi5zdGVwLzMwKSAlIDIpCgkJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDEsIDB4ZmZmZmZmLCAnUHJlc3Mgc3BhY2UgdG8gc3RhcnQhJywgNzgsIDE5Mik7CgoJCQkvLyBUZXh0OiBWZXJzaW9uCgkJCURyYXcxNi5kcmF3VGV4dDgoRHJhdzE2LnRleHR1cmUuZm9udCwgMCwgMHhmZmZmZmYsICdWIDEuMCcsIDgsIERyYXcxNi5oZWlnaHQtMTYpOwoJCX0KCgkJLy8gRHJhdyBpbmdhbWUgZWxlbWVudHMKCQllbHNlIHsKCgkJCS8vIFRleHQ6IExldmVsIFgKCQkJaWYgKERyYXcxNi5zdGVwIC0gdGhpcy5zdGFydFN0ZXAgPCAxMjApIHsKCQkJCURyYXcxNi5kcmF3VGV4dDgoRHJhdzE2LnRleHR1cmUuZm9udCwgMSwgMHhmZmZmZmYsICdMZXZlbCAnK3RoaXMubGV2ZWwsIERyYXcxNi53aWR0aC8yLTE2LCA2NCk7CgkJCX0KCgkJCS8vIFRleHQ6IEdBTUUgT1ZFUgoJCQlpZiAoIXRoaXMubWVudSAmJiB0aGlzLmdhbWVPdmVyKSB7CgkJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDEsIDB4ZmZmZmZmLCAnR0FNRSBPVkVSJywgRHJhdzE2LndpZHRoLzItMjYsIERyYXcxNi5oZWlnaHQvMi00KTsKCQkJfQoKCQkJLy8gVGV4dDogU0NPUkUgKyBYCgkJCURyYXcxNi5kcmF3VGV4dDgoRHJhdzE2LnRleHR1cmUuZm9udCwgMSwgMHhmZmZmZmYsICdTQ09SRScsIDgsIDgpOwoJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDAsIDB4ZmZmZmZmLCB0aGlzLnNjb3JlKycnLCA4LCAxNik7CgoJCQkvLyBUZXh0OiBMSVZFUyArIGhlYXJ0cwoJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDEsIDB4ZmZmZmZmLCAnTElWRVMnLCBEcmF3MTYud2lkdGgtMzcsIDgpOwoKCQkJaWYgKGFwcC5saXZlcyA+PSAxKQoJCQkJRHJhdzE2LmRyYXdUZXh0OChEcmF3MTYudGV4dHVyZS5mb250LCAwLCAweGZmZmZmZiwgJ34pJywgRHJhdzE2LndpZHRoLTE1LCAxNik7CgkJCWlmIChhcHAubGl2ZXMgPj0gMikKCQkJRHJhdzE2LmRyYXdUZXh0OChEcmF3MTYudGV4dHVyZS5mb250LCAwLCAweGZmZmZmZiwgJ34pJywgRHJhdzE2LndpZHRoLTE1LTgsIDE2KTsKCQkJaWYgKGFwcC5saXZlcyA+PSAzKQoJCQlEcmF3MTYuZHJhd1RleHQ4KERyYXcxNi50ZXh0dXJlLmZvbnQsIDAsIDB4ZmZmZmZmLCAnfiknLCBEcmF3MTYud2lkdGgtMTUtMTYsIDE2KTsKCgkJfQoJfQoKCXJlc2V0KCkgewoJCS8vIFJlc2V0IHRoZSBnYW1lCgkJdGhpcy5saXZlcyA9IDM7CgkJdGhpcy5sZXZlbCA9IDE7CgkJdGhpcy5zY29yZSA9IDA7CgkJdGhpcy5nYW1lT3ZlciA9IGZhbHNlOwoKCQkvLyBSZWxvYWQgaGlnaHNjb3JlIGxpc3QKCQl0aGlzLmhpZ2hzY29yZUxpc3QgPSBIaWdoc2NvcmUuZ2V0TGlzdCgpOwoKCQkvLyBBbHNvIHJlc2V0IGxldmVsIHBhcmFtZXRlcnMKCQl0aGlzLnJlc2V0TGV2ZWwoKTsKCX0KCglyZXNldExldmVsKCkgewoKCQkvLyBDbGVhciBhbGwgb2JqZWN0cwoJCW9iamVjdExpc3QgPSBbXTsKCgkJLy8gU2V0IGFzdGVyb2lkIGNvdW50ZXIgdG8gemVybwoJCXRoaXMuYXN0ZXJvaWRDb3VudCA9IDA7CgoJCS8vIEFkZCBzYW1wbGUgYXN0ZXJvaWRzIGluIHRoZSBtZW51CgkJaWYgKHRoaXMubWVudSkgewoJCQlmb3IgKHZhciBpPTA7IGk8ODsgaSsrKSB7CgkJCQluZXcgQXN0ZXJvaWQocmFuZCgwLERyYXcxNi53aWR0aCksIHJhbmQoMCxEcmF3MTYuaGVpZ2h0KSwgcmFuZCgxLDQpKTsKCQkJfQoJCX0KCgkJLy8gQWRkIGVuZW15IGFzdGVyb2lkcyBpbiB0aGUgZ2FtZQoJCWVsc2UgewoKCQkJLy8gU2V0IHRoZSBzdGFydCBzdGVwIGFuZCBjb29sZG93bgoJCQl0aGlzLnNoaXBDb29sRG93biA9IDYwOwoJCQl0aGlzLnN0YXJ0U3RlcCA9IERyYXcxNi5zdGVwOwoKCQkJLy8gQWRkIHRocmVlIHNtYWxsZXIgYXN0ZXJvaWRzCgkJCW5ldyBBc3Rlcm9pZChyYW5kKDAsRHJhdzE2LndpZHRoKSwgcmFuZCgwLERyYXcxNi5oZWlnaHQpLCAxKTsKCQkJbmV3IEFzdGVyb2lkKHJhbmQoMCxEcmF3MTYud2lkdGgpLCByYW5kKDAsRHJhdzE2LmhlaWdodCksIDIpOwoJCQluZXcgQXN0ZXJvaWQocmFuZCgwLERyYXcxNi53aWR0aCksIHJhbmQoMCxEcmF3MTYuaGVpZ2h0KSwgMyk7CgoJCQkvLyBBZGQgYSBiaWcgYXN0ZXJvaWQgZm9yIGV2ZXJ5IHJlYWNoZWQgbGV2ZWwKCQkJZm9yICh2YXIgaT0xOyBpPHRoaXMubGV2ZWw7IGkrKykgewoJCQkJbmV3IEFzdGVyb2lkKHJhbmQoMCxEcmF3MTYud2lkdGgpLCByYW5kKDAsRHJhdzE2LmhlaWdodCksIDQpOwoJCQl9CgoJCX0KCX0KfQo="></script>
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgQXN0ZXJvaWQgewoKCWNvbnN0cnVjdG9yKHgsIHksIHNpemUpIHsKCQl0aGlzLnggPSB4OwoJCXRoaXMueSA9IHk7CgkJdGhpcy5zaXplID0gc2l6ZTsKCQl0aGlzLmRpYSA9IChzaXplKzEpKjQ7CgkJdGhpcy5zcGVlZCA9IDEuNTsKCQl0aGlzLmRpciA9IHJhbmQoMCwgMzU5KTsKCgkJdGhpcy5kcmF3UG9pbnRzID0gW107CgkJZm9yICh2YXIgaT0wOyBpPDE2OyBpKyspCgkJCXRoaXMuZHJhd1BvaW50cy5wdXNoKHBvaW50SW5EaXIoMCwgMCwgdGhpcy5kaWEvMiwgaSozNjAvMTYpKTsKCQlmb3IgKHZhciBpPTA7IGk8MTY7IGkrKykgewoJCQl0aGlzLmRyYXdQb2ludHNbaV1bMF0gKz0gcmFuZCgtMTAsMTApLzEwOwoJCX0KCgkJb2JqZWN0TGlzdC5wdXNoKHRoaXMpOwoJCWFwcC5hc3Rlcm9pZENvdW50Kys7Cgl9CgoJb25TdGVwKCkgewoJCXZhciBwID0gcG9pbnRJbkRpcih0aGlzLngsIHRoaXMueSwgdGhpcy5zcGVlZCwgdGhpcy5kaXIpOwoJCXRoaXMueCA9IHBbMF07CgkJdGhpcy55ID0gcFsxXTsKCgkJaWYgKHRoaXMueCA+IERyYXcxNi53aWR0aC8yKQoJCQl0aGlzLnggLT0gRHJhdzE2LndpZHRoOwoJCWlmICh0aGlzLnggPCAtRHJhdzE2LndpZHRoLzIpCgkJCXRoaXMueCArPSBEcmF3MTYud2lkdGg7CgkJaWYgKHRoaXMueSA+IERyYXcxNi5oZWlnaHQvMikKCQkJdGhpcy55IC09IERyYXcxNi5oZWlnaHQ7CgkJaWYgKHRoaXMueSA8IC1EcmF3MTYuaGVpZ2h0LzIpCgkJCXRoaXMueSArPSBEcmF3MTYuaGVpZ2h0OwoKCQlpZiAoIWFwcC5nYW1lT3ZlcikgewoJCQlmb3IgKHZhciBpPTA7IGk8b2JqZWN0TGlzdC5sZW5ndGg7IGkrKykgewoJCQkJaWYgKG9iamVjdExpc3RbaV0uaXNMYXNlcikgewoJCQkJCWlmIChzcGFjZURpc3RhbmNlKG9iamVjdExpc3RbaV0ueCwgb2JqZWN0TGlzdFtpXS55LCB0aGlzLngsIHRoaXMueSkgPD0gdGhpcy5kaWEpIHsKCQkJCQkJb2JqZWN0TGlzdFtpXS5kZXN0cm95KCk7CgoJCQkJCQlhcHAuc2NvcmUgKz0gdGhpcy5zaXplKjU7CgoJCQkJCQl0aGlzLmRhbWFnZSgpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoJCQkJaWYgKG9iamVjdExpc3RbaV0uaXNTaGlwKSB7CgkJCQkJaWYgKAoJCQkJCQlzcGFjZURpc3RhbmNlKG9iamVjdExpc3RbaV0ueCwgb2JqZWN0TGlzdFtpXS55LCB0aGlzLngsIHRoaXMueSkgPD0gdGhpcy5kaWEvMgoJCQkJCQl8fCBzcGFjZURpc3RhbmNlKG9iamVjdExpc3RbaV0uZnJvbnRYLCBvYmplY3RMaXN0W2ldLmZyb250WSwgdGhpcy54LCB0aGlzLnkpIDw9IHRoaXMuZGlhLzIKCQkJCQkJfHwgc3BhY2VEaXN0YW5jZShvYmplY3RMaXN0W2ldLmxlZnRYLCBvYmplY3RMaXN0W2ldLmxlZnRZLCB0aGlzLngsIHRoaXMueSkgPD0gdGhpcy5kaWEvMgoJCQkJCQl8fCBzcGFjZURpc3RhbmNlKG9iamVjdExpc3RbaV0ucmlnaHRYLCBvYmplY3RMaXN0W2ldLnJpZ2h0WSwgdGhpcy54LCB0aGlzLnkpIDw9IHRoaXMuZGlhLzIKCQkJCQkpIHsKCQkJCQkJaWYgKG9iamVjdExpc3RbaV0uZGFtYWdlKCkpIHsKCQkJCQkJCXRoaXMuZGFtYWdlKHRydWUpOwoJCQkJCQkJcmV0dXJuOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoKCW9uRHJhdygpIHsKCQl2YXIgeCwgeTsKCgkJZm9yICh2YXIgYz0wOyBjPDQ7IGMrKykgewoJCQlpZiAoYz09MSB8fCBjPT0zKSB4ID0gdGhpcy54ICsgRHJhdzE2LndpZHRoOwoJCQllbHNlIHggPSB0aGlzLng7CgkJCWlmIChjPT0yIHx8IGM9PTMpIHkgPSB0aGlzLnkgKyBEcmF3MTYuaGVpZ2h0OwoJCQllbHNlIHkgPSB0aGlzLnk7CgoJCQlEcmF3MTYuZHJhd0VsbGlwc2VGaWxsKDB4MDAwMDAwLCB4LXRoaXMuZGlhLzIsIHktdGhpcy5kaWEvMiwgdGhpcy5kaWEsIHRoaXMuZGlhKTsKCgkJCWZvciAodmFyIGk9MDsgaTx0aGlzLmRyYXdQb2ludHMubGVuZ3RoLTE7IGkrKykgewoJCQkJRHJhdzE2LmRyYXdMaW5lKAoJCQkJCTB4ZmZmZmZmLAoJCQkJCXgrdGhpcy5kcmF3UG9pbnRzW2ldWzBdLCB5K3RoaXMuZHJhd1BvaW50c1tpXVsxXSwKCQkJCQl4K3RoaXMuZHJhd1BvaW50c1tpKzFdWzBdLCB5K3RoaXMuZHJhd1BvaW50c1tpKzFdWzFdCgkJCQkpOwoJCQl9CgkJCURyYXcxNi5kcmF3TGluZSgKCQkJCTB4ZmZmZmZmLAoJCQkJeCt0aGlzLmRyYXdQb2ludHNbMF1bMF0sIHkrdGhpcy5kcmF3UG9pbnRzWzBdWzFdLAoJCQkJeCt0aGlzLmRyYXdQb2ludHNbdGhpcy5kcmF3UG9pbnRzLmxlbmd0aC0xXVswXSwgeSt0aGlzLmRyYXdQb2ludHNbdGhpcy5kcmF3UG9pbnRzLmxlbmd0aC0xXVsxXQoJCQkpOwoJCX0KCX0KCglkYW1hZ2Uoc2hpcCkgewoJCWlmICh0aGlzLnNpemUgPiAxKSB7CgkJCXZhciBhc3Rlcm9pZDsKCQkJYXN0ZXJvaWQgPSBuZXcgQXN0ZXJvaWQodGhpcy54LCB0aGlzLnksIHRoaXMuc2l6ZS0xKTsKCQkJYXN0ZXJvaWQuZGlyID0gdGhpcy5kaXIgKyByYW5kKC0zMCwgMzApOwoJCQlhc3Rlcm9pZCA9IG5ldyBBc3Rlcm9pZCh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplLTEpOwoJCQlhc3Rlcm9pZC5kaXIgPSB0aGlzLmRpciArIHJhbmQoLTMwLCAzMCk7CgkJfQoJCWZvciAodmFyIGo9MDsgajx0aGlzLnNpemUqNTsgaisrKSB7CgkJCW5ldyBQYXJ0aWNsZSh0aGlzLngsIHRoaXMueSwgcmFuZCgxLHRoaXMuc2l6ZSoyKSwgcmFuZCgwLDM1OSkpOwoJCX0KCgkJaWYgKCFzaGlwKSB7CgkJCWJlZXAoJ2JwbT02MDAgMS80IGMzIGQzJywgMC4yKTsKCQl9CgoJCXRoaXMuZGVzdHJveSgpOwoJfQoKCWRlc3Ryb3koKSB7CgkJdmFyIGkgPSBvYmplY3RMaXN0LmluZGV4T2YodGhpcyk7CgkJaWYgKGkgPj0gMCkKCQkJb2JqZWN0TGlzdC5zcGxpY2UoaSwgMSk7CgkJYXBwLmFzdGVyb2lkQ291bnQtLTsKCX0KfQo="></script>
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgU2hpcCB7CgoJY29uc3RydWN0b3IoeCwgeSkgewoJCXRoaXMuaXNTaGlwID0gdHJ1ZTsKCgkJdGhpcy5wcmVMaXZlID0gdHJ1ZTsKCgkJdGhpcy54ID0geDsKCQl0aGlzLnkgPSB5OwoJCXRoaXMuc3BlZWQgPSAwOwoJCXRoaXMuZGlyID0gcmFuZCgwLCAzNTkpOwoJCXRoaXMuZm9yY2VEaXIgPSB0aGlzLmRpcjsKCgkJdGhpcy5mcm9udFggPSB0aGlzLng7CgkJdGhpcy5mcm9udFkgPSB0aGlzLnk7CgkJdGhpcy5iYWNrWCA9IHRoaXMueDsKCQl0aGlzLmJhY2tZID0gdGhpcy55OwoJCXRoaXMubGVmdFggPSB0aGlzLng7CgkJdGhpcy5sZWZ0WSA9IHRoaXMueTsKCQl0aGlzLnJpZ2h0WCA9IHRoaXMueDsKCQl0aGlzLnJpZ2h0WSA9IHRoaXMueTsKCQl0aGlzLmxlZnRUaXBYID0gdGhpcy54OwoJCXRoaXMubGVmdFRpcFkgPSB0aGlzLnk7CgkJdGhpcy5yaWdodFRpcFggPSB0aGlzLng7CgkJdGhpcy5yaWdodFRpcFkgPSB0aGlzLnk7CgoJCXRoaXMuY29vbERvd24gPSAwOwoKCQlvYmplY3RMaXN0LnB1c2godGhpcyk7CgkJYXBwLnNoaXAgPSB0aGlzOwoJfQoKCW9uU3RlcCgpIHsKCQl2YXIgcDsKCgkJaWYgKHRoaXMuY29vbERvd24pCgkJCXRoaXMuY29vbERvd24tLTsKCgkJaWYgKGtleVN0YXRlLmFycm93TGVmdCkKCQkJdGhpcy5kaXIgLT0gNDsKCgkJaWYgKGtleVN0YXRlLmFycm93UmlnaHQpCgkJCXRoaXMuZGlyICs9IDQ7CgoJCWlmIChrZXlTdGF0ZS5hcnJvd1VwKSB7CgkJCXRoaXMucHJlTGl2ZSA9IGZhbHNlOwoKCQkJcCA9IHBvaW50SW5EaXIodGhpcy54LCB0aGlzLnksIHRoaXMuc3BlZWQsIHRoaXMuZm9yY2VEaXIpOwoJCQlwID0gcG9pbnRJbkRpcihwWzBdLCBwWzFdLCAwLjEsIHRoaXMuZGlyKTsKCgkJCXRoaXMuZm9yY2VEaXIgPSBhbmdsZUZyb21Qb2ludHModGhpcy54LCB0aGlzLnksIHBbMF0sIHBbMV0pOwoJCQl0aGlzLnNwZWVkID0gcG9pbnREaXN0YW5jZSh0aGlzLngsIHRoaXMueSwgcFswXSwgcFsxXSk7CgkJCWlmICh0aGlzLnNwZWVkID4gMTApCgkJCQl0aGlzLnNwZWVkID0gMTA7CgkJCQoJCQluZXcgUGFydGljbGUodGhpcy5iYWNrWCwgdGhpcy5iYWNrWSwgcmFuZCgxLDEwKSwgdGhpcy5kaXIrMTgwLTEwK3JhbmQoMjApKTsKCQkJbmV3IFBhcnRpY2xlKHRoaXMuYmFja1gsIHRoaXMuYmFja1ksIHJhbmQoMSwxMCksIHRoaXMuZGlyKzE4MC0xMCtyYW5kKDIwKSk7CgkJCW5ldyBQYXJ0aWNsZSh0aGlzLmJhY2tYLCB0aGlzLmJhY2tZLCByYW5kKDEsMTApLCB0aGlzLmRpcisxODAtMTArcmFuZCgyMCkpOwoJCQluZXcgUGFydGljbGUodGhpcy5iYWNrWCwgdGhpcy5iYWNrWSwgcmFuZCgxLDEwKSwgdGhpcy5kaXIrMTgwLTEwK3JhbmQoMjApKTsKCgkJCWlmIChEcmF3MTYuc3RlcCAlIDIpIHsKCQkJCWJlZXAoJ2JwbT02MDAgMS80IGMyJywgMC4xKTsKCQkJfQoJCX0KCgkJcCA9IHBvaW50SW5EaXIodGhpcy54LCB0aGlzLnksIHRoaXMuc3BlZWQsIHRoaXMuZm9yY2VEaXIpOwoKCQlpZiAoa2V5U3RhdGUuc3BhY2UgJiYgIXRoaXMuY29vbERvd24pIHsKCQkJdGhpcy5wcmVMaXZlID0gZmFsc2U7CgoJCQlhcHAuc2NvcmUtLTsKCQkJbmV3IExhc2VyKHRoaXMuZnJvbnRYLCB0aGlzLmZyb250WSwgdGhpcy5kaXIpOwoJCQl0aGlzLmNvb2xEb3duID0gMjA7CgoJCQliZWVwKCdicG09NjAwIDEvNCBjNicsIDAuMSk7CgkJfQoKCQl0aGlzLnggPSBwWzBdOwoJCXRoaXMueSA9IHBbMV07CgoJCWlmICh0aGlzLnggPiBEcmF3MTYud2lkdGgvMikKCQkJdGhpcy54IC09IERyYXcxNi53aWR0aDsKCQlpZiAodGhpcy54IDwgLURyYXcxNi53aWR0aC8yKQoJCQl0aGlzLnggKz0gRHJhdzE2LndpZHRoOwoJCWlmICh0aGlzLnkgPiBEcmF3MTYuaGVpZ2h0LzIpCgkJCXRoaXMueSAtPSBEcmF3MTYuaGVpZ2h0OwoJCWlmICh0aGlzLnkgPCAtRHJhdzE2LmhlaWdodC8yKQoJCQl0aGlzLnkgKz0gRHJhdzE2LmhlaWdodDsKCgkJdGhpcy5mcm9udFggPSB0aGlzLng7CgkJdGhpcy5mcm9udFkgPSB0aGlzLnktODsKCQl0aGlzLmJhY2tYID0gdGhpcy54OwoJCXRoaXMuYmFja1kgPSB0aGlzLnkrNjsKCQl0aGlzLmxlZnRYID0gdGhpcy54LTU7CgkJdGhpcy5sZWZ0WSA9IHRoaXMueSs4OwoJCXRoaXMucmlnaHRYID0gdGhpcy54KzU7CgkJdGhpcy5yaWdodFkgPSB0aGlzLnkrODsKCQl0aGlzLmxlZnRUaXBYID0gdGhpcy54LTU7CgkJdGhpcy5sZWZ0VGlwWSA9IHRoaXMueSsxOwoJCXRoaXMucmlnaHRUaXBYID0gdGhpcy54KzU7CgkJdGhpcy5yaWdodFRpcFkgPSB0aGlzLnkrMTsKCgkJcCA9IHBvaW50Um91bmRQb2ludCh0aGlzLmZyb250WCwgdGhpcy5mcm9udFksIHRoaXMueCwgdGhpcy55LCB0aGlzLmRpcik7CgkJdGhpcy5mcm9udFggPSBwWzBdOwoJCXRoaXMuZnJvbnRZID0gcFsxXTsKCgkJcCA9IHBvaW50Um91bmRQb2ludCh0aGlzLmJhY2tYLCB0aGlzLmJhY2tZLCB0aGlzLngsIHRoaXMueSwgdGhpcy5kaXIpOwoJCXRoaXMuYmFja1ggPSBwWzBdOwoJCXRoaXMuYmFja1kgPSBwWzFdOwoKCQlwID0gcG9pbnRSb3VuZFBvaW50KHRoaXMubGVmdFgsIHRoaXMubGVmdFksIHRoaXMueCwgdGhpcy55LCB0aGlzLmRpcik7CgkJdGhpcy5sZWZ0WCA9IHBbMF07CgkJdGhpcy5sZWZ0WSA9IHBbMV07CgoJCXAgPSBwb2ludFJvdW5kUG9pbnQodGhpcy5yaWdodFgsIHRoaXMucmlnaHRZLCB0aGlzLngsIHRoaXMueSwgdGhpcy5kaXIpOwoJCXRoaXMucmlnaHRYID0gcFswXTsKCQl0aGlzLnJpZ2h0WSA9IHBbMV07CgoJCXAgPSBwb2ludFJvdW5kUG9pbnQodGhpcy5sZWZ0VGlwWCwgdGhpcy5sZWZ0VGlwWSwgdGhpcy54LCB0aGlzLnksIHRoaXMuZGlyKTsKCQl0aGlzLmxlZnRUaXBYID0gcFswXTsKCQl0aGlzLmxlZnRUaXBZID0gcFsxXTsKCgkJcCA9IHBvaW50Um91bmRQb2ludCh0aGlzLnJpZ2h0VGlwWCwgdGhpcy5yaWdodFRpcFksIHRoaXMueCwgdGhpcy55LCB0aGlzLmRpcik7CgkJdGhpcy5yaWdodFRpcFggPSBwWzBdOwoJCXRoaXMucmlnaHRUaXBZID0gcFsxXTsKCgl9CgoJb25EcmF3KCkgewoJCWlmICh0aGlzLnByZUxpdmUgJiYgRHJhdzE2LnN0ZXAgJSAzMCA8IDEwKQoJCQlyZXR1cm47CgkJCgkJdmFyIHgsIHk7CgoJCWZvciAodmFyIGM9MDsgYzw0OyBjKyspIHsKCQkJaWYgKGM9PTEgfHwgYz09MykgeCA9IERyYXcxNi53aWR0aDsKCQkJZWxzZSB4ID0gMDsKCQkJaWYgKGM9PTIgfHwgYz09MykgeSA9IERyYXcxNi5oZWlnaHQ7CgkJCWVsc2UgeSA9IDA7CgoJCQlEcmF3MTYuZHJhd0xpbmUoMHhmZmZmZmYsIHgrdGhpcy5mcm9udFgsIHkrdGhpcy5mcm9udFksIHgrdGhpcy5sZWZ0WCwgeSt0aGlzLmxlZnRZKTsKCQkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCB4K3RoaXMuZnJvbnRYLCB5K3RoaXMuZnJvbnRZLCB4K3RoaXMucmlnaHRYLCB5K3RoaXMucmlnaHRZKTsKCQkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCB4K3RoaXMubGVmdFgsIHkrdGhpcy5sZWZ0WSwgeCt0aGlzLmJhY2tYLCB5K3RoaXMuYmFja1kpOwoJCQlEcmF3MTYuZHJhd0xpbmUoMHhmZmZmZmYsIHgrdGhpcy5iYWNrWCwgeSt0aGlzLmJhY2tZLCB4K3RoaXMucmlnaHRYLCB5K3RoaXMucmlnaHRZKTsKCgkJCURyYXcxNi5kcmF3TGluZSgweGZmZmZmZiwgeCt0aGlzLmxlZnRYLCB5K3RoaXMubGVmdFksIHgrdGhpcy5sZWZ0VGlwWCwgeSt0aGlzLmxlZnRUaXBZKTsKCQkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCB4K3RoaXMucmlnaHRYLCB5K3RoaXMucmlnaHRZLCB4K3RoaXMucmlnaHRUaXBYLCB5K3RoaXMucmlnaHRUaXBZKTsKCQl9Cgl9CgoJZGFtYWdlKCkgewoJCWlmICh0aGlzLnByZUxpdmUpCgkJCXJldHVybiBmYWxzZTsKCgkJZm9yICh2YXIgaj0wOyBqPDIwMDsgaisrKSB7CgkJCW5ldyBQYXJ0aWNsZSh0aGlzLngsIHRoaXMueSwgcmFuZCgxLDYwKS8xMCwgcmFuZCgwLDM1OSksIHJhbmQoMjAsMTQwKSk7CgkJfQoJCXRoaXMuZGVzdHJveSgpOwoKCQlhcHAubGl2ZXMtLTsKCgkJaWYgKGFwcC5saXZlcykgewoJCQliZWVwKCdicG09MTIwIDEvNCBjMycsIDAuMik7CgkJfQoJCWVsc2UgewoJCQliZWVwKCdicG09MTIwIDEvNCBnYXA9MS80MCBlMyBlMyBkMyBkMyAyLzQgYzMnLCAwLjIpOwoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9CgoJZGVzdHJveSgpIHsKCQl2YXIgaSA9IG9iamVjdExpc3QuaW5kZXhPZih0aGlzKTsKCQlpZiAoaSA+PSAwKQoJCQlvYmplY3RMaXN0LnNwbGljZShpLCAxKTsKCQkKCQlpZiAoYXBwLnNoaXAgPT0gdGhpcykKCQkJYXBwLnNoaXAgPSBudWxsOwoJfQp9Cg=="></script>
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgUGFydGljbGUgewoKCWNvbnN0cnVjdG9yKHgsIHksIHNwZWVkLCBkaXIsIGVvbCkgewoJCXRoaXMueCA9IHg7CgkJdGhpcy55ID0geTsKCQkKCQlpZiAodGhpcy54IDwgMCkKCQkJdGhpcy54ICs9IERyYXcxNi53aWR0aDsKCQlpZiAodGhpcy55IDwgMCkKCQkJdGhpcy55ICs9IERyYXcxNi5oZWlnaHQ7CgkJCgkJdGhpcy5zcGVlZCA9IHNwZWVkOwoJCXRoaXMuZGlyID0gZGlyOwoJCXRoaXMuZW9sID0gKGVvbCA/IGVvbCA6IDYpOwoKCQlvYmplY3RMaXN0LnB1c2godGhpcyk7Cgl9CgoJb25TdGVwKCkgewoJCXZhciBwID0gcG9pbnRJbkRpcih0aGlzLngsIHRoaXMueSwgdGhpcy5zcGVlZCwgdGhpcy5kaXIpOwoJCXRoaXMueCA9IHBbMF07CgkJdGhpcy55ID0gcFsxXTsKCgkJaWYgKHRoaXMueCA+PSBEcmF3MTYud2lkdGgpCgkJCXRoaXMueCAtPSBEcmF3MTYud2lkdGg7CgkJaWYgKHRoaXMueCA8IDApCgkJCXRoaXMueCArPSBEcmF3MTYud2lkdGg7CgkJaWYgKHRoaXMueSA+PSBEcmF3MTYuaGVpZ2h0KQoJCQl0aGlzLnkgLT0gRHJhdzE2LmhlaWdodDsKCQlpZiAodGhpcy55IDwgMCkKCQkJdGhpcy55ICs9IERyYXcxNi5oZWlnaHQ7CgoJCXRoaXMuZW9sLS07CgkJaWYgKHRoaXMuZW9sID09IDApIHsKCQkJdmFyIGkgPSBvYmplY3RMaXN0LmluZGV4T2YodGhpcyk7CgkJCWlmIChpID49IDApCgkJCQlvYmplY3RMaXN0LnNwbGljZShpLCAxKTsKCQl9Cgl9CgoJb25EcmF3KCkgewoJCURyYXcxNi5kcmF3UGl4ZWwoMHhmZmZmZmYsIHRoaXMueCwgdGhpcy55KTsKCX0KfQo="></script>
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgTGFzZXIgewoKCWNvbnN0cnVjdG9yKHgsIHksIGRpcikgewoJCXRoaXMuaXNMYXNlciA9IHRydWU7CgoJCXRoaXMueCA9IHg7CgkJdGhpcy55ID0geTsKCQl0aGlzLnNwZWVkID0gODsKCQl0aGlzLmRpciA9IGRpcjsKCgkJdGhpcy5mcm9udFggPSAwOwoJCXRoaXMuZnJvbnRZID0gMDsKCQl0aGlzLmJhY2tYID0gMDsKCQl0aGlzLmJhY2tZID0gMDsKCgkJdGhpcy5lb2wgPSAxNTsKCgkJb2JqZWN0TGlzdC5wdXNoKHRoaXMpOwoJfQoKCW9uU3RlcCgpIHsKCQl2YXIgcDsKCgkJcCA9IHBvaW50SW5EaXIodGhpcy54LCB0aGlzLnksIHRoaXMuc3BlZWQsIHRoaXMuZGlyKTsKCQl0aGlzLnggPSBwWzBdOwoJCXRoaXMueSA9IHBbMV07CgoJCWlmICh0aGlzLnggPiBEcmF3MTYud2lkdGgvMikKCQkJdGhpcy54IC09IERyYXcxNi53aWR0aDsKCQlpZiAodGhpcy54IDwgLURyYXcxNi53aWR0aC8yKQoJCQl0aGlzLnggKz0gRHJhdzE2LndpZHRoOwoJCWlmICh0aGlzLnkgPiBEcmF3MTYuaGVpZ2h0LzIpCgkJCXRoaXMueSAtPSBEcmF3MTYuaGVpZ2h0OwoJCWlmICh0aGlzLnkgPCAtRHJhdzE2LmhlaWdodC8yKQoJCQl0aGlzLnkgKz0gRHJhdzE2LmhlaWdodDsKCgkJdGhpcy5mcm9udFggPSB0aGlzLng7CgkJdGhpcy5mcm9udFkgPSB0aGlzLnktMjsKCQl0aGlzLmJhY2tYID0gdGhpcy54OwoJCXRoaXMuYmFja1kgPSB0aGlzLnkrMjsKCgkJcCA9IHBvaW50Um91bmRQb2ludCh0aGlzLmZyb250WCwgdGhpcy5mcm9udFksIHRoaXMueCwgdGhpcy55LCB0aGlzLmRpcik7CgkJdGhpcy5mcm9udFggPSBwWzBdOwoJCXRoaXMuZnJvbnRZID0gcFsxXTsKCgkJcCA9IHBvaW50Um91bmRQb2ludCh0aGlzLmJhY2tYLCB0aGlzLmJhY2tZLCB0aGlzLngsIHRoaXMueSwgdGhpcy5kaXIpOwoJCXRoaXMuYmFja1ggPSBwWzBdOwoJCXRoaXMuYmFja1kgPSBwWzFdOwoKCQl0aGlzLmVvbC0tOwoJCWlmICh0aGlzLmVvbCA9PSAwKSB7CgkJCXRoaXMuZGVzdHJveSgpOwoJCX0KCX0KCglvbkRyYXcoKSB7CgkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCB0aGlzLmZyb250WCwgdGhpcy5mcm9udFksIHRoaXMuYmFja1gsIHRoaXMuYmFja1kpOwoKCQlEcmF3MTYuZHJhd0xpbmUoMHhmZmZmZmYsIERyYXcxNi53aWR0aCt0aGlzLmZyb250WCwgdGhpcy5mcm9udFksIERyYXcxNi53aWR0aCt0aGlzLmJhY2tYLCB0aGlzLmJhY2tZKTsKCgkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCB0aGlzLmZyb250WCwgRHJhdzE2LmhlaWdodCt0aGlzLmZyb250WSwgdGhpcy5iYWNrWCwgRHJhdzE2LmhlaWdodCt0aGlzLmJhY2tZKTsKCgkJRHJhdzE2LmRyYXdMaW5lKDB4ZmZmZmZmLCBEcmF3MTYud2lkdGgrdGhpcy5mcm9udFgsIERyYXcxNi5oZWlnaHQrdGhpcy5mcm9udFksIERyYXcxNi53aWR0aCt0aGlzLmJhY2tYLCBEcmF3MTYuaGVpZ2h0K3RoaXMuYmFja1kpOwoJfQoKCWRlc3Ryb3koKSB7CgkJdmFyIGkgPSBvYmplY3RMaXN0LmluZGV4T2YodGhpcyk7CgkJaWYgKGkgPj0gMCkKCQkJb2JqZWN0TGlzdC5zcGxpY2UoaSwgMSk7Cgl9Cn0K"></script>
		<script type="text/javascript" src="data:text/javascript;base64,Y2xhc3MgSGlnaHNjb3JlIHsKCglzdGF0aWMgYWRkKHNjb3JlLCBkYXRlKSB7CgkJaWYgKHNjb3JlIDwgMCB8fCAhc2NvcmUpCgkJCXJldHVybjsKCgkJaWYgKCFkYXRlKSB7CgkJCXZhciBkID0gbmV3IERhdGUoKTsKCQkJdmFyIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CgkJCXZhciBtb250aCA9IGQuZ2V0TW9udGgoKSsnJzsKCQkJaWYgKG1vbnRoLmxlbmd0aCA8IDIpCgkJCQltb250aCA9ICcwJyttb250aDsKCQkJdmFyIGRheSA9IGQuZ2V0RGF5KCkrJyc7CgkJCWlmIChkYXkubGVuZ3RoIDwgMikKCQkJCWRheSA9ICcwJytkYXk7CgkJCWRhdGUgPSB5ZWFyKyctJyttb250aCsnLScrZGF5OwoJCX0KCgkJdmFyIGxpc3QgPSBbXTsKCQlpZiAobG9jYWxTdG9yYWdlLmFzdGVyb2lkc0hpZ2hzY29yZSkKCQkJbGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmFzdGVyb2lkc0hpZ2hzY29yZSk7CgoJCWxpc3QucHVzaChbc2NvcmUsIGRhdGVdKTsKCgkJbGlzdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKCQkJcmV0dXJuIGJbMF0gLSBhWzBdOwoJCX0pCgoJCWlmIChsaXN0Lmxlbmd0aCA+IDUpCgkJCWxpc3Quc3BsaWNlKDUpOwoKCQlsb2NhbFN0b3JhZ2UuYXN0ZXJvaWRzSGlnaHNjb3JlID0gSlNPTi5zdHJpbmdpZnkobGlzdCk7Cgl9CgoJc3RhdGljIGdldExpc3QoKSB7CgkJdmFyIGxpc3QgPSBbXTsKCQlpZiAobG9jYWxTdG9yYWdlLmFzdGVyb2lkc0hpZ2hzY29yZSkKCQkJbGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmFzdGVyb2lkc0hpZ2hzY29yZSk7CgoJCXJldHVybiBsaXN0OwoJfQoKfQ=="></script>
		<script>

Draw16.fps = 60;
Draw16.init(256, 240);
Draw16.installFullscreen();

document.body.style.backgroundColor = '#111111';

Draw16.loadTextureAsync('font', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAAgCAYAAAClxR8lAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gkJCAk29ytCugAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAJcklEQVR42u1d27LjKAyMU+f/fzn7sqnyUDZqqSUucffLnEyCAd0lMLxeC+Dz+XxegiAIgiDI9wqCsL6B+H7f+531m8//6LVvvz9/7rVHDBwy9t2NqJe+We0/J0Se/2ng7cPTnqHPLGeM0DVjfgx/Uf5E+J8hH705svRDnu+hu2UHK/Qzqz3CP+/8PPSp+szQJ0N/WR80q232OKrsZ2X8oATsGTRA/M/M2GNaAuBRkKvnZDvYaPC7uqJHAxQ2wPEEkdUGNBoAVsvXKCccmZ9Hf7P0O5O+bP+sjUCKH6gDuAuQs/gzQz9Y+8QG8B4eRQK9EfYBGR8buLC6weoQG2RHA7BMv8sEgL0EeXYCz8RIHvmqLgBUFohmxgc9vNkHHMdxnP+1BMSrBMdxHF8Cf/++66s3vipY818l+7TGZ/GAoe+Zf9GxZVSwr/pp5SvKf5Y+Pf2xjMx3DowMZFTfqnSgugoy4vksbXatkiGyObuQZfkV63uGvyx9zn1X0Po4IVrA+baPBqi9/pHkje0/K7lhZKTnSyz6WPxD20f911mGZsVPlu9k/P/s2I8pALyrB9cyuCWWJZztb84Mu0sQZgTXiHGMBBpIADg7QLEUCHEgdwKMOCDk+YiBuut/Ju2PBpFAguEvEmAgOpwRhFRVGKuNOEsbJACoTuCQBLxqfChte0WGnZMoT4GhQo4t/WL0nw3QMwJIZvxsgSezn1VkcKT/RPS/2nZXFQeQcUQL41/8VQve1QpA5JlXEz0nAVUCkOGcmbFl0D+jSl1l3GbyLjJG7/yRAN8yIAivrACMkbPVA6eVnSPK55lzROWDWYFi51/pyBknmhXcrWr/rvztTvq9wgrUyvy9iqOy6Tfbx7PFYaa4lsX73g4GRkf+oh1HhP/qWT3huxrDmRlXiUBki9CIDK6Kvln8sYJLpMJ29Yzedx7jhBioaILVa4/0X+kgMipMnuqsNYbeMjziQHo0RpIgL70zquOo7LN9MPJkrWBl6Ye1lS5b/5HxI1t47mh05VsiSQAiv6z9Y2Urwge0Ahq1z8jqf4YMzS5k9GSrMsZA9aeKfijvLLvC+E8rPkETlAr9Fl7PfhNepwAIjCxIfgRBEO7tY/UWzqf4nCf6mizZWfUUoGNHQR2dRUeUo1cJi2SLs9sLgiAIgiAIQkngzBz1FM2UvEft9fq/O6oUvbcApVGkvXVkIFMFYI6Jy6guVN1D4H3OE/VT2IN/O/Ju9/FLfoSn84/xm5K/Bwlp5KIf5JjRiIC1QfPdebzW38hvI8nJqPZo8LfCZSg9+ckI7quXkqPyv+olZcI69lX8EwRBCaRwxnsVAbkL4M8vaI04aomZB3pcJTO+jOPWoqsHyEuQ1ouI1uqJt+J8lWT1+u/JTtVRmsj4e+ckW+cojzqqVAZ8TwdcfUyrAojfTx5FexUAMuyQ9L8+ht4qATgHNldBDlKxzj7iqQ0Ks5IFVhHZC5eYZTjkFJnIWeAt773nWrft7tpb/ff6Q+QhI6ljVgCqzrKvvmhIEIR1YZ0AJqgAEI2zhDz+lt0DMCp7Of99nsjV5KzPUeG8IyR6VGJ7XN4vCppFv0jykXFWLnrfgbefUS+Xs0e0jdJRQRCeF2DIDgjCugn69oe6MPu0s5Ypo3vVkZeAe997xxV5CZjd/y88NwBQMrA/D3fmm+zVGvQXD6Q/Uf+RsfNB8leQQPxipWKFQEnHgAqCIAiC8OTkQ7GGEgAoOJWgCIIgCMIevjfLd2eNw/sMxy3kt49FbpLXLbLCivjLUpDeldPtKSLe03yQS8CiCljdfhVFR+ZYYcQ8V4Hfyc4/GauzD0/7XzTSLP2y+dP+xrtyZrX3jtGyX1nyZz0fpXvvM8KjmfqF8s8zPw99Kj9H6eMIQF8VNup8AMGuQWilfUaeqeB9Xf6t6Icj9r+KPn+rM791AC1BzslFxIhZ/VvPbvf67ybEV/T1nPxgzf/sKNGjRD1GFuFfrw9LfpDvMxyzZSCQAAqRvTv+InPsybglP+gL2r3nV8gHGiAhNmJUhdPzPcJflH9sezTQH2n/7vyK53uEP4z8Wc9nfRB6eIP1u2gQw+gOMnc0STXaXk6vOkFDE+TKAh1YADher9eHKSBY/hdJoJnPTIGBKTCi+l8RX74zDCh6jGdPqD2CjlaRRjkQi/nsLcDsSzCeFYpI4IUGtx7DmxUAZQR41QlY5kVoV3piyWiGDlXTsPolsBE25ImVwlVOkLGOke7xCLHxGQ6e1bsKWnue2/Prd37CW2Cq5E2Ebp7jl6v1/47+Fv963zvo97HoH9GtavqwBYiq47cjti3iI8vvAUCYjgioVUHqJQqVDNJFFTlV+F5FhTFgngTEe4kYIl9eB3G1gtK7DIxNwLICjOpAz5one5Pz049T9W5F8bSvlI22Qva0ROsqwc+ef9XqBvqMah++i7xk3kk0emyVfgHRf6ZAaD2f3ULOFArYw13+qpXDykojDuq8HIK+XzDLeGRkmBmOG92CkR04eAV7RWNs3RCcNX9kD3rve8ZBeLYo7eQcV5Oh6DLuKEeabR+y5j8qMYvcE8LK3w60mXm3DbvCMvsIyQzajShiWlv7Zsn3bN/j2YJUpdt3/bBy8UY6ZpnfDrQNYDzVJytI8o6VqR5nKd9MA2UF4ChtrTsaojS02rPJn9U+a/xIFY1ZAYhWx9sEJLIKhxgo6/mIDYjoSdYWi14xI0N3WTtQtcf+in6eFaB2Xmz/0W0E1hYUdguNxbsob7Nuj49uE/C8g2Ct/kRWDjO2+lauIHhkG32PY1TwigaSbODK0MdbvEICZGSP/2g9nZbcrFZleD0MOgZM/JWMCYIg1Nm+jGD2yf5JMRqfCCEJCNpOEARhiPFjXmIX1uHfjrzTDeZrBD+ivfin8f8elFEIKZlwdI/c+Xdshh09Ag6d25Mzca0i7M878U8QBNkf4Yu3SCCgGXjVc5C9s0j/0dMqPEfNPd2Aqwqzd+KmFQAhQn/RfX8e7mh/pPtKAISFM3hri4j1Ehe7veSqf0+CgPyfDI8gCE9E1f0CwjjfvQL/tII8Jklf7h4A4becQeT/Zit9LwmxztF++vJl9UVDgiDsYQMEgfXBkqVa3Uy/B0AQrqoJrdBFL+Gw2rL3LJyPoc0+zlZBgCAITykAyAYI8j1rJlbh9iKhsHJyMaq9YAcAvURL2MOB7sg3vUQo+gt5Nnxm8M5eBCb5EwRBEARBEITFkw9V8NfFfyNJi4mTIsTyAAAAAElFTkSuQmCC');
Draw16.loadTextureAsync('logo', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAD1Xam+AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gkIDgAtEL0ryAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFgklEQVR42u1d2W7tMAgMVf//l7kvt5Ll4wWbxThnRupD2yzYMBiIQ54HAAAAAAAAAAAAAAAAAAAAAAAAAICXgTAFx8DQDQAHAPJDPwAcwLeRn3nsA4gIOgLc8YMpyEd+6TEAoMUvpiDYA1TELlZ6CfG5Eb3xQlTHimiQF8/jzfsASAHezH+uyU+9KKH6Pyt1q6k7sPG9YHdwAHAA9erfWNlpdu4koiBp6tE5b3puo1axejyAGgDSgYpwLCFI63xm7v59dq3GMVPHUf1v5XgUOVADAAYr+NAJFCnCzJnQKOIYkJUXaxbT4//+V8gucnQAIoDXpFydsL+3EktWSWpdtyJi976dv4/ITOVPWaeYOYuViARABPBmJ8CSkNxwlVx6/DhzUp2aBQAHAAjJSETEknx+kYwq8gfVOAA4gK8mf3NV/3MIHqRR7j0QOTSoFg4AEJKxCO1nuYIkxI5eZlkqg0H0AjgDRcBDTsA6ZB4U7HbDdJJECsXfSBpZ9B5VAogAvt4JSEFE0mt8FB3rDUUTJ9A91+B4ABHAV4EkYTERiVbw1rU651LvWK3M0nvtjA8IMMjDuSOwGTUgvwY/b4oAQH4ASMibsBoAckF17oA5hc6vTAFgpXa64sHvAFKAnA5AulJdUhjCu+4JdCB4tZmi7fjGwiYdJsttJEIzz3v0QNB9ghrAap6avbq90MwTOKQHLx28UfeeEnNi2bAKIAKA7r0jgN0qdWZPiggAEQAigHsiAGuvzYlkP/kEx3K+yGF+yGGcN9tS+MVVr7YqG0d6OB42WgXISX4yJo6WuBxgixxMQounAOnSYrcUQPtm22Y4xTsyVPfiTc8vlY8sZJ/IvGuAIhkGulme/6oH4mM4DjIcJxvp3to2c9cAZoMy3sm2HXXM9tivXHMzN+XVezVk3u4kbKQX1syXtBmqQQ1ALGdDtnS2qYXHuwB84FrH2l5ZOq5d+S1bbWvIrx1DQMvwLTkNOialtU2Xl4EsBrt6jdvJbzhffIr8xrbDmWzTslnLmx3ASpsrEoY0rL3n28kfRZ6o1c2JMHxKx5lhXgOwNmiJk9BU5k9658Uimeg8o07CR8dQEYhOyqq1j+y2+fqWYLNHM2V77s6Ek+AYkUKfxQ999mSXfFdASx4BaV3HYOzItmX17NZsYJupHMBOl1uKMOZn/AltqiactMR9lFXsioDdjrujppsa8oxIW4xP+1w8Svcr893TvedSrLXNPDWAiJ72Rudz4+d5kuzjPrmldEbayDlKVDwjD51ksM2v6Aos/GZdGidwyvDRqPP7bNPKAWg+cqENBaXnDwm2uhEFAISRQ2rbNEsBFqq6vRDn6IoYtBEFAFLZ5lu+C0BFr/m35J0AbNPdNi1SAA4UfhQC0f/Ztnpsg1QAMHMCWW3TpAYQFaJLv2RTTvaOjNGbaQY5n9rogLyOIINtah3Aqe2VJPh7c0PHDaF+oWRKrouvScONbTaNbf5YGGskMSYKGhUWqfy5pH3TrEj6Md6Ejo13SXXgsWT30+eKeU1tm6/ZB9AIjTiZ0S/tgKzGk+JJySc/xWPgwzKrZX2RbZo5gNMEo5FBzbzoAcIsF25mDSlueGLRy1kzyt6S1eE151S2+Ws1qEEIZ3pdqzcEPVcS4VyIN4kkJrpoDDvyO4T/brJmTpszpACWzR6jrDoq91zeKXarE0g6/zdOtunc7BYBM1gsX07+kkAvsEu6Yf635cygI4+52X4K4PihRDqVIwll9iCs2W6xg6snaV9BDpJ9ea7fSv6oFCAsDN1xEJVyafV+hs5oa7dYq7Zwkx6U34BwnetKNr7ENl3z85UQXCuw5vocNAcr96ILrnvie3q3fBnIyuYjbRMAAAAAAAAAAAAAAOB5nuf5B7a44zAsseE3AAAAAElFTkSuQmCC');

var objectList = [];

var app = new App();
Draw16.onStep = function() {
	app.triggerStep();
}

		</script>
	</body>
</html>
